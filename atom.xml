<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Sugar&#39;s blog</title>
  
  <subtitle>ä¸€æ¯ç³–ä¸åŠ å’–å•¡ Sugar åŒºå—é“¾åšå®¢ è®¡ç®—æœºåšå®¢</subtitle>
  <link href="https://zhangzhishun.github.io/atom.xml" rel="self"/>
  
  <link href="https://zhangzhishun.github.io/"/>
  <updated>2022-05-05T08:53:39.108Z</updated>
  <id>https://zhangzhishun.github.io/</id>
  
  <author>
    <name>Sugar</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Solidityå­¦ä¹ ç¬”è®°(åŸºç¡€éƒ¨åˆ†)</title>
    <link href="https://zhangzhishun.github.io/2022/05/05/blockchain/ethereum/Solidity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>https://zhangzhishun.github.io/2022/05/05/blockchain/ethereum/Solidity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2022-05-05T11:29:23.000Z</published>
    <updated>2022-05-05T08:53:39.108Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Solidityå­¦ä¹ ç¬”è®°-åŸºç¡€éƒ¨åˆ†"><a href="#Solidityå­¦ä¹ ç¬”è®°-åŸºç¡€éƒ¨åˆ†" class="headerlink" title="Solidityå­¦ä¹ ç¬”è®°(åŸºç¡€éƒ¨åˆ†)"></a>Solidityå­¦ä¹ ç¬”è®°(åŸºç¡€éƒ¨åˆ†)</h1><p>æœ¬æ–‡å‚è€ƒï¼š<a href="https://solidity-by-example.org/">https://solidity-by-example.org/</a></p><p>æ¨èè§†é¢‘è¯¾ç¨‹ï¼š<a href="https://www.bilibili.com/video/BV1St411a7Pk">https://www.bilibili.com/video/BV1St411a7Pk</a></p><h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><pre><code class="solidity">// SPDX-License-Identifier: MIT// compiler version must be greater than or equal to 0.8.13 and less than 0.9.0pragma solidity ^0.8.13;contract HelloWorld {    string public greet = "Hello World!";}</code></pre><h2 id="ç¬¬ä¸€ä¸ªç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªç¨‹åº"></a>ç¬¬ä¸€ä¸ªç¨‹åº</h2><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„åˆçº¦ï¼Œç”¨äºè·å–ã€å¢åŠ ã€å‡å°‘è´¦æˆ·ä½™é¢</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Counter {    uint public count;    // Function to get the current count    function get() public view returns (uint) {        return count;    }    // Function to increment count by 1    function inc() public {        count += 1;    }    // Function to decrement count by 1    function dec() public {        // This function will fail if count = 0        count -= 1;    }}</code></pre><h2 id="åŸºæœ¬æ•°æ®ç±»å‹"><a href="#åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹"></a>åŸºæœ¬æ•°æ®ç±»å‹</h2><p>åœ¨è¿™é‡Œä»‹ç»å››ç§æ•°æ®ç±»å‹ï¼š</p><ul><li>boolean</li><li>uint</li><li>int</li><li>address</li></ul><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Primitives {    bool public boo = true;    /*    uint stands for unsigned integer, meaning non negative integers    different sizes are available        uint8   ranges from 0 to 2 ** 8 - 1        uint16  ranges from 0 to 2 ** 16 - 1        ...        uint256 ranges from 0 to 2 ** 256 - 1    */    uint8 public u8 = 1;    uint public u256 = 456;    uint public u = 123; // uint is an alias for uint256    /*    Negative numbers are allowed for int types.    Like uint, different ranges are available from int8 to int256        int256 ranges from -2 ** 255 to 2 ** 255 - 1    int128 ranges from -2 ** 127 to 2 ** 127 - 1    */    int8 public i8 = -1;    int public i256 = 456;    int public i = -123; // int is same as int256    // minimum and maximum of int    int public minInt = type(int).min;    int public maxInt = type(int).max;    address public addr = 0xCA35b7d915458EF540aDe6068dFe2F44E8fa733c;    /*    In Solidity, the data type byte represent a sequence of bytes.     Solidity presents two type of bytes types :     - fixed-sized byte arrays     - dynamically-sized byte arrays.          The term bytes in Solidity represents a dynamic array of bytes.      Itâ€™s a shorthand for byte[] .    */    bytes1 a = 0xb5; //  [10110101]    bytes1 b = 0x56; //  [01010110]    // Default values    // Unassigned variables have a default value    bool public defaultBoo; // false    uint public defaultUint; // 0    int public defaultInt; // 0    address public defaultAddr; // 0x0000000000000000000000000000000000000000}</code></pre><h2 id="å˜é‡ç±»å‹"><a href="#å˜é‡ç±»å‹" class="headerlink" title="å˜é‡ç±»å‹"></a>å˜é‡ç±»å‹</h2><p>Solidity ä¸­æœ‰ 3 ç§ç±»å‹çš„å˜é‡</p><ul><li>local<ul><li>å‡½æ•°å†…å®šä¹‰</li><li>ä¸å­˜å‚¨åœ¨åŒºå—é“¾</li></ul></li><li>state<ul><li>å‡½æ•°å¤–å®šä¹‰</li><li>å­˜å‚¨åœ¨åŒºå—é“¾</li></ul></li><li>global (ä¿å­˜åŒºå—é“¾çš„ä¿¡æ¯)</li></ul><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Variables {    // State variables are stored on the blockchain.    string public text = "Hello";    uint public num = 123;    function doSomething() public {        // Local variables are not saved to the blockchain.        uint i = 456;        // Here are some global variables        uint timestamp = block.timestamp; // Current block timestamp        address sender = msg.sender; // address of the caller    }}</code></pre><h2 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h2><p>å¸¸é‡æ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„</p><p>å®ƒä»¬çš„å€¼æ˜¯ç¡¬ç¼–ç çš„ï¼Œä½¿ç”¨å¸¸é‡å¯ä»¥èŠ‚çœ gas æˆæœ¬</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Constants {    // coding convention to uppercase constant variables    address public constant MY_ADDRESS = 0x777788889999AaAAbBbbCcccddDdeeeEfFFfCcCc;    uint public constant MY_UINT = 123;}</code></pre><h2 id="ä¸å¯å˜å˜é‡"><a href="#ä¸å¯å˜å˜é‡" class="headerlink" title="ä¸å¯å˜å˜é‡"></a>ä¸å¯å˜å˜é‡</h2><p>ä¸å¯å˜å˜é‡å°±åƒå¸¸é‡ã€‚ä¸å¯å˜å˜é‡çš„å€¼å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­è®¾ç½®ï¼Œä½†ä¹‹åä¸èƒ½ä¿®æ”¹ã€‚</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Immutable {    // coding convention to uppercase constant variables    address public immutable MY_ADDRESS;    uint public immutable MY_UINT;    constructor(uint _myUint) {        MY_ADDRESS = msg.sender;        MY_UINT = _myUint;    }}</code></pre><h2 id="è¯»å–å’Œå†™å…¥çŠ¶æ€å˜é‡"><a href="#è¯»å–å’Œå†™å…¥çŠ¶æ€å˜é‡" class="headerlink" title="è¯»å–å’Œå†™å…¥çŠ¶æ€å˜é‡"></a>è¯»å–å’Œå†™å…¥çŠ¶æ€å˜é‡</h2><p>è¦å†™å…¥æˆ–æ›´æ–°çŠ¶æ€å˜é‡ï¼Œæ‚¨éœ€è¦å‘é€äº¤æ˜“</p><p>ä½†æ˜¯æ‚¨å¯ä»¥å…è´¹è¯»å–çŠ¶æ€å˜é‡ï¼Œæ— éœ€ä»»ä½•äº¤æ˜“è´¹ç”¨</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract SimpleStorage {    // State variable to store a number    uint public num;    // You need to send a transaction to write to a state variable.    function set(uint _num) public {        num = _num;    }    // You can read from a state variable without sending a transaction.    function get() public view returns (uint) {        return num;    }}</code></pre><h2 id="ä»¥å¤ªåŠå•ä½ï¼šEther-and-Wei"><a href="#ä»¥å¤ªåŠå•ä½ï¼šEther-and-Wei" class="headerlink" title="ä»¥å¤ªåŠå•ä½ï¼šEther and Wei"></a>ä»¥å¤ªåŠå•ä½ï¼šEther and Wei</h2><p>äº¤æ˜“ä½¿ç”¨ä»¥å¤ªå¸æ”¯ä»˜ï¼Œç±»ä¼¼äºä¸€ç¾å…ƒç­‰äº 100 ç¾åˆ†ï¼Œ1ethç­‰äº 10^18wei</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract EtherUnits {    uint public oneWei = 1 wei;    // 1 wei is equal to 1    bool public isOneWei = 1 wei == 1;    uint public oneEther = 1 ether;    // 1 ether is equal to 10^18 wei    bool public isOneEther = 1 ether == 1e18;}</code></pre><h2 id="Gas"><a href="#Gas" class="headerlink" title="Gas"></a>Gas</h2><ol><li><p>ä¸€æ¬¡äº¤æ˜“éœ€è¦æ”¯ä»˜å¤šå°‘ethï¼Ÿ</p><p>æ‚¨æ”¯ä»˜çš„ gas spent * gas price çš„ethæ•°é‡ï¼Œå…¶ä¸­ï¼š</p><ul><li>gasæ˜¯ä¸€ä¸ªè®¡ç®—å•ä½</li><li>gasèŠ±è´¹æ˜¯äº¤æ˜“ä¸­ä½¿ç”¨çš„ gas æ€»é‡</li><li>gas priceæ˜¯æ‚¨æ„¿æ„ä¸ºæ¯ gas æ”¯ä»˜å¤šå°‘ ether </li></ul><p>å…·æœ‰æ›´é«˜ gas ä»·æ ¼çš„äº¤æ˜“æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§è¢«åŒ…å«åœ¨ä¸€ä¸ªå—ä¸­ï¼Œæœªä½¿ç”¨çš„Gaså°†è¢«é€€è¿˜</p></li><li><p>Gasé™åˆ¶</p><p>æ‚¨å¯ä»¥èŠ±è´¹çš„ gas é‡æœ‰ 2 ä¸ªä¸Šé™ï¼š</p><ul><li>gas limitï¼ˆæ‚¨æ„¿æ„ä¸ºäº¤æ˜“ä½¿ç”¨çš„æœ€å¤§ gas é‡ï¼Œç”±æ‚¨è®¾ç½®ï¼‰</li><li>å— gas é™åˆ¶ï¼ˆä¸€ä¸ªå—ä¸­å…è®¸çš„æœ€å¤§ gas é‡ï¼Œç”±åŒºå—é“¾ç½‘ç»œè®¾ç½®ï¼‰</li></ul></li></ol><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Gas {    uint public i = 0;    // Using up all of the gas that you send causes your transaction to fail.    // State changes are undone.    // Gas spent are not refunded.    function forever() public {        // Here we run a loop until all of the gas are spent        // and the transaction fails        while (true) {            i += 1;        }    }}</code></pre><h2 id="If-Else"><a href="#If-Else" class="headerlink" title="If / Else"></a>If / Else</h2><p>Solidity æ”¯æŒæ¡ä»¶è¯­å¥ ifã€else if å’Œ else</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract IfElse {    function foo(uint x) public pure returns (uint) {        if (x &lt; 10) {            return 0;        } else if (x &lt; 20) {            return 1;        } else {            return 2;        }    }    function ternary(uint _x) public pure returns (uint) {        // if (_x &lt; 10) {        //     return 1;        // }        // return 2;        // shorthand way to write if / else statement        return _x &lt; 10 ? 1 : 2;    }}</code></pre><h2 id="Forã€Whileå¾ªç¯"><a href="#Forã€Whileå¾ªç¯" class="headerlink" title="Forã€Whileå¾ªç¯"></a>Forã€Whileå¾ªç¯</h2><p>Solidity æ”¯æŒ forã€while å’Œ do while å¾ªç¯ï¼Œä¸è¦ç¼–å†™æ— ç•Œå¾ªç¯ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šè¾¾åˆ° gas é™åˆ¶ï¼Œå¯¼è‡´æ‚¨çš„äº¤æ˜“å¤±è´¥</p><p>ç”±äºä¸Šè¿°åŸå› ï¼Œå¾ˆå°‘ä½¿ç”¨ while å’Œ do while å¾ªç¯</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Loop {    function loop() public {        // for loop        for (uint i = 0; i &lt; 10; i++) {            if (i == 3) {                // Skip to next iteration with continue                continue;            }            if (i == 5) {                // Exit loop with break                break;            }        }        // while loop        uint j;        while (j &lt; 10) {            j++;        }    }}</code></pre><h2 id="Mapping"><a href="#Mapping" class="headerlink" title="Mapping"></a>Mapping</h2><p>Mappingæ˜¯ä½¿ç”¨è¯­æ³•æ˜ å°„ï¼ˆkeyType =&gt; valueTypeï¼‰åˆ›å»ºçš„</p><p>keyTypeå¯ä»¥æ˜¯ä»»ä½•å†…ç½®å€¼ç±»å‹ã€å­—èŠ‚ã€å­—ç¬¦ä¸²æˆ–åˆçº¦åœ°å€</p><p>valueTypeå¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼ŒåŒ…æ‹¬å¦ä¸€ä¸ªMappingæˆ–æ•°ç»„</p><p>Mappingsä¸å¯è¿­ä»£</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Mapping {    // Mapping from address to uint    mapping(address =&gt; uint) public myMap;    function get(address _addr) public view returns (uint) {        // Mapping always returns a value.        // If the value was never set, it will return the default value.        return myMap[_addr];    }    function set(address _addr, uint _i) public {        // Update the value at this address        myMap[_addr] = _i;    }    function remove(address _addr) public {        // Reset the value to the default value.        delete myMap[_addr];    }}contract NestedMapping {    // Nested mapping (mapping from address to another mapping)    mapping(address =&gt; mapping(uint =&gt; bool)) public nested;    function get(address _addr1, uint _i) public view returns (bool) {        // You can get values from a nested mapping        // even when it is not initialized        return nested[_addr1][_i];    }    function set(        address _addr1,        uint _i,        bool _boo    ) public {        nested[_addr1][_i] = _boo;    }    function remove(address _addr1, uint _i) public {        delete nested[_addr1][_i];    }}</code></pre><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p>æ•°ç»„å¯ä»¥å…·æœ‰ç¼–è¯‘æ—¶å›ºå®šå¤§å°æˆ–åŠ¨æ€å¤§å°</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Array {    // Several ways to initialize an array    uint[] public arr;    uint[] public arr2 = [1, 2, 3];    // Fixed sized array, all elements initialize to 0    uint[10] public myFixedSizeArr;    function get(uint i) public view returns (uint) {        return arr[i];    }    // Solidity can return the entire array.    // But this function should be avoided for    // arrays that can grow indefinitely in length.    function getArr() public view returns (uint[] memory) {        return arr;    }    function push(uint i) public {        // Append to array        // This will increase the array length by 1.        arr.push(i);    }    function pop() public {        // Remove last element from array        // This will decrease the array length by 1        arr.pop();    }    function getLength() public view returns (uint) {        return arr.length;    }    function remove(uint index) public {        // Delete does not change the array length.        // It resets the value at index to it's default value,        // in this case 0        delete arr[index];    }    function examples() external {        // create array in memory, only fixed size can be created        uint[] memory a = new uint[](5);    }}</code></pre><h2 id="Enum"><a href="#Enum" class="headerlink" title="Enum"></a>Enum</h2><p>Solidity æ”¯æŒæšä¸¾ï¼Œå®ƒä»¬å¯¹äºè·Ÿè¸ªçŠ¶æ€å¾ˆæœ‰ç”¨ã€‚æšä¸¾å¯ä»¥åœ¨åˆçº¦ä¹‹å¤–å£°æ˜</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Enum {    // Enum representing shipping status    enum Status {        Pending,        Shipped,        Accepted,        Rejected,        Canceled    }    // Default value is the first element listed in    // definition of the type, in this case "Pending"    Status public status;    // Returns uint    // Pending  - 0    // Shipped  - 1    // Accepted - 2    // Rejected - 3    // Canceled - 4    function get() public view returns (Status) {        return status;    }    // Update status by passing uint into input    function set(Status _status) public {        status = _status;    }    // You can update to a specific enum like this    function cancel() public {        status = Status.Canceled;    }    // delete resets the enum to its first value, 0    function reset() public {        delete status;    }}</code></pre><h2 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h2><p>æ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºç»“æ„ä½“æ¥å®šä¹‰è‡ªå·±çš„ç±»å‹</p><p>å®ƒä»¬å¯¹äºå°†ç›¸å…³æ•°æ®ç»„åˆåœ¨ä¸€èµ·å¾ˆæœ‰ç”¨</p><p>ç»“æ„ä½“å¯ä»¥åœ¨åˆçº¦ä¹‹å¤–å£°æ˜å¹¶åœ¨å¦ä¸€ä¸ªåˆçº¦ä¸­å¯¼å…¥</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Todos {    struct Todo {        string text;        bool completed;    }    // An array of 'Todo' structs    Todo[] public todos;    function create(string memory _text) public {        // 3 ways to initialize a struct        // - calling it like a function        todos.push(Todo(_text, false));        // key value mapping        todos.push(Todo({text: _text, completed: false}));        // initialize an empty struct and then update it        Todo memory todo;        todo.text = _text;        // todo.completed initialized to false        todos.push(todo);    }    // Solidity automatically created a getter for 'todos' so    // you don't actually need this function.    function get(uint _index) public view returns (string memory text, bool completed) {        Todo storage todo = todos[_index];        return (todo.text, todo.completed);    }    // update text    function update(uint _index, string memory _text) public {        Todo storage todo = todos[_index];        todo.text = _text;    }    // update completed    function toggleCompleted(uint _index) public {        Todo storage todo = todos[_index];        todo.completed = !todo.completed;    }}</code></pre><h2 id="æ•°æ®å­˜å‚¨ä½ç½®"><a href="#æ•°æ®å­˜å‚¨ä½ç½®" class="headerlink" title="æ•°æ®å­˜å‚¨ä½ç½®"></a>æ•°æ®å­˜å‚¨ä½ç½®</h2><p>å˜é‡è¢«å£°æ˜ä¸º storageã€memory æˆ– calldata ä»¥æ˜ç¡®æŒ‡å®šæ•°æ®çš„ä½ç½®ï¼š</p><ul><li>storageï¼šå˜é‡æ˜¯çŠ¶æ€å˜é‡ï¼ˆå­˜å‚¨åœ¨åŒºå—é“¾ä¸Šï¼‰</li><li>memoryï¼šå˜é‡åœ¨å†…å­˜ä¸­ï¼Œåœ¨è°ƒç”¨å‡½æ•°æ—¶å­˜åœ¨ï¼Œåœ¨å£°æ˜è¦å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ˆä¸´æ—¶ï¼‰çš„å˜é‡ï¼ˆå‡½æ•°å‚æ•°ä»¥åŠå‡½æ•°å†…éƒ¨çš„é€»è¾‘ï¼‰æ—¶åº”ä½¿ç”¨memory</li><li>calldataï¼šä¸€ä¸ªä¸å¯ä¿®æ”¹ã€éæŒä¹…æ€§çš„åŒºåŸŸï¼Œç”¨äºå­˜å‚¨å‡½æ•°å‚æ•°ã€‚åœ¨å£°æ˜å¤–éƒ¨å‡½æ•°çš„åŠ¨æ€å‚æ•°æ—¶å¿…é¡»ä½¿ç”¨ calldataï¼Œcalldata æ˜¯å­˜å‚¨å‡½æ•°å‚æ•°çš„ä¸å¯ä¿®æ”¹ã€éæŒä¹…æ€§åŒºåŸŸ</li></ul><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract DataLocations {    uint[] public arr;    mapping(uint =&gt; address) map;    struct MyStruct {        uint foo;    }    mapping(uint =&gt; MyStruct) myStructs;    function f() public {        // call _f with state variables        _f(arr, map, myStructs[1]);        // get a struct from a mapping        MyStruct storage myStruct = myStructs[1];        // create a struct in memory        MyStruct memory myMemStruct = MyStruct(0);    }    function _f(        uint[] storage _arr,        mapping(uint =&gt; address) storage _map,        MyStruct storage _myStruct    ) internal {        // do something with storage variables    }    // You can return memory variables    function g(uint[] memory _arr) public returns (uint[] memory) {        // do something with memory array    }    function h(uint[] calldata _arr) external {        // do something with calldata array    }}</code></pre><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>æœ‰å‡ ç§æ–¹æ³•å¯ä»¥ä»å‡½æ•°ä¸­è¾“å‡º</p><p>å…¬å…±å‡½æ•°ä¸èƒ½æ¥å—æŸäº›æ•°æ®ç±»å‹ä½œä¸ºè¾“å…¥æˆ–è¾“å‡º(ä¾‹å¦‚Mapping)</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Function {    // Functions can return multiple values.    function returnMany()        public        pure        returns (            uint,            bool,            uint        )    {        return (1, true, 2);    }    // Return values can be named.    function named()        public        pure        returns (            uint x,            bool b,            uint y        )    {        return (1, true, 2);    }    // Return values can be assigned to their name.    // In this case the return statement can be omitted.    function assigned()        public        pure        returns (            uint x,            bool b,            uint y        )    {        x = 1;        b = true;        y = 2;    }    // Use destructuring assignment when calling another    // function that returns multiple values.    function destructuringAssignments()        public        pure        returns (            uint,            bool,            uint,            uint,            uint        )    {        (uint i, bool b, uint j) = returnMany();        // Values can be left out.        (uint x, , uint y) = (4, 5, 6);        return (i, b, j, x, y);    }    // Cannot use map for either input or output    // Can use array for input    function arrayInput(uint[] memory _arr) public {}    // Can use array for output    uint[] public arr;    function arrayOutput() public view returns (uint[] memory) {        return arr;    }}</code></pre><h2 id="Viewã€Pureä¿®é¥°å‡½æ•°"><a href="#Viewã€Pureä¿®é¥°å‡½æ•°" class="headerlink" title="Viewã€Pureä¿®é¥°å‡½æ•°"></a>Viewã€Pureä¿®é¥°å‡½æ•°</h2><p>GetteråŠŸèƒ½çš„å‡½æ•°å¯ä»¥å£°æ˜ä¸º view æˆ– pure</p><p>View å‡½æ•°å£°æ˜ä¸ä¼šæ›´æ”¹çŠ¶æ€</p><p>Pure å‡½æ•°å£°æ˜ä¸ä¼šæ›´æ”¹æˆ–è¯»å–ä»»ä½•çŠ¶æ€å˜é‡</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract ViewAndPure {    uint public x = 1;    // Promise not to modify the state.    function addToX(uint y) public view returns (uint) {        return x + y;    }    // Promise not to modify or read from the state.    function add(uint i, uint j) public pure returns (uint) {        return i + j;    }}</code></pre><h2 id="Errorå¼‚å¸¸"><a href="#Errorå¼‚å¸¸" class="headerlink" title="Errorå¼‚å¸¸"></a>Errorå¼‚å¸¸</h2><p>Errorå¼‚å¸¸å°†æ’¤æ¶ˆäº‹åŠ¡æœŸé—´å¯¹çŠ¶æ€æ‰€åšçš„æ‰€æœ‰æ›´æ”¹</p><p>æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨ requireã€revert æˆ– assert æ¥æŠ›å‡ºå¼‚å¸¸</p><ul><li><p>requireç”¨äºåœ¨æ‰§è¡Œä¹‹å‰éªŒè¯è¾“å…¥å’Œæ¡ä»¶</p></li><li><p>revert ç±»ä¼¼äº requireï¼Œæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ä¸‹é¢çš„ä»£ç </p></li><li><p>assert ç”¨äºæ£€æŸ¥ä¸åº”ä¸ºå‡çš„ä»£ç ã€‚æ–­è¨€å¤±è´¥å¯èƒ½æ„å‘³ç€å­˜åœ¨Bug</p></li></ul><p>ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯æ¥èŠ‚çœGas</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Error {    function testRequire(uint _i) public pure {        // Require should be used to validate conditions such as:        // - inputs        // - conditions before execution        // - return values from calls to other functions        require(_i &gt; 10, "Input must be greater than 10");    }    function testRevert(uint _i) public pure {        // Revert is useful when the condition to check is complex.        // This code does the exact same thing as the example above        if (_i &lt;= 10) {            revert("Input must be greater than 10");        }    }    uint public num;    function testAssert() public view {        // Assert should only be used to test for internal errors,        // and to check invariants.        // Here we assert that num is always equal to 0        // since it is impossible to update the value of num        assert(num == 0);    }    // custom error    error InsufficientBalance(uint balance, uint withdrawAmount);    function testCustomError(uint _withdrawAmount) public view {        uint bal = address(this).balance;        if (bal &lt; _withdrawAmount) {            revert InsufficientBalance({balance: bal, withdrawAmount: _withdrawAmount});        }    }}</code></pre><h2 id="Modifierå‡½æ•°"><a href="#Modifierå‡½æ•°" class="headerlink" title="Modifierå‡½æ•°"></a>Modifierå‡½æ•°</h2><p>Modifieræ˜¯å¯ä»¥åœ¨å‡½æ•°è°ƒç”¨ä¹‹å‰å’Œ/æˆ–ä¹‹åè¿è¡Œçš„ä»£ç </p><p>Modifierå¯ç”¨äºï¼š</p><ul><li>é™åˆ¶è®¿é—®</li><li>éªŒè¯è¾“å…¥</li><li>é˜²æ­¢é‡å…¥é»‘å®¢æ”»å‡»</li></ul><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract FunctionModifier {    // We will use these variables to demonstrate how to use    // modifiers.    address public owner;    uint public x = 10;    bool public locked;    constructor() {        // Set the transaction sender as the owner of the contract.        owner = msg.sender;    }    // Modifier to check that the caller is the owner of    // the contract.    modifier onlyOwner() {        require(msg.sender == owner, "Not owner");        // Underscore is a special character only used inside        // a function modifier and it tells Solidity to        // execute the rest of the code.        _;    }    // Modifiers can take inputs. This modifier checks that the    // address passed in is not the zero address.    modifier validAddress(address _addr) {        require(_addr != address(0), "Not valid address");        _;    }    function changeOwner(address _newOwner) public onlyOwner validAddress(_newOwner) {        owner = _newOwner;    }    // Modifiers can be called before and / or after a function.    // This modifier prevents a function from being called while    // it is still executing.    modifier noReentrancy() {        require(!locked, "No reentrancy");        locked = true;        _;        locked = false;    }    function decrement(uint i) public noReentrancy {        x -= i;        if (i &gt; 1) {            decrement(i - 1);        }    }}</code></pre><h2 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h2><p>äº‹ä»¶å…è®¸è®°å½•æ—¥å¿—åˆ°ä»¥å¤ªåŠåŒºå—é“¾</p><p>äº‹ä»¶çš„ä¸€äº›ç”¨ä¾‹æ˜¯ï¼š</p><ul><li>ç›‘å¬äº‹ä»¶å’Œæ›´æ–°ç”¨æˆ·ç•Œé¢</li><li>ä¸€ç§å»‰ä»·çš„å­˜å‚¨å½¢å¼</li></ul><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Event {    // Event declaration    // Up to 3 parameters can be indexed.    // Indexed parameters helps you filter the logs by the indexed parameter    event Log(address indexed sender, string message);    event AnotherLog();    function test() public {        emit Log(msg.sender, "Hello World!");        emit Log(msg.sender, "Hello EVM!");        emit AnotherLog();    }}</code></pre><h2 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h2><p>æ„é€ å‡½æ•°æ˜¯åœ¨åˆ›å»ºåˆçº¦æ—¶æ‰§è¡Œçš„å¯é€‰å‡½æ•°</p><p>ä»¥ä¸‹æ˜¯å¦‚ä½•å°†å‚æ•°ä¼ é€’ç»™æ„é€ å‡½æ•°çš„ç¤ºä¾‹</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;// Base contract Xcontract X {    string public name;    constructor(string memory _name) {        name = _name;    }}// Base contract Ycontract Y {    string public text;    constructor(string memory _text) {        text = _text;    }}// There are 2 ways to initialize parent contract with parameters.// Pass the parameters here in the inheritance list.contract B is X("Input to X"), Y("Input to Y") {}contract C is X, Y {    // Pass the parameters here in the constructor,    // similar to function modifiers.    constructor(string memory _name, string memory _text) X(_name) Y(_text) {}}// Parent constructors are always called in the order of inheritance// regardless of the order of parent contracts listed in the// constructor of the child contract.// Order of constructors called:// 1. X// 2. Y// 3. Dcontract D is X, Y {    constructor() X("X was called") Y("Y was called") {}}// Order of constructors called:// 1. X// 2. Y// 3. Econtract E is X, Y {    constructor() Y("Y was called") X("X was called") {}}</code></pre><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><p>Solidity æ”¯æŒå¤šé‡ç»§æ‰¿</p><p>åˆçº¦å¯ä»¥ä½¿ç”¨iså…³é”®å­—ç»§æ‰¿å…¶ä»–åˆçº¦</p><p>è¦è¢«å­åˆçº¦è¦†ç›–çš„å‡½æ•°å¿…é¡»å£°æ˜ä¸ºvirtual</p><p>è¦è¦†ç›–çˆ¶å‡½æ•°çš„å‡½æ•°å¿…é¡»ä½¿ç”¨å…³é”®å­—override</p><p>ç»§æ‰¿çš„é¡ºåºå¾ˆé‡è¦</p><p>ä½ å¿…é¡»æŒ‰ç…§ä»â€œæœ€åŸºç¡€â€åˆ°â€œæœ€è¡ç”Ÿâ€ï¼ˆâ€œmost base-likeâ€ to â€œmost derivedâ€ï¼‰çš„é¡ºåºåˆ—å‡ºçˆ¶åˆçº¦</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;/* Graph of inheritance    A   / \  B   C / \ /F  D,E*/contract A {    function foo() public pure virtual returns (string memory) {        return "A";    }}// Contracts inherit other contracts by using the keyword 'is'.contract B is A {    // Override A.foo()    function foo() public pure virtual override returns (string memory) {        return "B";    }}contract C is A {    // Override A.foo()    function foo() public pure virtual override returns (string memory) {        return "C";    }}// Contracts can inherit from multiple parent contracts.// When a function is called that is defined multiple times in// different contracts, parent contracts are searched from// right to left, and in depth-first manner.contract D is B, C {    // D.foo() returns "C"    // since C is the right most parent contract with function foo()    function foo() public pure override(B, C) returns (string memory) {        return super.foo();    }}contract E is C, B {    // E.foo() returns "B"    // since B is the right most parent contract with function foo()    function foo() public pure override(C, B) returns (string memory) {        return super.foo();    }}// Inheritance must be ordered from â€œmost base-likeâ€ to â€œmost derivedâ€.// Swapping the order of A and B will throw a compilation error.contract F is A, B {    function foo() public pure override(A, B) returns (string memory) {        return super.foo();    }}</code></pre><h2 id="è¦†ç›–ç»§æ‰¿çš„åˆçº¦çŠ¶æ€å˜é‡"><a href="#è¦†ç›–ç»§æ‰¿çš„åˆçº¦çŠ¶æ€å˜é‡" class="headerlink" title="è¦†ç›–ç»§æ‰¿çš„åˆçº¦çŠ¶æ€å˜é‡"></a>è¦†ç›–ç»§æ‰¿çš„åˆçº¦çŠ¶æ€å˜é‡</h2><p>ä¸å‡½æ•°ä¸åŒï¼ŒçŠ¶æ€å˜é‡ä¸èƒ½é€šè¿‡åœ¨å­åˆçº¦ä¸­é‡æ–°å£°æ˜æ¥è¦†ç›–</p><p>è®©æˆ‘ä»¬å­¦ä¹ å¦‚ä½•æ­£ç¡®è¦†ç›–ç»§æ‰¿çš„çŠ¶æ€å˜é‡</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract A {    string public name = "Contract A";    function getName() public view returns (string memory) {        return name;    }}// Shadowing is disallowed in Solidity 0.6// This will not compile// contract B is A {//     string public name = "Contract B";// }contract C is A {    // This is the correct way to override inherited state variables.    constructor() {        name = "Contract C";    }    // C.getName returns "Contract C"}</code></pre><h2 id="è°ƒç”¨çˆ¶åˆçº¦"><a href="#è°ƒç”¨çˆ¶åˆçº¦" class="headerlink" title="è°ƒç”¨çˆ¶åˆçº¦"></a>è°ƒç”¨çˆ¶åˆçº¦</h2><p>å¯ä»¥ç›´æ¥è°ƒç”¨çˆ¶åˆçº¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…³é”®å­— super è°ƒç”¨</p><p>ä½¿ç”¨å…³é”®å­— super ä¼šè°ƒç”¨æ‰€æœ‰çš„ç›´æ¥çˆ¶åˆçº¦</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;/* Inheritance tree   A /  \B   C \ /  D*/contract A {    // This is called an event. You can emit events from your function    // and they are logged into the transaction log.    // In our case, this will be useful for tracing function calls.    event Log(string message);    function foo() public virtual {        emit Log("A.foo called");    }    function bar() public virtual {        emit Log("A.bar called");    }}contract B is A {    function foo() public virtual override {        emit Log("B.foo called");        A.foo();    }    function bar() public virtual override {        emit Log("B.bar called");        super.bar();    }}contract C is A {    function foo() public virtual override {        emit Log("C.foo called");        A.foo();    }    function bar() public virtual override {        emit Log("C.bar called");        super.bar();    }}contract D is B, C {    // Try:    // - Call D.foo and check the transaction logs.    //   Although D inherits A, B and C, it only called C and then A.    // - Call D.bar and check the transaction logs    //   D called C, then B, and finally A.    //   Although super was called twice (by B and C) it only called A once.    function foo() public override(B, C) {        super.foo();    }    function bar() public override(B, C) {        super.bar();    }}</code></pre><h2 id="å˜é‡å¯è§çº¦æŸ"><a href="#å˜é‡å¯è§çº¦æŸ" class="headerlink" title="å˜é‡å¯è§çº¦æŸ"></a>å˜é‡å¯è§çº¦æŸ</h2><p>å‡½æ•°å’ŒçŠ¶æ€å˜é‡å¿…é¡»å£°æ˜å®ƒä»¬æ˜¯å¦å¯ä»¥è¢«å…¶ä»–åˆçº¦è®¿é—®</p><p>å‡½æ•°å¯ä»¥å£°æ˜ä¸ºï¼š</p><ul><li><p>publicï¼šä»»ä½•åˆçº¦å’Œè´¦æˆ·éƒ½å¯ä»¥è°ƒç”¨</p></li><li><p>privateï¼šåªåœ¨å®šä¹‰å‡½æ•°çš„åˆçº¦å†…éƒ¨</p></li><li><p>internalï¼šä»…ç»§æ‰¿å†…éƒ¨å‡½æ•°çš„å†…éƒ¨åˆçº¦</p></li><li><p>externalï¼šåªæœ‰å…¶ä»–åˆçº¦å’Œè´¦æˆ·å¯ä»¥è°ƒç”¨</p></li></ul><p>çŠ¶æ€å˜é‡å¯ä»¥å£°æ˜ä¸ºå…¬å…±çš„ã€ç§æœ‰çš„æˆ–å†…éƒ¨çš„ï¼Œä½†ä¸èƒ½å£°æ˜ä¸ºå¤–éƒ¨çš„</p><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Base {    // Private function can only be called    // - inside this contract    // Contracts that inherit this contract cannot call this function.    function privateFunc() private pure returns (string memory) {        return "private function called";    }    function testPrivateFunc() public pure returns (string memory) {        return privateFunc();    }    // Internal function can be called    // - inside this contract    // - inside contracts that inherit this contract    function internalFunc() internal pure returns (string memory) {        return "internal function called";    }    function testInternalFunc() public pure virtual returns (string memory) {        return internalFunc();    }    // Public functions can be called    // - inside this contract    // - inside contracts that inherit this contract    // - by other contracts and accounts    function publicFunc() public pure returns (string memory) {        return "public function called";    }    // External functions can only be called    // - by other contracts and accounts    function externalFunc() external pure returns (string memory) {        return "external function called";    }    // This function will not compile since we're trying to call    // an external function here.    // function testExternalFunc() public pure returns (string memory) {    //     return externalFunc();    // }    // State variables    string private privateVar = "my private variable";    string internal internalVar = "my internal variable";    string public publicVar = "my public variable";    // State variables cannot be external so this code won't compile.    // string external externalVar = "my external variable";}contract Child is Base {    // Inherited contracts do not have access to private functions    // and state variables.    // function testPrivateFunc() public pure returns (string memory) {    //     return privateFunc();    // }    // Internal function call be called inside child contracts.    function testInternalFunc() public pure override returns (string memory) {        return internalFunc();    }}</code></pre><h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><p>æ‚¨å¯ä»¥é€šè¿‡å£°æ˜æ¥å£ä¸å…¶ä»–åˆçº¦äº¤äº’</p><p>æ¥å£ï¼š</p><ul><li>ä¸èƒ½å®ç°ä»»ä½•å‡½æ•°</li><li>å¯ä»¥ä»å…¶ä»–æ¥å£ç»§æ‰¿</li><li>æ‰€æœ‰å£°æ˜çš„å‡½æ•°å¿…é¡»æ˜¯å¤–éƒ¨çš„</li><li>ä¸èƒ½å£°æ˜æ„é€ å‡½æ•°</li><li>ä¸èƒ½å£°æ˜çŠ¶æ€å˜é‡</li></ul><pre><code class="solidity">// SPDX-License-Identifier: MITpragma solidity ^0.8.13;contract Counter {    uint public count;    function increment() external {        count += 1;    }}interface ICounter {    function count() external view returns (uint);    function increment() external;}contract MyContract {    function incrementCounter(address _counter) external {        ICounter(_counter).increment();    }    function getCount(address _counter) external view returns (uint) {        return ICounter(_counter).count();    }}// Uniswap exampleinterface UniswapV2Factory {    function getPair(address tokenA, address tokenB)        external        view        returns (address pair);}interface UniswapV2Pair {    function getReserves()        external        view        returns (            uint112 reserve0,            uint112 reserve1,            uint32 blockTimestampLast        );}contract UniswapExample {    address private factory = 0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f;    address private dai = 0x6B175474E89094C44Da98b954EedeAC495271d0F;    address private weth = 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2;    function getTokenReserves() external view returns (uint, uint) {        address pair = UniswapV2Factory(factory).getPair(dai, weth);        (uint reserve0, uint reserve1, ) = UniswapV2Pair(pair).getReserves();        return (reserve0, reserve1);    }}</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Solidityå­¦ä¹ ç¬”è®°-åŸºç¡€éƒ¨åˆ†&quot;&gt;&lt;a href=&quot;#Solidityå­¦ä¹ ç¬”è®°-åŸºç¡€éƒ¨åˆ†&quot; class=&quot;headerlink&quot; title=&quot;Solidityå­¦ä¹ ç¬”è®°(åŸºç¡€éƒ¨åˆ†)&quot;&gt;&lt;/a&gt;Solidityå­¦ä¹ ç¬”è®°(åŸºç¡€éƒ¨åˆ†)&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡å‚è€ƒï¼š&lt;a </summary>
      
    
    
    
    
    <category term="Ethereum" scheme="https://zhangzhishun.github.io/tags/Ethereum/"/>
    
  </entry>
  
  <entry>
    <title>IPFS and Friends: A Qualitative Comparison of Next Generation Peer-to-Peer Data Networks</title>
    <link href="https://zhangzhishun.github.io/2022/04/28/distributed_storage/IPFS%20and%20Friends:%20A%20Qualitative%20Comparison%20of%20Next%20Generation%20Peer-to-Peer%20Data%20Networks/"/>
    <id>https://zhangzhishun.github.io/2022/04/28/distributed_storage/IPFS%20and%20Friends:%20A%20Qualitative%20Comparison%20of%20Next%20Generation%20Peer-to-Peer%20Data%20Networks/</id>
    <published>2022-04-28T12:43:09.000Z</published>
    <updated>2022-05-05T09:55:03.671Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å¯¹ä¸‹ä¸€ä»£æ•°æ®ç½‘ç»œè¿›è¡ŒæŠ€æœ¯æ¦‚è¿°ã€‚æˆ‘ä»¬ä½¿ç”¨é€‰å®šçš„æ•°æ®ç½‘ç»œæ¥ä»‹ç»ä¸€èˆ¬æ¦‚å¿µå’Œå¼ºè°ƒæ–°çš„å‘å±•ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬æä¾›äº†IPFSçš„æ›´æ·±å±‚æ¬¡çš„æ¦‚è¿°ï¼Œä»¥åŠSwarmã€Hypercore Protocolã€SAFEã€Storjå’ŒArweaveçš„æ€»ä½“æ¦‚è¿°ã€‚æˆ‘ä»¬ç¡®å®šå¸¸è§çš„æ„å»ºæ¨¡å—ï¼Œå¹¶æä¾›å®šæ€§æ¯”è¾ƒã€‚ä»æ¦‚è¿°ä¸­ï¼Œæˆ‘ä»¬å¾—å‡ºäº†æœªæ¥å…³äºæ•°æ®ç½‘ç»œçš„æŒ‘æˆ˜å’Œç ”ç©¶ç›®æ ‡ã€‚</p><h2 id="I-æ¦‚è¿°"><a href="#I-æ¦‚è¿°" class="headerlink" title="I. æ¦‚è¿°"></a>I. æ¦‚è¿°</h2><p>é›†ä¸­å¼æ§åˆ¶å’Œæ²»ç†ä¼šå¯¼è‡´æ•°æ®å­¤å²›ï¼Œè¿™å¯èƒ½ä¼šå½±å“å¯è®¿é—®æ€§ã€å¯ç”¨æ€§å’Œæœºå¯†æ€§ã€‚ä¾‹å¦‚ï¼Œæ•°æ®è®¿é—®å¯èƒ½ä¼šå—åˆ°å®¡æŸ¥ã€‚ä¸æ­¤åŒæ—¶ï¼Œæ•°æ®å­¤å²›ä¸ºæ•°æ®æ³„éœ²å’Œæ•°æ®å‡ºå”®æä¾›äº†ä¸€ä¸ªæœ‰ä»·å€¼çš„ç›®æ ‡ï¼Œè¿™å¯èƒ½ä¼šå±åŠå®‰å…¨å’Œéšç§ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·ä¼šå¤±å»è‡ªå·±çš„æ§åˆ¶æƒï¼Œå¹¶å°†å…¶å§”æ‰˜ç»™äº‘æä¾›å•†ã€‚</p><p>æ‰“ç ´æ•°æ®ç«–äº•å’Œå‡å°‘ä¿¡ä»»å‡è®¾çš„ä¸€ä¸ªæ–¹å‘æ˜¯ç‚¹å¯¹ç‚¹æ•°æ®ç½‘ç»œã€‚è¿™ä¸ªæœ¯è¯­æ¦‚æ‹¬äº†å»ºç«‹åœ¨ç‚¹å¯¹ç‚¹(P2P)ç½‘ç»œä¹‹ä¸Šçš„ä¸€ç³»åˆ—æ•°æ®å­˜å‚¨æ–¹æ³•ï¼ŒåŒ…æ‹¬æ•°æ®å­˜å‚¨ã€å¤åˆ¶ã€åˆ†å‘å’Œäº¤æ¢ç­‰æ–¹é¢ã€‚ä½œä¸ºå…¸å‹çš„P2Pç½‘ç»œï¼Œå¯¹ç­‰ç‚¹å¯ä»¥ç›´æ¥äº¤äº’ï¼Œå»ºç«‹è¦†ç›–ç½‘ç»œï¼Œå…±äº«èµ„æºï¼Œå¹¶å¯ä»¥åšå‡ºè‡ªæ²»çš„æœ¬åœ°å†³ç­–ã€‚å› æ­¤ï¼ŒP2Pæ•°æ®ç½‘ç»œåŠªåŠ›å…±åŒç®¡ç†å’Œå…±äº«å­˜å‚¨ã€‚è™½ç„¶P2Pç½‘ç»œçš„ä¸»è¦ç›®æ ‡å’ŒåŸåˆ™åœ¨è¿‡å»äºŒåå¹´ä¸­æ²¡æœ‰æ”¹å˜ï¼Œä½†P2Pç½‘ç»œéšç€æ—¶é—´çš„æ¨ç§»ä¸æ–­å‘å±•ï¼Œæé«˜äº†å¯ç”¨æ€§å’ŒåŠŸèƒ½ã€‚åœ¨å›¾1ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†ä»ç¬¬ä¸€ä»£åˆ°ä¸‹ä¸€ä»£æ•°æ®ç½‘ç»œçš„å‘å±•ã€‚</p><p><img src="/images/distributed_storage/image-20220428142211126.png" alt="image-20220428142211126"></p><p>å›¾1 ä¸‹ä¸€ä»£P2Pæ•°æ®ç½‘ç»œçš„å…ˆé©±æŠ€æœ¯</p><h3 id="A-ç¬¬ä¸€ä»£æ•°æ®ç½‘ç»œ"><a href="#A-ç¬¬ä¸€ä»£æ•°æ®ç½‘ç»œ" class="headerlink" title="A. ç¬¬ä¸€ä»£æ•°æ®ç½‘ç»œ"></a>A. ç¬¬ä¸€ä»£æ•°æ®ç½‘ç»œ</h3><p>è¿˜æœ‰è®¸å¤šä¸åŒçš„æ—§P2Pç½‘ç»œä¹Ÿå¯ä»¥å½’ç±»ä¸ºæ•°æ®ç½‘ç»œã€‚1999å¹´éšç€éŸ³é¢‘æ–‡ä»¶å…±äº«ç½‘ç»œNapsterçš„å‡ºç°ï¼ŒP2PæŠ€æœ¯å¼€å§‹æµè¡Œèµ·æ¥ï¼Œç´§éšå…¶åçš„æ˜¯Gnutellaï¼Œå®ƒå¯ä»¥å…±äº«æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶ã€‚Napsterå’ŒGnutellaæ ‡å¿—ç€P2Pç½‘ç»œçš„å¼€å§‹ï¼Œéšåå‡ºç°äº†è®¸å¤šä¸“æ³¨äºç‰¹å®šåº”ç”¨é¢†åŸŸæˆ–æ–°é¢–ç½‘ç»œç»“æ„çš„P2Pç½‘ç»œã€‚ä¾‹å¦‚Freenetå®ç°äº†åŒ¿åå­˜å‚¨å’Œæ£€ç´¢ã€‚Chordï¼Œ CANå’ŒPastryæä¾›äº†ç»´æŠ¤ç»“æ„åŒ–è¦†ç›–ç½‘ç»œæ‹“æ‰‘çš„åè®®ã€‚ç‰¹åˆ«æ˜¯BitTorrentå—åˆ°äº†ç”¨æˆ·å’Œç ”ç©¶ç¤¾åŒºçš„å¹¿æ³›å…³æ³¨ã€‚BitTorrentå¼•å…¥äº†æ¿€åŠ±æœºåˆ¶æ¥å®ç°å¸•ç´¯æ‰˜æ•ˆç‡ï¼Œè¯•å›¾æé«˜ç½‘ç»œåˆ©ç”¨ç‡ï¼Œå®ç°æ›´é«˜æ°´å¹³çš„é²æ£’æ€§ã€‚æˆ‘ä»¬è®¤ä¸ºNapsterã€Gnutellaã€Freenetã€BitTorrentç­‰ç½‘ç»œæ˜¯ç¬¬ä¸€ä»£P2Pæ•°æ®ç½‘ç»œï¼Œä¸»è¦å…³æ³¨æ–‡ä»¶å…±äº«ã€‚</p><p>Androutsellis Theotokiså’ŒSpinellisæä¾›äº†P2På†…å®¹åˆ†å‘æŠ€æœ¯çš„2004å¹´å‘å±•æ¦‚å†µâ€”â€”æä¾›äº†å¯¹ä¸Šä¸€ä»£æŠ€æœ¯çš„å¹¿æ³›æ¦‚è¿°ã€‚ä»¥å‰çš„å…¶ä»–å·¥ä½œä¹Ÿæä¾›äº†å¯¹ä¸Šä¸€ä»£çš„æ›´ä»”ç»†çš„ç ”ç©¶ï¼Œæ›´å¯†åˆ‡åœ°å…³æ³¨ç‰¹å®šçš„P2Pæ•°æ®ç½‘ç»œ(ä¾‹å¦‚ï¼ŒFreeNetå’ŒPast)æˆ–ä¸€èˆ¬çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ(ä¾‹å¦‚ï¼ŒGoogle FSå’ŒHadoop Distributed FS)ã€‚</p><p>P2PæŠ€æœ¯çš„è¿›æ­¥å’Œç¬¬ä¸€ä»£æ•°æ®ç½‘ç»œçš„æ™®åŠï¼Œå½±å“äº†åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå’Œå†…å®¹åˆ†å‘æŠ€æœ¯çš„é¢†åŸŸã€‚è¿™ç§è¶‹åŠ¿ä¹Ÿå±äºä¸€èˆ¬çš„æ•°æ®ç½‘ç»œï¼Œç‰¹åˆ«æ˜¯P2Pæ•°æ®ç½‘ç»œã€‚</p><h3 id="B-Transistioné˜¶æ®µ"><a href="#B-Transistioné˜¶æ®µ" class="headerlink" title="B. Transistioné˜¶æ®µ"></a>B. Transistioné˜¶æ®µ</h3><p>åœ¨P2Pæ–‡ä»¶å…±äº«ç³»ç»Ÿä¸­ä¼¼ä¹ç¼ºå¤±çš„ä¸€ä¸ªç»„ä»¶æ˜¯æ”¹å–„æ–‡ä»¶çš„é•¿æœŸå­˜å‚¨å’Œå¯ç”¨æ€§çš„æ–¹æ³•ã€‚éšç€2008å¹´æ¯”ç‰¹å¸çš„å¼•å…¥ï¼ŒP2Pæ€æƒ³ï¼Œç‰¹åˆ«æ˜¯è”åˆæ•°æ®å¤åˆ¶å¾—åˆ°äº†æ–°çš„å…³æ³¨ã€‚åˆ†å¸ƒå¼åˆ†ç±»è´¦æŠ€æœ¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æä¾›å¯ç”¨æ€§ã€å®Œæ•´æ€§å’Œå¤æ‚çš„å®¹é”™èƒ½åŠ›ã€‚ç‰¹åˆ«æ˜¯ï¼ŒåŠ å¯†è´§å¸æ˜¾ç¤ºäº†å…¶åœ¨å»ä¸­å¿ƒåŒ–ç¯å¢ƒä¸­ä½œä¸ºè´§å¸æ¿€åŠ±æœºåˆ¶çš„æ½œåŠ›ã€‚è¿™äº›ä»¥åŠå…¶ä»–çš„è¶‹åŠ¿å’Œå‘å±•ï¼Œä¾‹å¦‚Kademliaå’Œä¿¡æ¯ä¸­å¿ƒç½‘ç»œï¼Œå¯¼è‡´äº†æˆ‘ä»¬ç§°ä¹‹ä¸ºä¸‹ä¸€ä»£P2Pæ•°æ®ç½‘ç»œçš„å‘æ˜ã€‚</p><h3 id="C-ä¸‹ä¸€ä»£æ•°æ®ç½‘ç»œ"><a href="#C-ä¸‹ä¸€ä»£æ•°æ®ç½‘ç»œ" class="headerlink" title="C.ä¸‹ä¸€ä»£æ•°æ®ç½‘ç»œ"></a>C.ä¸‹ä¸€ä»£æ•°æ®ç½‘ç»œ</h3><p>ä»2014å¹´IPFSçš„å¼•å…¥å¼€å§‹ï¼Œæˆ‘ä»¬å°†ä¸‹ä¸€ä»£æ•°æ®ç½‘ç»œå®šä¹‰ä¸ºåˆ†æ•£å…±äº«å’Œå­˜å‚¨æ•°æ®çš„ç³»ç»Ÿå’Œæ¦‚å¿µï¼Œè¿™æ˜¯åœ¨è¿‡å»åå¹´ä¸­å‡ºç°çš„ã€‚æˆ‘ä»¬æä¾›ä¸‹ä¸€ä»£P2Pæ•°æ®ç½‘ç»œçš„æŠ€æœ¯æ¦‚è¿°ã€‚ä¸ç°æœ‰æ–‡çŒ®ç›¸æ¯”ï¼Œæˆ‘ä»¬æä¾›äº†ä¸‹ä¸€ä»£æ•°æ®ç½‘ç»œï¼Œå³P2Pæ•°æ®ç½‘ç»œçš„æ¯”è¾ƒæ¦‚è¿°ã€‚æˆ‘ä»¬ä¸»è¦å…³æ³¨ç‹¬ç«‹äºåŒºå—é“¾çš„ä½¿ç”¨çš„å­˜å‚¨å’Œå†…å®¹å…±äº«ã€‚<br>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å±•ç¤ºè¿™äº›æ–°ç³»ç»Ÿæ˜¯å¦‚ä½•æ„å»ºçš„ï¼Œå®ƒä»¬å¦‚ä½•åˆ©ç”¨ä»ä»¥å‰çš„ç³»ç»Ÿä¸­è·å¾—çš„çŸ¥è¯†ï¼Œä»¥åŠè¿‡å»åå¹´ä¸­æ–°çš„å‘å±•å’Œè¿›æ­¥ã€‚æˆ‘ä»¬ç¡®å®šè¿™äº›ç³»ç»Ÿçš„æ„å»ºæ¨¡å—ã€ç›¸ä¼¼æ€§å’Œè¶‹åŠ¿ã€‚è™½ç„¶æœ‰äº›ç³»ç»Ÿæœ¬èº«æ˜¯å…¶ä»–åº”ç”¨ç¨‹åºçš„æ„å»ºå—ï¼Œä¾‹å¦‚å»ä¸­å¿ƒåŒ–åº”ç”¨ç¨‹åº(DApps)ï¼Œä½†æˆ‘ä»¬ä¸»è¦å…³æ³¨ç³»ç»Ÿçš„ä¸¤ä¸ªæ–¹é¢:å†…å®¹åˆ†å‘å’Œåˆ†å¸ƒå¼å­˜å‚¨ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†æ¿€åŠ±æœºåˆ¶çš„è§è§£ï¼Œç”¨äºæ£€ç´¢æˆ–å­˜å‚¨æ–‡ä»¶ï¼Œæˆ–ä¸¤è€…å…¼è€Œæœ‰ä¹‹ã€‚ç”±äºè®¸å¤šæ–°çš„æ•°æ®ç½‘ç»œè¢«å¼€å‘ï¼Œæˆ‘ä»¬ä¸èƒ½æä¾›æ‰€æœ‰æ•°æ®ç½‘ç»œçš„å…¨é¢æ¦‚è¿°ã€‚ç›¸åï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨å‡ ä¸ªç²¾é€‰çš„ç³»ç»Ÿï¼Œå®ƒä»¬å…·æœ‰å¤æ‚æˆ–ç‹¬ç‰¹çš„æœºåˆ¶ã€ä¸åŒçš„ç”¨ä¾‹ä»¥åŠä¸åŒç¨‹åº¦çš„å†…å®¹å’Œç”¨æˆ·éšç§ã€‚æˆ‘ä»¬çš„æ¦‚è¿°ä¾§é‡äºæ¦‚å¿µå’Œå®ç°ç»†èŠ‚çš„æŠ½è±¡ï¼Œä»¥æå–ä¸€èˆ¬çš„è§è§£ã€‚ç„¶è€Œï¼Œåº”è¯¥æŒ‡å‡ºçš„æ˜¯ï¼Œç”±äºæ­£åœ¨è¿›è¡Œçš„å¼€å‘ï¼Œç³»ç»Ÿå¾ˆå®¹æ˜“å‘ç”Ÿå˜åŒ–ã€‚æˆ‘ä»¬çš„è°ƒæŸ¥è®ºæ–‡ä½¿ç”¨äº†å¹¿æ³›çš„æ¥æºï¼ŒåŒ…æ‹¬åŒè¡Œè¯„è®®çš„è®ºæ–‡ã€ç™½çš®ä¹¦ä»¥åŠæ–‡æ¡£ã€è§„èŒƒå’Œæºä»£ç ã€‚<br>å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å…³æ³¨IPFSã€Swarmã€Hypercore Protocolã€SAFEã€Storjå’ŒArweaveã€‚ç‰¹åˆ«æ˜¯IPFS(InterPlanetary File System, IPFS)ä½œä¸ºåŒºå—é“¾çš„å­˜å‚¨å±‚å·²ç»å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ï¼Œå¹¶æˆä¸ºäº†ä¸€ç³»åˆ—ç ”ç©¶çš„å¯¹è±¡ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†è¿™äº›ç³»ç»Ÿçš„æ¦‚è¿°æ”¾åœ¨å‰é¢çš„ç³»ç»Ÿå’Œç ”ç©¶æ–¹å‘ï¼Œå³BitTorrentã€ä¿¡æ¯ä¸­å¿ƒç½‘ç»œå’ŒåŒºå—é“¾ã€‚é€šè¿‡å¯¹æ¯”å…ˆé©±ç³»ç»Ÿï¼Œæˆ‘ä»¬æ¦‚è¿°äº†æ•°æ®ç½‘ç»œçš„æ¼”å˜ï¼Œå¹¶èƒ½å¤Ÿæ·±å…¥è®¨è®ºä¸‹ä¸€ä»£çš„è¿›å±•ã€‚<br>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬æå–äº†P2Pæ•°æ®ç½‘ç»œçš„æ„å»ºå—å’Œä¸€äº›ç‹¬ç‰¹çš„æ–¹é¢ã€‚è™½ç„¶æ‰€æœ‰çš„ç³»ç»Ÿéƒ½å…è®¸åˆ†å¸ƒå¼å†…å®¹å…±äº«å’Œå­˜å‚¨ï¼Œä½†å®ƒä»¬ä¼¼ä¹åªå…³æ³¨å…¶ä¸­çš„ä¸€ä¸ªæ–¹é¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªç³»ç»Ÿçš„ç›®æ ‡éƒ½æ˜¯æœåŠ¡äºå…·æœ‰ä¸åŒéœ€æ±‚å’Œå…³æ³¨ç‚¹çš„ç•¥æœ‰ä¸åŒçš„ç›®çš„ã€‚è¿™å¯¼è‡´äº†åœ¨ç½‘ç»œç»„ç»‡ã€æ–‡ä»¶æŸ¥æ‰¾ã€åˆ†æ•£ç¨‹åº¦ã€å†—ä½™å’Œéšç§æ–¹é¢çš„ä¸åŒè®¾è®¡å†³ç­–ã€‚ä¾‹å¦‚ï¼ŒStorjçš„ç›®æ ‡æ˜¯åˆ†å¸ƒå¼äº‘å­˜å‚¨ï¼Œè€ŒHypercoreåè®®åˆ™ä¸“æ³¨äºåˆ†å¸ƒå¼å¤§å‹æ•°æ®é›†ã€‚åŒæ ·ï¼ŒIPFSçš„ç›®æ ‡æ˜¯å–ä»£webçš„å®¢æˆ·ç«¯-æœåŠ¡å™¨ç»“æ„ï¼Œå› æ­¤éœ€è¦æ¯”BitTorrentæ›´å…³æ³¨æ•°æ®æŸ¥æ‰¾ï¼Œå› ä¸ºBitTorrentä¸»è¦æ˜¯æ¯ä¸ªæ–‡ä»¶éƒ½ä½äºè‡ªå·±çš„è¦†ç›–ç½‘ç»œä¸­ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨æ„å»ºæ•°æ®ç½‘ç»œçš„æ–¹æ³•ä¸Šå‘ç°äº†è®¸å¤šç›¸ä¼¼ä¹‹å¤„ï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨Kademliaæ¥æ„å»ºç½‘ç»œæˆ–å¯»æ‰¾å¯¹ç­‰ç‚¹ï¼Œå°†æ–‡ä»¶åˆ†å‰²æˆå—ï¼Œæˆ–æ¿€åŠ±ä¸åŒçš„ä»»åŠ¡æ¥å¢åŠ åŠŸèƒ½ã€‚<br>å…¶ä»–å…³äºä¸‹ä¸€ä»£æ•°æ®ç½‘ç»œçš„ç ”ç©¶å°¤å…¶å…³æ³¨ä¸åŒºå—é“¾çš„äº¤äº’ã€‚Huangç­‰äººä¸»è¦æ¶µç›–äº†IPFSå’ŒSwarm, Benisiç­‰äººè®¨è®ºäº†è¿™äº›æŠ€æœ¯ï¼Œæ›´ä¾§é‡äºåŒºå—é“¾æ–¹é¢ã€‚Casinoç­‰äººä»”ç»†ç ”ç©¶äº†å»ä¸­å¿ƒåŒ–å­˜å‚¨çš„ä¸å˜æ€§åŠå…¶åæœå’Œå¯èƒ½çš„å¨èƒã€‚ç„¶è€Œï¼Œç”±äºå¯ä¼¸ç¼©æ€§æˆ–å»¶è¿Ÿé—®é¢˜ï¼Œä¸€äº›æ•°æ®ç½‘ç»œæ˜ç¡®å†³å®šä¸ä½¿ç”¨åŒºå—é“¾ã€‚å› æ­¤ï¼Œåœ¨æˆ‘ä»¬çš„è°ƒæŸ¥è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬å¯¹æ•°æ®ç½‘ç»œé‡‡å–äº†æ›´å¹¿æ³›çš„è§†è§’ï¼Œç€çœ¼äºåŒºå—é“¾ä»¥å¤–çš„æ•°æ®ç½‘ç»œçš„è®¾è®¡å†³ç­–ã€‚<br>Naikå’ŒKeshavamurthyå¯¹æœ€è¿‘çš„P2Pç½‘ç»œç»™å‡ºäº†ä¸€ä¸ªæ›´æ™®éçš„è§‚ç‚¹ã€‚ä»–ä»¬æè¿°äº†ä¸‹ä¸€ä¸ªå±‚æ¬¡çš„P2Pç½‘ç»œï¼ŒåƒBitTorrentå’ŒChordè¿™æ ·çš„ç»å…¸ç½‘ç»œçš„æ¼”å˜ï¼Œå¹¶è®¨è®ºäº†åŠ¨è¡ä¸‹çš„æ€§èƒ½æ–¹é¢ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä»–ä»¬å¯¹ä¸‹ä¸€çº§ç½‘ç»œçš„å®šä¹‰ä¸æˆ‘ä»¬çš„ä¸‹ä¸€ä»£ç½‘ç»œçš„å®šä¹‰ä¸åŒï¼Œå› ä¸ºä»–ä»¬å°†IPFSå®šä¹‰ä¸ºâ€œç»å…¸çš„P2Pç½‘ç»œâ€ã€‚ç›¸åï¼Œæˆ‘ä»¬è®¤ä¸ºï¼ŒP2Pæ•°æ®ç½‘ç»œæ˜¯éšç€æ—¶é—´çš„æ¨ç§»è€Œæ¼”å˜çš„ï¼Œèåˆäº†æ–°å»ºç«‹çš„é¢†åŸŸçš„æƒ³æ³•ï¼Œä¾‹å¦‚ï¼Œæ˜ç¡®çš„æ¿€åŠ±æœºåˆ¶ã€‚</p><h2 id="II-æŠ€æœ¯ä»‹ç»"><a href="#II-æŠ€æœ¯ä»‹ç»" class="headerlink" title="II. æŠ€æœ¯ä»‹ç»"></a>II. æŠ€æœ¯ä»‹ç»</h2><p>è‡ªP2Pæ•°æ®ç½‘ç»œé¦–æ¬¡å‡ºç°ä»¥æ¥ï¼Œå·²ç»è¿‡å»äº†20å¤šå¹´ã€‚åœ¨æ­¤æœŸé—´ï¼Œè¿™é¡¹æŠ€æœ¯ä¸æ–­å‘å±•ï¼Œå¹¶å½±å“äº†æ–°ç½‘ç»œçš„å‘å±•ã€‚æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼ŒåŸºæœ¬ä¸Šæœ‰ä¸‰ä¸ªâ€œæ—¶ä»£â€çš„P2Pæ•°æ®ç½‘ç»œ:å®ƒå¼€å§‹äº1999-2002å¹´çš„P2Pæ–‡ä»¶å…±äº«å’Œç½‘ç»œï¼Œå¦‚BitTorrentå’ŒKademliaï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™æ˜¯ç¬¬ä¸€ä»£ã€‚è¿™ä¸ªæ—¶ä»£ä¹‹åæ˜¯ä¸€ä¸ªâ€œè¿‡æ¸¡é˜¶æ®µâ€ï¼Œä»¥ä¿¡æ¯ä¸ºä¸­å¿ƒçš„ç½‘ç»œå’ŒåŠ å¯†è´§å¸ç­‰æ–°æƒ³æ³•å‡ºç°äº†ã€‚å¤§çº¦è‡ª2014å¹´IPFSçš„å‘æ˜ä»¥æ¥ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†æ–°ä¸€ä»£P2Pæ•°æ®ç½‘ç»œçš„å‘å±•ã€‚ä¸ºäº†æ›´å¥½åœ°ç†è§£å’Œæ¬£èµè¿™äº›å½±å“ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¥ å®šåŸºç¡€çš„é‡è¦â€œå…ˆé©±â€æŠ€æœ¯ï¼Œå³BitTorrentã€Kademliaã€Information-Centric Networkingã€Self-Certifying Nameså’ŒåŒºå—é“¾ã€‚</p><h3 id="A-BitTorrent"><a href="#A-BitTorrent" class="headerlink" title="A. BitTorrent"></a>A. BitTorrent</h3><p>BitTorrentåè®®[6]æ˜¯ä¸€ç§P2Pæ–‡ä»¶å…±äº«åè®®ã€‚å®ƒæœ‰ä¸€ä¸ªæ¿€åŠ±ç»“æ„æ¥æ§åˆ¶ä¸‹è½½è¡Œä¸ºï¼Œè¯•å›¾å®ç°èµ„æºçš„å…¬å¹³æ¶ˆè€—ã€‚BitTorrentçš„ç›®æ ‡æ˜¯æä¾›ä¸€ç§æ¯”ä½¿ç”¨å•ä¸€æœåŠ¡å™¨æ›´æœ‰æ•ˆçš„æ–¹å¼æ¥åˆ†å‘æ–‡ä»¶ã€‚è¿™æ˜¯é€šè¿‡åœ¨æ¯æ¬¡ä¸‹è½½æ—¶å¤åˆ¶æ–‡ä»¶è¿™ä¸€äº‹å®å®ç°çš„ï¼Œä»è€Œä½¿æ–‡ä»¶åˆ†å‘å…·æœ‰è‡ªä¼¸ç¼©æ€§(self-scalable)ã€‚<br>æ–‡ä»¶ä»¥ç§å­å½¢å¼äº¤æ¢ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¯ä¸ªç§å­æ˜¯ä¸€ä¸ªP2Pè¦†ç›–ç½‘ç»œè´Ÿè´£ä¸€ä¸ªæ–‡ä»¶ã€‚ä¸ºäº†ç”¨BitTorrentåè®®äº¤æ¢æ–‡ä»¶ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ª.torrentç±»å‹çš„æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«æ–‡ä»¶çš„å…ƒæ•°æ®å’Œä¸€ä¸ªè·Ÿè¸ªå™¨(tracker)ã€‚ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ª.torrentæ–‡ä»¶ä¸­å®šä¹‰å¤šä¸ªæ–‡ä»¶ã€‚ç§å­æ–‡ä»¶éœ€è¦è¢«æä¾›ï¼Œä¾‹å¦‚ï¼Œåœ¨ç½‘ç»œæœåŠ¡å™¨ä¸Šï¼Œæ–‡ä»¶å¯ä»¥è¢«å…±äº«ã€‚è·Ÿè¸ªå™¨ä½œä¸ºç§å­çš„å¼•å¯¼èŠ‚ç‚¹ã€‚å…·æœ‰å®Œæ•´æ–‡ä»¶çš„å¯¹ç­‰ç‚¹ç§°ä¸ºç§å­ç‚¹ã€‚ä»ç„¶æ²¡æœ‰å‘½ä¸­æ•°æ®å—çš„èŠ‚ç‚¹è¢«ç§°ä¸ºleechersã€‚leecherè¯·æ±‚æ•°æ®å—ï¼Œå¹¶åŒæ—¶ä½œä¸ºå·²ç»ä¸‹è½½çš„å—çš„ä¸‹è½½ç‚¹ã€‚<br>BitTorrentå¦‚ä½•å¤„ç†æ–‡ä»¶çš„æ¦‚å¿µæ¦‚è¿°è§å›¾2ã€‚è§’è‰²å’Œä»–ä»¬çš„äº¤äº’å¦‚ä¸‹:ä¸€ä¸ªå¯¹ç­‰ä½“è·å¾—.torrentæ–‡ä»¶ï¼Œè”ç³».torrentæ–‡ä»¶ä¸­åˆ—å‡ºçš„tracker ğ‘‡ï¼Œè·å¾—ä¸€ä¸ªå¯¹ç­‰ä½“åˆ—è¡¨ï¼Œè¿æ¥åˆ°å¯¹ç­‰ä½“ï¼Œæˆä¸ºä¸€ä¸ªleecherã€‚åœ¨å›¾ä¸­ï¼Œå¯¹ç­‰ä½“ğ‘†0ä½œä¸ºæ–‡ä»¶çš„ç§å­ï¼Œè€Œå¯¹ç­‰ä½“ğ¿ğ‘–ä»£è¡¨è¯·æ±‚ä¸åŒå—çš„leecherã€‚å¦‚.torrentæ–‡ä»¶æ‰€ç¤ºï¼Œè¯¥æ–‡ä»¶è¢«åˆ†å‰²ä¸ºğ‘ğ‘—å—ã€‚å½“leecheræˆåŠŸåœ°è·å¾—äº†æ‰€æœ‰çš„å—åï¼Œå®ƒå°±å˜æˆäº†ä¸€é¢—æ–°çš„ç§å­ã€‚Seedğ‘†0å’Œleechersä¸ºæ–‡ä»¶å»ºç«‹äº†torrentç½‘ç»œã€‚å…¶ä»–æ–‡ä»¶åˆ†å¸ƒåœ¨ä¸åŒçš„ç§å­ç½‘ç»œä¸å¯èƒ½ä¸åŒçš„å¯¹ç­‰ã€‚</p><p><img src="/images/distributed_storage/image-20220428145010491.png" alt="image-20220428145010491">é™¤äº†é›†ä¸­å‘ˆç°çš„è·Ÿè¸ªå™¨ï¼Œè¿˜æœ‰æ— è·Ÿè¸ªçš„ç§å­(trackerless torrents)ã€‚åœ¨æ— è·Ÿè¸ªtorrentä¸­ï¼Œç§å­æ˜¯é€šè¿‡ä¸€ä¸ªåˆ†å¸ƒå¼å“ˆå¸Œè¡¨(DHT)æ‰¾åˆ°çš„ã€‚å®¢æˆ·ç«¯ä»torrentæ–‡ä»¶ä¸­è·å–å¯†é’¥ï¼ŒDHTè¿”å›å¯ç”¨çš„torrentå¯¹ç­‰ç‚¹åˆ—è¡¨ã€‚BitTorrentå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨é¢„å…ˆç¡®å®šçš„èŠ‚ç‚¹æˆ–ç”±torrentæ–‡ä»¶æä¾›çš„èŠ‚ç‚¹æ¥å¼•å¯¼DHTã€‚<br>ä½¿BitTorrentç‹¬ä¸€æ— äºŒ(å¯èƒ½æ˜¯æˆåŠŸçš„)çš„ç‰¹æ€§æ˜¯æ˜ç¡®æ¿€åŠ±å¯¹ç­‰ç‚¹äº¤æ¢æ•°æ®ï¼Œè¿™æ˜¯åœ¨æ–‡ä»¶å…±äº«ç­–ç•¥ä¸­æœ€ç¨€æœ‰çš„éƒ¨åˆ†é¦–å…ˆå’Œtit-for-tatå®ç°çš„ã€‚æœ€ç¨€æœ‰çš„éƒ¨åˆ†é¦–å…ˆæè¿°äº†BitTorrentçš„åŒºå—é€‰æ‹©ã€‚å®ƒç¡®ä¿äº†å—é‡å çš„æœ€å°åŒ–ï¼Œä½¿æ–‡ä»¶äº¤æ¢å¯¹äºèŠ‚ç‚¹å˜åŠ¨æ›´åŠ å¥å£®ã€‚æœ€å¥½é€‰æ‹©ç½‘ç»œä¸­æœ€ä¸å¸¸è§çš„å—è¿›è¡Œä¸‹è½½ã€‚é’ˆé”‹ç›¸å¯¹æè¿°äº†å¸¦å®½èµ„æºåˆ†é…æœºåˆ¶ã€‚åœ¨BitTorrentå¯¹ç­‰ç‚¹å†³å®šè°ä»–ä»¬ä¸Šä¼ æ•°æ®åŸºäºä¸‹è½½çš„æ•°æ®ä»å¯¹ç­‰ç‚¹ã€‚è¿™åº”è¯¥é˜²æ­¢leecheråªä¸‹è½½è€Œä¸æä¾›ä»»ä½•èµ„æºç»™åˆ«äººã€‚<br>BitTorrentå¾—åˆ°äº†å¾ˆå¥½çš„ç ”ç©¶ï¼Œå¹¶è¯æ˜äº†å®ƒçš„æ—¶é—´è€ƒéªŒã€‚å°½ç®¡å®ƒå·²ç»å¾ˆè€äº†ï¼Œä½†ä»æœ‰æ•°ç™¾ä¸‡äººåœ¨ç§¯æåœ°ä½¿ç”¨[45]æ¥å…±äº«æ–‡ä»¶ï¼Œå¹¶ä¸ºè¾ƒæ–°çš„ç‚¹å¯¹ç‚¹æ–‡ä»¶åˆ†å‘ç³»ç»Ÿæä¾›äº†ä¸€ä¸ªæ¦œæ ·ã€‚æ­¤å¤–ï¼ŒBitTorrentåŸºé‡‘ä¼šå’ŒTronåŸºé‡‘ä¼šå¼€å‘äº†BitTorrent Token (BTT)ï¼Œä½œä¸ºåŸºäºåŒºå—é“¾çš„æ¿€åŠ±å±‚ï¼Œä»¥å¢åŠ æ–‡ä»¶çš„å¯ç”¨æ€§å’ŒæŒä¹…æ€§ã€‚æ–°çš„æ¿€åŠ±ç»“æ„é€šè¿‡æ”¶è´­æ•°æ®æ‰©å¤§äº†é’ˆé”‹ç›¸å¯¹çš„ç«äº‰ã€‚æŠ¥ä»·æ•°æ®(bid data)å†³å®šäº†å¯¹ç­‰ç«¯ä¸ºæŒç»­æœåŠ¡æ»¡è¶³çš„BTT/byteé€Ÿç‡ã€‚ä½œä¸ºæ”¯ä»˜çš„äº¤æ¢ï¼Œå¯¹ç«¯è¢«è§£é™¤é˜»å¡å¹¶æœ‰èµ„æ ¼æ¥æ”¶æ•°æ®ã€‚ä»¤ç‰Œçš„äº¤æ¢ç”±æ”¯ä»˜é€šé“å¤„ç†ã€‚</p><h3 id="B-Kademlia"><a href="#B-Kademlia" class="headerlink" title="B. Kademlia"></a>B. Kademlia</h3><p>ä»ä»Šå¤©çš„è§’åº¦æ¥çœ‹ï¼ŒKademliaå¯èƒ½æ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„DHTã€‚æ­£å¦‚æˆ‘ä»¬ç¨åå°†çœ‹åˆ°çš„ï¼Œå¤§å¤šæ•°P2Pæ•°æ®ç½‘ç»œéƒ½ä»¥æŸç§æ–¹å¼æ„å»ºåœ¨Kademliaä¹‹ä¸Šã€‚Kademliaè¿˜å½±å“äº†P2Pæ–‡ä»¶äº¤æ¢åè®®ï¼Œå¦‚BitTorrentï¼Œå®ƒé€šè¿‡ä½¿ç”¨åŸºäºKademliaçš„DHTæ”¯æŒæ— è·Ÿè¸ªçš„torrentã€‚<br>ä¸€èˆ¬æ¥è¯´ï¼ŒKademliaå¯ä»¥è¢«å½’ç±»ä¸ºç»“æ„åŒ–çš„è¦†ç›–ç½‘ç»œï¼Œå®ƒè§„å®šäº†å¦‚ä½•æ„é€ å’Œç»´æŠ¤P2Pç½‘ç»œã€‚ä¸ºæ­¤ï¼Œå¯¹ç­‰ä½“è¢«åˆ†é…ä¸€ä¸ªèº«ä»½ï¼Œè¿™ä¸ªèº«ä»½å†³å®šäº†å®ƒçš„ä½ç½®ï¼Œè¿›è€Œå†³å®šäº†å®ƒçš„é‚»å±…ã€‚å¯¹äºé‚»å±…é€‰æ‹©ï¼Œä½¿ç”¨å¼‚æˆ–åº¦é‡ã€‚å¼‚æˆ–åº¦è§„çš„ä¼˜ç‚¹æ˜¯å®ƒæ˜¯å¯¹ç§°çš„å’Œå•å‘çš„ã€‚æ ¹æ®å®ƒä»¬çš„XORè·ç¦»ï¼ŒèŠ‚ç‚¹è¢«åˆ†ç±»ä¸ºğ‘˜-bucketsã€‚bucketè¢«æ’åˆ—æˆäºŒå‰æ ‘ï¼Œå…¶ä¸­æœ€çŸ­çš„å‰ç¼€å†³å®šäº†bucketã€‚å¦‚æœä¸€ä¸ªæ–°èŠ‚ç‚¹å±äºä¸€ä¸ªåŒ…å«ğ‘˜ä¸ªèŠ‚ç‚¹(åŒ…æ‹¬å®ƒè‡ªå·±)çš„æ¡¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¡¶å°†è¢«åˆ†æˆæ›´å°çš„æ¡¶ï¼Œå¦åˆ™è¿™ä¸ªæ–°èŠ‚ç‚¹å°†è¢«ä¸¢å¼ƒã€‚å…·æœ‰8ä½æ ‡è¯†ç¬¦çš„ç¤ºä¾‹æ€§Kademliaæ ‘å¦‚å›¾3æ‰€ç¤ºã€‚</p><p><img src="/images/distributed_storage/image-20220428145024512.png" alt="image-20220428145024512"></p><h3 id="C-Information-Centric-Networking"><a href="#C-Information-Centric-Networking" class="headerlink" title="C. Information-Centric Networking"></a>C. Information-Centric Networking</h3><p>å¦ä¸€ä¸ªå€¼å¾—ä¸€æçš„å‰èº«æ˜¯ä¿¡æ¯ä¸­å¿ƒç½‘ç»œ(ICN)ã€‚å°½ç®¡ICNä¸æ˜¯ä¸€ä¸ªP2Pæ•°æ®ç½‘ç»œï¼Œä½†å®ƒçš„ä¸€äº›æƒ³æ³•å’Œæ¦‚å¿µè‡³å°‘ä¸æŸäº›æ•°æ®ç½‘ç»œç›¸ä¼¼ã€‚ä¸P2Pæ•°æ®ç½‘ç»œä¸åŒï¼ŒICNæå‡ºæ”¹å˜ç½‘ç»œå±‚ã€‚åŒ…çš„è·¯ç”±å’Œæµåº”è¯¥ä»ç‚¹å¯¹ç‚¹ä½ç½®æœç´¢æ›´æ”¹ä¸ºç›´æ¥ä»ç½‘ç»œè¯·æ±‚å†…å®¹ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æƒ³è¦æ£€ç´¢ä¸€äº›æ•°æ®ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªç½‘ç«™ï¼Œå¹¶ä¸”æˆ‘ä»¬çŸ¥é“è¿™ä¸ªç½‘ç«™åœ¨example.comæ˜¯å¯ç”¨çš„ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡DNSè¯·æ±‚ç«™ç‚¹ä¸»æœºçš„ä½ç½®ï¼Œå³IPåœ°å€ã€‚ç„¶åï¼Œæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªè¿æ¥æ¥æ£€ç´¢ç½‘ç«™ã€‚åœ¨ICNä¸­ï¼Œæˆ‘ä»¬å°†ç›´æ¥è¯·æ±‚æ•°æ®ï¼Œè€Œä¸ä¼šå¯»å€æ•°æ®æ‰€åœ¨çš„ä¸»æœºã€‚ä»»ä½•å­˜å‚¨ç½‘ç«™çš„èŠ‚ç‚¹éƒ½å¯ä»¥ç«‹å³æä¾›æ•°æ®ã€‚<br>Jacobsonç­‰äººæå‡ºäº†ä»¥å†…å®¹ä¸ºä¸­å¿ƒçš„ç½‘ç»œï¼Œå…¶ä¸­è¿™äº›å†…å®¹è¯·æ±‚æ˜¯interest packetã€‚å†…å®¹çš„æ‰€æœ‰è€…å¯ä»¥ç›´æ¥ç”¨åŒ…å«è¯¥å†…å®¹çš„æ•°æ®åŒ…å›ç­”æ„Ÿå…´è¶£çš„æ•°æ®åŒ…ã€‚è¿™å°±éœ€è¦åœ¨åŸºç¡€è®¾æ–½çº§åˆ«ä¸Šå®ç°æµé‡æ§åˆ¶ã€è·¯ç”±å’Œå®‰å…¨çš„å…¶ä»–æœºåˆ¶ã€‚å¯¹interest packetè¿›è¡Œå¹¿æ’­ï¼Œå¯¹æ•°æ®æ„Ÿå…´è¶£çš„å¯¹ç­‰ä½“å¯ä»¥å…±äº«èµ„æºã€‚ç›®å‰æœ‰å¤šä¸ªå¤„ç†ICNçš„é¡¹ç›®ï¼Œä¾‹å¦‚å‘½åæ•°æ®ç½‘ç»œ(NDN)ã€‚å¯¹äºNtorrentï¼ŒMastorakisç­‰äººæå‡ºäº†ä¸€ä¸ªNDNçš„æ‰©å±•ï¼Œåœ¨NDNä¸­å®ç°äº†ä¸€ä¸ªç±»ä¼¼bittorrentçš„æœºåˆ¶ã€‚å…³äºICNçš„æ›´å¤šä¸€èˆ¬ä¿¡æ¯å¯åœ¨ä¸­æ‰¾åˆ°ã€‚ç”±äºæ•°æ®ç½‘ç»œä»¥å†…å®¹ä¸ºä¸­å¿ƒçš„æ€§è´¨ï¼Œå®ƒä»¬å¯ä»¥è¢«å¹¿æ³›åœ°è§£é‡Šä¸ºICNçš„è¦†ç›–å®ç°ã€‚</p><h3 id="D-Self-Certifying-Names"><a href="#D-Self-Certifying-Names" class="headerlink" title="D .Self-Certifying Names"></a>D .Self-Certifying Names</h3><p>ä»ä»¥ä¸»æœºä¸ºä¸­å¿ƒçš„é€šä¿¡åˆ°ä»¥å†…å®¹ä¸ºä¸­å¿ƒçš„é€šä¿¡çš„å˜åŒ–å¼•å…¥äº†æ–°çš„å®‰å…¨é—®é¢˜ã€‚æ­¤å¤–ï¼Œå½“ç¼“å­˜æˆä¸ºç½‘ç»œçš„ä¸»è¦ç‰¹å¾æ—¶ï¼Œéœ€è¦è€ƒè™‘ç‰¹å®šçš„å¨èƒï¼Œä¾‹å¦‚ç¼“å­˜ä¸­æ¯’æˆ–é’ˆå¯¹ç¼“å­˜çš„æ‹’ç»æœåŠ¡æ”»å‡»ã€‚æ›´å¹¿æ³›åœ°è¯´ï¼ŒICNçš„å®‰å…¨é—®é¢˜ä¸€èˆ¬åŒ…æ‹¬å†…å®¹è®¤è¯ã€æˆæƒå’Œè®¿é—®æ§åˆ¶ä»¥åŠéšç§ã€‚<br>ç›®å‰ï¼Œå®‰å…¨ç ”ç©¶çš„ä¸»è¦ç„¦ç‚¹åœ¨äºè®¤è¯ã€‚ç”±äºç¼“å­˜çš„å¹¿æ³›ä½¿ç”¨ï¼Œæ•°æ®æä¾›è€…ä¸å†ä¸€å®šæ˜¯å¯¹è±¡çš„åŸå§‹æº(æ•°æ®æ‰€æœ‰è€…)ã€‚è¿™éœ€è¦ä½¿æ¥æ”¶è€…èƒ½å¤Ÿè¯„ä¼°å¯¹è±¡çš„æœ‰æ•ˆæ€§(å®Œæ•´æ€§)ã€æ¥æº(å†…å®¹æ¥æº)å’Œç›¸å…³æ€§çš„æœºåˆ¶ã€‚<br>ç¡®ä¿æœ‰æ•ˆæ€§å’Œç›¸å…³æ€§çš„ä¸€ç§æ–¹æ³•æ˜¯è‡ªæˆ‘è®¤è¯åç§°ã€‚å¯ä»¥ä½¿ç”¨æ•£åˆ—æŒ‡é’ˆ(æˆ–æ›´é€šç”¨çš„å†…å®¹æ•£åˆ—)æ¥å¼•ç”¨å†…å®¹ï¼Œä»è€Œå¯ç”¨è‡ªè®¤è¯åç§°ã€‚æ–‡ä»¶çš„å†…å®¹è¢«ç”¨ä½œåŠ å¯†å“ˆå¸Œå‡½æ•°çš„è¾“å…¥ï¼Œä¾‹å¦‚SHA-3ã€‚å¾—åˆ°çš„æ‘˜è¦å¯ä»¥ç”¨æ¥è¯†åˆ«å†…å®¹ï¼Œå®¢æˆ·æœºå¯ä»¥åœ¨æœ¬åœ°éªŒè¯æ–‡ä»¶çš„å®Œæ•´æ€§ã€‚å“ˆå¸Œå‡½æ•°çš„åŠ å¯†ç‰¹æ€§ï¼Œæœ€é‡è¦çš„æ˜¯é¢„å›¾åƒå’ŒæŠ—ç¢°æ’ï¼Œç¡®ä¿æ²¡æœ‰äººå¯ä»¥åœ¨ä¸æ”¹å˜æ‘˜è¦çš„æƒ…å†µä¸‹æ›¿æ¢æˆ–ä¿®æ”¹è¾“å…¥æ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåç§°æä¾›äº†å®Œæ•´æ€§å’Œç›¸å…³æ€§ï¼Œä½†æ˜¯ï¼Œè°è´Ÿè´£éªŒè¯å¯¹è±¡ï¼Œä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯å’Œ/æˆ–ä¸­é—´ç«¯ï¼Œä»ç„¶æ˜¯å€¼å¾—æ€€ç–‘çš„ã€‚æ­¤å¤–ï¼Œè‡ªæˆ‘è¯æ˜çš„åç§°æœ¬èº«ä¸èƒ½æä¾›å‡ºå¤„æˆ–è¯æ˜ç‰©ä½“çš„æ¥æºã€‚åŠ å¯†ç­¾åå¯ä»¥ä¿è¯å¯¹è±¡æ¥æºçš„çœŸå®æ€§ï¼Œä½†éœ€è¦å…¬é’¥åŸºç¡€è®¾æ–½æˆ–ä¿¡ä»»ç½‘ç»œæ¥éªŒè¯ç­¾åã€‚è™½ç„¶è¿™å…è®¸éªŒè¯å¯¹è±¡æ¥æºçš„çœŸå®æ€§ï¼Œä½†ä»ç„¶å¯èƒ½å‘é€æ ¼å¼ä¸æ­£ç¡®çš„å¯¹è±¡ï¼Œå› æ­¤éœ€è¦ç¡®ä¿å®Œæ•´æ€§çš„æœºåˆ¶ã€‚é€šè¿‡ç¼“å­˜çš„å†…å®¹çš„å¯¿å‘½éœ€è¦è°¨æ…çš„å¯†é’¥ç®¡ç†ï¼Œä»¥é˜²æ­¢åŠ å¯†å‡­æ®è¢«ç ´åã€‚<br>è®¿é—®æ§åˆ¶ä¹Ÿæœ‰ç±»ä¼¼çš„é—®é¢˜:ä¸€æ—¦æ•°æ®å‘å¸ƒï¼Œå°±å¾ˆéš¾é™åˆ¶è®¿é—®æˆ–æ’¤é”€å‘å¸ƒã€‚åŠ å¯†å¯èƒ½ä¼šé™åˆ¶è®¿é—®ï¼Œä½†å¯èƒ½éœ€è¦å¸¦å¤–å¯†é’¥åˆ†å‘ã€‚å…³äºICNçš„å®‰å…¨ã€éšç§ã€è®¿é—®æ§åˆ¶å’Œå…¶ä»–æŒ‘æˆ˜çš„è¿›ä¸€æ­¥è§è§£è§[53,54]ã€‚</p><h3 id="E-åŒºå—é“¾"><a href="#E-åŒºå—é“¾" class="headerlink" title="E. åŒºå—é“¾"></a>E. åŒºå—é“¾</h3><p>2008å¹´æ¯”ç‰¹å¸çš„å¼•å…¥ä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›äº†æ–°çš„å¯èƒ½æ€§ã€‚æ¯”ç‰¹å¸æ˜¯ä¸€ç§å·§å¦™è€Œå¤æ‚çš„ç»„åˆï¼Œå®ƒç»“åˆäº†æ¥è‡ªé“¾æ¥æ—¶é—´é¢†åŸŸçš„å„ç§æƒ³æ³•â€”â€”åŠ å¯†ã€æ•°å­—ç°é‡‘ã€P2Pç½‘ç»œã€æ‹œå åº­å®¹é”™å’Œå¯†ç å­¦ã€‚æ¯”ç‰¹å¸å¸¦æ¥çš„å…³é”®åˆ›æ–°ä¹‹ä¸€æ˜¯ä¸€ç§å¼€æ”¾çš„å…±è¯†ç®—æ³•ï¼Œå®ƒå¯ä»¥ç§¯ææ¿€åŠ±åŒè¡Œéµå®ˆè§„åˆ™ã€‚å› æ­¤ï¼Œå®ƒä½¿ç”¨äº†åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ç”Ÿæˆçš„ç¡¬å¸çš„æ¦‚å¿µï¼Œå³æŒ–çŸ¿ã€‚<br>è™½ç„¶æœ¯è¯­åŒºå—é“¾é€šå¸¸æŒ‡æ•´ä¸ªç³»ç»ŸåŠå…¶åè®®ï¼Œä½†å®ƒä¹ŸæŒ‡ç±»ä¼¼äºå“ˆå¸Œé“¾æˆ–å“ˆå¸Œæ ‘çš„ç‰¹å®šæ•°æ®ç»“æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒºå—é“¾ä½¿ç”¨åŠ å¯†æ•£åˆ—å¯¹é“¾æ¥åˆ°å…¶å‰ä»»çš„å—è¿›è¡Œæ’åºã€‚è¿™ç§é“¾æ¥çš„æ•°æ®ç»“æ„ç¡®ä¿äº†åŒºå—é“¾æ•°æ®(ä¾‹å¦‚äº‹åŠ¡)çš„å®Œæ•´æ€§ã€‚åŒºå—é“¾çš„ä¸€è‡´æ€§ç”±å…±è¯†ç®—æ³•ä¿è¯ï¼Œä¾‹å¦‚æ¯”ç‰¹å¸ä¸­çš„Nakamotoå…±è¯†ã€‚æœ‰å…³æ¯”ç‰¹å¸å’ŒåŒºå—é“¾çš„æ›´å¤šç»†èŠ‚ï¼Œè¯·å‚é˜…ã€‚<br>ç”±äºåŒºå—é“¾å—åˆ°è¯¸å¦‚å¯ä¼¸ç¼©æ€§ç­‰é—®é¢˜çš„å›°æ‰°ï¼Œäººä»¬å¼€å‘äº†ä¸åŒçš„è®¾è®¡æ¥ç¼“è§£è¿™äº›é—®é¢˜ã€‚ä¸åŒçš„è®¾è®¡å¼€è¾Ÿäº†ä¸€ä¸ªæ–°çš„ç±»åˆ«ï¼Œç§°ä¸ºåˆ†å¸ƒå¼åˆ†ç±»è´¦æŠ€æœ¯(DLT)ã€‚dltæä¾›åˆ†å¸ƒå¼ã€æ‹œå åº­å¼å®¹é”™ã€ä¸å¯å˜å’Œæœ‰åºçš„æ—¥å¿—ã€‚ä¸å¹¸çš„æ˜¯ï¼Œç”±äºä¸€ç³»åˆ—çš„å¯æ‰©å±•æ€§é—®é¢˜å’Œé“¾ä¸Šå­˜å‚¨å®¹é‡æœ‰é™ï¼Œçº¯ç²¹åŸºäºDLTçš„æ•°æ®ç½‘ç»œçš„å¯è¡Œæ€§æœ‰é™[57,58]ã€‚æ­¤å¤–ï¼Œåœ¨è¢«è®¾è®¡ä¸ºäº¤æ¢å’Œä»·å€¼å­˜å‚¨åª’ä»‹çš„åŒºå—é“¾(å³æ¯”ç‰¹å¸ç­‰åŠ å¯†è´§å¸)ä¸­å­˜å‚¨å¤§é‡æ•°æ®ä¼šå¯¼è‡´é«˜é¢çš„äº¤æ˜“è´¹ç”¨ã€‚ç„¶è€Œï¼Œdltçš„ç ”ç©¶å’Œå¼€å‘è¡¨æ˜äº†åŸºäºåŒºå—é“¾çš„æ•°æ®ç½‘ç»œçš„å¯è¡Œæ€§ï¼Œä¾‹å¦‚Arweave(å‚è§ç¬¬4 - eèŠ‚)ã€‚<br>ç„¶è€Œï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå…è®¸å»ä¸­å¿ƒåŒ–æ”¯ä»˜çš„åŠ å¯†è´§å¸å¯ä»¥ä½œä¸ºä¸€ç§æ¿€åŠ±ç»“æ„åœ¨P2Pæ•°æ®ç½‘ç»œä¸­ä½¿ç”¨ã€‚æ­£å¦‚æˆ‘ä»¬å°†åœ¨ä¸‹æ–‡ä¸­é˜è¿°çš„ï¼Œè¿™ç§æ¿€åŠ±ç»“æ„å¯ä»¥å¢åŠ æ•°æ®ç½‘ç»œçš„å¥å£®æ€§å’Œå¯ç”¨æ€§ï¼Œä»è€Œè§£å†³å‰å‡ ä»£äººçš„å¼±ç‚¹ã€‚</p><h2 id="III-INTERPLANETARY-FILE-SYSTEM-IPFS"><a href="#III-INTERPLANETARY-FILE-SYSTEM-IPFS" class="headerlink" title="III. INTERPLANETARY FILE SYSTEM (IPFS)"></a>III. INTERPLANETARY FILE SYSTEM (IPFS)</h2><h2 id="IV-RELATED-P2P-DATA-NETWORKS"><a href="#IV-RELATED-P2P-DATA-NETWORKS" class="headerlink" title="IV. RELATED P2P DATA NETWORKS"></a>IV. RELATED P2P DATA NETWORKS</h2><h3 id="A-Swarm"><a href="#A-Swarm" class="headerlink" title="A. Swarm"></a>A. Swarm</h3><p>Swarmæ˜¯ä¸€ä¸ªç”±ä»¥å¤ªåŠåŸºé‡‘ä¼šå¼€å‘çš„ç”¨äºå­˜å‚¨å’Œäº¤ä»˜å†…å®¹çš„P2Påˆ†å¸ƒå¼å¹³å°ã€‚å®ƒé€šè¿‡ä¸å…è®¸ä»»ä½•åˆ é™¤ï¼Œä»¥åŠä¸Šä¼ å’Œå¿˜è®°å±æ€§æ¥æŠµæŠ—å®¡æŸ¥ã€‚ç¾¤æ˜¯ä¸ºä»¥å¤ªåŠæ„å»ºçš„ï¼Œå› æ­¤åœ¨æŸäº›æ–¹é¢ä¾èµ–å¹¶å…±äº«ä»¥å¤ªåŠçš„è®¾è®¡æ–¹é¢ã€‚Swarmçš„ç›®æ ‡æ˜¯ä¸ºweb3æ ˆæä¾›å»ä¸­å¿ƒåŒ–çš„å­˜å‚¨å’Œæµåª’ä½“åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºå…±äº«äº’åŠ¨å†…å®¹çš„å»ä¸­å¿ƒåŒ–çš„ã€æŠµåˆ¶å®¡æŸ¥çš„ç¯å¢ƒã€‚ä»¥å¤ªåŠåŸºé‡‘ä¼šå°†Swarmè®¾æƒ³ä¸ºâ€œä¸–ç•Œè®¡ç®—æœºçš„ç¡¬ç›˜â€ã€‚<br>ä¸IPFSç±»ä¼¼çš„æ˜¯Swarmä½¿ç”¨åŸºäºå†…å®¹çš„å¯»å€ã€‚ä¸IPFSç›¸åçš„æ˜¯Swarmä¸­åŸºäºå†…å®¹çš„å¯»å€ä¹Ÿå†³å®šäº†å­˜å‚¨ä½ç½®ã€‚ä¸ºäº†ç¡®ä¿å¯ç”¨æ€§ï¼Œç¾¤æ§å¼•å…¥äº†èŒè´£èŒƒå›´ã€‚è´£ä»»åŒºåŸŸæ˜¯èŠ‚ç‚¹çš„è¿‘é‚»ã€‚è´£ä»»åŒºåŸŸä¸­çš„èŠ‚ç‚¹åº”è¯¥æä¾›å—å†—ä½™ã€‚é€šè¿‡ç‰ˆæœ¬æ§åˆ¶æ”¯æŒå¯å˜æ€§ï¼Œä¿æŒæ–‡ä»¶çš„æ¯ä¸ªç‰ˆæœ¬ã€‚æè¦ã€ä¸“é—¨æ„é€ å’Œå¯»å€çš„å—ä»¥åŠä»¥å¤ªåŠåç§°æœåŠ¡(ENS)ç”¨äºæŸ¥æ‰¾å˜å¼‚æ–‡ä»¶ã€‚ENSæ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆ137ä¸­å®šä¹‰çš„æ ‡å‡†ã€‚å®ƒæä¾›äº†å°†åœ°å€è½¬æ¢ä¸ºäººç±»å¯è¯»åç§°çš„èƒ½åŠ›ã€‚ä¸IPNSä¸åŒï¼ŒENSæ˜¯ä½œä¸ºä»¥å¤ªåŠåŒºå—é“¾ä¸Šçš„æ™ºèƒ½åˆçº¦æ¥å®ç°çš„ã€‚</p><p>å›¾6æ˜¯äº‘è®¡ç®—çš„æ¦‚å¿µæ¦‚è¿°ï¼Œæˆ‘ä»¬ç»§ç»­ä½¿ç”¨ä½œè€…å’Œå®¡ç¨¿äººä¹‹é—´äº¤æ¢çš„è°ƒæŸ¥è®ºæ–‡ä½œä¸ºè¿è¡Œä¾‹å­ã€‚Swarmä¼šå°†ä¸€ä¸ªæ–‡ä»¶åˆ†å‰²ï¼Œä¹Ÿå°±æ˜¯å°†è°ƒæŸ¥åˆ†æˆä¸€äº›å—ï¼Œè¿™äº›å—è¢«å®‰æ’åœ¨ä¸€ä¸ªæ‰€è°“çš„Swarm hashä¸­ã€‚Swarmå“ˆå¸Œæ˜¯æ’åˆ—åœ¨Merkleæ ‘ä¸­çš„å—çš„ç»„åˆï¼Œå…¶ä¸­å¶èŠ‚ç‚¹ä»£è¡¨è¾“å…¥æ•°æ®ï¼Œä¸­é—´èŠ‚ç‚¹æ˜¯å­èŠ‚ç‚¹çš„å¼•ç”¨ç»„åˆã€‚å¾—åˆ°çš„æ•°æ®å—è¢«ä¸Šä¼ åˆ°ç½‘ç»œã€‚ç¾¤é‡‡ç”¨Kademliaæ‹“æ‰‘ç»“æ„ï¼Œé‚»å±…ç”±å®ƒä»¬çš„æ ‡è¯†è·ç¦»å†³å®šã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé™¤äº†æ¡¶çš„è¿æ¥å¤–ï¼ŒSwarmè¿˜ä¾èµ–äºä¸€ä¸ªæœ€è¿‘çš„é‚»å±…é›†åˆï¼Œå³è¯¥é‚»å±…çš„å‰©ä½™èŠ‚ç‚¹ã€‚ä¸€ä¸ªé‚»å±…åŸºæœ¬ä¸Šæ˜¯åŒ…å«è‡³å°‘ä¸‰ä¸ªå…¶ä»–å¯¹ç­‰èŠ‚ç‚¹çš„æ¡¶æ•°é‡æœ€å°‘çš„æ¡¶ã€‚è¿™ä¸ªæœ€è¿‘çš„é‚»å±…é›†è´Ÿè´£å¤åˆ¶ï¼Œå¹¶ä¸”ä¸ä¸€å®šæ˜¯å¯¹ç§°çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨å›¾6ä¸­ï¼Œğ‘3çš„æœ€è¿‘é‚»å±…æ˜¯ğ‘2ï¼Œğ‘1å’Œğ‘0ï¼Œè€Œğ‘12çš„é‚»å±…æ˜¯ğ‘8ï¼Œğ‘9ï¼Œğ‘10å’Œğ‘11(å‚è§å›¾3)ã€‚ä¸Šä¼ çš„å—è¢«ä¸­ç»§ï¼Œå­˜å‚¨å’Œå¤åˆ¶åœ¨æœ€è¿‘çš„åœ°å€ã€‚è¦æ£€ç´¢è°ƒæŸ¥ï¼Œå¿…é¡»ä½¿ç”¨ç¾¤æ ¹å“ˆå¸Œã€‚ç½‘ç»œæ ¹æ®å†…å®¹åœ°å€è½¬å‘è¯·æ±‚ã€‚</p><p><img src="/images/distributed_storage/image-20220428151148330.png" alt="image-20220428151148330"></p><p>ä¸ºäº†ä¿è¯ç¡®ä¿èŠ‚ç‚¹è¡Œä¸ºï¼ŒSwarmæä¾›äº†ä¸€ä¸ªæ¿€åŠ±å±‚ã€‚å…¶æ¿€åŠ±æœºåˆ¶åŸºäºSWAPã€SWEARå’ŒSWINDLEã€‚SWAP (SWarm Accounting Proto- col)å¤„ç†èŠ‚ç‚¹é—´æ•°æ®äº¤æ¢çš„å‡è¡¡ã€‚å„èŠ‚ç‚¹ç»´æŠ¤æœ¬åœ°è®¡è´¹ä¿¡æ¯ã€‚å¯¹ç­‰ç‚¹åŸºæœ¬ä¸Šæ˜¯åœ¨æ²¡æœ‰åˆ©æ¯çš„æƒ…å†µä¸‹ä»æœåŠ¡èŠ‚ç‚¹è´­ä¹°ä¸€å¤§å—ã€‚åŒºå—çš„ä»·æ ¼å¯ä»¥åœ¨åŒè¡Œä¹‹é—´åå•†ã€‚è¯·æ±‚ä¼šè¢«å¤„ç†åˆ°æŸä¸ªä¸å¹³è¡¡çš„é˜ˆå€¼ï¼Œå³å—è¢«ä¸å¹³è¡¡åœ°å¤„ç†ï¼Œå€ºåŠ¡å˜å¾—è¿‡é«˜ã€‚åœ¨è¾¾åˆ°ç¬¬ä¸€ä¸ªé˜ˆå€¼åï¼ŒèŠ‚ç‚¹å¸Œæœ›å¾—åˆ°å€ºåŠ¡çš„ç»“æ¸…ä»¥è¿›è¡Œè¿›ä¸€æ­¥çš„æœåŠ¡ã€‚å¦‚æœè¾¾åˆ°ç¬¬äºŒä¸ªé˜ˆå€¼ï¼Œåˆ™ç”±äºæœªæ¸…å¿å€ºåŠ¡ï¼ŒèŠ‚ç‚¹æ–­å¼€è¿æ¥ã€‚å€ºåŠ¡å¯ä»¥ç”¨æ”¯ç¥¨ç»“ç®—ï¼Œæ”¯ç¥¨å¯ä»¥è¢«ç†è§£ä¸ºä¸€ç§ç®€å•çš„å•å‘æ”¯ä»˜æ¸ é“ã€‚SWarm Enforcement And Registration (SWEAR)å’ŒSecured With INsurance Deposit Litigation And Escrow (SWINDLE)å°†ç¡®ä¿å†…å®¹çš„æŒä¹…æ€§ã€‚æ­¤å¤–ï¼ŒSwarmçš„æ¿€åŠ±æœºåˆ¶æœ‰é‚®ç¥¨ï¼Œå®ƒæä¾›äº†ä¸€ç§æœºåˆ¶æ¥é˜²æ­¢åƒåœ¾ä¸Šä¼ ï¼Œä¹Ÿæä¾›äº†ä¸€ç§å½©ç¥¨æœºåˆ¶æ¥æ¿€åŠ±å—çš„æŒç»­å­˜å‚¨ã€‚<br>é‚®ç¥¨å¯é€šè¿‡æ™ºèƒ½åˆçº¦æ‰¹é‡è·å–ã€‚é‚®ç¥¨è¢«é™„åœ¨ä¸Šä¼ çš„åŒºå—ä¸Šï¼Œå¹¶ç”±é‚®ç¥¨æ‰€æœ‰è€…ç­¾åã€‚è¿™å¯ä»¥ä½œä¸ºä¸Šä¼ åŒºå—çš„ä»˜æ¬¾å‡­è¯ã€‚åªèƒ½é€šè¿‡ä¸­ç»§æˆ–å­˜å‚¨èŠ‚ç‚¹ç›‘æ§æˆ³è®°çš„ä½¿ç”¨æƒ…å†µã€‚è¿™å…è®¸é‡å¤ä½¿ç”¨/è¿‡åº¦ä½¿ç”¨é‚®ç¥¨ã€‚ä¸ºäº†å‡å°‘è¿‡åº¦ä½¿ç”¨æˆ³è®°çš„é£é™©ï¼Œæˆ³è®°åªç”¨äºæŸäº›å‰ç¼€å†²çªï¼Œå°†æˆ³è®°é™åˆ¶ä¸ºç‰¹å®šå­˜å‚¨åŒºåŸŸä¸­çš„å—ã€‚<br>é‚®ç¥¨è¢«ç”¨äºæŠ½å¥–ã€‚å½©ç¥¨ä¸ºå—æä¾›äº†ä»·å€¼ï¼Œä»¥é˜²æ­¢å—çš„æ—©æœŸåˆ é™¤ã€‚é€šè¿‡æŠ½ç­¾ï¼Œå­˜å‚¨èŠ‚ç‚¹å¯ä»¥è·å¾—é‚®ç¥¨çš„éƒ¨åˆ†åˆå§‹æˆæœ¬ã€‚åœ¨å½©ç¥¨ä¸­é€‰æ‹©ä¸€ä¸ªåœ°å€åŒºåŸŸã€‚ä¸´è¿‘åŒºåŸŸçš„èŠ‚ç‚¹å¯ä»¥ç”³è¯·å¥–åŠ±ã€‚é€šè¿‡åº”ç”¨ï¼ŒèŠ‚ç‚¹å¯ä»¥è¯æ˜è¯¥åŒºåŸŸå†…å—çš„æ‰€æœ‰æƒã€‚èŠ‚ç‚¹å®šä¹‰äº†å­˜å‚¨å—çš„ä»·æ ¼ã€‚åœ¨è¯æ˜æ‹¥æœ‰è¿™äº›å—ä¹‹åï¼Œæ‹¥æœ‰æœ€ä¾¿å®œå¥–å“çš„èŠ‚ç‚¹è·å¾—å¥–åŠ±ã€‚è®¨è®º:ç¾¤æä¾›äº†å¤æ‚çš„æ¿€åŠ±æ¦‚å¿µã€‚ä¸ä¾èµ–åŒºå—é“¾äº¤æ˜“ç›¸æ¯”ï¼Œç”¨æ”¯ç¥¨ç»“ç®—ä¸å¹³è¡¡æ£€ç´¢æä¾›äº†ä¸€ç§æ›´å¿«ã€æ›´ä¾¿å®œçš„ç»“ç®—å·®å¼‚çš„æ–¹æ³•ã€‚ä¸å½©ç¥¨ä¸€èµ·å‘è¡Œçš„é‚®ç¥¨ä¸ºå‚¨å­˜å¤§å—çš„æ•°æ®æä¾›äº†é¢å¤–çš„æ¿€åŠ±ã€‚æ­¤å¤–ï¼Œè™½ç„¶ä¸Šä¼ å†…å®¹éœ€è¦èŠ±è´¹æˆæœ¬ï¼Œä½†èŠ‚ç‚¹å¯ä»¥é€šè¿‡ä¸»åŠ¨ä¸ºå‚ä¸è€…æä¾›å—æ¥èµšå–æˆæœ¬ã€‚ç„¶è€Œï¼Œé‚®ç¥¨å¯ä»¥å°†ç”¨æˆ·é“¾æ¥åˆ°ä¸Šä¼ çš„å†…å®¹ã€‚è™½ç„¶ç¾¤é›†æä¾›äº†ä¸€å®šç¨‹åº¦çš„å‘é€è€…åŒ¿åæ€§ï¼Œä½†ä¸Šä¼ çš„åŒ¿åæ€§å¯èƒ½ä¼šé™åˆ¶å¯ç”¨çš„å†…å®¹ã€‚<br>è€ƒè™‘åˆ°åˆ†å¸ƒå¼å—ä¸å¯å˜å­˜å‚¨(DISC)æ‰€ç¡®å®šçš„å­˜å‚¨ä½ç½®ï¼Œç½‘ç»œå¯èƒ½é¢ä¸´å­˜å‚¨é—®é¢˜ã€‚æè¦å¯ä»¥åœ¨ç½‘ç»œä¸­æä¾›ç”¨æˆ·å®šä¹‰çš„ç©ºé—´ï¼Œä»¥æ¢å¤æè¦å’Œå›ºå®šçš„å½¢å¼ï¼Œå¯èƒ½èƒ½å¤Ÿå‡è½»è¿™äº›ç¼ºç‚¹ã€‚<br>æ€»çš„æ¥è¯´ï¼ŒSwarmæ˜¾ç„¶ä¾èµ–äºä»¥å¤ªåŠç”Ÿæ€ç³»ç»Ÿã€‚è™½ç„¶è¿™æœ‰åˆ©äºæ¿€åŠ±ç»“æ„ï¼Œä½†ç”±äºä»¥å¤ªåŠå‘å±•ç§¯æï¼Œç”¨æˆ·åŸºç¡€å¹¿æ³›ï¼Œè¿™ä¹Ÿéœ€è¦ç”¨æˆ·å¯¹ä»¥å¤ªåŠçš„ä¾èµ–ã€‚è™½ç„¶æœ‰è¿™ä¹ˆåºå¤§çš„æ½œåœ¨ç”¨æˆ·ç¾¤ï¼Œä½†å¯¹ç”¨ä¾‹æˆ–Swarmæœºåˆ¶çš„ç ”ç©¶å´å¾ˆå°‘ã€‚Swarmå’Œä»¥å¤ªåŠçš„è¿æ¥å¯èƒ½æ˜¯ç¼ºä¹ç ”ç©¶çš„ä¸€ä¸ªåŸå› ï¼Œå› ä¸ºSwarmä¼¼ä¹æ²¡æœ‰IPFSé‚£ä¹ˆå®Œæ•´ï¼Œè€Œä»¥å¤ªåŠæœ¬èº«ä»ç„¶ä¿ç•™ç€è®¸å¤šç ”ç©¶æœºä¼šã€‚</p><h3 id="B-Hypercore-Protocol-Dat"><a href="#B-Hypercore-Protocol-Dat" class="headerlink" title="B. Hypercore Protocol/Dat"></a>B. Hypercore Protocol/Dat</h3><p>Hypercore Protocol(ä»¥å‰çš„Dat Protocol)æ”¯æŒç±»ä¼¼Gitçš„å†…å®¹å’Œå…ƒæ•°æ®çš„å¢é‡ç‰ˆæœ¬ã€‚Hypercoreåè®®ç”±å¤šä¸ªå­ç»„ä»¶ç»„æˆã€‚ä¸¥æ ¼åœ°è¯´ï¼ŒHypercoreæ˜¯å­ç»„ä»¶ä¹‹ä¸€ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæœ¯è¯­æ¥æ³›æŒ‡Hypercoreåè®®ã€‚åœ¨Hypercoreä¸­ï¼Œæ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªç±»ä¼¼äºBitTorrentç»“æ„çš„ç›®å½•ä¸­ï¼Œæ¯ä¸ªç›®å½•å¤„ç†è‡ªå·±çš„ç½‘ç»œã€‚è¯¥åè®®æ”¯æŒä¸åŒçš„å­˜å‚¨æ¨¡å¼ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥å†³å®šç›®å½•ä¸­çš„å“ªäº›æ•°æ®ä»¥åŠéœ€è¦å­˜å‚¨å“ªäº›ç‰ˆæœ¬çš„æ•°æ®ã€‚æ­¤å¤–ï¼Œè¯¥åè®®æ”¯æŒè®¢é˜…ç›®å½•ä¸­æ‰€æœ‰/ä»»ä½•æ–‡ä»¶çš„å®æ—¶æ›´æ”¹ã€‚åè®®ä¸­çš„æ‰€æœ‰é€šä¿¡éƒ½æ˜¯åŠ å¯†çš„ã€‚ä¸ºäº†æŸ¥æ‰¾å’Œè¯»å–æ•°æ®ï¼Œéœ€è¦çŸ¥é“ä¸€ä¸ªç‰¹å®šçš„è¯»é”®ã€‚<br>è¯¥åè®®æ—¨åœ¨å…±äº«å¤§é‡å¯å˜æ•°æ®ã€‚åˆ›å»ºè¯¥åè®®çš„åŠ¨æœºæ˜¯ä¸ºäº†é˜²æ­¢ç§‘å­¦æ–‡çŒ®çš„é“¾æ¥è…çƒ‚å’Œå†…å®¹æ¼‚ç§»ã€‚è¯¥åè®®åªå…è®¸éšæœºè®¿é—®éƒ¨åˆ†æ•°æ®ã€‚<br>Hypercoreå¯ä»¥ç†è§£ä¸ºå…±äº«ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚å¯ä»¥å¯¹æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€æ·»åŠ å’Œåˆ é™¤æ“ä½œã€‚è¿™ä¹ŸåŒ…æ‹¬å¹¶å…è®¸å¯å˜æ–‡ä»¶ã€‚<br>Hypercoreçš„æ¦‚å¿µæ¦‚è¿°å¦‚å›¾7æ‰€ç¤ºã€‚å¯¹äºå¯¹ç­‰å‘ç°ï¼ŒHypercoreä½¿ç”¨Hyperswarmï¼Œä¸€ç§åŸºäºKademliaçš„DHTã€‚å¦‚æœä½œè€…æƒ³ä½¿ç”¨Hypercoreåè®®å…±äº«è°ƒæŸ¥ç»“æœï¼Œéœ€è¦åˆ›å»ºHypercoreå¹¶æ·»åŠ è°ƒæŸ¥ç»“æœã€‚è¦æƒ³è¢«è¶…perswarmå‘ç°ï¼Œå°±å¿…é¡»åŠ å…¥è¶…perswarmè¦†ç›–ç½‘ç»œã€‚é€šè¿‡å…±äº«å…¬é’¥ğ¾ğ‘ƒğ‘¢ğ‘ï¼Œå®¡é˜…è€…å¯ä»¥è®¡ç®—å‘ç°å¯†é’¥ğ¾ğ·ï¼Œå¹¶åœ¨æ‰¾åˆ°å¯¹ç­‰ç‚¹å¹¶åŠ å…¥æ•°æ®ç½‘ç»œåè§£å¯†æ¶ˆæ¯ã€‚ä¸€æ—¦å¦ä¸€ä¸ªè¦†ç›–ç½‘ç»œåŠ å…¥ï¼Œéç»“æ„åŒ–çš„å¿—æ„¿è€…ç½‘ç»œå°±å¯ä»¥å…±äº«æ•°æ®ï¼Œè°ƒæŸ¥å¯ä»¥è¢«æ£€ç´¢ã€‚<br>è®¨è®º:Hypercoreå…è®¸é€šè¿‡äº¤æ¢å…¬é’¥æ¥å…±äº«æ•°æ®ã€‚å¯ä»¥è·å–ç‰¹å®šç‰ˆæœ¬å’Œç‰¹å®šåŒºåŸŸçš„æ•°æ®ã€‚è¿™ä½¿å¾—å®ƒå˜å¾—ç®€å•ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§å‹æ•°æ®é›†ï¼Œå¹¶ä¸”å…è®¸å¯å˜æ•°æ®ã€‚è¯¥åè®®ä¸“æ³¨äºå…±äº«æ–‡ä»¶é›†åˆï¼Œè¿™æ‰©å¤§äº†åè®®çš„å¯ç”¨æ€§ã€‚<br>ç”±äºåŠ å¯†å’Œå‘ç°å¯†é’¥ï¼Œè¯¥åè®®ç¡®ä¿äº†æœºå¯†æ€§ã€‚å…¬é’¥å…è®¸è®¡ç®—å‘ç°å¯†é’¥ï¼Œä½†ä¸å¯èƒ½é€†è½¬å…¬é’¥ã€‚è¿™å°†é˜»æ­¢å…¶ä»–äººè¯»å–æ•°æ®ã€‚Hypercoreçš„ä¸€ä¸ªç¼ºç‚¹æ˜¯ç¼ºä¹å…¬é’¥ä»¥å¤–çš„å…¶ä»–èº«ä»½éªŒè¯æœºåˆ¶ï¼Œè¿™é˜»æ­¢äº†é¢å¤–çš„ç»†ç²’åº¦è®¿é—®æ§åˆ¶ã€‚æ­¤å¤–ï¼Œå®ƒä»ç„¶æ³„æ¼å…ƒæ•°æ®ï¼Œå› ä¸ºå‘ç°å¯†é’¥åªæ˜¯ä¸€ä¸ªå‡åã€‚<br>Hypercoreæ²¡æœ‰å¤åˆ¶æ•°æ®çš„æ¿€åŠ±æœºåˆ¶ï¼Œæ•°æ®çš„æŒä¹…æ€§ä¾èµ–äºå‚ä¸è€…ã€‚åˆ©ç”¨æˆ–åˆ†æHypercore/Datçš„ç ”ç©¶å¾ˆå°‘ã€‚è™½ç„¶è¯¥åè®®ä¼¼ä¹å¼€å‘å¾—å¾ˆå¥½ï¼Œè€Œä¸”å¯ç”¨ï¼Œä½†ç ”ç©¶ä¼¼ä¹ä¾§é‡äºIPFSã€‚</p><h3 id="C-Secure-Access-For-Everyone-SAFE"><a href="#C-Secure-Access-For-Everyone-SAFE" class="headerlink" title="C. Secure Access For Everyone(SAFE)"></a>C. Secure Access For Everyone(SAFE)</h3><p>äººäººå®‰å…¨è®¿é—®(SAFE)ç½‘ç»œ[17,81]è¢«è®¾è®¡ä¸ºä¸€ä¸ªå®Œå…¨è‡ªä¸»çš„åˆ†æ•£æ•°æ®å’Œé€šä¿¡ç½‘ç»œã€‚ç”šè‡³è®¤è¯ä¹Ÿéµå¾ªè‡ªæˆ‘è®¤è¯[82]æœºåˆ¶ï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•é›†ä¸­ç»„ä»¶ã€‚SAFEçš„ä¸»è¦ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªç½‘ç»œï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥åŠ å…¥å¹¶ä½¿ç”¨å®ƒæ¥å­˜å‚¨ã€æŸ¥çœ‹å’Œå‘å¸ƒæ•°æ®ï¼Œè€Œä¸ä¼šåœ¨æœºå™¨ä¸Šç•™ä¸‹ä»–ä»¬æ´»åŠ¨çš„ç—•è¿¹ã€‚è¿™å°†å…è®¸å‚ä¸è€…ä»¥è¾ƒä½çš„è¿«å®³é£é™©å‘å¸ƒå†…å®¹ã€‚<br>SAFEæ”¯æŒä¸‰ç§ä¸åŒçš„æ•°æ®ç±»å‹:Mapã€Sequenceå’ŒBlobã€‚æ•°æ®å¯ä»¥è¿›ä¸€æ­¥åˆ†ä¸ºå…¬å…±æ•°æ®å’Œç§æœ‰æ•°æ®ã€‚Mapå’Œsequenceæ˜¯æ— å†²çªçš„å¤åˆ¶æ•°æ®ç±»å‹ï¼Œè¿™å¯¹äºç¡®ä¿å¯å˜æ•°æ®çš„ä¸€è‡´æ€§å¾ˆé‡è¦ã€‚Blobç”¨äºä¸å¯å˜æ•°æ®ã€‚SAFEç½‘ç»œä¸­çš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯åŠ å¯†çš„ï¼ŒåŒ…æ‹¬å…¬å…±æ•°æ®ã€‚ä½¿ç”¨çš„åŠ å¯†ç®—æ³•æ˜¯è‡ªåŠ å¯†[83]ï¼Œä½¿ç”¨æ–‡ä»¶æœ¬èº«å¯¹æ–‡ä»¶è¿›è¡ŒåŠ å¯†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªæ–‡ä»¶è¢«åˆ†å‰²æˆè‡³å°‘ä¸‰ä¸ªå›ºå®šå¤§å°çš„å—ã€‚æ¯ä¸ªå—ä½¿ç”¨å‰ä¸€ä¸ªå—çš„æ•£åˆ—å’ŒåŠ å¯†ï¼Œå³ğ‘›âˆ’1ï¼Œå…¶ä¸­ğ‘›æ˜¯å½“å‰å—ã€‚ä¹‹åï¼ŒåŠ å¯†çš„å—ä¼šè¢«åŸå§‹å—çš„ä¸²æ¥å“ˆå¸Œå€¼æ··æ·†ã€‚å¯¹äºSAFEï¼Œæ··æ·†åçš„å—å­˜å‚¨åœ¨ç½‘ç»œä¸­ã€‚å¯¹äºè§£å¯†ï¼Œåœ¨åŠ å¯†è¿‡ç¨‹ä¸­ä¼šåˆ›å»ºä¸€ä¸ªæ•°æ®æ˜ å°„ã€‚æ•°æ®æ˜ å°„åŒ…å«å…³äºæ–‡ä»¶çš„ä¿¡æ¯ï¼Œå¹¶å°†æ¨¡ç³Šå—çš„æ•£åˆ—æ˜ å°„åˆ°çœŸå®å—çš„æ•£åˆ—ã€‚å¯¹äºå…¬å…±æ•°æ®ï¼Œè§£å¯†å¯†é’¥ç”±ç½‘ç»œæä¾›ã€‚ç§äººæ•°æ®å¯ä»¥åˆ é™¤ï¼Œè€Œå…¬å…±æ•°æ®åº”è¯¥æ˜¯æ°¸ä¹…çš„ã€‚å› æ­¤ï¼Œå¯å˜æ•°æ®åªèƒ½æ˜¯ç§æœ‰çš„ã€‚åç§°è§£æç³»ç»Ÿå…è®¸äººç±»å¯è¯»çš„åœ°å€æ¥æ£€ç´¢æ•°æ®ã€‚<br>ç½‘ç»œæœ¬èº«æ˜¯æ ¹æ®åŸºäºå¡å¾·ç±³åˆ©äºšçš„DHTç”±å¼‚æˆ–åœ°å€ç»„ç»‡çš„ã€‚æ­¤å¤–ï¼Œç½‘ç»œè¢«åˆ†æˆå‡ ä¸ªéƒ¨åˆ†ã€‚å½“ä¸€ä¸ªæ–°çš„ä¿é™©åº“æƒ³è¦åŠ å…¥ç½‘ç»œæ—¶ï¼Œæ–°çš„ä¿é™©åº“éœ€è¦è¯æ˜å®ƒå¯ä»¥æä¾›æ‰€éœ€çš„èµ„æºï¼Œç„¶åè¢«éšæœºåˆ†é…ä¸€ä¸ªXORåœ°å€ï¼Œä»è€Œåˆ†é…ç»™ä¸€ä¸ªèŠ‚ã€‚è¿™äº›éƒ¨åˆ†æ˜¯åŠ¨æ€ç»´æŠ¤çš„ã€‚æ ¹æ®ç½‘ç»œä¸­ä¿é™©åº“çš„æ•°é‡ï¼Œåˆ†åŒºå¹¶å°†ä¿é™©åº“é‡æ–°åˆ†é…åˆ°æ–°çš„åˆ†åŒºã€‚å¯¹äºé•¿å¾—å¤ªå°çš„èŠ‚ï¼Œå¯ä»¥é€šè¿‡è·å–æ–°èŠ‚ç‚¹æˆ–è¯·æ±‚é‡æ–°å®šä½èŠ‚ç‚¹æ¥å¹³è¡¡èŠ‚çš„å¤§å°ã€‚æ›´æ”¹sectionä¼šå¢åŠ ä¿é™©åº“çš„èŠ‚ç‚¹å¹´é¾„ã€‚èŠ‚ç‚¹å¹´é¾„æ˜¯ä¿¡ä»»çš„è¡¡é‡æ ‡å‡†ï¼Œå¯ä»¥å¤±å»ï¼Œç„¶åå¿…é¡»é‡æ–°èµ¢å¾—ã€‚åœ¨ä¸€ä¸ªsectionä¸­ï¼Œåªæœ‰ä¸€å®šæ•°é‡çš„èŠ‚ç‚¹å¯ä»¥åšå‡ºå†³ç­–ï¼Œå³é•¿è€…ã€‚é•¿è€…æ˜¯è¯¥åŒºåŸŸä¸­æœ€å¤è€çš„èŠ‚ç‚¹ã€‚ç”±é•¿è€æŠ•ç¥¨å†³å®šæ˜¯å¦æ¥å—åˆ†åŒºå†…çš„äº‹ä»¶ï¼Œç»ä¸€å®šäººæ•°çš„é•¿è€åŒæ„å¹¶é›†ä½“ç­¾å­—åç”Ÿæ•ˆã€‚ç½‘ç»œæ®µä¸­çš„äº‹ä»¶æ˜¯ï¼Œä¾‹å¦‚ï¼ŒåŠ å…¥/ç¦»å¼€ä¸€ä¸ªèŠ‚ç‚¹æˆ–å­˜å‚¨ä¸€ä¸ªå—ã€‚é•¿è€…çš„çœŸå®æ€§ç”±SectionProofChainä¿è¯ï¼ŒSectionProofChainåŒ…å«é•¿è€…çš„ç¾¤ç»„ç­¾åï¼Œæ˜¯è¯æ˜ä¸€ä¸ªåŒºæ®µæœ‰æ•ˆæ€§çš„å…¬é’¥åºåˆ—ã€‚æ¯å½“é•¿è€…ç»„å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåºåˆ—å°±ä¼šæ›´æ–°å’Œç­¾åã€‚<br>SAFEç½‘ç»œçš„æ¦‚å¿µæ¦‚è¿°å¦‚å›¾8æ‰€ç¤ºã€‚è€ƒè™‘åˆ°æˆ‘ä»¬æ­£åœ¨è¿è¡Œçš„ç¤ºä¾‹ï¼Œè°ƒæŸ¥è¢«åˆ’åˆ†ä¸ºè‡ªåŠ å¯†çš„å—ï¼Œå¹¶ç”¨äºç”Ÿæˆæ•°æ®åœ°å›¾ã€‚åœ¨å®Œæˆè‡ªæˆ‘è®¤è¯è¿‡ç¨‹åï¼Œå‘ç½‘ç»œå‘é€ä¸€ä¸ªPUTè¯·æ±‚ã€‚å½“è´Ÿè´£å­˜å‚¨å—çš„åŒºåŸŸä¸­çš„é•¿è€…åŒæ„åï¼Œæ•°æ®å°±è¢«å­˜å‚¨ã€‚ä¸‹è½½æ–‡ä»¶æ—¶ï¼Œéœ€è¦æ•°æ®å›¾ã€‚æ•°æ®æ˜ å°„ç”¨äºGETè¯·æ±‚ï¼Œä»¥è·å–ç»è¿‡æ¨¡ç³Šå¤„ç†çš„åŠ å¯†å—ã€‚ä¸‹è½½å…¬å…±æ•°æ®ä¸éœ€è¦è®¤è¯ã€‚åœ¨è·å¾—è¿™äº›å—ä¹‹åï¼Œå¯ä»¥åœ¨æ•°æ®æ˜ å°„çš„å¸®åŠ©ä¸‹é‡æ–°åˆ›å»ºæ–‡ä»¶ã€‚<br>åœ¨SAFEç½‘ç»œä¸­ï¼Œå­˜å‚¨æ•°æ®éœ€è¦ä½¿ç”¨è¯¥ç½‘ç»œè‡ªèº«çš„è´§å¸ï¼Œå³Safecoinã€‚å®¢æˆ·çš„å®‰å…¨å¸å¹³è¡¡ç”±å®¢æˆ·ç»ç†ç›‘æ§ï¼Œå¹¶åœ¨å¤–ç®¡å±€çš„å…±è¯†æœºåˆ¶çš„å¸®åŠ©ä¸‹è¢«æ‰¹å‡†/æ‹’ç»ã€‚èŠ‚ç‚¹å¯ä»¥é€šè¿‡è€•ç§(å³å‘è¯·æ±‚è€…æä¾›å†…å®¹)èµšå–Safecoinã€‚<br>è®¨è®º:è‡ªæˆ‘è®¤è¯ã€è‡ªæˆ‘åŠ å¯†å’Œç½‘ç»œç»„ç»‡ç»™äº†ç”¨æˆ·å¯¹å…¶æ•°æ®çš„é«˜åº¦æ§åˆ¶ã€‚ä¸­å¿ƒç»„ä»¶çš„ç¼ºå¤±å‡å°‘äº†å•ç‚¹æ•…éšœã€‚æ­¤å¤–ï¼Œéšç§å’Œåœ¨ä¸€å®šç¨‹åº¦ä¸ŠåŒ¿åæ˜¯SAFEç½‘ç»œçš„å…³é”®ç‰¹å¾ã€‚ç½‘ç»œä¸­ä»…å­˜å‚¨æ•°æ®æ—¶éœ€è¦é‰´æƒã€‚æ£€ç´¢æ•°æ®é€šè¿‡å®¢æˆ·ç«¯é€‰æ‹©çš„ä»£ç†è¿›è¡Œä¸­ä»‹ï¼Œè¯¥ä»£ç†æä¾›äº†åŒ¿åé€šä¿¡ã€‚Safecoinæ—¨åœ¨æä¾›ä¸€ä¸ªæ¿€åŠ±å±‚ï¼Œç¡®ä¿ç½‘ç»œçš„å¯ç”¨æ€§å’Œå¯é æ€§ã€‚<br>Paulç­‰äºº[84]åœ¨2014å¹´é¦–æ¬¡å¯¹SAFEè¿›è¡Œäº†å®‰å…¨åˆ†æï¼Œæ¶‰åŠæœºå¯†æ€§ã€å®Œæ•´æ€§å’Œå¯ç”¨æ€§ä»¥åŠå¯èƒ½çš„æ”»å‡»ã€‚2015å¹´ï¼ŒJacobç­‰äºº[85]ä»çœŸå®æ€§ã€å®Œæ•´æ€§ã€ä¿å¯†æ€§ã€å¯ç”¨æ€§å’ŒåŒ¿åæ€§ç­‰æ–¹é¢åˆ†æäº†ç½‘ç»œçš„å®‰å…¨æ€§ã€‚ä½œè€…è§£é‡Šäº†å¦‚ä½•åˆ©ç”¨è‡ªæˆ‘è®¤è¯å’Œå»ä¸­å¿ƒåŒ–ç‰¹æ€§æ¥æ­ç¤ºå•ä¸ªå®ä½“çš„ä¸ªäººæ•°æ®ã€‚</p><h3 id="D-Storj"><a href="#D-Storj" class="headerlink" title="D. Storj"></a>D. Storj</h3><p>Storj[18]æ˜¯ä¸€ä¸ªP2På­˜å‚¨ç½‘ç»œã€‚ä¸‹é¢æˆ‘ä»¬å¼•ç”¨çš„æ˜¯3.0ç‰ˆæœ¬ã€‚å®ƒä¸“æ³¨äºæ•°æ®çš„é«˜æŒä¹…æ€§ã€ä½å»¶è¿Ÿä»¥åŠå­˜å‚¨æ•°æ®çš„é«˜å®‰å…¨æ€§å’Œç§å¯†æ€§ã€‚æ”¯æŒå¯¹é€šä¿¡ã€æ–‡ä»¶ä½ç½®å’Œæ–‡ä»¶è¿›è¡Œç«¯åˆ°ç«¯åŠ å¯†ã€‚ä¸ºäº†æ–‡ä»¶çš„é«˜æŒä¹…æ€§æˆ–æ¢å¥è¯è¯´ï¼Œæ–‡ä»¶åœ¨ç½‘ç»œä¸­æ›´å¥½çš„å¯ç”¨æ€§ï¼ŒStorjä½¿ç”¨äº†æ“¦é™¤ç ã€‚æ­¤å¤–ï¼Œä½å¸¦å®½æ¶ˆè€—ä¹Ÿæ˜¯è®¾è®¡çš„ä¸»è¦ç›®æ ‡ä¹‹ä¸€ã€‚è¯¥åè®®å‡è®¾å¯¹è±¡å¤§å°ä¸º4ğ‘€ğµæˆ–æ›´å¤šï¼Œè™½ç„¶æ”¯æŒè¾ƒå°çš„å¯¹è±¡å¤§å°ï¼Œä½†å­˜å‚¨è¿‡ç¨‹çš„æ•ˆç‡å¯èƒ½è¾ƒä½ã€‚åœ¨Storjä¸­ï¼Œå»ä¸­å¿ƒåŒ–è¢«è§£é‡Šä¸ºæ²¡æœ‰ä¸€ä¸ªæ“ä½œè€…å•ç‹¬è´Ÿè´£ç³»ç»Ÿçš„æ“ä½œã€‚åœ¨ä¸€ä¸ªåˆ†æ•£çš„ç³»ç»Ÿä¸­ï¼Œä¿¡ä»»å’Œæ‹œå åº­å¼çš„å¤±è´¥å‡è®¾æ˜¯é‡è¦çš„ã€‚Storjå‡è®¾æ²¡æœ‰åˆ©ä»–çš„ï¼Œæ€»æ˜¯è¡¨ç°è‰¯å¥½çš„èŠ‚ç‚¹ï¼Œå¤§å¤šæ•°ç†æ€§èŠ‚ç‚¹ï¼Œåªæœ‰åœ¨ç›ˆåˆ©æ—¶è¡¨ç°å‡ºæ¶æ„ï¼Œè¿˜æœ‰å°‘æ•°æ‹œå åº­å¼æ¶æ„èŠ‚ç‚¹ã€‚<br>Storjçš„ç›®æ ‡æ˜¯æˆä¸ºå»ä¸­å¿ƒåŒ–çš„äº‘å­˜å‚¨ã€‚Storj Labs Inc.å¸Œæœ›ä¸ºé›†ä¸­å¼å­˜å‚¨æä¾›å•†æä¾›å¦ä¸€ç§é€‰æ‹©ã€‚ä¸ºæ­¤ï¼ŒStorjæä¾›äº†ä¸Amazon S3åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£çš„å…¼å®¹æ€§ï¼Œä»¥æé«˜æ€»ä½“æ¥å—åº¦å¹¶ç®€åŒ–æ–°ç”¨æˆ·çš„è¿ç§»ã€‚ç”±äºStorjæä¾›äº†äº‘å­˜å‚¨ï¼Œç”¨æˆ·å¯ä»¥å­˜å‚¨å’Œæ£€ç´¢æ•°æ®ï¼Œä»¥åŠåˆ é™¤ã€ç§»åŠ¨å’Œå¤åˆ¶æ•°æ®ã€‚<br>Storjç½‘ç»œç”±ä¸‰ç§èŠ‚ç‚¹ç±»å‹ç»„æˆ:å«æ˜ŸèŠ‚ç‚¹ã€å­˜å‚¨èŠ‚ç‚¹å’Œä¸Šè¡ŒèŠ‚ç‚¹ã€‚å«æ˜ŸèŠ‚ç‚¹ç®¡ç†æ–‡ä»¶çš„å­˜å‚¨è¿‡ç¨‹å’Œç»´æŠ¤ã€‚å¯¹å…ƒæ•°æ®ç”šè‡³æ–‡ä»¶è·¯å¾„çš„åŠ å¯†å¢åŠ äº†å¯¹å…ƒæ•°æ®çš„é¢å¤–ä¿æŠ¤ã€‚ä¸Šè¡ŒèŠ‚ç‚¹æ˜¯ç»ˆç«¯ç”¨æˆ·ï¼Œéœ€è¦å­˜å‚¨å’Œè®¿é—®æ–‡ä»¶ã€‚å­˜å‚¨èŠ‚ç‚¹ç”¨äºå­˜å‚¨æ•°æ®ã€‚å­˜å‚¨å’Œä¸Šè¡ŒèŠ‚ç‚¹é€‰æ‹©ä¸å“ªäº›å«æ˜ŸèŠ‚ç‚¹åˆä½œã€‚è¿™å¯¼è‡´äº†ä¸€ä¸ªç±»ä¼¼äºBitTorrentçš„ç½‘ç»œï¼Œå…¶ä¸­å«æ˜Ÿæˆä¸ºä¸­å¿ƒéƒ¨åˆ†ã€‚<br>Storjçš„æ¦‚å¿µæ¦‚è¿°å¦‚å›¾9æ‰€ç¤ºã€‚ä¸ºäº†ä¸Šä¼ è°ƒæŸ¥è®ºæ–‡ï¼Œä½œè€…éœ€è¦å°†å…¶åˆ†å‰²æˆç‰‡æ®µï¼Œç„¶åå¯¹ç‰‡æ®µè¿›è¡ŒåŠ å¯†ã€‚ä½œè€…è¦æ±‚å«æ˜Ÿå­˜å‚¨ä¸€ä¸ªç‰‡æ®µã€‚å«æ˜Ÿæ£€æŸ¥å­˜å‚¨èŠ‚ç‚¹çš„å®¹é‡å¹¶è¿”å›è¶³å¤Ÿçš„å€™é€‰å­˜å‚¨åˆ—è¡¨ã€‚ç„¶åï¼Œç‰‡æ®µè¢«åˆ†å‰²æˆæ¡çŠ¶ï¼Œè¿™äº›æ¡çŠ¶è¢«æ“¦é™¤ç¼–ç å¹¶æ’åˆ—æˆç‰‡æ®µã€‚ç„¶åï¼Œè¿™äº›ç‰‡æ®µè¢«å¹¶è¡Œä¸Šä¼ è‡³å­˜å‚¨èŠ‚ç‚¹ã€‚</p><p>å¯¹äºæ“¦é™¤ç¼–ç ï¼ŒStorjä½¿ç”¨Reed-Solomonæ“¦é™¤ç [86]ã€‚å¯¹äºerasure codeï¼Œæ•°æ®ç¼–ç ä¸º(ğ‘˜ï¼Œğ‘›)erasure codeã€‚è¿™æ„å‘³ç€ï¼Œä¸€ä¸ªå¯¹è±¡è¢«ç¼–ç ä¸ºğ‘›ç‰‡æ®µï¼Œä»¥è¿™ç§æ–¹å¼åªéœ€è¦ğ‘˜ç‰‡æ®µå°±å¯ä»¥é‡æ–°åˆ›å»ºå¯¹è±¡ã€‚Storjä¸ºæ¯ä¸ªå¯¹è±¡é€‰æ‹©å››ä¸ªå€¼:ğ‘˜ã€ğ‘šã€ğ‘œå’Œğ‘›ã€‚ğ‘˜è¡¨ç¤ºé‡å»ºæ•°æ®æ‰€éœ€çš„æœ€å°å—æ•°ï¼Œğ‘šæ˜¯ç”¨äºä¿®å¤çš„ç¼“å†²åŒºï¼Œğ‘œæ˜¯ç”¨äºchurnçš„ç¼“å†²åŒºï¼Œğ‘›æ˜¯æ€»å—æ•°ã€‚ä¸å¤šæ¬¡å­˜å‚¨æ•°æ®å—ç›¸æ¯”ï¼ŒErasure codeæä¾›äº†æ›´é«˜çš„å†—ä½™ï¼Œå¼€é”€æ›´å°ã€‚æ­¤å¤–ï¼Œç”±äºæ£€ç´¢æ–‡ä»¶åªéœ€è¦ğ‘˜ç‰‡æ®µï¼Œå› æ­¤å¯ä»¥å‡å°‘æ–‡ä»¶å¯ç”¨å‰çš„å»¶è¿Ÿã€‚<br>ä¸Šä¼ å®Œæˆåï¼Œä¸€ä¸ªåŒ…å«ç‰‡æ®µå…ƒæ•°æ®çš„æŒ‡é’ˆ(ä¾‹å¦‚ç‰‡æ®µçš„å“ˆå¸Œå€¼ã€å­˜å‚¨ä½ç½®ã€æ“¦é™¤ç¼–ç æ–¹æ¡ˆ)è¢«è¿”å›ç»™å«æ˜Ÿã€‚å¯¹æ¯ä¸ªéƒ¨åˆ†é‡å¤è¿™ä¸ªæ­¥éª¤ï¼Œæœ€åä¸€ä¸ªéƒ¨åˆ†åŒ…å«å…³äºè°ƒæŸ¥çš„é¢å¤–å…ƒæ•°æ®ã€‚å¦‚éœ€ä¸‹è½½è°ƒæŸ¥æŠ¥å‘Šï¼Œè¯·æä¾›å„éƒ¨åˆ†çš„æŒ‡é’ˆã€‚è¿™äº›ç‰‡æ®µæ˜¯ç”±å­˜å‚¨èŠ‚ç‚¹å¹¶è¡Œè¯·æ±‚çš„ã€‚ä¸€æ—¦æ”¶é›†åˆ°è¶³å¤Ÿå¤šçš„ç‰‡æ®µï¼Œå°±å¯ä»¥é˜…è¯»è°ƒæŸ¥æŠ¥å‘Šäº†ã€‚<br>ä¸ºäº†ä¿è¯ç†æ€§èŠ‚ç‚¹ä¹‹é—´çš„åˆä½œï¼ŒStorjæä¾›äº†æ¿€åŠ±æœºåˆ¶ã€‚å¥–åŠ±ç³»ç»Ÿå¥–åŠ±å­˜å‚¨èŠ‚ç‚¹å­˜å‚¨å’Œæä¾›å†…å®¹ã€‚é€šè¿‡å®¡è®¡å’Œå£°èª‰ç³»ç»Ÿå¯¹èŠ‚ç‚¹è¿›è¡Œç›‘æ§å’Œè¯„ä¼°ã€‚Storjçš„ä¸€ä¸ªç›®æ ‡æ˜¯ä½å»¶è¿Ÿï¼Œä»è€Œé¿å…ä¾èµ–åŒºå—é“¾çš„æ¿€åŠ±æœºåˆ¶ã€‚<br>è®¨è®º:ä¸å…¶ä»–P2Pæ•°æ®ç½‘ç»œç›¸æ¯”ï¼ŒStorjä½¿ç”¨äº†ä¸€äº›ç‹¬ç‰¹çš„æ¦‚å¿µã€‚ç‰¹åˆ«æ˜¯ï¼ŒAmazon S3çš„å…¼å®¹æ€§å¯èƒ½ä¼šä¿ƒè¿›Storjæˆä¸ºå»ä¸­å¿ƒåŒ–çš„å­˜å‚¨ç³»ç»Ÿã€‚æ“¦é™¤ç å¢åŠ äº†å­˜å‚¨æ–‡ä»¶çš„å¼€é”€ï¼Œä½†åœ¨æ£€ç´¢æ–‡ä»¶æ—¶ï¼Œåªéœ€è¦ä¸‹è½½å¿…è¦æ•°é‡çš„ç‰‡æ®µã€‚é€šè¿‡æ“¦é™¤ç çš„å­˜å‚¨å»ä¸­å¿ƒåŒ–ï¼Œä»¥åŠè¶³å¤Ÿçš„å­˜å‚¨èŠ‚ç‚¹é€‰æ‹©å’Œå£°èª‰ç³»ç»Ÿçš„å¸®åŠ©ï¼Œå¢åŠ äº†å¯¹æ•°æ®æ³„éœ²çš„ä¿æŠ¤ã€‚<br>å«æ˜ŸèŠ‚ç‚¹æ˜¯ç½‘ç»œçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå¹¶å¯¹ç½‘ç»œè¿›è¡Œåˆ†åŒºï¼Œå› ä¸ºåœ¨ä¸€é¢—å«æ˜Ÿä¸Šå¯ç”¨çš„æ–‡ä»¶åœ¨å¦ä¸€é¢—å«æ˜Ÿä¸Šä¸å¯ç”¨ã€‚è¿™ä¿ƒè¿›äº†å«æ˜Ÿå½¢å¼çš„é›†ä¸­åŒ–ã€‚è™½ç„¶ç”±äºåŠ å¯†ï¼Œå«æ˜Ÿæ— æ³•ä¸å¯èƒ½çš„ç¬¬ä¸‰æ–¹å…±äº«å…ƒæ•°æ®ï¼Œä½†ä»ç„¶æœ‰å¯èƒ½æ³„éœ²è®¿é—®æ¨¡å¼ã€‚<br>è™½ç„¶å·²ç»éƒ¨ç½²äº†Storjï¼Œå¹¶ä¸”ç¡®å®å¯ä»¥ä½¿ç”¨ï¼Œä½†å…³äºè¯¥ä¸»é¢˜çš„åº”ç”¨ç¨‹åºå’Œç ”ç©¶ç›¸å½“å°‘ã€‚De Figueiredoç­‰äºº[87]åˆ†æäº†Storjç½‘ç»œï¼Œå¹¶å°†å«æ˜ŸèŠ‚ç‚¹è¯†åˆ«ä¸ºæ‹’ç»æœåŠ¡æ”»å‡»çš„å¯èƒ½å‘é‡ã€‚ä»–ä»¬ä¿®æ”¹äº†å­˜å‚¨èŠ‚ç‚¹è¿æ¥å¤„ç†çš„å®ç°ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒä¸­æˆåŠŸæ‹¿ä¸‹äº†ä¸€ä¸ªå«æ˜ŸèŠ‚ç‚¹ï¼Œä½¿å¾—æ”¯ä»˜å’Œæ–‡ä»¶æ£€ç´¢åœ¨ä¸€æ®µæ—¶é—´å†…æ— æ³•å®ç°ã€‚ä½†æ˜¯ï¼Œç”Ÿäº§ç³»ç»Ÿåº”è¯¥èƒ½å¤ŸæŠµæŠ—è¿™ç§æ”»å‡»ã€‚å¦ä¸€é¡¹ç ”ç©¶ä¹Ÿæ˜¾ç¤ºäº†å¯¹æ•°æ®ç½‘ç»œçš„å¦ä¸€ç§æ”»å‡»ã€‚Zhangç­‰äºº[88]æŒ‡å‡ºï¼Œåœ¨Storj v2.0ä¸­ï¼Œå¯ä»¥å°†æœªåŠ å¯†çš„æ•°æ®ä¸Šä¼ åˆ°å­˜å‚¨èŠ‚ç‚¹ï¼Œç”¨äºæ¡†æ¶å­˜å‚¨èŠ‚ç‚¹çš„æ‰€æœ‰è€…ã€‚å°½ç®¡å¦‚æ­¤ï¼ŒStorjæä¾›äº†éšç§ä¿éšœã€å¼¹æ€§ã€å¯è·å–çš„å…ƒæ•°æ®æˆ–æ¯ä¸ªäººéƒ½å¯ä»¥éƒ¨ç½²ä¸åŒèŠ‚ç‚¹çš„å¯èƒ½æ€§ï¼Œè¿™äº›éƒ½å¯ä»¥ä¸ºäº‘å­˜å‚¨æä¾›æœ‰ä»·å€¼çš„è§è§£ã€‚</p><h3 id="E-Arweave"><a href="#E-Arweave" class="headerlink" title="E. Arweave"></a>E. Arweave</h3><p>Arweaveåè®®[19]åˆ©ç”¨äº†ä¸€ç§ç±»ä¼¼åŒºå—é“¾çš„ç»“æ„(ç§°ä¸ºblockweave)ï¼Œä¸ºæ°¸ä¹…çš„é“¾ä¸Šæ•°æ®å­˜å‚¨ä»¥åŠå­˜å‚¨æ”¯ä»˜æä¾›äº†ä¸€ç§æœºåˆ¶ã€‚åœ¨å—ç»„ç»‡ä¸­ï¼Œä¸€ä¸ªå—æŒ‡å‘ç›´æ¥å‰ä¸€ä¸ªå—å’Œå¬å›å—ï¼Œå¬å›å—æ˜¯åŸºäºå‰ä¸€ä¸ªå—çš„ä¿¡æ¯ç¡®å®šåœ°é€‰æ‹©çš„ã€‚è™½ç„¶ç¼–ç»‡æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œå¹¶æä¾›äº†å¯¹å…¶æ•°æ®çš„å®¡æŸ¥é˜»åŠ›ï¼Œä½†æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥å†³å®šæ‹’ç»æ¥å—å†…å®¹ã€‚é€šè¿‡è¶³å¤Ÿå¤šçš„èŠ‚ç‚¹æ‹’ç»å†…å®¹å¯ä»¥é˜²æ­¢åŒ…å«ä¸éœ€è¦çš„å†…å®¹ã€‚<br>Arweaveä½¿ç”¨äº†ä¸€ç§ç±»ä¼¼äºBitTorrentçš„â€œtit-for-tatâ€çš„åè®®Wildfireæ¥ä¸ºåŒè¡Œæ’åã€‚é€šè¿‡Wildfireï¼Œæ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤ä¸€ä¸ªèŠ‚ç‚¹åˆ—è¡¨ï¼Œå¹¶æ ¹æ®èŠ‚ç‚¹çš„å“åº”èƒ½åŠ›(å¦‚å“åº”è¯·æ±‚æˆ–å‘é€äº‹åŠ¡)è¿›è¡Œè¯„åˆ†å’Œæ’åã€‚è¿™ä¸ªåˆ†æ•°åŸºæœ¬ä¸Šæ˜¯ç”±æœ€è¿‘è¯·æ±‚çš„å¹³å‡æ¯ç§’æ¥æ”¶å­—èŠ‚æ•°å†³å®šçš„ã€‚çº§åˆ«é«˜(å› æ­¤æ€§èƒ½æœ€å¥½)çš„å¯¹ç­‰ç‚¹é¦–å…ˆå¹¶è¡Œåœ°æ¥æ”¶æ¶ˆæ¯ï¼Œç„¶åä¾æ¬¡æ¥æ”¶å…¶ä½™çš„æ¶ˆæ¯ã€‚å®šæœŸä¿®å‰ªè¿æ¥åˆ°ä½ç­‰çº§å¯¹ç­‰ä½“çš„è¿æ¥ã€‚è¿™æ¿€åŠ±èŠ‚ç‚¹è‡ªèº«é«˜åº¦å“åº”ï¼Œä»¥å°½å¯èƒ½å¿«çš„é€Ÿåº¦æ¥æ”¶æ¶ˆæ¯ã€‚ä¼˜åŒ–èŠ‚ç‚¹çš„èµ„æºåˆ©ç”¨ç‡ï¼Œå‡å°‘é€šä¿¡æ—¶é—´ã€‚<br>Arweaveçš„æ ¸å¿ƒæ˜¯åŸºäºåŒºå—é“¾çš„ç½‘ç»œã€‚è™½ç„¶é‡ç«å¼•å…¥äº†ä¸€ä¸ªæœ‰åˆ©äºæŸäº›è¿æ¥çš„æ’åï¼Œä½†å®ƒä»ç„¶æ˜¯ä¸€ä¸ªéç»“æ„åŒ–çš„P2Pç½‘ç»œã€‚å›¾10ç»™å‡ºäº†Arweaveçš„æ¦‚å¿µæ¦‚è¿°ä»¥åŠå¦‚ä½•å½’æ¡£/æ£€ç´¢æ–‡ä»¶ã€‚ä¸ºäº†åœ¨Arweaveä¸­å­˜æ¡£è°ƒæŸ¥è®ºæ–‡ï¼Œæœ‰å¿…è¦å°†äº¤æ˜“å‘é€åˆ°ç½‘ç»œä¸Šã€‚å¯¹ç­‰ç‚¹é€šè¿‡å°†è¯¥äº¤æ˜“åŒ…å«åœ¨ä¸€ä¸ªå—ä¸­æ¥ç¡®è®¤è¯¥äº¤æ˜“ã€‚å¦‚æœæœ‰äººæƒ³è¦é˜…è¯»è°ƒæŸ¥ï¼Œç½‘ç»œè¢«è¦æ±‚ã€‚å¦‚æœä¸€ä¸ªå¯¹ç­‰ç‚¹å­˜å‚¨äº†åŒ…å«è°ƒæŸ¥çš„å—ï¼Œå®ƒå¯ä»¥è¢«è¿”å›ï¼Œè°ƒæŸ¥å¯ä»¥è¢«è¯»å–ã€‚</p><p><img src="/images/distributed_storage/image-20220428173237462.png" alt="image-20220428173237462">Arweaveçš„ç›®æ ‡æ˜¯æä¾›æ•°æ®çš„æ°¸ä¹…å­˜å‚¨ï¼Œä»¥ä¸€ç§ä¸å¯å˜çš„æ–¹å¼ä¿å­˜å’Œæ—¶é—´æˆ³ä¿¡æ¯ã€‚æ•°æ®å­˜å‚¨åœ¨åŒºå—ç»„ç»‡çš„é“¾ä¸Šï¼Œå› æ­¤ï¼Œæ˜¯ä¸å¯å˜çš„ï¼Œåªæœ‰é€šè¿‡åˆ†å‰ç»„ç»‡æ‰èƒ½ç§»é™¤ã€‚blockweaveä¸ºæ°¸ä¹…ç½‘ç»œæä¾›äº†å»ä¸­å¿ƒåŒ–å­˜å‚¨ã€‚<br>blockweaveåŠå…¶æ•°æ®çš„å­˜å‚¨å’Œç»´æŠ¤é€šè¿‡Arweaveçš„åŠ å¯†è´§å¸:Arweaveä»£å¸æ¥ç¡®ä¿ã€‚ä»£å¸ç”¨äºå¥–åŠ±çŸ¿å·¥å’Œæ”¯ä»˜å‘é€äº¤æ˜“ã€‚<br>è®¨è®º:Arweaveåè®®åœ¨ç±»ä¼¼åŒºå—é“¾çš„ç»“æ„ä¸Šæä¾›é“¾ä¸Šå­˜å‚¨ã€‚è¿™ä½¿å¾—å­˜å‚¨å…·æœ‰ä¸åŒºå—é“¾ç±»ä¼¼çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚Arweaveæä¾›æ—¶é—´æˆ³ã€é€æ˜åº¦ã€æ¿€åŠ±æœºåˆ¶å’Œä¸å¯å˜å­˜å‚¨ã€‚æ•°æ®æ˜¯é€šè¿‡æä¾›åŒ¿åæ•°æ®ä½œè€…çš„äº‹åŠ¡å­˜å‚¨çš„ã€‚<br>åŒºå—é“¾æœ€å¤§çš„é—®é¢˜ä¹‹ä¸€æ˜¯å¯æ‰©å±•æ€§ã€‚Arweaveè¯•å›¾é€šè¿‡åŒºå—é˜´å½±(ä¸€ç§ç±»ä¼¼äºç´§å‡‘å—çš„æœºåˆ¶ï¼Œåœ¨æ¯”ç‰¹å¸æ”¹è¿›ææ¡ˆ152[89]ä¸­æœ‰è§£é‡Š)å’Œé‡ç«(ç”¨äºå¿«é€Ÿå—ä¼ æ’­ï¼Œå‡å°‘åˆ†å‰æ¦‚ç‡)æ¥å‡å°‘è¿™äº›é—®é¢˜ã€‚æ­¤å¤–ï¼Œä½¿ç”¨å—å“ˆå¸Œåˆ—è¡¨å’Œé’±åŒ…åˆ—è¡¨å¯ä»¥é™ä½åˆå§‹å‚ä¸æˆæœ¬ã€‚åœ¨2.0ç‰ˆæœ¬ä¸­ï¼ŒArweaveå¼•å…¥äº†ä¸€ä¸ªç¡¬åˆ†å‰æ¥æé«˜å¯ä¼¸ç¼©æ€§ï¼Œå°†æ•°æ®ä¸äº‹åŠ¡åˆ†ç¦»ã€‚åœ¨äº‹åŠ¡ä¸­ä¸åŒ…æ‹¬æ•°æ®ï¼Œè€Œæ˜¯åŒ…æ‹¬æ•°æ®çš„Merkleæ ¹ã€‚è¿™æé«˜äº†äº‹åŠ¡ä¼ æ’­é€Ÿåº¦ï¼Œå› ä¸ºè½¬å‘äº‹åŠ¡ä¸å†éœ€è¦æ•°æ®ã€‚<br>ç”±äºå­˜åœ¨ä¼ªéšæœºå¬å›å—ï¼Œä¸ºäº†ä½¿æŒ–æ˜æ”¶ç›Šæœ€å¤§åŒ–ï¼ŒèŠ‚ç‚¹è¢«æ¿€åŠ±å­˜å‚¨å¤§é‡çš„å—ã€‚è¿™å¢åŠ äº†æ•°æ®çš„å¤åˆ¶ã€‚ç„¶è€Œï¼Œå¹¶ä¸æ˜¯æ¯ä¸ªèŠ‚ç‚¹éƒ½å¿…é¡»å­˜å‚¨æ¯ä¸ªå—æˆ–å†…å®¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ ¹æ®å†…å®¹è¿‡æ»¤å™¨ä¸ºè‡ªå·±å†³å®šå­˜å‚¨å“ªäº›æ•°æ®ã€‚è¯·æ±‚å†…å®¹å¯èƒ½ä¼šå˜å¾—å¤æ‚ï¼Œå› ä¸ºèŠ‚ç‚¹æ˜¯éšæœºè¯·æ±‚çš„ï¼Œå¸Œæœ›å®ƒä»¬å­˜å‚¨å†…å®¹ã€‚<br>å¯¹Arweaveçš„ç›´æ¥ç ”ç©¶å¾ˆå°‘ã€‚ç„¶è€Œï¼Œè¿™å¯ä»¥è§£é‡Šä¸ºæ–°å…´çš„åŸºäºåŒºå—é“¾çš„åè®®çš„å¹¿æ³›èŒƒå›´å’ŒåŒºå—é“¾çš„ç ”ç©¶è‡³å°‘å¯ä»¥éƒ¨åˆ†åº”ç”¨äºArweaveã€‚</p><h3 id="F-Honorable-Mentions-and-Related-Concepts"><a href="#F-Honorable-Mentions-and-Related-Concepts" class="headerlink" title="F. Honorable Mentions and Related Concepts"></a>F. Honorable Mentions and Related Concepts</h3><p>åœ¨æˆ‘ä»¬å¯¹é€‰å®šçš„P2Pæ•°æ®ç½‘ç»œçš„è¯¦ç»†æ¦‚è¿°ä¹‹åï¼Œæˆ‘ä»¬æä¾›äº†æœ‰å…³å½“å‰ä¸€ä»£P2Pæ•°æ®ç½‘ç»œçš„å…¶ä»–ç³»ç»Ÿå’Œæ¦‚å¿µçš„å…¶ä»–æ–‡çŒ®ã€‚ç‰¹åˆ«æ˜¯ï¼Œä¸€äº›è®ºæ–‡æ¦‚å¿µä¸ºP2På†…å®¹å…±äº«æä¾›äº†ä¸åŒçš„ã€å¤æ‚çš„æƒ³æ³•ã€‚<br>Sia[90]çš„ç›®æ ‡æ˜¯æˆä¸ºå»ä¸­å¿ƒåŒ–çš„äº‘å­˜å‚¨å¹³å°ã€‚ä¸€ä¸ªæ–‡ä»¶è¢«åˆ†å‰²æˆå¤šä¸ªå—ï¼Œè¿™äº›å—è¢«åŠ å¯†ï¼Œç„¶åé€šè¿‡æ“¦é™¤ç¼–ç å­˜å‚¨åœ¨å¤šä¸ªå­˜å‚¨èŠ‚ç‚¹ä¸Šã€‚å—çš„ä½ç½®å­˜å‚¨ä¸ºå…ƒæ•°æ®ã€‚Siaä½¿ç”¨åŒºå—é“¾æ¥æ¿€åŠ±æ•°æ®çš„å­˜å‚¨å’Œæ£€ç´¢ã€‚æ•°æ®å­˜å‚¨çš„æ¡ä»¶å’ŒæŒç»­æ—¶é—´åœ¨å­˜å‚¨åˆåŒä¸­æ˜¯å›ºå®šçš„ã€‚æ•°æ®æ‰€æœ‰è€…è´Ÿè´£æ–‡ä»¶è¿è¡ŒçŠ¶å†µã€‚<br>OSN (Open Storage Network)[91]æ˜¯ä¸€ä¸ªç”¨äºä¼ è¾“å’Œå…±äº«ç ”ç©¶æ•°æ®çš„åˆ†å¸ƒå¼ç½‘ç»œã€‚å®ƒå¯ä»¥ä¸ä¸“æ³¨äºå¤§é‡ç ”ç©¶æ•°æ®çš„åˆ†å¸ƒå¼äº‘æœåŠ¡ç›¸åª²ç¾ã€‚æ•°æ®å­˜å‚¨åœ¨ä¸­å¤®ç›‘æ§å’Œç»´æŠ¤çš„åŠèˆ±ä¸­ã€‚è¿™äº›OSNåŠèˆ±æ˜¯ä¸“é—¨é…ç½®çš„æœåŠ¡å™¨æœºæ¶ï¼Œéœ€è¦é«˜å¸¦å®½äº’è”ç½‘è¿æ¥ã€‚æƒ³è¦ä¸ºè¿™ä¸ªç½‘ç»œåšå‡ºè´¡çŒ®çš„æœºæ„å¯ä»¥å®‰ç½®è±†èšã€‚å› æ­¤ï¼Œç ”ç©¶äººå‘˜å¯ä»¥åœ¨OSNç½‘ç»œä¸­å­˜å‚¨å’Œå…±äº«ä»–ä»¬çš„ç ”ç©¶æ•°æ®ã€‚OSNåŠèˆ±çš„è¿æ¥æ€§åº”ä¿è¯æ•°æ®çš„å¿«é€Ÿè®¿é—®ã€‚æ•°æ®å¯ä»¥ä¸é€‰å®šçš„å‚ä¸è€…å…±äº«ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¼€æ”¾è·å–ã€‚å¯¹podsçš„é›†ä¸­ç®¡ç†å’Œä¸¥æ ¼çš„æ¡ä»¶å°†OSNä¸ç°æœ‰çš„å…¶ä»–æ•°æ®ç½‘ç»œåŒºåˆ†å¼€æ¥ï¼Œåˆ†æ•£å’Œä»»æ„å‚ä¸æ˜¯è¿™äº›æ•°æ®ç½‘ç»œçš„ä¸€ä¸ªå…³é”®ç‰¹å¾ã€‚<br>Fukumitsuç­‰äºº[92]æå‡ºäº†ä¸€ç§ç‚¹å¯¹ç‚¹ç±»å‹çš„å­˜å‚¨ç³»ç»Ÿï¼Œåœ¨è¯¥ç³»ç»Ÿä¸­ï¼Œå³ä½¿æ˜¯é‡æ„æ‰€å­˜å‚¨æ–‡ä»¶æ‰€éœ€çš„å…ƒæ•°æ®ä¹Ÿå­˜å‚¨åœ¨ç½‘ç»œä¸­ï¼Œå¯ä»¥é€šè¿‡IDã€å¯†ç å’Œæ—¶é—´æˆ³æ¥æ£€ç´¢ã€‚ä½œè€…å‡è®¾ä¸€ä¸ªéç»“æ„åŒ–çš„P2Pç½‘ç»œï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æä¾›ä¸åŒçš„æœåŠ¡ã€‚èŠ‚ç‚¹å®šæœŸå¹¿æ’­æœ‰å…³è‡ªèº«çš„å¿…è¦ä¿¡æ¯ï¼Œä¾‹å¦‚æä¾›çš„æœåŠ¡åŠå…¶IPåœ°å€ã€‚è¯¥æ–¹æ¡ˆçš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†æ˜¯å­˜å‚¨åœ¨åŒºå—é“¾ä¸Šçš„å­˜å‚¨èŠ‚ç‚¹åˆ—è¡¨ã€‚å­˜å‚¨èŠ‚ç‚¹åˆ—è¡¨æ˜¯éšæœºé€‰å–çš„æä¾›å­˜å‚¨æœåŠ¡çš„èŠ‚ç‚¹åˆ—è¡¨ã€‚æ•°æ®æŒ‰éƒ¨åˆ†å­˜å‚¨ï¼Œå­˜å‚¨è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ:å­˜å‚¨ç”¨æˆ·æ•°æ®å’Œå­˜å‚¨é‡æ„ç”¨æˆ·æ•°æ®æ‰€éœ€çš„æ•°æ®ã€‚ç”¨æˆ·æ•°æ®è¢«åŠ å¯†ï¼Œåˆ†æˆéƒ¨åˆ†ï¼Œå­˜å‚¨åœ¨å½“å‰å¯ç”¨çš„å­˜å‚¨èŠ‚ç‚¹ä¸­é€‰æ‹©çš„èŠ‚ç‚¹ä¸Šã€‚å¯ä»¥ä½¿ç”¨æ¢å¤é”®è¯·æ±‚éƒ¨ä»¶ã€‚ä¸ºäº†é‡æ„ç”¨æˆ·æ•°æ®ï¼Œéœ€è¦è§£å¯†å¯†é’¥ã€å­˜å‚¨èŠ‚ç‚¹å¯¹å’Œæ¢å¤å¯†é’¥ã€‚å› æ­¤ï¼Œéœ€è¦å°†æ•°æ®å¤åˆ¶åˆ°å…¶ä»–èŠ‚ç‚¹ã€‚ç”¨æˆ·åˆ›å»ºIDã€å¯†ç å¯¹ï¼Œå¹¶é€‰æ‹©å­˜å‚¨åˆ—è¡¨ã€‚æ•°æ®é€šè¿‡IDã€å¯†ç å’Œå­˜å‚¨åˆ—è¡¨çš„æ•£åˆ—è¿›è¡ŒåŠ å¯†ã€‚å­˜å‚¨èŠ‚ç‚¹æ˜¯ä»å­˜å‚¨åˆ—è¡¨ä¸­ç¡®å®šé€‰æ‹©çš„ã€‚éƒ¨ä»¶çš„æ¢å¤é”®æ˜¯å­˜å‚¨åˆ—è¡¨çš„æ•£åˆ—å’Œå—ç´¢å¼•çš„æ•£åˆ—ï¼Œå³IDå’Œå¯†ç ã€‚è¯¥æ–¹æ¡ˆå…è®¸è·å–æ•°æ®ï¼Œè€Œæ— éœ€å°†ä¿¡æ¯å­˜å‚¨åœ¨ç”¨æˆ·è®¾å¤‡ä¸Šã€‚<br>Jiaç­‰äºº[93]æå‡ºäº†ä¸€ç§å®ç°å¥å¿˜RAMéšè—æ•°æ®è®¿é—®æ¨¡å¼çš„æœºåˆ¶â€”â€”oblvp2pã€‚è™½ç„¶ä½œè€…æåˆ°ä»–ä»¬çš„æœºåˆ¶é€‚ç”¨äºå…¶ä»–ç‚¹å¯¹ç‚¹ç³»ç»Ÿï¼Œä½†ä»–ä»¬å…³æ³¨çš„æ˜¯å¸¦æœ‰è·Ÿè¸ªå™¨çš„ç±»ä¼¼BitTorrentçš„ç³»ç»Ÿã€‚<br>Qianç­‰äºº[94]æå‡ºäº†Garlic Castï¼Œä¸€ç§æ”¹å–„è¦†ç›–ç½‘ç»œä¸­åŒ¿åæ€§çš„æœºåˆ¶ã€‚å¯¹ç­‰ç‚¹ä¸ç›´æ¥è¯·æ±‚å’Œæœç´¢å†…å®¹ã€‚ç›¸åï¼Œå¯¹ç­‰ä½“æœç´¢ä»£ç†ï¼Œä»£ç†äº¤æ¢å’Œè¯·æ±‚å†…å®¹ã€‚å¯¹ç­‰ä½“åŠå…¶ä»£ç†ä¹‹é—´çš„æ¶ˆæ¯æ˜¯é€šè¿‡å®‰å…¨å¢å¼ºçš„ä¿¡æ¯åˆ†æ•£ç®—æ³•(IDA)äº¤æ¢çš„ã€‚rdaæ˜¯ä¸€ç§æ“¦é™¤ç¼–ç å½¢å¼ï¼Œå…¶ä¸­ğ‘˜çš„ğ‘›ç‰‡æ®µè¶³ä»¥é‡å»ºå¯¹è±¡ã€‚å®‰å…¨å¢å¼ºçš„IDAé¦–å…ˆå¯¹æ¶ˆæ¯è¿›è¡ŒåŠ å¯†ï¼Œä½¿ç”¨ğ‘˜-threshold IDAå°†æ¶ˆæ¯å’Œå¯†é’¥åˆ†å‰²ä¸ºğ‘›ç‰‡æ®µï¼Œç„¶åå‘é€clovesï¼Œå³åŒ…å«å¯†é’¥å’Œæ¶ˆæ¯ç‰‡æ®µçš„æ¶ˆæ¯ã€‚é€šè¿‡éšæœºæ¸¸èµ°å‘ç°ä»£ç†:ä¸é¦™è¢«å‘é€ç»™å®ƒçš„é‚»å±…ï¼Œè¯·æ±‚å¯¹ç­‰ç‚¹ä½œä¸ºä¸€ä¸ªå…·æœ‰éšæœºä¸é¦™åºåˆ—å·çš„ä»£ç†ï¼Œæ¯ä¸ªé‚»å±…éšæœºè½¬å‘ä¸é¦™ï¼Œå¹¶ç»´æŠ¤ç»§æ‰¿è€…å’Œå‰ä»»çš„çŠ¶æ€ã€‚å…·æœ‰ä¸¤ä¸ªå…·æœ‰ç›¸åŒåºåˆ—å·çš„ä¸é¦™çš„å¯¹ç­‰ä½“å¯ä»¥æ¢å¤è¯·æ±‚ï¼Œå¦‚æœå®ƒè‡ªæ„¿æˆä¸ºå¯¹ç­‰ä½“ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªå›å¤ç»™è¯·æ±‚è€…ã€‚<br>å…¶ä»–è®ºæ–‡æ¦‚å¿µåˆ©ç”¨åŒºå—é“¾è¿›è¡Œè®¿é—®æ§åˆ¶ï¼Œå¹¶å­˜å‚¨æ•°æ®ä½ç½®ï¼Œè€Œä¸æ˜¯ä½œä¸ºæ¿€åŠ±æœºåˆ¶çš„è¡¥å……ï¼Œå¦‚Blockstack[95]ï¼Œå®ƒåœ¨åŒºå—é“¾ä¸Šç»´æŠ¤å…ƒæ•°æ®ï¼Œå¹¶ä¾èµ–å¤–éƒ¨æ•°æ®å­˜å‚¨æ¥å®é™…å­˜å‚¨æ•°æ®ã€‚ä¹Ÿæœ‰ä½¿ç”¨åˆ†å¸ƒå¼è´¦æœ¬æŠ€æœ¯è¿›è¡Œè®¿é—®æ§åˆ¶çš„æ¦‚å¿µã€‚<br>Calypso[96]ï¼Œå®ƒä½¿ç”¨åŸºäºè·³é“¾çš„èº«ä»½å’Œè®¿é—®ç®¡ç†ï¼Œå…è®¸å¯å®¡è®¡çš„æ•°æ®å…±äº«ã€‚ç„¶è€Œï¼Œè¿™äº›ç³»ç»Ÿå’Œä»…é›†ä¸­äºé€šè¿‡åŒºå—é“¾å‡ºå”®æ•°æ®çš„ç³»ç»Ÿä¸åœ¨æœ¬æ¬¡è°ƒæŸ¥çš„èŒƒå›´ä¹‹å†…ã€‚</p><h2 id="V-DISCUSSION-OF-BUILDING-BLOCKS"><a href="#V-DISCUSSION-OF-BUILDING-BLOCKS" class="headerlink" title="V. DISCUSSION OF BUILDING BLOCKS"></a>V. DISCUSSION OF BUILDING BLOCKS</h2><p><img src="/images/distributed_storage/image-20220428171303982.png" alt="image-20220428171303982"></p><h3 id="A-Performance"><a href="#A-Performance" class="headerlink" title="A. Performance"></a>A. Performance</h3><p>ç³»ç»Ÿæ€§èƒ½çš„ç ”ç©¶å·²ç»æˆä¸ºä¸€äº›ç ”ç©¶è€…æ‰€è¿½æ±‚çš„ç ”ç©¶æ–¹å‘ã€‚é€šè¿‡æ¨¡æ‹Ÿæˆ–æµ‹è¯•æ¥è°ƒæŸ¥æ€§èƒ½ã€è¯»/å†™æ—¶é—´ã€å­˜å‚¨å¼€é”€ã€æ–‡ä»¶æŸ¥æ‰¾ã€æŠ—churné˜»åŠ›ï¼Œå¯ä»¥ç”¨æ¥è¯†åˆ«æ–°çš„ç”¨ä¾‹ï¼Œå¹¶å·©å›ºä¸€ä¸ªç³»ç»Ÿå¯èƒ½å–ä»£é›†ä¸­å¼ç³»ç»Ÿçš„æ–­è¨€ã€‚IPFSå¼€å‘äººå‘˜å¼€å‘äº†â€œTestgroundâ€[103]ï¼Œç”¨äºå¤§è§„æ¨¡æµ‹è¯•å’ŒåŸºå‡†æµ‹è¯•P2Pç³»ç»Ÿã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼ŒTestgroundçš„æ€§èƒ½åŠå…¶å¯¹çœŸå®ç³»ç»Ÿçš„å¤åˆ¶èƒ½åŠ›ä¹Ÿæ˜¯ä¸€ä¸ªå€¼å¾—ç ”ç©¶çš„é¢†åŸŸã€‚ä¹Ÿæœ‰å…¶ä»–åˆ†æIPFSæ€§èƒ½çš„ç ”ç©¶ï¼Œå¦‚è¯»å†™æ—¶å»¶[28,31]ï¼Œä½¿ç”¨IPFSé›†ç¾¤è¿›è¡Œç‰©è”ç½‘æ•°æ®å…±äº«[29]ï¼Œæ”¹è¿›ç³»ç»Ÿ[30,36]ï¼Œæˆ–åˆ†æç½‘ç»œ[34,35,37]ã€‚Heinisuoç­‰äºº[32]è¡¨æ˜ï¼Œç”±äºé«˜ç½‘ç»œæµé‡æ¶ˆè€—ç”µæ± ï¼ŒIPFSéœ€è¦æ”¹è¿›æ‰èƒ½åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šä½¿ç”¨ã€‚å…³äºIPFSç«äº‰å¯¹æ‰‹çš„ç ”ç©¶è¿˜å¾ˆç¼ºä¹ã€‚æ­¤å¤–ï¼ŒNaikå’ŒKeshavamurthy[41]å…³æ³¨çš„ä¸»é¢˜æ˜¯P2Pç½‘ç»œçš„æµå¤±ã€‚æ­¤å¤–ï¼Œè€ƒè™‘åˆ°ç ”ç©¶æ•°æ®çš„å¢åŠ ï¼Œéœ€è¦ç ”ç©¶åœ¨Tera-å’ŒPetabytesèŒƒå›´å†…å»ºç«‹å¤§å‹å•ä¸€æ•°æ®é›†çš„æ•°æ®ç½‘ç»œçš„å¯è¡Œæ€§ã€‚</p><h3 id="B-Confidentiality-and-Access-Control"><a href="#B-Confidentiality-and-Access-Control" class="headerlink" title="B. Confidentiality and Access Control"></a>B. Confidentiality and Access Control</h3><p>è¿‡å»å’Œç°åœ¨çš„æ•°æ®ç½‘ç»œæä¾›äº†ä¸€äº›æœºå¯†æ€§å’Œè®¿é—®æ§åˆ¶ï¼Œä½†è¿™äº›ç³»ç»Ÿæ˜¯ä¸ºå…¬å…±æ•°æ®è€Œä¸æ˜¯ä¸ºç§æœ‰æ•°æ®è®¾è®¡çš„ã€‚éœ€è¦ç ”ç©¶èŠ‚ç‚¹åœ¨å­˜å‚¨æ•°æ®æ—¶æ‰€è·å¾—çš„çŸ¥è¯†ã€‚è¿™ä¸ä»…æ¶‰åŠæ•°æ®å†…å®¹çš„ä¿¡æ¯ï¼Œè¿˜æ¶‰åŠå…ƒæ•°æ®(å¦‚è®¿é—®æ¨¡å¼)ã€‚ç°æœ‰çš„è®¿é—®æ§åˆ¶ç³»ç»Ÿçš„å®‰å…¨æ€§æœ‰å¾…è¿›ä¸€æ­¥ç ”ç©¶ã€‚æœ‰ç ”ç©¶å»ºè®®ä½¿ç”¨åŒºå—é“¾è¿›è¡Œè®¿é—®æ§åˆ¶[22 - 25,64]ï¼Œä½†åŒºå—é“¾çš„ä¸å˜æ€§ä½¿å¾—è¿™å¯¹äºç§äººå’Œä¸ªäººæ•°æ®æ¥è¯´å­˜åœ¨é—®é¢˜ã€‚å…³äºç§æœ‰æ•°æ®çš„å¦ä¸€ä¸ªæ–¹é¢æ˜¯åˆ é™¤æ•°æ®ã€‚è™½ç„¶é˜²æ­¢åˆ é™¤æ•°æ®æœ‰åŠ©äºæŠµåˆ¶å®¡æŸ¥ï¼Œä½†åˆ é™¤ä¸ªäººã€æ¶æ„æˆ–éæ³•æ•°æ®çš„å¯èƒ½æ€§å¯èƒ½æé«˜å¯¹æ•°æ®ç½‘ç»œçš„æ¥å—ç¨‹åº¦ã€‚ä¾‹å¦‚ï¼ŒPolitouç­‰äºº[102]æå‡ºäº†ä¸€ç§IPFSä¸­åˆ é™¤å†…å®¹çš„æœºåˆ¶ã€‚è°ƒæŸ¥å’Œæ”¹è¿›ç°æœ‰ç³»ç»Ÿå¯ä»¥å¢åŠ å¯¹æ•°æ®ç½‘ç»œçš„ä¿¡ä»»ã€‚å¢å¼ºå¯¹æœºå¯†æ€§çš„ä¿¡ä»»å’Œé˜²æ­¢æœªç»æˆæƒçš„è®¿é—®å¯ä»¥æ‰“å¼€è¿™äº›ç³»ç»Ÿæ¥å­˜å‚¨ç§äººå’Œä¸ªäººæ•°æ®ã€‚</p><h3 id="C-Security"><a href="#C-Security" class="headerlink" title="C. Security"></a>C. Security</h3><p>å¯¹äºå®‰å…¨ç ”ç©¶æ¥è¯´ï¼Œè¿™ä¸€é¢†åŸŸçš„å·¥ä½œé€šå¸¸æ˜¯åœ¨å‘ç°å’Œä¿®å¤æ–°çš„æ¼æ´ä¹‹é—´åå¤è¿›è¡Œã€‚æ­¤å¤–ï¼Œç ”ç©¶è¿˜æ¶‰åŠåˆ©ç”¨P2Pæ•°æ®ç½‘ç»œä¸æ¶æ„è½¯ä»¶äº¤æ¢æ•°æ®çš„æ¶æ„æ´»åŠ¨<br>åœ¨å®‰å…¨æ¼æ´æ–¹é¢ï¼ŒPrÃ¼nsterç­‰äºº[33]æŠ«éœ²äº†å¯¹IPFSçš„eclipseæ”»å‡»ï¼ŒDe Figueiredoç­‰äºº[87]æŠ«éœ²äº†å¯¹Storjçš„æµ‹è¯•ç½‘ç»œçš„æ‹’ç»æœåŠ¡æ”»å‡»ã€‚æ­¤å¤–ï¼Œä¸ä»…éœ€è¦ç ”ç©¶å·²çŸ¥çš„æ”»å‡»å‘é‡ï¼Œè¿˜éœ€è¦ç ”ç©¶æ–°çš„æ”»å‡»å‘é‡çš„å­˜åœ¨ã€‚ä¾‹å¦‚ï¼ŒStorjæ‰¿è®¤å­˜åœ¨â€œHonest Geppettoâ€æ”»å‡»çš„å¯èƒ½æ€§ï¼Œå³æ”»å‡»è€…(è¯šå®åœ°)é•¿æ—¶é—´åœ°æ“ä½œè®¸å¤šå­˜å‚¨èŠ‚ç‚¹ï¼Œæœ‰æ•ˆåœ°æ§åˆ¶å¤§éƒ¨åˆ†å­˜å‚¨èƒ½åŠ›ã€‚è¿™ç§æ§åˆ¶å…è®¸å°†æ•°æ®ä½œä¸ºâ€œäººè´¨â€æˆ–ä¸€èˆ¬åœ°å–ä¸‹æ•°æ®ï¼Œä½¿æ•°æ®ç½‘ç»œæ— æ³•æ“ä½œã€‚å¦ä¸€ä¸ªä¾‹å­æ˜¯Frameup[88]ï¼Œå…¶ä¸­æœªåŠ å¯†çš„æ•°æ®å­˜å‚¨åœ¨å­˜å‚¨èŠ‚ç‚¹ä¸Šï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ³•å¾‹é—®é¢˜ã€‚å­˜å‚¨ä»»æ„æ•°æ®ä¹Ÿå¯èƒ½ç»™å­˜å‚¨è®¾å¤‡å¸¦æ¥é£é™©ã€‚å®‰å…¨æ˜¯ç ”ç©¶é¢†åŸŸï¼Œæˆ‘ä»¬è§‚å¯ŸIPFSä»¥å¤–çš„ç ”ç©¶ã€‚</p><h3 id="D-Anonymity"><a href="#D-Anonymity" class="headerlink" title="D. Anonymity"></a>D. Anonymity</h3><p>é™¤æ¶‰åŠæ•°æ®å®‰å…¨å’Œéšç§çš„æœºå¯†æ€§å¤–ï¼Œä¿æŠ¤ä¸ªäººéšç§æ˜¯å¦ä¸€ä¸ªç›¸å…³çš„æ–¹é¢;ç‰¹åˆ«æ˜¯åŒ¿åæ€§ï¼Œå®ƒæè¿°çš„æ˜¯æ— æ³•åœ¨ä¸€ç¾¤ä¸ªä½“ä¸­è¯†åˆ«ä¸€ä¸ªä¸ªä½“ï¼Œå³ä¸å¯é“¾æ¥æ€§[104]ã€‚<br>åœ¨åŒ¿åæ–¹é¢ï¼Œæ•°æ®ç½‘ç»œä¸­å¯ä»¥ä¿æŠ¤å„ç§å®ä½“:å†…å®¹åˆ›å»ºè€…ã€å­˜å‚¨èŠ‚ç‚¹å’Œè¯·æ±‚å†…å®¹çš„ç”¨æˆ·ã€‚åœ¨ä¸Šä¸€ä»£æ•°æ®ç½‘ç»œä¸­ï¼Œç‰¹åˆ«æ˜¯Freenet[2]å’ŒGNUnet[105]ç€é‡äºä¿æŠ¤ä¸åŒå®ä½“çš„èº«ä»½ã€‚Baldufç­‰äºº[70]å·²ç»è¡¨æ˜ï¼ŒIPFSé€šè¿‡ç›‘æ§æ•°æ®è¯·æ±‚è¯†åˆ«å†…å®¹è¯·æ±‚è€…ï¼Œä»è€Œç»§ç»­å­˜åœ¨éšç§é—®é¢˜ã€‚<br>ç”±äºæ¿€åŠ±æœºåˆ¶å’Œç”±æ­¤äº§ç”Ÿçš„ä¸ªäººæŒ‡æ§ï¼Œå¾ˆéš¾ä¿è¯åŒ¿åï¼Œå› ä¸ºè‡³å°‘éœ€è¦å‡åã€‚ä¸€æ—¦ä½¿ç”¨äº†æ¿€åŠ±æœºåˆ¶ï¼Œæœ‰å…³è¯·æ±‚è€…çš„ä¿¡æ¯å°±å¾—åˆ°äº†ã€‚è®°å½•äº¤æ˜“çš„åˆ†å¸ƒå¼åˆ†ç±»è´¦ï¼Œä¾‹å¦‚Filecoinã€Ethereum Swarmã€Arweaveï¼Œå¯ä»¥æ­ç¤ºé¢å¤–çš„ä¿¡æ¯ï¼Œå› æ­¤å‚ä¸è€…æ˜¯åŒ¿åçš„ã€‚å½“ä¸€ä¸ªä¸­å¿ƒç»„ä»¶æˆæƒè¯·æ±‚å’Œå¤„ç†æ¿€åŠ±æ—¶ï¼Œä¾‹å¦‚Storjä¸­çš„å«æ˜ŸèŠ‚ç‚¹ï¼Œè¯·æ±‚è€…ã€å­˜å‚¨èŠ‚ç‚¹å’Œä¸­å¿ƒç»„ä»¶ç›¸äº’è®¤è¯†ã€‚åœ¨æ¿€åŠ±è¯·æ±‚çš„æƒ…å†µä¸‹ï¼Œæ˜¾ç¤ºè¯·æ±‚èŠ‚ç‚¹å’Œå­˜å‚¨èŠ‚ç‚¹ã€‚è¯·æ±‚è€…çš„èº«ä»½å¯ä»¥é€šè¿‡è½¬å‘ç­–ç•¥æˆ–ä»£ç†(å¦‚Swarmã€SAFE)éƒ¨åˆ†åœ°å¾—åˆ°ä¿æŠ¤ã€‚<br>ç¬¬ä¸€ä»£æœ‰åƒFreenetè¿™æ ·çš„ç³»ç»Ÿï¼Œæ—¨åœ¨åŒ¿åå’ŒæŠµåˆ¶å®¡æŸ¥ã€‚è¿™ä¸€ä»£çš„åŒ¿åæ€§ä¼¼ä¹è½åäºç¬¬ä¸€ä»£ã€‚å°½ç®¡ä½¿ç”¨mixnetæˆ–Torè¿›è¡ŒåŒ¿åé€šä¿¡å–å¾—äº†è¿›å±•[106]ï¼Œä½†è¿˜æ²¡æœ‰æ•°æ®ç½‘ç»œæä¾›å¼ºåŒ¿åæ€§ã€‚æ€»ä¹‹ï¼Œæä¾›çš„åŒ¿åä¿è¯å’Œè¿›ä¸€æ­¥çš„å¢å¼ºéœ€è¦è°ƒæŸ¥ã€‚è¿™åŒ…æ‹¬åŒ¿åå®ç”¨ç¨‹åºçš„æƒè¡¡å’Œå¯¹ä¸åŒæ”»å‡»è€…æ¨¡å‹çš„åˆ†æã€‚åŒ¿åä¸ä»…å¯¹ä¿æŠ¤ä¸ªäººéšç§å¾ˆé‡è¦ï¼Œè€Œä¸”å¯¹ä¿è¯å£°ç§°çš„æŠµåˆ¶å®¡æŸ¥ä¹Ÿå¾ˆé‡è¦ã€‚å¦‚æœå¯ä»¥å¾ˆå®¹æ˜“åœ°æ¨æ–­å‡ºå­˜å‚¨èŠ‚ç‚¹çš„èº«ä»½ï¼Œé‚£ä¹ˆå³ä½¿ç½‘ç»œä¿æŠ¤ä¸è¢«åˆ é™¤ï¼Œæ‰§æ³•éƒ¨é—¨ä¹Ÿæœ‰å¯èƒ½æ‰§è¡Œ<br>å®¡æŸ¥ã€‚è¿™æ˜¯ä¸€ä¸ªå€¼å¾—å…³æ³¨çš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å¯¹äºåƒSwarmè¿™æ ·çš„ç³»ç»Ÿï¼Œå­˜å‚¨å—çš„ä½ç½®æ˜¯é¢„å…ˆç¡®å®šçš„ï¼ŒèŠ‚ç‚¹èº«ä»½æ˜¯ä¸ä»¥å¤ªåŠå‡åç›¸è¿çš„</p><h3 id="E-Naming"><a href="#E-Naming" class="headerlink" title="E. Naming"></a>E. Naming</h3><p>å‘½åï¼Œç‰¹åˆ«æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æä¾›äººç±»å¯è¯»çš„åç§°ï¼Œæ˜¯ä¸€ä¸ªå·²çŸ¥çš„æŒ‘æˆ˜ã€‚Zooko â€˜s Triangle[107]æ•æ‰åˆ°äº†è¿™ä¸ªé—®é¢˜åŠå…¶é‚»è¿‘çš„æŒ‘æˆ˜ã€‚å®ƒæè¿°äº†æ„å»ºåˆ†å¸ƒå¼å‘½åç©ºé—´çš„å›°éš¾ï¼Œåˆ†å¸ƒå¼å‘½åç©ºé—´æ˜¯åˆ†å¸ƒå¼çš„(æ²¡æœ‰ä¸­å¤®æƒå¨)ã€å®‰å…¨çš„(æ¸…æ™°çš„è§£æ)å’Œäººç±»å¯è¯»çš„ã€‚<br>åœ¨æ‰€æœ‰ç³»ç»Ÿä¸­ï¼Œæ•°æ®çš„å¯»å€è¦ä¹ˆç¼ºä¹åˆ†å¸ƒæ€§(åŸºäºè·Ÿè¸ªå™¨çš„BitTorrentå’ŒStorj)ï¼Œè¦ä¹ˆç¼ºä¹äººç±»å¯è¯»æ€§(æ— è·Ÿè¸ªå™¨çš„BitTorrentã€Hypercoreã€IPFSã€Swarmå’ŒSAFE)ã€‚BitTorrentæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œè·Ÿè¸ªå™¨æ˜¯ä¸€ä¸ªä¸­å¤®æƒå¨ï¼Œåœ¨æ— è·Ÿè¸ªçš„BitTorrentçš„æƒ…å†µä¸‹ï¼Œäººç±»å¯è¯»çš„ç§å­æ˜¯ç”¨ä¸å¤ªå¯è¯»çš„ä¿¡æ¯å“ˆå¸Œ(ç§å­çš„å“ˆå¸Œ)è§£å†³çš„ã€‚åœ¨Storjçš„3.0ç‰ˆæœ¬ä¸­ï¼Œå«æ˜Ÿæ˜¯ä¸€ä¸ªä¸­å¿ƒç»„ä»¶ã€‚<br>ç¼ºä¹å¯è¯»æ€§æ˜¯è‡ªè®¤è¯æ•°æ®çš„ç»“æœï¼Œå…¶ä¸­æ•°æ®å†³å®šäº†æ•°æ®çš„åœ°å€æˆ–åç§°ã€‚æ•°æ®å˜æ›´åï¼Œåœ°å€ä¹Ÿéšä¹‹å˜æ›´ã€‚å› æ­¤ï¼Œé€šè¿‡ä¸åŒçš„æœºåˆ¶(ç‹¬ç«‹äºå†…å®¹çš„å‘½å)æ¥æ”¯æŒäººç±»çš„å¯è¯»æ€§ã€‚Hy- percoreæ˜¯ä¸€ä¸ªä¾‹å¤–ã€‚åœ¨Hypercoreä¸­ï¼Œæ•°æ®ç»„è¢«ç»‘å®šåˆ°å…¬é’¥ï¼Œå¹¶ä¸”é€šè¿‡ç‰ˆæœ¬æ§åˆ¶æ¥ä¿æŠ¤ç»„å†…çš„å¯å˜æ€§ã€‚<br>æä¾›äººç±»å¯è¯»æ€§çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯åç§°è§£æã€‚åç§°è§£æå…è®¸å°†å¯†é’¥æ˜ å°„åˆ°è‡ªæˆ‘è®¤è¯çš„å†…å®¹ã€‚åç§°è§£æå¯ä»¥æä¾›äººç±»çš„å¯è¯»æ€§ï¼Œå¹¶æä¾›å¯¹æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶çš„æ”¯æŒã€‚ç„¶è€Œï¼Œç”±äºæ›´æ–°å€¼çš„å¯èƒ½æ€§å’Œä¼ æ’­çš„å»¶è¿Ÿï¼Œå³ä½¿å¯†é’¥æ˜¯å”¯ä¸€çš„ï¼Œäººä»¬ä¹Ÿä¼šè®¤ä¸ºå®‰å…¨æ€§è¢«ç ´åäº†ã€‚åç§°è§£æç‹¬ç«‹äºZooko â€˜s Triangleï¼Œå®£å¸ƒå†…å®¹ï¼Œå¹¶ç»™å‡ºæ¨¡æ£±ä¸¤å¯çš„å­—ç¬¦ä¸²å«ä¹‰ï¼Œåº”è¯¥åªç”¨äºå…¬å…±æ•°æ®ï¼Œé™¤éåç§°è§£ææä¾›è®¿é—®æ§åˆ¶ã€‚<br>ä¸ºæ­¤ï¼ŒIPFSã€Swarmå’ŒSAFEæä¾›äº†æŸç§å‘½åæœåŠ¡ã€‚å®é™…ä¸Šï¼ŒIPFSæä¾›äº†ä¸¤ç§å‘½åæœåŠ¡:IPNSå’ŒDNSLinkï¼Œç”¨äºä¸åŒçš„ç›®çš„ã€‚IPNSç”¨äºå°†å…¬é’¥çš„å“ˆå¸Œæ˜ å°„åˆ°IPFS CIDï¼Œå…è®¸å¯å˜æ•°æ®ã€‚DNSLinkä½¿ç”¨DNS TXTè®°å½•å®ç°åŸŸååˆ°IPFSåœ°å€çš„æ˜ å°„ã€‚<br>Swarmè¿˜æä¾›äº†ä¸¤ç§å‘½åç³»ç»Ÿ:single-owner chunkå’ŒENS[79]ã€‚å•æ‰€æœ‰è€…å—æä¾›äº†åŸºäºæ‰€æœ‰è€…å’Œæ ‡è¯†ç¬¦çš„æ•°æ®æ ‡è¯†ï¼Œæä¾›äº†ä¸€ä¸ªå®‰å…¨çš„ã€éäººç±»å¯è¯»çš„é”®å’Œä¸€ä¸ªå¯æ›´æ–°çš„å€¼ã€‚ä»¥å¤ªåŠåç§°ç³»ç»Ÿç±»ä¼¼äºDNSï¼Œå…¶ä¸­ä¸€æ¡è®°å½•è¢«æ˜ å°„åˆ°ä¸€ä¸ªåœ°å€ã€‚<br>Swartz[108]è®¤ä¸ºï¼ŒåŸºäºåŒºå—é“¾çš„åç§°æœåŠ¡æä¾›äº†Zookoä¸‰è§’å½¢çš„æ‰€æœ‰ä¸‰ä¸ªå±æ€§ã€‚ä»»ä½•äººéƒ½å¯ä»¥åœ¨æä¾›å»ä¸­å¿ƒåŒ–çš„åŒºå—é“¾ä¸Šæ³¨å†Œåç§°ï¼Œåç§°å¯ä»¥æ˜¯ä»»ä½•æä¾›äººç±»å¯è¯»æ€§çš„åç§°ï¼Œè€Œé˜²ç¯¡æ”¹åˆ†ç±»å¸ç¡®ä¿æä¾›å®‰å…¨æ€§çš„å”¯ä¸€åç§°ã€‚æ ¹æ®è¿™ä¸€è®ºç‚¹ï¼ŒåƒName- coinã€Blockstack[95]å’ŒENSè¿™æ ·çš„ç³»ç»Ÿè¢«å¼€å‘å‡ºæ¥ï¼Œå®ƒä»¬é‡‡ç”¨äº†åŸºäºåŒºå—é“¾çš„åç§°ç³»ç»Ÿçš„æ€æƒ³ã€‚è™½ç„¶è¿™äº›ç³»ç»Ÿçš„å­˜åœ¨ï¼Œé™¤äº†å¸¦æœ‰ENSçš„ç¾¤ç³»ç»Ÿï¼Œä¼¼ä¹æ²¡æœ‰ä¸€ä¸ªç³»ç»Ÿèƒ½è§£å†³Zookoçš„ä¸‰è§’å½¢é—®é¢˜ã€‚ç„¶è€Œï¼Œç”±äºç¼ºä¹äº¤æ˜“æœ€ç»ˆæ€§å’Œå¯èƒ½çš„åŒºå—é“¾åˆ†å‰ï¼Œå¯ä»¥è®¤ä¸ºåŸºäºåŒºå—é“¾çš„ç³»ç»Ÿè¿åäº†å¼ºå¤§çš„å®‰å…¨æ–¹é¢ï¼Œåªæä¾›æœ€ç»ˆå®‰å…¨æ€§ã€‚</p><h2 id="VII-CONCLUSION-AND-LESSONS-LEARNED"><a href="#VII-CONCLUSION-AND-LESSONS-LEARNED" class="headerlink" title="VII. CONCLUSION AND LESSONS LEARNED"></a>VII. CONCLUSION AND LESSONS LEARNED</h2><p>ç¬¬ä¸€ä»£P2Pæ•°æ®ç½‘ç»œå‘Šè¯‰æˆ‘ä»¬ï¼ŒP2Pé©±åŠ¨çš„æ–‡ä»¶äº¤æ¢æ˜¯å¯è¡Œçš„ï¼Œå¹¶ä¸”æœ‰ä¸€äº›ä¸»è¦çš„ä¼˜åŠ¿ï¼Œä¾‹å¦‚ï¼Œè‡ªæ‰©å±•æ€§ã€‚è¿™é¡¹æŠ€æœ¯æŒç»­å­˜åœ¨çš„å¦ä¸€ä¸ªæŒ‡æ ‡æ˜¯BitTorrentçš„æŒç»­å­˜åœ¨å’Œå¹¿æ³›çš„ç”¨æˆ·åŸºç¡€ã€‚ç„¶è€Œï¼Œç¬¬ä¸€ä»£ä¹Ÿæ•™ä¼šäº†æˆ‘ä»¬å¼±ç‚¹ï¼Œä¾‹å¦‚ï¼Œç¼ºä¹é•¿æœŸå¯ç”¨æ€§ã€‚ä¸‹ä¸€ä»£æ•°æ®ç½‘ç»œå»ºç«‹åœ¨ä¸Šä¸€ä»£æ•°æ®ç½‘ç»œçš„åŸºç¡€ä¸Šå¹¶åŠ ä»¥æ”¹è¿›ï¼Œåˆ©ç”¨æŠ€æœ¯è¿›æ­¥å’Œæ¦‚å¿µæ¥è§£å†³å¼±ç‚¹ã€‚</p><p>åœ¨è¿™ç¯‡è°ƒæŸ¥è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†æ–°å…´çš„æ–°ä¸€ä»£P2Pæ•°æ®ç½‘ç»œã€‚ç‰¹åˆ«åœ°ï¼Œæˆ‘ä»¬è°ƒæŸ¥äº†æ–°çš„å‘å±•å’ŒæŠ€æœ¯æ„ä»¶ã€‚ä»æˆ‘ä»¬çš„å®šæ€§æ¯”è¾ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œé™¤äº†è¦†ç›–ç»“æ„ä¹‹å¤–ï¼Œå„ç§æ•°æ®ç½‘ç»œåœ¨æ–‡ä»¶ç®¡ç†ã€å¯ç”¨æ€§å’Œæ¿€åŠ±æ–¹é¢æ¢ç´¢äº†ä¸åŒçš„è§£å†³æ–¹æ¡ˆã€‚æœ€å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ˜¾æ€§æ¿€åŠ±æœºåˆ¶ï¼Œå¦‚ä½¿ç”¨åŠ å¯†è´§å¸æˆ–æŸç§ä»£å¸ï¼Œä¼¼ä¹æ— å¤„ä¸åœ¨ï¼Œä»¥ç¡®ä¿é•¿æœŸå¯ç”¨æ€§å’Œå‚ä¸è€…çš„å‚ä¸ã€‚æˆ‘ä»¬è¿˜çœ‹åˆ°äº†ä¸åŒçš„åº¦é‡æ–¹æ³•ï¼Œä»¥ç¡®ä¿åœ¨é¢å¯¹æ‹’ç»æœåŠ¡æ”»å‡»æˆ–è¶…è¶Šæ¿€åŠ±æœºåˆ¶çš„æµå¤±æ—¶çš„å¯ç”¨æ€§ï¼Œå³å¤åˆ¶ã€æ“¦é™¤ç ï¼Œç”šè‡³ä¸¤è€…çš„ç»“åˆã€‚æ­¤å¤–ï¼Œç”±äºè®¸å¤šç³»ç»Ÿåœ¨åˆ†å¸ƒå¼ä½“ç³»ç»“æ„ä¸­ç»“åˆäº†å‘½åæœåŠ¡å’Œå†…å®¹å¯»å€ï¼Œå®ƒä»¬æœ‰å¯èƒ½åƒZookoçš„ä¸‰è§’å½¢é‚£æ ·åè°ƒäººç±»çš„å¯è¯»æ€§ã€å®‰å…¨æ€§å’Œåˆ†æ•£æ€§ç­‰ç³»ç»Ÿå±æ€§ã€‚<br>ç°åœ¨ä¸€ä¸ªé‡è¦çš„å¼€æ”¾ä»»åŠ¡æ˜¯è°ƒæŸ¥å’Œè¯„ä¼°å„ç§æ„å»ºå—ã€‚ç‰¹åˆ«æ˜¯ï¼Œæ¿€åŠ±æœºåˆ¶çš„è®¾è®¡æ˜¯å‡ºäº†åçš„å›°éš¾ã€‚åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å°†P2Pæ•°æ®ç½‘ç»œçš„ä¸åŒéƒ¨ç½²è§†ä¸ºä¸€ä¸ªå¤§å‹ç°åœºæµ‹è¯•ï¼Œåœ¨é‚£é‡Œæˆ‘ä»¬å¯ä»¥è§‚å¯ŸæŸäº›è®¾è®¡å†³ç­–çš„å½±å“ã€‚æ€»çš„æ¥è¯´ï¼Œæ— è®ºæ˜¯ä½œä¸ºå…¶ä»–åº”ç”¨çš„åŸºç¡€ï¼Œè¿˜æ˜¯ä½œä¸ºç ”ç©¶å¯¹è±¡æœ¬èº«ï¼ŒP2Pæ•°æ®ç½‘ç»œå·²ç»æˆä¸ºç ”ç©¶è®®ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚<br>ç„¶è€Œï¼Œè®¸å¤šæŒ‘æˆ˜å’Œå¼€æ”¾çš„ç ”ç©¶é—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œä¾‹å¦‚ï¼Œè°ƒæŸ¥åŒ¿åæ€§ï¼Œå‚ä¸è€…çš„éšç§å’Œè®¿é—®æ§åˆ¶ï¼Œå¼€æ”¾P2Pæ•°æ®ç½‘ç»œåˆ°æ›´å¹¿æ³›çš„å¯èƒ½çš„ç”¨ä¾‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ç›¸ä¿¡æ–°ä¸€ä»£çš„P2Pæ•°æ®ç½‘ç»œä¸ºæœªæ¥çš„ç ”ç©¶æä¾›äº†è®¸å¤šä»¤äººå…´å¥‹çš„æœºä¼šã€‚</p><p>æ¨èé˜…è¯»ï¼š</p><ol><li><a href="https://www.youtube.com/watch?v=jp0bF9Qu2Jw">Vol 075 åˆ«å†é—®æˆ‘ä»€ä¹ˆå« BT ç§å­</a></li><li>åŸè®ºæ–‡é“¾æ¥ï¼š<a href="https://ieeexplore.ieee.org/abstract/document/9684521">https://ieeexplore.ieee.org/abstract/document/9684521</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ‘˜è¦&quot;&gt;&lt;a href=&quot;#æ‘˜è¦&quot; class=&quot;headerlink&quot; title=&quot;æ‘˜è¦&quot;&gt;&lt;/a&gt;æ‘˜è¦&lt;/h2&gt;&lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å¯¹ä¸‹ä¸€ä»£æ•°æ®ç½‘ç»œè¿›è¡ŒæŠ€æœ¯æ¦‚è¿°ã€‚æˆ‘ä»¬ä½¿ç”¨é€‰å®šçš„æ•°æ®ç½‘ç»œæ¥ä»‹ç»ä¸€èˆ¬æ¦‚å¿µå’Œå¼ºè°ƒæ–°çš„å‘å±•ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬æä¾›äº†IPFSçš„æ›´æ·±å±‚æ¬¡çš„æ¦‚</summary>
      
    
    
    
    
    <category term="Distributed Storage" scheme="https://zhangzhishun.github.io/tags/Distributed-Storage/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºUbuntu20.04æ­å»ºå•æœºFabric2.3.0Raftå…±è¯†æµ‹è¯•ç½‘ç»œ</title>
    <link href="https://zhangzhishun.github.io/2022/04/17/blockchain/fabric/%E5%9F%BA%E4%BA%8ERaft%E5%85%B1%E8%AF%86%E6%90%AD%E5%BB%BA%E5%8D%95%E6%9C%BAFabric2.3%E7%BD%91%E7%BB%9C/"/>
    <id>https://zhangzhishun.github.io/2022/04/17/blockchain/fabric/%E5%9F%BA%E4%BA%8ERaft%E5%85%B1%E8%AF%86%E6%90%AD%E5%BB%BA%E5%8D%95%E6%9C%BAFabric2.3%E7%BD%91%E7%BB%9C/</id>
    <published>2022-04-17T13:00:00.000Z</published>
    <updated>2022-04-27T02:35:55.482Z</updated>
    
    <content type="html"><![CDATA[<div id="hbe-security">  <div class="hbe-input-container">  <input type="password" class="hbe-form-control" id="pass" placeholder="Enter the password to read.">    <label for="pass">Enter the password to read.</label>    <div class="bottom-line"></div>  </div></div><div id="decryptionError" style="display: none;">Incorrect Password!</div><div id="noContentError" style="display: none;">No content to display!</div><div id="encrypt-blog" style="display:none">U2FsdGVkX19bfO6cZ9u19wQ9ABsPj+VMe0Bd5obCO6cwl/+3FC2XRMhW2KowSJCNqdIENXku1aVbpL6gCzsfmXIVwRBSdjkU93Fc5te5nKan6GdYMRQK1DA0UAVXSDEd8QfuDpoFrJutaNd2+zw8yNvWRA5Jt7pRR3krxG5wP6762WbuB4dFO8vMBSYnHzqeLOqpZNMTmUYi/oKFCHdSk0BG5ApfaL3l7ZN9lOBk68Z4QyB15A5rLNkbMWGQunLQsy35yJ7VKN9FyK+YkZiiHAfFKOodoIGn3OD0FM/Juy7AW1FOW3Oo+UkTxE/iPSu+yUB4SpYWgbYZxI2A+N/jNbz+ADoasL2EYpPke0/TA0KKbQkNBeVPUQ56fRYLe875QjY86OfDaM178i76xHW2kEGHZQYbGXo6fxJo6+Si4mokMCx6YM0nxqd7FIdi4pM44npjEKTwOcCtKtAv0wj6HxD62WeBV0QFqju/M+7lLx+uXayTbNGf7J1+AuZVYbxs/w8tHxOVrbcJMUMzLQ9SVwCM4tPMMDvvmIGPYHru5xjeUFu0UZ8dZNbeGqnQQu4Mg7WPbYynCvPwAE2beFCpm4yWh8yJ2ClXrf1D+7pFMICZatcIAm7ztTWn3UGNQCvY8Gde1dm3pfdqqDy4iAD2xGOPIbLfLEdajh1ReafjwVbPnKuXX5etTsV1D/T5q4ZEdw0DxpCh6bDHKtu2HpZrmvCgmuncKjyWtro+zriAeWSF5S8kDIif9whikOe2AFX0BYz9iIiuJ5iecSqLhm+gpHtZoaHjXDkfSMkcFU61gJA2HSI+m41Ylt5ythuSQG3H+L+0bhkbCC7yipOKvLKl+8RwmoiHu6GmB/mmrWX0b02YPP2T59LNiNY6veLYfHPoCSqbvrUvOQBs3SEW/Mv9Mmb2eOwXQqOzztBLiKop+XfubSuLh9j7LgBH2LOUHv7eXJVQngsPgILi2VWsq32XwoQJ0SWHnzqsMoBjecB+xVogrHS+hlt20UdpEjFwKp+qPKkpjzP0A/QDbquiBUHMfkfz5h1c6I3j/wiRYAC1z4xXa8G2oUfkvZs9EwCj3nA/R+fzAYwLrTQE/cOadinm3v9tcrprVDNffrqU7nfB+ToKz5d+OPXcS283OvcojZil+qIomcJGIAQwuA0GVz+dviXDB42Vv1iFb/r0NBtqMruXFsxhN1T7GTcyMmTlK63u212Lo4tDcSPAQ9BcHweYLQMKTUcEzRR8E5lS1UDlJwH/ml+SDFF/n6jTXewOPSApAuYBq/iigmwbjZTCd3uC9fEEBsNYEVseGElaU7ATWL5E3wgck0r6gOVMO0ofH0t/mHumTfpNrhxi+X03VOGlMeeAc5hYw2oVbLxAHuwQEPc5oGTmgeNHCLYraXsAhZjIPMfQlMw+g+RXYthiC9iPiZSN0hjsPdTR5NhKJFXQOS7LGVKzQXSesnJ5mq0Dmm9vpcOMackRyHBAp1U96bLoCQkFLHv+P96P3MxEI5ZHSQXqUllt+Jsfk+zlgJv1B8w44L6SJa5UbElON6eujCFDkmq2d60XX7xtrCuA8Tm+AuECPNEEgInHh8JflTYlFEBN7GIIjjMIufxs6Ijr1U7vCDSuEA1IYOkLBva8+SDC59DCiyBd7c3755I4KClOgWqs4SUQp/DvOWC21xG2U00i4PMVMiKpJ4L6rh1np2lnyp44QDki2S3cO9Jr1BMAk//HMr6uZ8SfIbikkjgFw07c8Z23031c8nEFFBpdITRPnLqMdQEInxmKj951ovHpD0fWHk+zhgm7Qmz9OtBqmnbuRJiiLflvAzpHtsGIfsGku8yBu5SpLW0E7nw4+vEH/6MWZUK4N+A6Vs7G5or6ehvzQiK8q27abpk4euT/HFvYJlFFYzFKW30tcKh4T2b2E+xxoFitfi9o99VHlFRReXgx6g2mgEZuFqNF7A/yHOuoO5noNfmjI/e6Cef60O3EP+11rwi1siFkUScCKWNNi9HfX0Fay20s+I8qsKvdq0jPREyyURIg32bSmLzL54+cq6/VfIdYh7HSoHV5ZXPBCOuUN0WEndFdOvHRfPkDdmPxXL2UhR3zXfEyiQlvSOdPoAPy3LvQV6UEGh1zbiyfRG8J2c9Ot4cTVFczVTZNfc+fYXQWteyfOwoQKrzvdYs2FGOFw5DGkACPsmKfneoHrlVYnpjZGRYIZoSv74UV90yiHtiPB3SXhVvwtxf2XUqN5fsSDbESKoS0ldzfao8umLx/i8jDaP/i0yJziPGbtMCo8IanaAebZetTi+R4qk69d09lFU+CjcqfujkD0XPziFs5HNPE5FhONpCtmt4LeWQwrsS1k2ZSze8drsNqH6uY5SndQcoCfiyaGRAbVIw1lIYHGNMmh+ogDD2dicRdHiKhTCS596gO5J3S2zcdAH+wZIp8cwEMtkUqvVFExqVBx9G8YNhLfc8P9LFfMPREgimyCQWpU1OfOgCD9bqwehku2ry3WEOmg3kZKr0S1ALQJt7Wxlt+SRCeRr8SlpTakmzVoLRMCCXBUE93FwV27KcXyzm0w2bPmFR797VJMzwyIP54mDa4X80gj3d+niQ1uYTE6jVyGZgzQJIg9z1kDssdO4szuStt0mKB09ASjlPiW8D7gMtXXFp3fqfHHXD4oQeX3X4KRXm402yq8eCgBFSVw4CMME/LE7op8O6pcCuJ2OMcpWc9YMBl0ffZrsYzlL+b3ugXdfcxYjjBMIp67TgPZSvc2wiQ1XiupEQapCCA1aZaia+xv+u9DV9h3qdN9rfwfEZRE+N/T2/P3riKz97hib56N+KgM9yGLAlVXsDbQYjiTBfNCV9WmT43aE0+TlleKcTwmwvrsYcsFeMTxen4yF4FZHE3JBcuVq0RdadY9IeWXU9lH8mucHWamTNJjarWQuYEP/ZkjJdVElkqfwBwUmG8HyOsk/TnNB1hUf/eyJyeByjhTW9ed6qrdZk7nvNwV+FiUdFNUr+BkzJL6cFqk1GIT6wctgODkabEa3tJcsdAvXxFw60yb6nGR7yyEYIhGRuy+ZC0r//OzlZ6aAtvCGXS0bqoOOuXcOiYD+udWxOEM2nEjEdJbauImGgc638WuvzSZqm9zQB9tgg4x/x/ZRU1wR2vjkktNOWVO1uq/Kkz7VtA+KKpfopliK9MzxuvCRO1050dTCzKhUV45ShEjTHL71MHcovxnY0t53MCnhgx3f7SMiUC4hKOmqxhsFFnemPaWHDLrN+0zwanReF1HLMtQ5Bfp35x/ZIKi8j8fpA5dQYBy/I3ZR5NT47UjoQuSrcm01kDCNpOY+S3J6EiTWLhWHfjFz/AwaRsRcnmZtPY9kh4vOqxQGLiF3SSk1DFmNMLaB6kEe1e86sSttnWmHqYr2KvucxUpXR2u8CMP7zJPDVA/krzOp4sf1BNxrb/KcoCp6QuvH5YBVrnCAb0awh0wZNehpbKeX3uJ7wJ5YwfIFJRzoUAZ3qvAvwokZpq693jQ45s8iUF3EmvQ6HfhUFO01bTVAxeZZ0UV9E5Q47A25uAloLqwBnzyfAnC3HNeFypICVtuVdZrn8SCCUYztDp2+e20CVyQWO9w9pzt0P4NFraBHBhgAOqm5zm9h34KSCKjvIPtAPo2+gZovPaSJaOAzVogvSs5uU3tvJz+1yTttuBBCcv9Uwq/9s4r8DBJVrCm+3jQS5D584CvvEr3WwGLO5Uh+oTvvaeco5b0sCAqu6ZrsLrV9r1DEmxDg7Xae7TkRpWfwJsNNwuoy1CoOVWOtgGExC6cdP0bto9igyT4Keig5gli9IlL2pQM/N1XWxjIzYXbOTY5whdmWD6bx9Usu76ItKPEnRWu7mf2U8yqX4EQDvUeD5rZV3zl7K20CDWm3cEMzamNEoYumRwZpqItAZ2Zuei+Qm4KAU+RS7iiukMxFYNgp431zxr8DOyx5Y3xB9kCxC9oV3kpngKwieK5p+O1t9NN1cQQQ7Fe6+dJ+BOPTsijh4nrjGm40JLBBcOugOLAw6/Gcn+T+BqGrzBxk0BnEUd+UNYvnAwm2Ja5xeu9RYbZ38ZOk53x/FgWJTxyF5Bx4do9O5QcEsen+jmzjEsSaR/XC5AeReoCXbFva88n3fiYaUk4d5AEEGycLVud8ZD/Yvy2Xa+6HnMsbfsOg3/SxClAIMPQMg59GxTPPTnVWheIxY2LxRKaP11+DT4GJRc3UY+qJ/IqNDaStzQ6YaeEvWM/VqW+Hl0gaMlN10FTdHD/ZOZMriGfzQ0V5rOQl98vhyhf+nhCqQZNNUWZ/Pg3yy5oruMC/pjLS5urQvR+OdlTkO150kESEgbBpCH8qlRikkuqhx15f5Hif1g/Iet9kr1YhXG1VOBzW8mLs4cKZTfg0qQLDg2fzWgQlU4/sgJTtNhIvN9z0ktpx8mf1BbPZ1mmm5jn3G85KvroUvokxlrtwIzXVmUCsB/KqSAn42Ltr4IKvEvexpxRKfRVr72JS6s3Lh9O/sirREsiLlaHYX6etJn5JQLDPaxpHilcRjHP8CohzucXUd+j4g1oPNS20xftB2yW8FCAR6BC3699EqkqoLxEG1KmlajOtuh4alKQJSs3aXJ7hpAvG+iYcJy7c+toOJQiFRWlFZ50G9waHFvySD+7jzBGEc1l9NEeeM8cZ+7GrYJC6l2IDnS5cphPgB7gmoPmZeiSQF6nxN3IH/CmgtAXg8kHmDLiGLmaSf1gcqJMTT8ZTsVFuTWlRSMNFmeY/BWWfkw57rVQbn4ZF060mCZjtoKgvuJrWNOvEstOdH8BsAiCb0p/PQTHNTgYKUPtY+tNaRTPWTVy+K5l+eJny4CjEn2r7mePOLhxqWk9PRlzPi2CYKx2TfSQqE1FguaJmWOr/QfeJveK42YZ47k1QkA80e5tHWvanQbBagqCul4TSPnd90NEvmhm/VelcavDLrSeHtVKvQyA4MVo6pBzYd995A1HJw6HsKS+nWcJgVKd+hCIV9k8KeRx8WozUNzeqoM8u1oy9Pmzq/W1Nauh0ZT+tZ9Z2/DR82217FlQOLQ/ZNLAs/QV2uHKEpuEXPdx/tMW3Tr0Q+gu80KXnXdyDGKOXpe/gIr4SaKKHBFNUbkejUVQgAfRt00Q+V2amPB0TCOgmHYgoEXsORZPAVS2UElvDhDrt56Cbc7q5yfHMJp0Mz+VGjFiKAjRfRORQF5JyHc2cANguIuVWXRwJq+jQ24EEEzk5+d0blrKrkNAIBT3SXCmVBEv/0t1gAPhxuiSuTivltJzGTD2+LXp37mcUWlIoHet7heDjqtKyMxp0eDo38vBy8kCb3UwyCNugIh13mbl/iDuS9LqUBtuMjmBlFAW66vOfedmpAbX41BIi8AyFpCYR5ZofCEqw9P/eR55hs+yZZO6Uy2mIBGZU2mTrYxVrRyY03RNXqClRNDyKw2wEFRHP9pfrfJ4+u+Ip45jfW+MWdvN1sVUiy0R0nGz30xmdtXAxf4AEcsBgi8AlSn8fcAsdyC2I/6WGhb4yQPXsJp0CWE8Q6pqSpP24fLm/LVwXReXv9jH9oNU1XNKoXEHFkxsE6fAvwHt3TrNpVK9leXH58L2stNcU42co2jOMIGChfsKpJZ8xeoN+klRv/nrf4H94VDTBpIxPc7WAn61v8hl06tzypSWtKvTBDkoqrdi+sBRUWSuHy6fsaosq9+kWrJYELNGkfgbQ87Xq/ld/K6z3fIURoIm/eyI1ecsVLaJ6jSB7x/T0yNPh64ZiJqKpefQN7AOVOgyvpWTgYmkf4KwqVJtzMdZ9zExFmn7b+JP/UFxCY9j/XX0E2z9G5bjQhfinrpbozpduPnUbWZb/u7rbb4x9DlE64RUPTptdpgfQ8g2Iodf44sbo3XVvs1Ya/3028zpp9e42J+uBldi7v/y+HKyOYfnDVDGyiE8Y8DzBDuDi1xZ2f8fCJpTXAP7ZXnxlZlufSZmL4W25qqDw34rMPtX4xwT3OyaXCHd3HlzVlh+kKWY7wceCLZlyENahywz/FKycK9DWdEENhzUAv4FMDyfh7xb1/68DSbA49Z7mH+wo+izjumqhaIQoY+h5usf/MGYy/yyz3slmICcVzFFM3dknbe8tvSqKthUpnH4XsJCO7fs88TtIFqSttIz67m8VQf0x3uG+1E8awbi1HZfg8qOLFaWUqhsAfo8xgsZ6V8IOWm8l5DxXLkxSKXl8sIKB4GB8ZdmzJJOJTE2byi4/8ev+0CFY1iAi7YknJnwF/QPIocVxFXJOrdo1H/KUeDXpyBl5SzUAOu5OezAFPY0ouSjuyg/O8jHbFfTA+D6GC6ie7z0wyyUhZObWL+EK+i3B67yvidGt6OTONX9ZWN7P6d3scz/bmn+/4jUYXnUrsOkQCprB053BpwcN5b4dsDQXrqp2D1ySnC+3JaLhKnaOuXWiba6/JItbDctWYbeekR/+Whp74QEm1oWL3m3leQ40qF0oDX7UMIK/Vl5i4BbV9M2jceWiWHp3EpcizcxTQGBPpQA5aW1atrLSDpjceBW5+qZ5Q/do0ShU43udl8zd/nqK23Vr0wq+FEyr+0/IE5pUFj3h1PqGFGrnVQj3CGtXX6KnHqO5/hpFqCOXFV0znNj33ObdaQ6VrXEp4nlgqHcJdaV00PXY3+4fkCunrKcvT0CS0oGqNWIVDC3bdLjyHebB0VqaGROy+H0qMSfdvEYd6K87AkQKs7BnZTpkClu3xVjTflSjJ8tHT3lhLvUNJ5fsQ9xw/+GKD6Pg7y7RDRhpeOD7vjVq7AOtYvvW+ezTn0Ac049itNv3vggG99RQYk7yXAEEB6osAR2XgROyPJd574LBk0k1A3ECBf26j+JMRauNnvusmY6M8J3eaI1lWqQMVFqDJMZqqmGibu55ohPbZIxVCgCZdjtZ94VNDpMOftPZkY1lXMauGegdsABUN3dff9ndbTg/2rcu+Zn9gHWT/+ciFcfTqEYBMnecrxGdHs9QIBwY2M3/mhZPTHxgco/HZLUwq31td2Si2DrxEaeAjqGPD89iO1NEFSDhWNV6yyGdr53YqEe8ErQBDzfwsdpCx0bq8OaNDP9sUjmsDZTo1R7KVUtkuP1HMXvpFJgnP3Pqie2+m/PKnbSqSL5EzbfnkH6gYffQjMyyRAaNS0ZI++QP2pNpbDgcsU648dke+Vqjisfy7OKtJ6waYQ72hhJuqJplPZwOFCqVw1kbi5BToPbwJSdjwBkexBT5726mLp3VZfRaeNyGXI6MrKt6TN+9HhRnGsy0JKNZ/I+WdO9NKObxgCzUkTwSJ+M4TF1OO6GuebBRQXT12Eer6lAV10h7RwZsRGVzjf9BAAkFHnT3KN/SMQjTXG7OBgPGx702dhXnxwtcxm4ll1yb79+qtJYxhLAX90fzbRLlR0V6TIFARyyz89GgtxEpSmUdec5v4yAEqEfqIALvJ2CgPjR4Eh7j4dCgliMT6fsk4ibGat5dK8ZhDV55ba+KNHe4JHVnK/oOTX1SVRqAf9+M3hv4QmOi4jGlTkShTgRWfZwKWoJuutRHGwFYfdVVX58nMELXFGi9pyRACZEKsCiUoNDN4nPgQstr0BDMXMWG1QvvKbBoBCmzRW3ZBsMORxB6BJkpza6Kb7MPRdrcejRwfcPcQ9a8n7y8EqVdE1yYIuT6Qt3UKn9RH90GPycz72OSTJkFKM3L3ePyHi4IYFgjBP7FFq0fuzGYeYCwzEUHyZuSVhJQ2PVQjUE8DNoxrzJM/MHq0pd6T1KCDbnxv3PRmXoYHNlHQ+A1KR6Q0q7fifTXxszCpLXU9tbh2TsEKJJReVh5ZyqTVxJLS4KsQyndhK853XdvxQgVIz2cZe5xxCFVeICIDrehFNh8zsBFmMU6H33Lb/Sbifp59nXmA1tr0P3J+w/KBDHWyF1wNLeXpTCCh8xSisaEoS0gtJFbSE50FhPdmDH14B5Cl9Qjb2KvqZmyichMeLV5sJmJ9XddWLZzuWBfGevarpQwA4r/rce5DF5xl/huAzAigNY5n+BdGS1AgjlmOEL5Ech15dnDBq31w3gagqeEKpwOzWtgRaQtIBxM2B0CqwLEB5hlpNKXdNZP8IvJFfyHbqq9mYsXIensGEETdcuZr5rPPBHpkWkHpxagYo7h5IES3Wp/2bdZa0hLK8hMw3g6NVJMfV8C4ExZurARnRE2AwtWLwbfwuY97XqDOjdjht0NKYOMP0VJ66jtBzUcFXY1Pe7whIChpPTITVzlyrvPGV7s2WxuHRPsnYObAI1uG1d+q1X3g+tdQghAi4JDXHyqyegH/gC3CjEcpGTLY6uNbNPHisPrk2bakuAJrMexkhOtJCkDsMR590lsPJf9P+iExlLB1TXg6M7sqZqrIuDlEPhviLJ64pinv220QjoQ97Teu13krCwADJV9oX7qhg/6FlRLaSsV5SdQ2K7Umbv/kdrTCXDG4/RZikmSLwws1muFRZoaeisa1f8lHc+LSZSCUGDeSqXj0v/WDt8ZF4RZcLSjtdATk4lK5LepZq14VAaJoAlZh5vve/KIx4bVKq5Zo58b2b2bOpd0Wkqgqkty9Q4F5rXECfPnvjc7yiaeiWt6KsBuyZNS71lWw7JhgdL+BPrg1zYjPPiWSxONB5C8eqNGACgEnl1fflwRplTj+N2RWJi08V5ULokxESueHPqTvKuKagV1BGnA9HZrqwCoIoFzbuycMrWP7aVSdAMenYQcCzWzZ+XFJgt+KsoUszJL7wLUVOFDryq+xvkRfGLkpWCDCm4yZ2QFk8uAD/DoVqmuWouvz6IFxPRgDrcK2kseoHvBkloeZIH/PrfIxeSgkOwpZqxYCzv7rQawsfBR0wM5YaDadfhmjti/LGTMb6oXRdEefdd/gTPdsGmpX8vfn2rprafbT3yWshu4cl82Ok9vjr9X1DD1GR9fC64lZuOVVo/JxKIz6h0Gyls5m1KSW5cK0d3/7l4IawxNwuc/KrP2/GXCxmccszTavKF6/NduOmUMvExR/jebHcap8gdS3nDOu9jzRQKKfingyotM10tcQZ9MREEYV2D7M4JgtZyxbPokTb1JPxpqhfkIZhF0KlDe3Uq1/ezy6pESrkU0jSr1Fcswlq9oDF4feOB3ln0h+NBuRk8clvdTr2g3A3gypLMXs6ppnEQxMgjaJlrdQmL76gz4pBbrjXf5GuvjcDxPI8hb6xTDgwn1TeM9ap+FhaRovUOu6/JjFeO5l5C1LoVSvmlqTVwERzKLKEzwGo260E65QwmC6w2hH+VIBfix/3K6POi80d5XWzpOZKAOBfVwNYoV0kcahKOxuyyDR/3Rt2sX6t6hmT40zqSoj8VYpTA9jsOeOtk9CW3svq/6OkzRtsDeEQqQQFGQyocBxc1eJiG4oMvRdeXeJY6ibGvx+L/VwYwjopdWD8gVR4METsWc54MKrqtYMlrhkniugtABODzpAvrLHUj5HcW8xwD0y5Aheh6xyxyXmpkhy1y+tcGElOCZ9edtpsfjG9N7ZjPgw6SKel69YUnZ2weKOZtau7uYPeEO1Dyje2IgbACIZOE5d0/W9Q5a7WLHUXDEVCuua5SVccWRVu5NJWNyXOfkUkznmcQsTv9OJtygwz4iqhi8O1LUG0ldl2yLwk0b+rogD86P0ssUHyc4/jjJpguljdxfxgqiWLWZ60Rgq1MJPYuemguKGuAi/jxhJEIBUmhlZ2kD5pmmZ7jxKeeyutHvUtOcNoOcjOIu920DejQFM0ryv59rjREgaMYpEaDfTir5OHADadOGUcavlsuUF9sP9ajd+OoF/ABUwg205Qq2QPqwcFyu7LBc2DWGyeh6voI29c9yeImFnmA8NEVHX9RkqXhdpkHeSFATh9PlQ0VZ/Yrr4YRdOT6ffuMA7UmeghsOmFR3BFOz06Q4R9MuuRyj4rQSyQvV8NLjAd2/AkJjRp+i2lQL/SS/PJsBCnFesg6mEdESy+TjtKNyrZLN7YGILFT2LqSQd/yd8vNzdVg1+aZvQ0Nm3OfNXwh2llLntAry1qDaKdVyT/jO/VHzaYNn2O1KwJrCgXR9V5QI56Xu7fpy0QvtUVt/sFLhFoQ8WilcZs0CKHcRbZvPPJdk0JLL4wH4ADlXjYIbq2DFQQG2XIIc6+Brhc4/qwK7uh5i2DwgwIS5/Ix6q0edeRrx9M4qWOeD5N9M63Vyd5R36ttZOtMRqvklD3sMZkLk5NokT2a3QYiJPSFZdq5ooDvruSmaytDh75+Z8CArDwPHZNMCwSOWLnSKYUPSWOQrdH5zqjLiWVAMfYhtAOarArzwoUmGBD+GTAPC1g0LrSjZr+jPIDQvdM6Bd/sNDPRxs5Sam/DmZ9cFpLs6CsYz0oVbZkXfsaQU4740r7QBqMYNTdLNGeZx+BE3Q1fifeUdxS6ApeHGk1HowKAJ6Srm5Mjdopq4HZ5qNYYNiwfOIxgcA5TkQrHJDzmwPxcayy2azMlqb20OV93nSxfrRvaFJCKk/u6MV6nUIAT2m+4OijAlHd1bwOdP7B12hZnp/KAYaoxbIZtugHzd77NWWoMr5hMD2dwOH+6he1uFRdspmj9sOXEdhOLHzPlGw8Vv1pezbLwOCA1xSlEVtD9Yp26PnzAWAeS9XkUyhxBE7uUAd57QTGncqfIcSfGuEIDnjfaHWAodVKnofKe8fQQma/DYQUJbqMDYsR7zLbRBBbH17JfTVa5UK3420Uys4iROLU9+i4L5fyX6hf2FW8rsjfdG67UzTuYqfAwmmnEJ6z8TJpRKZJ2ix5yrsE0QJQQCH5LQ5Dsklt8xP4ftG0h0BhN+qLQdj1pd5FhCwLRuVj/4mDyyX81gVEdeDCF/ou5lKNqLGHn4C5Z+8/daQiHfIfwMHWP5hyZj27pyrGeT6+5ESDWV74i1LWQp+8h42EdujemIKs9mTQ5SA2LgCXFLEKz1MR3ZkBdfi0eXKliJHB6EgUExEsG02Z6hoP413HI6BT5PfsLImqBUi9Ig/aMnCxaFbqDqfgHTjGWO1D10Nw+Q8DrLFNOZzuKcArxemmJmnYwqsrbCmfR1TzhnWyFvdyCloloDuLOFYS0xtKZco8huhyNdLQ7puVy0MTpKULPXJPCjlq/qzCWjjnRFN+ox54lfOGGMgMEH6VIRdOobsfcddZ0aJLOuFQMxGWw1KGpNY+BdmDZchJe8Ent6hSAB+3mrCSWA1qkpZp0ilI2FljQmtsIMUOj0QyHkx4kHuNpfIKuNQOr5FOeS3jo21sZTU57BRU0FKyIuyevV+HbYreRfq4qRoHHN8BWjiXtuFMvrHBG6tPGMpZzuz3HQOt37GBDJ/PoKDJeupGxvGpOOIojnwEl7vBM66/I8PQM61WdCrYurh72JtbUmAGQCvCnijOIOqzBBYQZTKolFTDle194r9cK6qmds6cteBSKlhiLpy8EeL0y3KF7lahVt0zgwLd2N9i0tTn5+jKh448fbfgrh8TuzHjpJ5/k9fUXwlwdwk2ywxnqyncL27Rrfy8k1ktpoEmn4Us64ny7CVwBW9SiLzkvlcvVRNoEwY2NGCXkKfqg1CAMu4B+wQJ6o+ChY0qWyFd3iit7Gkn2J3LvVqaEIuzFAP8pA0rBG+GG7LJgShQQlDnJwHD6hjJZ8xg+u68ozEWHkFi0u3kcJiTg/aC+sNKBmpx4yOBVJrTOplXyQbR2EOwj6Bk9ivDncBMefuA7SgX3pY484IAGPBYp6YDZo2V0oP/UDycLoyEzECOCyMa6a1tlXgXrBD0hTxJENcdXBDGcwEncvy0zO5MONN9Yv4GP59FlneiBAqz1nghk2u5ELnDcCx8jbcSfGBON/1AZuFA+3Y488Cd5bYt0qknoAQZfy2IaCNWCl5/32Mcgjfzg89qGl4+QECUT5Wp5AslYm7bmgfouySBbMKqHni+1Ep2t6QOlvr8b/sqIu0u7Jfaq4qUW1nJQw3wOYZZIENtpI5zPOrivPeDaoNlEAnm8QwSX6E0OWN6Lj0o+clLeZhs39m81rRTQ3DuGGJKEpvaGueYozA5XvkI3xv0MTXlbIcxrXvGk4CAOjJDCWfyrRGEKfw+n6z5fIXdml/M6zE5V7QBRWOpKZFnXTPJ+O/WQb31AdBz5LWqHgOtB1PDZJdgU1rjxPEkNDfletYqA/y1vzcl8DaIGgA8AZTc6a9ZktGx2X4Zk9GRJ5jAF+FK4qeovN4vGINlG2IoagLCoiNEfoEWTYcQNSgz8JdDEcyaemKgPN2HPDezzb0PzA4Y6Zz4ETUzRN0DwDVHI8xoKAnsZuHhvP73YZdBIxd+1IzA2J73leKJyA9t6xDuZtvV7LKZSa6nXxRa08X4iE8R/kgoVtzhFFV1fzvKZ7TpNhuiyEp4pGZ4664YQPWIU/5PPObxLfXbiVdY89qTIxddqKIaxJUKQWxlf4s=</div><script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">The article has been encrypted, please enter your password to view.&lt;br&gt;</summary>
    
    
    
    
    <category term="éƒ¨ç½²æ–‡æ¡£" scheme="https://zhangzhishun.github.io/tags/%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/"/>
    
    <category term="Fabric" scheme="https://zhangzhishun.github.io/tags/Fabric/"/>
    
  </entry>
  
  <entry>
    <title>Arweave â€“ ä¸€ç§ç±»åŒºå—é“¾çš„åŒºå—ç¼–ç»‡ç»“æ„ï¼ˆLightpaperï¼‰</title>
    <link href="https://zhangzhishun.github.io/2022/04/12/blockchain/arweave/Arweave_%E4%B8%80%E7%A7%8D%E7%B1%BB%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E5%8C%BA%E5%9D%97%E7%BC%96%E7%BB%87%E7%BB%93%E6%9E%84(Lightpaper)/"/>
    <id>https://zhangzhishun.github.io/2022/04/12/blockchain/arweave/Arweave_%E4%B8%80%E7%A7%8D%E7%B1%BB%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E5%8C%BA%E5%9D%97%E7%BC%96%E7%BB%87%E7%BB%93%E6%9E%84(Lightpaper)/</id>
    <published>2022-04-12T03:20:30.000Z</published>
    <updated>2022-04-27T02:35:55.473Z</updated>
    
    <content type="html"><![CDATA[<p>è½¬è½½ï¼š<a href="http://ipfsdrop.com/docs/whitepaper/arweave-lightpaper/">http://ipfsdrop.com/docs/whitepaper/arweave-lightpaper/</a></p><h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>ç»å…¸çš„åŒºå—é“¾åœ¨æ•°æ®å­˜å‚¨æ–¹é¢å­˜åœ¨å‡ ä¸ªä¼—æ‰€å‘¨çŸ¥çš„ä¸»è¦é—®é¢˜ã€‚è¿™äº›é—®é¢˜éœ€è¦å°†æ–°çš„ç¬¬ä¸‰æ–¹åè®®é›†æˆåˆ°ç°æœ‰åŒºå—é“¾çš„ä¸Šå±‚ï¼Œå› ä¸ºè´¹ç”¨å¤ªé«˜ï¼Œæ— æ³•è¿›è¡Œé“¾ä¸Šå­˜å‚¨ã€‚å› æ­¤ï¼Œå¯¹äºç»å…¸çš„åŒºå—é“¾æ¥è¯´ï¼Œè®¿é—®å†…å®¹å§‹ç»ˆä¼šäº§ç”Ÿæˆæœ¬ï¼Œè€Œä¸”å†…å®¹æ°¸è¿œä¸ä¼šæ°¸ä¹…å­˜å‚¨Â­ã€‚éšç€å¯¹æ•°æ®å­˜å‚¨çš„éœ€æ±‚å‘ˆæŒ‡æ•°å¢é•¿ï¼Œå¯¹å¯æ‰©å±•çš„åˆ†å¸ƒå¼ä½æˆæœ¬æ•°æ®å­˜å‚¨åè®®çš„éœ€æ±‚æ˜¯å¿…è¦çš„ã€‚</p><p>åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä»‹ç»Arweaveâ€”â€”ä¸€ç§ç±»åŒºå—é“¾çš„åŒºå—ç¼–ç»‡ç»“æ„ã€‚åŒºå—ç¼–ç»‡æ˜¯ä¸€ä¸ªå¹³å°Â­ï¼Œè‡´åŠ›äºé¦–æ¬¡ä»¥ç»æµé«˜æ•ˆçš„æ–¹å¼æä¾›å¯æ‰©å±•çš„é“¾ä¸Šå­˜å‚¨ã€‚éšç€ç³»ç»Ÿä¸­å­˜å‚¨çš„æ•°æ®é‡çš„å¢åŠ ï¼Œè¾¾æˆå…±è¯†æ‰€éœ€çš„å“ˆå¸Œå€¼å‡å°‘ï¼Œä»è€Œé™ä½äº†å­˜å‚¨æ•°æ®çš„æˆæœ¬ã€‚è¯¥åè®®ç°æœ‰çš„REST APIä½¿å¾—åœ¨åŒºå—ç¼–ç»‡ä¸Šå±‚æ„å»ºå»ä¸­å¿ƒåŒ–çš„åº”ç”¨ç¨‹åºÂ­ååˆ†ç®€å•ï¼Œåæ˜ äº†Arweaveå¯¹å¼€å‘è€…ç¤¾åŒºçš„å…³æ³¨åŠå…¶æ¨åŠ¨é‡‡ç”¨æ–°å…´å’Œæ–°é¢–åè®®çš„èƒ½åŠ›ã€‚</p><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è¿˜ä»‹ç»äº†æ–°é¢–çš„æ¦‚å¿µÂ­è¯¸å¦‚ã€ŒåŒºå—é˜´å½±ï¼ˆblock-shadowingï¼‰ã€â€”â€”ä¸€ç§çµæ´»çš„äº¤æ˜“åŒºå—åˆ†é…ç®—æ³•â€”â€”Â­æ”¹è¿›äº†å…¶ä»–åŒºå—é“¾çš„ç°æœ‰â€œåˆ†ç‰‡â€æŠ€æœ¯Â­ä¼˜åŒ–ç½‘ç»œæ‹“æ‰‘ï¼Œå¹¶å¸¦æ¥æ–°çš„å…±è¯†æœºåˆ¶ï¼Œç§°ä¸ºè®¿é—®è¯æ˜ï¼ˆProof of Accessï¼‰ã€‚</p><h2 id="1-å¯¼è¯­ï¼ˆIntroductionï¼‰"><a href="#1-å¯¼è¯­ï¼ˆIntroductionï¼‰" class="headerlink" title="1. å¯¼è¯­ï¼ˆIntroductionï¼‰"></a>1. å¯¼è¯­ï¼ˆIntroductionï¼‰</h2><p>åœ¨è¿™ä¸ªä¿¡æ¯æ—¶ä»£ï¼Œæˆ‘ä»¬å¸¸å¸¸å±ˆæœäºä¸€ç§å¹»æƒ³ï¼Œå³ä¿¡æ¯è¢«è¯»å–Â­å¯ç”¨ï¼Œå®ƒæ°¸è¿œä¸ä¼šè¢«æ›´æ”¹æˆ–ä¸¢å¤±ã€‚ä»æ ¹æœ¬ä¸Šè®²è¿™æ˜¯ä¸æ­£ç¡®çš„[7]ã€‚åœ¨äº’è”ç½‘ä¸Šï¼Œæˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªå·¨å¤§çš„å»ä¸­å¿ƒåŒ–ä¿¡æ¯ä¼ æ’­ç³»ç»ŸÂ­ä¿¡æ¯ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰å»ºç«‹ä¸€ä¸ªå¯¹åº”çš„Â­æ°¸ä¹…çŸ¥è¯†å­˜å‚¨ç³»ç»Ÿã€‚ç°ä»£å†å²æœ‰éå¸¸å¤šçš„ä¾‹å­â€”â€”Â­ä»å›¾ä¹¦é¦†å’Œæ¡£æ¡ˆé¦†çš„å¤§ç«[9ï¼Œ10ï¼Œ3ï¼Œ8]åˆ°ä¸“åˆ¶å›½å®¶çš„ä¹¦ç±ç‡ƒçƒ§ï¼ˆç„šä¹¦å‘å„’ï¼‰[12ï¼Œ11]ï¼Œé‡è¦ä¿¡æ¯çš„æ„å»ºå’Œä¸¢å¤±ã€‚å½“æˆ‘ä»¬åœ¨äº’è”ç½‘ä¸ŠæŸ¥è¯¢ä¿¡æ¯æ—¶Â­ï¼Œæˆ‘ä»¬ä¾èµ–äºè¢«å…è®¸è®¿é—®è¢«é›†ä¸­å­˜å‚¨çš„è¯¥æ•°æ®ã€‚Â­æ‹¥æœ‰æ­¤ä¿¡æ¯çš„æœåŠ¡å™¨çš„è®¿é—®Â­æ‰€æœ‰è€…å¯ä»¥éšæ—¶æ’¤æ¶ˆè¯¥è®¸å¯ã€‚åŒæ ·ï¼Œç”±äºåœ¨Internetä¸Šæä¾›ä¿¡æ¯éœ€è¦æ”¯ä»˜æœåŠ¡å™¨è´¹ç”¨å’Œç»´æŠ¤è´¹ç”¨ï¼Œå› æ­¤å½“èµ„é‡‘ä¸è¶³æ—¶ï¼Œç½‘ç«™é€šå¸¸ä¼šè½»æ˜“åœ°æ¶ˆå¤±ã€‚</p><p>æ›´è¿›ä¸€æ­¥ï¼Œè®¸å¤šæ”¿åºœæ­£åœ¨é‡‡å–è¶Šæ¥è¶Šå¤šçš„æ­¥éª¤æ¥å®¡æŸ¥å’Œåˆ é™¤å¯¹äº’è”ç½‘ä¸Šæ”¿æ²»æ•æ„Ÿä¿¡æ¯çš„è®¿é—®[13ã€5ã€4]ã€‚ä¸åª’ä½“å’Œæ–°é—»æœºæ„ä¸€æ ·ï¼Œæˆ‘ä»¬æ›¾ç»æ‹¥æœ‰å®ä½“å’Œä¸å¯æ’¤é”€çš„å‰¯æœ¬ï¼Œç°åœ¨æˆ‘ä»¬Â­å•çº¯åœ°è®¿é—®ä¿¡æ¯ï¼Œç„¶åå°†å…¶ä¸¢å¼ƒã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œåª’ä½“ç»„ç»‡æ›´æ–°å…¶æ–‡ç« çš„å†…å®¹å·²å˜å¾—å¸ç©ºè§æƒ¯ã€‚è™½ç„¶è¿™æä¾›äº†ä¸€äº›Â­ä¸ä»¥å‰çš„ç³»ç»Ÿç›¸æ¯”ï¼Œå®ƒå…·æœ‰è®¸å¤šä¼˜ç‚¹ï¼Œæœ€æ˜¾ç€çš„æ˜¯ï¼Œå®ƒå¯ä»¥ä¼ æ’­æœ‰å…³å±•å¼€æƒ…å†µçš„å®æ—¶æ›´æ–°ï¼Œè¿˜å¯ä»¥ä½¿é‡è¦çš„ä¸Šä¸‹æ–‡ä¸¢å¤±æˆ–å˜å¾—æ¨¡ç³Šã€‚</p><h2 id="2-èƒŒæ™¯ï¼ˆBackgroundï¼‰"><a href="#2-èƒŒæ™¯ï¼ˆBackgroundï¼‰" class="headerlink" title="2. èƒŒæ™¯ï¼ˆBackgroundï¼‰"></a>2. èƒŒæ™¯ï¼ˆBackgroundï¼‰</h2><p>æ‰€æœ‰åŒºå—é“¾åˆ›æ–°éƒ½ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼ŒåŒ…æ‹¬æ¯”ç‰¹å¸æœ¬èº«ï¼Œæ•°æ®ç»“æ„äº¤å“æ›²ï¼Œåˆ†å¸ƒå¼ç½‘ç»œå·¥ä½œå’Œå¯†ç å­¦ã€‚æˆ‘ä»¬ä¹Ÿè¯•å›¾æ‰©å¤§ç©ºé—´ï¼Œè§£å†³ç°æœ‰åŒºå—é“¾ç½‘ç»œçš„ç‰¹å®šç¼ºç‚¹ï¼Œå³å­˜å‚¨ï¼Œå¹¶é‡‡ç”¨ä¸€ç§æ–°é¢–çš„äº¤æ˜“é€Ÿåº¦æ–¹æ³•ã€‚å¦‚ä»Šï¼Œå¤§å¤šæ•°åŒºå—é“¾æŠ€æœ¯éƒ½åšæŒè®¤ä¸ºï¼Œâ€œå…¨èŠ‚ç‚¹â€å¿…é¡»ç»´æŠ¤æ•´ä¸ªåŒºå—é“¾çš„å‰¯æœ¬ä»¥éªŒè¯æœªæ¥çš„äº¤æ˜“ï¼Œè€Œä½¿ä¹‹æˆä¸ºå¯èƒ½çš„Merkleæ•°æ®ç»“æ„æœ¬èº«å°±æ˜¯ä¸€é¡¹äº†ä¸èµ·çš„å£®ä¸¾ï¼Œå¹¶å¢åŠ äº†æ— ä¸ä¼¦æ¯”çš„å®‰å…¨æ€§ï¼Œæˆ‘ä»¬è®¤ä¸ºå›´ç»•æ­¤è¿‡ç¨‹çš„ä¸€äº›æ€§èƒ½å¢å¼ºå¯ä»¥å‡è½»æ•´ä¸ªèŠ‚ç‚¹çš„åŒæ­¥è´Ÿæ‹…ï¼Œåœ¨ç¬¬4èŠ‚ä¸­ä»‹ç»äº†è§£å†³å—ï¼ŒèŠ‚ç‚¹å’Œé’±åŒ…åŒæ­¥çš„å‡ ç§æŠ€æœ¯ã€‚</p><p>å½“æ¶‰åŠåˆ°å­˜å‚¨æ•°æ®æ—¶ï¼Œå®Œæ•´çš„åŒºå—é“¾è¦æ±‚å¯èƒ½ç”šè‡³æ˜¯ç°æœ‰åŒºå—é“¾æŠ€æœ¯çš„éšœç¢ã€‚åœ¨ä»¥å¤ªåŠï¼ˆä¸€ç§å»ä¸­å¿ƒåŒ–çš„ä¸–ç•Œè®¡ç®—æœºï¼‰çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨å…¶æœ¬æœºä»¤ç‰Œçš„å­˜å‚¨æˆæœ¬ä»¤äººéš¾ä»¥ç½®ä¿¡ã€‚ Arweaveçš„ä¸»è¦åŠ¨æœºæ˜¯ä»¥ä¸ä»¥å¤ªåŠä¸­è¡¨ç¤ºçš„æ–¹å¼ç›¸åŒçš„æ–¹å¼å®ç°æ°¸ä¹…ï¼Œä¸å˜çš„å­˜å‚¨ã€‚ä½†æ˜¯ï¼Œé«˜æ˜‚çš„è´¹ç”¨ä½¿è¿™ç§å­˜å‚¨å˜å¾—è¶Šæ¥è¶Šä¸åˆ‡å®é™…ã€‚è™½ç„¶å¯ä»¥åœ¨ä»¥å¤ªåŠä¸Šå­˜å‚¨æ•°æ®ï¼Œä½†æ˜¯ç”±äºæ•°æ®å­˜å‚¨æˆæœ¬ï¼Œå…ˆå‰çš„å°è¯•æ˜¯ä¸åˆ‡å®é™…çš„ã€‚</p><p>å…¶ä»–åŒºå—é“¾æŠ€æœ¯ä¸“æ³¨äºæ”¹å–„èŠ‚ç‚¹ä¹‹é—´çš„å…±è¯†ç®—æ³•ï¼Œç‰¹åˆ«æ˜¯Stellar Lumenså’ŒAPoå’ŒNeoç­‰dPosæ¶æ„ã€‚å°½ç®¡è¿™å¯ä»¥æé«˜äº‹åŠ¡å¤„ç†é€Ÿåº¦ï¼Œä½†å­˜å‚¨è´Ÿæ‹…ä»ç„¶æ˜¯è®¸å¤šæ­¤ç±»ç½‘ç»œå°†é¢ä¸´çš„é•¿æœŸéšœç¢ã€‚é€šè¿‡é¦–å…ˆä¸“æ³¨äºè§£å†³å­˜å‚¨é—®é¢˜ï¼Œæˆ‘ä»¬ä½“éªŒäº†ä¸€äº›æ€§èƒ½å¢å¼ºåŠŸèƒ½ï¼Œè¿™äº›æ€§èƒ½å¢å¼ºåŠŸèƒ½å¯ç”¨äºä¿ƒè¿›é«˜ååé‡è´§å¸äº¤æ˜“ã€‚</p><h2 id="3-æ¿€åŠ±ï¼ˆMotivationï¼‰"><a href="#3-æ¿€åŠ±ï¼ˆMotivationï¼‰" class="headerlink" title="3. æ¿€åŠ±ï¼ˆMotivationï¼‰"></a>3. æ¿€åŠ±ï¼ˆMotivationï¼‰</h2><p>æˆ‘ä»¬å·²ç»è®¾è®¡å¹¶å®ç°äº†ä¸€ä¸ªåŒºå—é“¾ç½‘ç»œï¼Œå…¶ä¸­æ°¸ä¹…æ€§çš„ä½æˆæœ¬å­˜å‚¨å·²æˆä¸ºç°å®ã€‚å°†å­˜å‚¨è®¿é—®æƒçº³å…¥å…±è¯†ï¼Œå¹¶ç»“åˆæ–°é¢–çš„äº¤æ˜“æ†ç»‘æ–¹æ³•å’Œä»»æ„å¤§å°çš„å—ï¼Œå¯åˆ›å»ºé«˜ååé‡çš„åŠ å¯†è´§å¸ï¼Œè¯¥åŠ å¯†è´§å¸å°†æ¯”å…¶ä»–åŠ å¯†è´§å¸ï¼ˆå¦‚æ¯”ç‰¹å¸[10]å’Œä»¥å¤ªåŠ[12]ï¼‰æœ‰æ‰€æ”¹å–„ã€‚è¿‡å»ï¼Œæ¡£æ¡ˆï¼ˆäº’è”ç½‘æˆ–å…¶ä»–æ–¹å¼ï¼‰é€šå¸¸ç”±å•ä¸ªæœºæ„ï¼ˆç”šè‡³æ˜¯ä¸ªäººï¼‰ç»´æŠ¤ï¼Œå› æ­¤å®¹æ˜“å—åˆ°ä¸¤ç§ä¸»è¦å½¢å¼çš„æ“çºµã€‚é¦–å…ˆæ˜¯é€šè¿‡åœ¨æ–‡æ¡£å­˜å‚¨è¿‡ç¨‹ä¸­ä¿®æ”¹æ–‡æ¡£[2]ã€‚ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œæ–‡æ¡£åœ¨è¿›å…¥å­˜å‚¨ä¹‹å‰å¯èƒ½å·²ç»è¢«ä¼ªé€ æˆ–ä¿®æ”¹è¿‡[1]ã€‚ä¾‹å¦‚ï¼Œè®¸å¤šå½’å› äºè‹æ ¼æ‹‰åº•çš„ä½œå“è¢«è®¤ä¸ºæ˜¯ä»–çš„é—¨å¾’ä»¬å†™çš„[6]ã€‚ Arweaveè§£å†³äº†è¿™ä¸¤ä¸ªé—®é¢˜ã€‚ä¸€æ—¦å°†æ–‡æ¡£å­˜å‚¨åœ¨ç»„ç»‡ä¸Šï¼Œå°±å°†å…¶ä¸ç»„ç»‡ä¸Šçš„æ¯ä¸ªå…¶ä»–å—åŠ å¯†é“¾æ¥ã€‚è¿™ç¡®ä¿äº†ä»»ä½•å°è¯•æ›´æ”¹æ–‡æ¡£å†…å®¹çš„å°è¯•éƒ½ä¼šè¢«ç½‘ç»œæ£€æµ‹åˆ°å¹¶æ‹’ç»ã€‚ä»¥è¿™ç§æ–¹å¼ï¼Œä¸å¯èƒ½ç ´åç»„ç»‡ä¸Šçš„ä¿¡æ¯ã€‚ Arweaveæ˜¯Internetä¸Šå¯æµè§ˆçš„å§Šå¦¹ç½‘ç»œï¼Œå¯æä¾›Internetè¿«åˆ‡éœ€è¦ä½†ç›®å‰ç¼ºä¹çš„é•¿æœŸï¼Œæ°¸ä¹…æ•°æ®å­˜å‚¨åŠŸèƒ½ã€‚</p><p>Arweaveç³»ç»Ÿçš„å…³é”®ç»„ä»¶æ—¨åœ¨è®©å¼€å‘äººå‘˜è½»æ¾æ„å»ºä¸ç½‘ç»œæ•°æ®äº¤äº’ï¼Œåˆ›å»ºå’Œä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚è¿™äº›ä½¿ç”¨ä¸è¯­è¨€æ— å…³çš„REST APIæ„å»ºçš„åº”ç”¨ç¨‹åºå°†å……å½“ç½‘ç»œä¸­ä¾¦å¬ç½‘ç»œçš„èŠ‚ç‚¹ã€‚è¿™äº›åº”ç”¨ç¨‹åºçš„åŠŸèƒ½å°†æ˜¯å¹¿æ³›è€Œå¤šæ ·çš„ï¼Œä»åˆ†æ•£å’Œä¸å˜çš„ç¤¾äº¤ç½‘ç»œåˆ°è®¨è®ºç½‘ç«™å’Œæ–°é—»èšåˆå™¨ã€‚ä¸ºäº†å‘ç¼–ç»‡æäº¤ä¿¡æ¯ï¼Œå°†éœ€è¦å°‘é‡ä»¤ç‰Œã€‚è¿™äº›ä»£å¸å°†ç”¨äºæ”¯ä»˜çŸ¿å·¥åœ¨ç»´æŠ¤ç»„ç»‡å’Œç½‘ç»œæ–¹é¢çš„å·¥ä½œï¼Œä»¥åŠæŠ‘åˆ¶åƒåœ¾é‚®ä»¶çš„ä¼ æ’­ã€‚è¿™ä»£è¡¨äº†å¯¹å…¸å‹é›†ä¸­å¼å­˜å‚¨ç³»ç»Ÿçš„æå¤§æ”¹è¿›ã€‚åŒæ ·ï¼Œå®ƒä½¿ä¸ªäººæœ‰èƒ½åŠ›ç¡®ä¿è‡ªå·±å…³å¿ƒçš„ä¿¡æ¯èƒ½å¤Ÿé•¿æœŸå­˜åœ¨ã€‚éšç€ç½‘ç»œå’Œæ–‡æ¡£å°†å¢å¼ºä»¤ç‰Œçš„ä»·å€¼ï¼Œç»´æŒç»‡æ³•çš„åŠ¨æœºä¹Ÿä¼šå¢åŠ ã€‚éšç€è¿™äº›å½±å“çš„åŠ å‰§ï¼Œæˆ‘ä»¬æœŸæœ›Arweaveä»£å¸å°†æˆä¸ºä¿¡æ¯æ—¶ä»£çš„å®è´µèµ„äº§ã€‚ä¸å¤§é‡é‡è¦æ–‡ä»¶å¯†ä¸å¯åˆ†ä¸”å†…åœ¨è”ç³»ã€‚</p><h2 id="4-æŠ€æœ¯ï¼ˆTechnologyï¼‰"><a href="#4-æŠ€æœ¯ï¼ˆTechnologyï¼‰" class="headerlink" title="4. æŠ€æœ¯ï¼ˆTechnologyï¼‰"></a>4. æŠ€æœ¯ï¼ˆTechnologyï¼‰</h2><p>Arweaveå»ºç«‹åœ¨å››é¡¹æ ¸å¿ƒæŠ€æœ¯çš„åŸºç¡€ä¸Šï¼Œè¿™äº›æŠ€æœ¯å¯ä»¥å…±åŒåœ¨æ–°çš„åŒºå—é“¾ä¸Šåˆ›å»ºä½æˆæœ¬ï¼Œé«˜ååé‡çš„æ°¸ä¹…å­˜å‚¨ã€‚ è¿™äº›åˆ›æ–°æ˜¯ï¼š</p><ul><li>åŒºå—ç¼–ç»‡ï¼ˆBlockweaveï¼‰</li><li>è®¿é—®è¯æ˜ï¼ˆProof of Accessï¼‰</li><li>é‡ç«ï¼ˆWildfireï¼‰</li><li>åŒºå—é˜´å½±ï¼ˆBlockshadowsï¼‰</li></ul><p>è™½ç„¶è¿™äº›æŠ€æœ¯ç›¸äº’äº¤ç»‡ï¼Œä½†æ˜¯æ¯ç§æŠ€æœ¯åœ¨åˆ›å»ºé€‚ç”¨äºå¿«é€Ÿäº‹åŠ¡å¤„ç†å’Œä½æˆæœ¬æ°¸ä¹…æ€§å­˜å‚¨çš„æ–°å‹ç½‘ç»œæ–¹é¢éƒ½å‘æŒ¥ç€å…³é”®ä½œç”¨ã€‚</p><h3 id="4-1-åŒºå—ç¼–ç»‡ï¼ˆBlockweaveï¼‰"><a href="#4-1-åŒºå—ç¼–ç»‡ï¼ˆBlockweaveï¼‰" class="headerlink" title="4.1 åŒºå—ç¼–ç»‡ï¼ˆBlockweaveï¼‰"></a>4.1 åŒºå—ç¼–ç»‡ï¼ˆBlockweaveï¼‰</h3><p>å¤§å¤šæ•°åŒºå—é“¾çš„ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„ç‰¹æ€§æ˜¯ï¼Œå¿…é¡»å­˜å‚¨æ¯ä¸ªåŒºå—ä»¥ä½œä¸ºâ€œå®Œæ•´èŠ‚ç‚¹â€å‚ä¸éªŒè¯äº¤æ˜“ã€‚ Arweaveå¹¶éå¦‚æ­¤ã€‚</p><p>å–è€Œä»£ä¹‹çš„æ˜¯ï¼ŒArweaveå¼•å…¥äº†ä¸¤ä¸ªæ–°æ¦‚å¿µï¼Œè¿™äº›æ¦‚å¿µå…è®¸èŠ‚ç‚¹åœ¨ä¸æ‹¥æœ‰æ•´ä¸ªé“¾æ¡çš„æƒ…å†µä¸‹å®Œæˆå…³é”®çš„ç½‘ç»œåŠŸèƒ½ã€‚è¿™äº›æ¦‚å¿µä¸­çš„ç¬¬ä¸€ä¸ªæ˜¯å—å“ˆå¸Œåˆ—è¡¨ï¼Œå®ƒæ˜¯æ‰€æœ‰å…ˆå‰å—çš„å“ˆå¸Œçš„åˆ—è¡¨ã€‚è¿™æ ·å¯ä»¥éªŒè¯æ—§å—ï¼Œå¹¶æœ‰æ•ˆè¯„ä¼°æ½œåœ¨çš„æ–°å—ã€‚è¿™äº›æ¦‚å¿µçš„ç¬¬äºŒä¸ªæ˜¯é’±åŒ…åˆ—è¡¨ï¼Œè¿™æ˜¯ç³»ç»Ÿä¸­æ‰€æœ‰æ´»åŠ¨é’±åŒ…çš„åˆ—è¡¨ã€‚è¿™æ ·å°±å¯ä»¥åœ¨ä¸å ç”¨æœ€åä¸€æ¬¡äº¤æ˜“ä½¿ç”¨çš„åŒºå—çš„æƒ…å†µä¸‹éªŒè¯äº¤æ˜“ã€‚ä½¿ç”¨è¿™äº›ç”±ç½‘ç»œåŒæ­¥å¹¶å¯ä»¥ç”±çŸ¿å·¥ä¸‹è½½çš„åŒºå—é“¾åˆ—è¡¨å’Œé’±åŒ…åˆ—è¡¨ï¼ŒèŠ‚ç‚¹å‡ ä¹å¯ä»¥ç«‹å³åŠ å…¥ç½‘ç»œå¹¶å‚ä¸å¯¹ç»„ç»‡çš„æŒ–æ˜ã€‚</p><p>æ­¤å¤–ï¼ŒArweaveä½¿ç”¨â€œæŒç»­éªŒè¯â€ç³»ç»Ÿï¼Œè€Œä¸æ˜¯è®©æ¯ä¸ªçŸ¿å·¥åœ¨è¿›å…¥ç½‘ç»œæ—¶éƒ½éªŒè¯ä»åŸºå› å—åˆ°å½“å‰å—çš„æ•´ä¸ªå—ç»“æ„ã€‚å½“çŸ¿å·¥åŠ å…¥Arweaveç½‘ç»œæ—¶ï¼Œä»–ä»¬å°†ä¸‹è½½å½“å‰åŒºå—å¹¶ä»å½“å‰åŒºå—ä¸­æ£€ç´¢åŒºå—å“ˆå¸Œå’Œé’±åŒ…åˆ—è¡¨ã€‚ç”±äºè¿™äº›åŒºå—é“¾å’Œé’±åŒ…åˆ—è¡¨å·²é€šè¿‡æ¯ä¸ªåŒºå—çš„æŒç»­è¿›è¡Œè¿›è¡Œäº†è¿ç»­éªŒè¯ï¼Œå› æ­¤æ–°çŸ¿å·¥å¯ä»¥ç«‹å³å¼€å§‹å‚ä¸ï¼Œè€Œæ— éœ€éªŒè¯æ•´ä¸ªç»„ç»‡ã€‚å½“ç„¶ï¼Œå®Œå…¨ç¼–ç»‡éªŒè¯å¯ç”¨äºå¸Œæœ›æ‰§è¡Œè¯¥éªŒè¯çš„ä»»ä½•èŠ‚ç‚¹ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒçŸ¿å·¥æ— éœ€æŸ¥æ‰¾ä¸é’±åŒ…ç›¸å…³è”çš„å…ˆå‰äº¤æ˜“å³å¯éªŒè¯æ–°äº¤æ˜“ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼ŒçŸ¿å·¥å°†åªéœ€è¦éªŒè¯äº¤æ˜“æ˜¯å¦å·²ç”±é’±åŒ…æ‹¥æœ‰è€…çš„ç§é’¥æ­£ç¡®ç­¾åã€‚ä¸ºäº†é˜²æ­¢å¬å›å—ä¼ªé€ æ”»å‡»ï¼Œå—å“ˆå¸Œè¡¨çš„å“ˆå¸Œå°†ä¸æ¯ä¸ªæ–°å—ä¸€èµ·åˆ†å‘ã€‚</p><p>Arweave - ä¸€ç§ç±»åŒºå—é“¾çš„åŒºå—ç¼–ç»‡ç»“æ„ï¼ˆLightpaperï¼‰</p><p><img src="/images/arweave/image-20220412232151857.png" alt="image-20220412232151857">å›¾1ï¼šblockweaveæ•°æ®ç»“æ„çš„ç¤ºæ„å›¾ï¼Œå±•ç¤ºäº†åˆ°å‰ä¸€ä¸ªåŒºå—å’Œå›è°ƒåŒºå—çš„é“¾æ¥ã€‚</p><h3 id="4-2-è®¿é—®è¯æ˜ï¼ˆProof-of-Accessï¼‰"><a href="#4-2-è®¿é—®è¯æ˜ï¼ˆProof-of-Accessï¼‰" class="headerlink" title="4.2 è®¿é—®è¯æ˜ï¼ˆProof of Accessï¼‰"></a>4.2 è®¿é—®è¯æ˜ï¼ˆProof of Accessï¼‰</h3><p>Arweaveså…±è¯†æœºåˆ¶åŸºäºè®¿é—®è¯æ˜ï¼ˆPoAï¼‰å’Œå·¥ä½œè¯æ˜ï¼ˆPoWï¼‰ã€‚è™½ç„¶å…¸å‹çš„PoWç³»ç»Ÿä»…ä¾èµ–äºå‰ä¸€ä¸ªå—æ‰èƒ½ç”Ÿæˆæ¯ä¸ªè¿ç»­çš„å—ï¼Œä½†PoAç®—æ³•ä¼šåˆå¹¶æ¥è‡ªéšæœºé€‰æ‹©çš„å‰ä¸€ä¸ªå—çš„æ•°æ®ã€‚ç»“åˆåŒºå—ç¼–ç»‡æ•°æ®ç»“æ„ï¼ŒçŸ¿å·¥ä¸éœ€è¦å­˜å‚¨æ‰€æœ‰åŒºå—ï¼ˆå½¢æˆä¸€ä¸ªåŒºå—é“¾ï¼‰ï¼Œè€Œæ˜¯å¯ä»¥å­˜å‚¨ä»»ä½•å…ˆå‰çš„åŒºå—ï¼ˆç”±PoAå’Œé‡ç«æ¨åŠ¨ï¼‰ï¼Œä»è€Œå½¢æˆåŒºå—ç¼–ç»‡ï¼Œå³åŒºå—ç¼–ç»‡ã€‚é€šè¿‡è·å–å½“å‰å—çš„å“ˆå¸Œå€¼å¹¶è®¡ç®—å…¶ç›¸å¯¹äºå½“å‰å—é«˜åº¦çš„æ¨¡æ•°ï¼Œå¯ä»¥é€‰æ‹©è¦åˆå¹¶åˆ°ä¸‹ä¸€ä¸ªå—ä¸­çš„â€œè°ƒç”¨å—â€ã€‚</p><p>è°ƒç”¨å—ä¸­çš„äº‹åŠ¡ä¸åœ¨å½“å‰å—ä¸­æ‰¾åˆ°çš„äº‹åŠ¡ä¸€èµ·è¿›è¡Œå“ˆå¸Œå¤„ç†ï¼Œä»¥ç”Ÿæˆä¸‹ä¸€ä¸ªå—ã€‚å½“çŸ¿å·¥æ‰¾åˆ°åˆé€‚çš„å“ˆå¸Œåï¼Œä»–ä»¬ä¼šå°†æ–°å—ä¸å›è°ƒåŒºå—ä¸€èµ·åˆ†å‘ç»™ç½‘ç»œçš„å…¶ä»–æˆå‘˜ã€‚è¿™ä½¿ç½‘ç»œçš„å…¶ä»–æˆå‘˜ï¼Œå³ä½¿æ²¡æœ‰è‡ªå·±çš„å›è°ƒåŒºå—å‰¯æœ¬çš„é‚£äº›æˆå‘˜ï¼Œä¹Ÿå¯ä»¥ç‹¬ç«‹åœ°éªŒè¯æ–°å—æ˜¯å¦æœ‰æ•ˆã€‚</p><h3 id="4-3-é‡ç«ï¼ˆWildfireï¼‰"><a href="#4-3-é‡ç«ï¼ˆWildfireï¼‰" class="headerlink" title="4.3 é‡ç«ï¼ˆWildfireï¼‰"></a>4.3 é‡ç«ï¼ˆWildfireï¼‰</h3><p>ä½œä¸ºæ•°æ®å­˜å‚¨ç³»ç»Ÿï¼ŒArweaveä¸ä»…éœ€è¦å­˜å‚¨å¤§é‡ä¿¡æ¯çš„èƒ½åŠ›ï¼Œè€Œä¸”è¿˜éœ€è¦ä»¥æœ€æ–¹ä¾¿çš„æ–¹å¼æä¾›å¯¹è¯¥æ•°æ®çš„è®¿é—®ã€‚æ­¤å¤–ï¼ŒArweaveç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†æ˜¯åœ¨è¯·æ±‚æ—¶å¯¹æ•°æ®è¿›è¡Œæ— æˆæœ¬çš„è®¿é—®ã€‚éšåï¼ŒArweaveå¢åŠ äº†ä¸€å±‚æ¿€åŠ±æªæ–½ï¼Œä»¥é¼“åŠ±çŸ¿å·¥è‡ªç”±å…±äº«æ•°æ®ã€‚</p><p>Wildfireæ˜¯ä¸€ç§ç³»ç»Ÿï¼Œå®ƒé€šè¿‡ä½¿ç½‘ç»œä¸Šæ•°æ®è¯·æ±‚çš„å¿«é€Ÿæ»¡è¶³æˆä¸ºå‚ä¸çš„å¿…è¦éƒ¨åˆ†ï¼Œä»è€Œè§£å†³äº†åˆ†æ•£å¼ç½‘ç»œä¸­æ•°æ®å…±äº«çš„é—®é¢˜ã€‚ Wildfireé€šè¿‡åœ¨æ¯ä¸ªèŠ‚ç‚¹æœ¬åœ°åˆ›å»ºä¸€ä¸ªæ’åç³»ç»Ÿæ¥è¿›è¡Œå·¥ä½œï¼Œè¯¥æ’åç³»ç»Ÿç¡®å®šæ–°å—å’Œäº‹åŠ¡å‘å¯¹ç­‰å¯¹è±¡åˆ†å‘çš„é€Ÿåº¦å¦‚ä½•ï¼ŒåŸºäºå®ƒä»¬å¯¹è¯·æ±‚è¿›è¡Œå“åº”å¹¶æ¥å—æ¥è‡ªå…¶ä»–å¯¹è±¡çš„æ•°æ®çš„é€Ÿåº¦ã€‚å¯¹ç­‰ä½“æŒ‰å…¶ç­‰çº§é¡ºåºæœåŠ¡ï¼Œè€Œæ€§èƒ½ä¸ä½³çš„å¯¹ç­‰ä½“åˆ™è¢«ä»ç½‘ç»œä¸­é»‘åå•ä¸­åˆ é™¤ã€‚ä»ç»æµä¸Šæ¿€åŠ±åŒä¼´ï¼Œä½¿ä»–ä»¬åœ¨å½¼æ­¤çš„æ’åä¸­ä¿æŒè‰¯å¥½çš„ä½ç½®ï¼Œä»¥ä¾¿ä»–ä»¬å¯ä»¥èŠ±è´¹æœ€å¤§çš„æ—¶é—´è¿›è¡Œæœ‰æ•ˆçš„æŒ–æ˜ã€‚</p><p>Arweave - ä¸€ç§ç±»åŒºå—é“¾çš„åŒºå—ç¼–ç»‡ç»“æ„ï¼ˆLightpaperï¼‰</p><p><img src="/images/arweave/image-20220412232319579.png" alt="image-20220412232319579"></p><p>å›¾2ï¼šé‡ç«ç³»ç»Ÿç¤ºæ„å›¾ã€‚ æ¯ä¸ªèŠ‚ç‚¹æ ¹æ®è¿™äº›å¯¹ç­‰ç‚¹ä¹‹å‰å¯¹å®ƒä»¬çš„è¡¨ç°è¿›è¡Œè¯„ä¼°ï¼Œå¯¹å…¶å¯¹ç­‰ç‚¹è¿›è¡Œæ’åã€‚<br>è¿™æå¤§åœ°é¼“åŠ±ç³»ç»Ÿä¸­çš„èŠ‚ç‚¹ä»¥å¯¹å…¶ä»–å¯¹ç­‰æ–¹å°½å¯èƒ½æœ€å‹å¥½çš„æ–¹å¼è¿è¡Œï¼Œè€Œä¸ä¼šç»™æ­£åœ¨æ¥æ”¶æ•°æ®çš„äººï¼Œç”šè‡³å¯èƒ½æ˜¯ä¸€æ¬¡æ€§è¯·æ±‚çš„é‚£äº›äººå¸¦æ¥ä»£ä»·ã€‚ æ›´è¿›ä¸€æ­¥ï¼Œå®ƒåˆ›å»ºäº†ä¸€ç§ç½‘ç»œæ‹“æ‰‘ï¼Œè¯¥æ‹“æ‰‘é€‚åˆäºæœ€æœ‰æ•ˆçš„å…¨å±€è·¯ç”±ï¼Œå› ä¸ºé¦–é€‰äº†å…è®¸åœ¨ç³»ç»Ÿä¸­å¿«é€Ÿä¼ è¾“æ–°æ•°æ®çš„è¿æ¥ã€‚ å®é™…ä¸Šï¼Œé‡ç«æœºåˆ¶æ„å»ºäº†ä¸€ä¸ªç½‘ç»œæ‹“æ‰‘ï¼Œè¯¥æ‹“æ‰‘æ˜ å°„äº†Internetçš„åº•å±‚ç‰©ç†è¿æ¥åŸºç¡€ï¼Œä»¥é€‚åº”å…¶æ¶æ„éšæ—¶é—´çš„å˜åŒ–ã€‚ æ€»ä½“è€Œè¨€ï¼Œé‡ç«ç³»ç»Ÿå¯ç¡®ä¿æ–°å—çš„é«˜é€Ÿåˆ†å‘ï¼Œå¹¶ä»¥è¾ƒçŸ­çš„å»¶è¿Ÿä¿æŒæ•°æ®å¯ç”¨ã€‚</p><h3 id="4-4-åŒºå—é˜´å½±ï¼ˆBlockshadowsï¼‰"><a href="#4-4-åŒºå—é˜´å½±ï¼ˆBlockshadowsï¼‰" class="headerlink" title="4.4 åŒºå—é˜´å½±ï¼ˆBlockshadowsï¼‰"></a>4.4 åŒºå—é˜´å½±ï¼ˆBlockshadowsï¼‰</h3><p>åœ¨ä¼ ç»Ÿçš„åŒºå—é“¾ç³»ç»Ÿä¸­ï¼Œå½“æŒ–æ˜ä¸€ä¸ªæ–°å—æ—¶ï¼Œæ— è®ºä¸€ä¸ªèŠ‚ç‚¹å·²ç»æ‹¥æœ‰å¤šå°‘å—æ•°æ®ï¼Œæ¯ä¸ªå®Œæ•´çš„å—éƒ½ä¼šåˆ†é…åˆ°ç½‘ç»œä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ã€‚è¿™ä¸ä»…æµªè´¹å¤§é‡æ•°æ®ï¼Œè€Œä¸”æå¤§åœ°é™ä½äº†ç½‘ç»œå°±å—è¾¾æˆå…±è¯†çš„é€Ÿåº¦ã€‚å› æ­¤ï¼ŒArweaveå¼•å…¥äº†ä¸€ç§æ–°æŠ€æœ¯ï¼Œå³å—å½±å­ï¼Œå®ƒä¸ä»…å¯ä»¥æœ€å¤§ç¨‹åº¦åœ°å‡å°‘æ•°æ®æµªè´¹ï¼Œè€Œä¸”å¯ä»¥å®ç°å¿«é€Ÿçš„å—å…±è¯†å’Œå·¨å¤§çš„äº‹åŠ¡ååé‡ã€‚</p><p>Blockshadowingçš„å·¥ä½œåŸç†æ˜¯éƒ¨åˆ†å–æ¶ˆæ¥è‡ªå—çš„äº‹åŠ¡ï¼Œå¹¶ä¸”ä»…åœ¨èŠ‚ç‚¹ä¹‹é—´å‘é€æœ€å°çš„å—â€œå½±å­â€ï¼Œè¯¥å½±å­å…è®¸å¯¹ç­‰æ–¹é‡å»ºå®Œæ•´çš„å—ï¼Œè€Œä¸æ˜¯ä¼ è¾“å®Œæ•´çš„å—æœ¬èº«ã€‚è¿™äº›åŒºå—å½±å­ä¸“é—¨åŒ…å«é’±åŒ…åˆ—è¡¨å’Œå“ˆå¸Œåˆ—è¡¨çš„å“ˆå¸Œï¼Œå¹¶ä¸”ä»£æ›¿åŒºå—å†…çš„äº¤æ˜“ï¼Œä»…åŒ…å«äº¤æ˜“å“ˆå¸Œçš„åˆ—è¡¨ã€‚æ ¹æ®è¿™ä¸€ä¿¡æ¯ï¼ˆå¯èƒ½åªæœ‰å‡ åƒå­—èŠ‚ï¼‰ï¼Œä¸€ä¸ªå·²ç»åœ¨è¯¥åŒºå—ä¸­æ‹¥æœ‰æ‰€æœ‰äº¤æ˜“çš„èŠ‚ç‚¹ä»¥åŠä¸€ä¸ªæœ€æ–°çš„å“ˆå¸Œå’Œé’±åŒ…åˆ—è¡¨å¯ä»¥é‡å»ºå‡ ä¹ä»»æ„å¤§å°çš„æ•´ä¸ªåŒºå—ã€‚ä¸ºäº†ä¿ƒè¿›è¿™ä¸€ç‚¹ï¼ŒèŠ‚ç‚¹è¿˜å°†ç«‹å³å½¼æ­¤å…±äº«äº‹åŠ¡ï¼Œä½†æ˜¯åªæœ‰åœ¨å®ƒä»¬é«˜åº¦ç¡®å®šç½‘ç»œä¸­çš„å…¶ä»–èŠ‚ç‚¹ä¹Ÿå…·æœ‰äº‹åŠ¡å¤„ç†åï¼Œæ‰å°è¯•å°†äº‹åŠ¡æ”¾ç½®åœ¨ä¸€ä¸ªå—ä¸­ã€‚</p><p>è¿™ä¸ªåŒºå—é›†æ•£ç³»ç»Ÿçš„ç»“æœæ˜¯ä¸€ä¸ªå¿«é€Ÿï¼Œçµæ´»çš„åŒºå—åˆ†é…ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå¯ä»¥ä½¿äº¤æ˜“ä»¥å°½å¯èƒ½å¿«çš„é€Ÿåº¦åœ¨ç½‘ç»œä¸Šåˆ†å¸ƒï¼Œå¹¶ä¸”å¯ä»¥ä»¥æ¥è¿‘ç½‘ç»œçš„é€Ÿåº¦è¾¾æˆå…±è¯†ã€‚æ­¤å¤–ï¼Œè¯¥ç³»ç»Ÿå¯ç¡®ä¿å½“ç½‘ç»œä½¿ç”¨ç‡å¾ˆé«˜æ—¶ï¼Œäº¤æ˜“è´¹ç”¨ä¸ä¼šæ˜¾ç€å¢åŠ ï¼Œå¹¶ä¸”ä¹è§‚çš„100mbpsç½‘ç»œä¸Šçš„äº¤æ˜“ååé‡çš„ç†è®ºé™åˆ¶ä¸ºæ¯ç§’çº¦5000ç¬”äº¤æ˜“ã€‚</p><h3 id="4-5-æ°‘ä¸»å†…å®¹æ”¿ç­–ï¼ˆDemocratic-Content-Policyï¼‰"><a href="#4-5-æ°‘ä¸»å†…å®¹æ”¿ç­–ï¼ˆDemocratic-Content-Policyï¼‰" class="headerlink" title="4.5 æ°‘ä¸»å†…å®¹æ”¿ç­–ï¼ˆDemocratic Content Policyï¼‰"></a>4.5 æ°‘ä¸»å†…å®¹æ”¿ç­–ï¼ˆDemocratic Content Policyï¼‰</h3><p>ä¸ºäº†æ”¯æŒç½‘ç»œä¸­å„ä¸ªå‚ä¸è€…çš„è‡ªç”±ä»¥æ§åˆ¶ä»–ä»¬å­˜å‚¨çš„å†…å®¹ï¼Œå¹¶å…è®¸æ•´ä¸ªç½‘ç»œä»¥æ°‘ä¸»æ–¹å¼æ‹’ç»å—åˆ°å¹¿æ³›è°´è´£çš„å†…å®¹ï¼ŒArweaveè½¯ä»¶æä¾›äº†ä¸€ä¸ªé»‘åå•ç³»ç»Ÿã€‚æ¯ä¸ªèŠ‚ç‚¹ä¸»èŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªï¼ˆå¯é€‰ï¼‰é»‘åå•ï¼Œå…¶ä¸­åŒ…å«ä¾‹å¦‚å®ƒä¸å¸Œæœ›å­˜å‚¨çš„æŸäº›æ•°æ®çš„å“ˆå¸Œå€¼æˆ–å­å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šå†™å…¥ä¸æ­¤åŒ¹é…çš„ç£ç›˜å†…å®¹ã€‚è¿™äº›é»‘åå•å¯ä»¥ç”±ä¸ªäººå»ºç«‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åä½œå»ºç«‹ï¼Œä¹Ÿå¯ä»¥ä»å…¶ä»–æ¥æºå¯¼å…¥ã€‚</p><p>åœ¨æœ¬åœ°çº§åˆ«ï¼Œè¿™äº›é»‘åå•å…è®¸èŠ‚ç‚¹æ§åˆ¶è‡ªå·±çš„å†…å®¹ï¼Œä½†æ˜¯è¿™äº›æœ¬åœ°æ‹’ç»çš„æ€»å’Œä¹Ÿä¼šåˆ›å»ºç½‘ç»œèŒƒå›´çš„å†…å®¹æ‹’ç»ã€‚è¶…è¿‡ä¸€åŠä»¥ä¸Šçš„ç½‘ç»œæ‹’ç»çš„å†…å®¹ä¸ä»…ä¼šè¢«è¿™äº›å•ä¸ªèŠ‚ç‚¹ä¸­çš„æ¯ä¸€ä¸ªæ‹’ç»ï¼Œè€Œä¸”è¿˜å°†è¢«æ•´ä¸ªç½‘ç»œæ•´ä½“æ‹’ç»ã€‚è¿™åˆ›å»ºäº†ä¸€ä¸ªæ°‘ä¸»çš„å…¨ç½‘ç»œå†…å®¹æ‹’ç»ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå¯ä»¥å°†å„ç§æ–‡åŒ–å’Œè§‚ç‚¹ä¸­çš„é»‘åå•åˆå¹¶ä¸ºä¸€ä¸ªæ™®éåˆ é™¤çš„å¾®å°çš„ç‰¹å®šå†…å®¹é»‘åå•ã€‚è¿™ä¸ªæ¥è¿‘æ™®éï¼Œæ°‘ä¸»çš„é»‘åå•ä½¿ç½‘ç»œä¸å—å°‘æ•°è¡Œä¸ºè€…çš„å¹²æ‰°ï¼ŒåŒæ—¶ä»å…è®¸å…¶ä»¥æ°‘ä¸»æ–¹å¼ä¿æŠ¤è‡ªå·±çš„è‡ªç”±ã€‚</p><h2 id="4-6-è®¨è®ºï¼ˆDiscussionï¼‰"><a href="#4-6-è®¨è®ºï¼ˆDiscussionï¼‰" class="headerlink" title="4.6 è®¨è®ºï¼ˆDiscussionï¼‰"></a>4.6 è®¨è®ºï¼ˆDiscussionï¼‰</h2><h3 id="4-6-1-å­˜å‚¨æ± ï¼ˆStorage-Poolsï¼‰"><a href="#4-6-1-å­˜å‚¨æ± ï¼ˆStorage-Poolsï¼‰" class="headerlink" title="4.6.1 å­˜å‚¨æ± ï¼ˆStorage Poolsï¼‰"></a>4.6.1 å­˜å‚¨æ± ï¼ˆStorage Poolsï¼‰</h3><p>å¯¹Arweaveçš„ä¸€ç§æ½œåœ¨çš„ç†è®ºæ”»å‡»å·²ç»å˜å¾—éå¸¸å¤§ï¼Œé‚£å°±æ˜¯çŸ¿å·¥å¯èƒ½ä¼šåˆä½œç»´æŠ¤ä¸€ä¸ªç»„ç»‡çš„å•ä¸ªå‰¯æœ¬ï¼Œä»–ä»¬éƒ½å¯ä»¥ä½¿ç”¨è¿™äº›å‰¯æœ¬æ¥æ£€ç´¢å¬å›å—ã€‚ è™½ç„¶è¿™ç§è¡Œä¸ºä¹çœ‹èµ·æ¥ä¼¼ä¹æ˜¯é—®é¢˜ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚ å¦‚æœæ­¤ç±»â€œå­˜å‚¨æ± â€è¢«å¤§éƒ¨åˆ†çŸ¿å·¥é›‡ç”¨ï¼Œé‚£ä¹ˆå…¶ä»–çŸ¿å·¥å­˜å‚¨ç¨€æœ‰çŸ¿å—çš„åŠ¨æœºå°±ä¼šå¢åŠ ã€‚ è¿™æ˜¯å› ä¸ºï¼Œå¦‚æœé›†ä¸­å­˜å‚¨åŒºä¸å¯ç”¨ï¼Œåˆ™å½“å°†æ¥è¯¥ç¨€æœ‰å—æˆä¸ºæ’¤å›å—æ—¶ï¼Œå…·æœ‰ç¨€æœ‰å—å‰¯æœ¬çš„çŸ¿å·¥å°†å¾ˆå¯èƒ½è·å¾—å¥–åŠ±ã€‚ è¿™ç§è‡ªç§çš„è¡Œä¸ºä¸ºç½‘ç»œæä¾›äº†é£é™©æŠµé”€åŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½ä¼šéšç€æ•°æ®ä¸¢å¤±ï¼ˆç”±é›†ä¸­å­˜å‚¨æ± å¼•èµ·ï¼‰çš„å¯èƒ½æ€§å¢é•¿è€Œæ‰©å±•ã€‚</p><h2 id="5-æ„å»ºAppï¼ˆBuilding-Appsï¼‰"><a href="#5-æ„å»ºAppï¼ˆBuilding-Appsï¼‰" class="headerlink" title="5. æ„å»ºAppï¼ˆBuilding Appsï¼‰"></a>5. æ„å»ºAppï¼ˆBuilding Appsï¼‰</h2><p>å¯ä»¥ä½¿ç”¨ç®€å•çš„REST APIæ„å»ºä½¿ç”¨ç»„ç»‡çš„åº”ç”¨ç¨‹åºã€‚ RESTç«¯ç‚¹æ˜¯HTTPï¼Œå¯ä»¥ç›´æ¥è®¿é—®ç½‘ç»œï¼Œå› æ­¤ä»»ä½•Arweaveé’±åŒ…éƒ½å¯ä»¥è¯»å–å’Œå†™å…¥æ•°æ®ã€‚ å®¢æˆ·åªéœ€è¦é€šè¿‡Chromeæ‰©å±•ç¨‹åºæˆ–å…·æœ‰Arweaveé’±åŒ…é›†æˆåŠŸèƒ½çš„æœ¬æœºåº”ç”¨ç¨‹åºå°†å…¶Arweaveé’±åŒ…å¸¦å…¥ç½‘ç«™ï¼Œå³å¯ä»ç½‘ç»œè¯»å–æ•°æ®æˆ–å‘ç½‘ç»œå†™å…¥æ•°æ®ã€‚ å¯ä»¥åœ¨ç»„ç»‡ä¹‹ä¸Šæ„å»ºå‡ ç§ä½“ç³»ç»“æ„ã€‚</p><h3 id="5-1-å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼ˆClient-Server-Architectureï¼‰"><a href="#5-1-å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼ˆClient-Server-Architectureï¼‰" class="headerlink" title="5.1 å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼ˆClient-Server Architectureï¼‰"></a>5.1 å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼ˆClient-Server Architectureï¼‰</h3><p>ä¼ ç»Ÿçš„Webæˆ–æœ¬æœºåº”ç”¨ç¨‹åºå…·æœ‰å®¢æˆ·ç«¯-æœåŠ¡å™¨ä½“ç³»ç»“æ„ã€‚åœ¨äº‘ä¸Šè¿è¡Œçš„æœåŠ¡å™¨å°†è¢«â€œå¯ç”¨Arweaveâ€ï¼Œä¸ä¸€ä¸ªæˆ–å¤šä¸ªArweaveèŠ‚ç‚¹è¿›è¡Œäº¤äº’ï¼Œä»£è¡¨å®¢æˆ·ç«¯è¯»å–å’Œå†™å…¥æ•°æ®ã€‚è¿™äº›æœåŠ¡å¯ä»¥æ˜¯å°†å®¢æˆ·ç«¯ä½œä¸ºè®¿é—®è€…çš„ç½‘ç«™ï¼Œä¹Ÿå¯ä»¥æ˜¯å°†å®¢æˆ·ç«¯è¯·æ±‚ä¼ é€’ç»™å¼€å‘äººå‘˜æ“ä½œçš„æœåŠ¡å™¨çš„æœ¬æœºåº”ç”¨ç¨‹åºã€‚è¿™äº›æœåŠ¡å™¨å°†éœ€è¦ç»´æŠ¤ARä»¤ç‰Œçš„æµ®åŠ¨ï¼Œä»¥ç¡®ä¿å¯ä»¥å¤„ç†å†™å…¥æ•°æ®çš„è¯·æ±‚ã€‚ä½¿ç”¨è¯¥æ¶æ„ä»ç¼–ç»‡è¯»å–æ•°æ®ä»ç„¶æ˜¯å…è´¹çš„ã€‚</p><p>è¯¥æ¶æ„çš„è·åˆ©æ½œåŠ›å¾ˆç®€å•ã€‚å¼€å‘äººå‘˜å°†éœ€è¦é€šè¿‡å¹¿å‘Šï¼Œæ¯æœˆè®¢é˜…æˆ–ç›´æ¥ä»˜æ¬¾æ¥è·å¾—æ›´å¤§çš„ä»·å€¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å…¶ä¸ºå­˜å‚¨æä¾›åŠ¨åŠ›çš„ARä»¤ç‰Œæ•°é‡ã€‚æ°¸ä¹…æ€§ä¸å¯å˜å­˜å‚¨æœ‰è®¸å¤šåº”ç”¨ã€‚ä¾‹å¦‚ï¼Œå­˜å‚¨æŠ—é‡å­ï¼ŒåŠ å¯†çš„æ³•å¾‹æ¡ˆä¾‹æ–‡ä»¶ï¼Œèº«ä»½æˆ–åŒ»ç–—è®°å½•ã€‚å°½ç®¡æŸäº›æ³•è§„éœ€è¦é€‚åº”æ•æ„Ÿä¿¡æ¯çš„å­˜å‚¨ï¼Œåœ°ç†èŒƒå›´å’Œè¢«é—å¿˜çš„æƒåˆ©ï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡åŠ å¯†å’Œå¯†é’¥ç®¡ç†æ¥ç¼“è§£è¿™ç§æƒ…å†µã€‚å‡ ä¸ªåˆ›æ”¶æ¨¡å‹å¯ä»¥åœ¨ç»„ç»‡çš„é¡¶éƒ¨åˆ†å±‚ï¼Œå…¶ä¸»è¦ä»·å€¼ä¸»å¼ æ˜¯é“¾ä¸Šæ°¸ä¹…ä¸å¯å˜çš„å­˜å‚¨ã€‚</p><h3 id="5-2-æ— æœåŠ¡å™¨æ¶æ„ï¼ˆServerless-Architectureï¼‰"><a href="#5-2-æ— æœåŠ¡å™¨æ¶æ„ï¼ˆServerless-Architectureï¼‰" class="headerlink" title="5.2 æ— æœåŠ¡å™¨æ¶æ„ï¼ˆServerless Architectureï¼‰"></a>5.2 æ— æœåŠ¡å™¨æ¶æ„ï¼ˆServerless Architectureï¼‰</h3><p>å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡å¯ç”¨Arweaveçš„æµè§ˆå™¨è®¿é—®åº”ç”¨ç¨‹åºï¼Œè€Œåº”ç”¨ç¨‹åºå¯ä»¥è‡ªèº«è¿è¡Œã€‚ç”±äºæµè§ˆå™¨çš„æ™®åŠå’ŒWebæŠ€æœ¯çš„æ™®åŠï¼Œä½¿ç”¨HTML / CSS / JSå°†è¿™äº›åº”ç”¨ç¨‹åºå­˜å‚¨ä¸ºæ ‡å‡†å‰ç«¯Webåº”ç”¨ç¨‹åºæ˜¯æœ€æœ‰æ„ä¹‰çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœå®¢æˆ·ç«¯çš„æœ¬æœºåº”ç”¨ç¨‹åºåŒ…å«é’ˆå¯¹ä¸åŒè¯­è¨€ï¼ˆä¾‹å¦‚LLVMå­—èŠ‚ç ï¼‰æˆ–è„šæœ¬è¯­è¨€ï¼ˆå¦‚Pythonï¼‰çš„è§£é‡Šå™¨/è§£æå™¨ï¼Œåˆ™å®ƒä»¬å¯ä»¥åœ¨å®¢æˆ·ç«¯ä¸Šè¿è¡Œï¼Œå¹¶ä¸”å¯èƒ½ä¼šå—ç›ŠäºWebåº”ç”¨ç¨‹åºä¸­çš„ç›¸åŒå¯å‡çº§æ€§ã€‚</p><p>å¼€å‘äººå‘˜ä¸ä»…å¯ä»¥å°†æ— æœåŠ¡å™¨çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°Arweaveï¼Œè€Œä¸”è¿™äº›åº”ç”¨ç¨‹åºè¿˜å¯ä»¥å°†æŒä¹…æ€§å’Œå¯è¯æ˜çŠ¶æ€å†™å…¥ç½‘ç»œã€‚ç”±äºArweaveæ²¡æœ‰æ–½åŠ ç‰¹å®šçš„æ•°æ®ç»“æ„ï¼Œå› æ­¤å¼€å‘äººå‘˜å¯ä»¥è‡ªç”±åœ°ä»¥å¯¹ä»–ä»¬æ¥è¯´æœ€æœ‰æ„ä¹‰çš„æ ¼å¼å­˜å‚¨æ•°æ®ã€‚å¦‚æœè¯¥åº”ç”¨ç¨‹åºæœ€å¥½é€šè¿‡é«˜åº¦ä¼˜åŒ–çš„Merkleç»“æ„ï¼ˆä¾‹å¦‚ä»¥å¤ªåŠè™šæ‹Ÿæœºï¼ˆEVMï¼‰ä¸­æ‰¾åˆ°çš„ç»“æ„ï¼‰æ¥æ»¡è¶³ï¼Œåˆ™å¯ä»¥è½»æ¾åœ°å°†å…¶å®ç°ã€‚å¦‚æœå¼€å‘äººå‘˜æ­£åœ¨å¯»æ‰¾æ›´å¤šçš„æ–‡æœ¬Blobæ ·å¼å­˜å‚¨ï¼Œé‚£ä¹ˆè¿™ä¹Ÿæ˜¯å¾®ä¸è¶³é“çš„ã€‚</p><p>æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºéå¸¸æœ‰è¶£ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥å†™å…¥è‡ªå·±çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼ŒåŸºäºåˆ†å¸ƒå¼è®¡ç®—å°†å…è®¸è®­ç»ƒç¥ç»ç½‘ç»œå­˜å‚¨å…¶ç»“æœï¼Œå¹¶å¯èƒ½ä¸å…¶ä»–ç½‘ç»œå…±äº«å…¶ç»“æœæ¨¡å‹ã€‚</p><h3 id="5-3-åŸºäºäº‹ä»¶çš„ï¼ˆEvent-Basedï¼‰"><a href="#5-3-åŸºäºäº‹ä»¶çš„ï¼ˆEvent-Basedï¼‰" class="headerlink" title="5.3 åŸºäºäº‹ä»¶çš„ï¼ˆEvent Basedï¼‰"></a>5.3 åŸºäºäº‹ä»¶çš„ï¼ˆEvent Basedï¼‰</h3><p>åœ¨Twitteræˆç«‹ä¹‹åˆï¼Œä¾¿æœ‰äº†è“¬å‹ƒå‘å±•çš„å®¶åº­æ‰‹å·¥ä¸šåº”ç”¨ç¨‹åºç”Ÿæ€ç³»ç»Ÿï¼Œè€Œå¼€å‘äººå‘˜åˆ™åœ¨â€œ firehostâ€ APIçš„åŸºç¡€ä¸Šå¼€å‘ï¼Œè¿™äº›APIå°†æ¨æ–‡æµåŒ–ä¸ºä»»ä½•æ„¿æ„ä»˜è´¹è®¿é—®çš„äººã€‚ æƒ…å†µå·²ä¸å†å¦‚æ­¤ï¼Œåœ¨Facebook Cambridge Analyticaæƒ¨è´¥ä¹‹åï¼Œè¿™äº›å‘å®¢æˆ·æä¾›æ•°æ®åˆ†æçš„æœåŠ¡çš„è®¸å¤šâ€œå¯ä¿¡èµ–çš„åˆä½œä¼™ä¼´â€éƒ½è¢«ä»»æ„å…³é—­ã€‚</p><p>Arweaveæ˜¯ä¸€ä¸ªåˆ†æ•£çš„å…¬å…±æ•°æ®ç½‘ç»œï¼Œå› æ­¤ï¼Œé™¤äº†è¢«æ°‘ä¸»æ‹’ç»çš„å†…å®¹å¤–ï¼Œå®ƒæ°¸è¿œä¸ä¼šå®¡æŸ¥æ•°æ®è®¿é—®æˆ–æ•°æ®æœ¬èº«ã€‚ è¿™æ„å‘³ç€å¼€å‘äººå‘˜å¯ä»¥è‡ªç”±åœ°åœ¨Arweaveä¹‹ä¸Šè¿›è¡Œæ„å»ºï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨REST APIä¾¦å¬ä¼ å…¥çš„æ•°æ®ã€‚ è§¦å‘äº‹ä»¶åï¼Œä¾¦å¬å™¨å°†è§¦å‘è®¢é˜…äº†è¿™äº›äº‹ä»¶çš„å®¢æˆ·ç«¯çš„ç›¸åº”å‡½æ•°è°ƒç”¨ã€‚ å¼€å‘äººå‘˜ä¸å¿…æ‹…å¿ƒä¼šå—åˆ°é™åˆ¶æˆ–å…³é—­ï¼Œå› ä¸ºç½‘ç»œå—åˆ°æ¿€åŠ±ä»¥å‘ä»–ä»¬æä¾›å¯¹æ•°æ®é¦ˆé€çš„å¯é è®¿é—®ã€‚</p><h3 id="5-4-æ— ä¿¡ä»»å’Œå¯è¯æ˜ï¼ˆTrustless-and-Provableï¼‰"><a href="#5-4-æ— ä¿¡ä»»å’Œå¯è¯æ˜ï¼ˆTrustless-and-Provableï¼‰" class="headerlink" title="5.4 æ— ä¿¡ä»»å’Œå¯è¯æ˜ï¼ˆTrustless and Provableï¼‰"></a>5.4 æ— ä¿¡ä»»å’Œå¯è¯æ˜ï¼ˆTrustless and Provableï¼‰</h3><p>å¯ä»¥å¯¹åº”ç”¨ç¨‹åºä½“ç³»ç»“æ„è¿›è¡Œè®¾è®¡ï¼Œä»¥ä¾¿è½»æ¾å®ç°éœ€è¦å­˜å‚¨å¹¶ä¿è¯é˜²ç¯¡æ”¹çš„ä¿¡æ¯ã€‚ æ­¤å¤–ï¼Œå¯è¯æ˜å…¬å¹³çš„è¿è¡Œæ—¶ä»£ç å¯ä»¥å­˜å‚¨åœ¨ç»„ç»‡ä¸Šï¼Œå¹¶ç”±å®¢æˆ·ç«¯ç›´æ¥è§£é‡Šã€‚ å®¢æˆ·ç«¯ä½¿ç”¨å†…å®¹çš„äº‹åŠ¡IDï¼Œå¯ä»¥åœ¨è®¡ç®—ä¹‹å‰éªŒè¯ç¼–ç»‡ä¸­çš„æœ‰æ•ˆè´Ÿè½½ï¼Œå¹¶ç¡®ä¿å®ƒä»¬è¿è¡Œçš„ä»£ç æ—¢ä¸å—ä¿¡ä»»åˆå¯ä»¥è¯æ˜æ˜¯å…¬å¹³çš„ï¼Œå³ä¸å…¶ä»–å®¢æˆ·ç«¯è¿è¡Œçš„ä»£ç ç›¸åŒã€‚ è¿™ä¸ºæœåŠ¡äºå…¶ä»–åŒºå—é“¾ç½‘ç»œçš„æ— ä¿¡ä»»éšæœºæ•°ç”Ÿæˆå™¨å’Œå…¶ä»–åŸºäºoracleçš„æœåŠ¡å¼€è¾Ÿäº†æœ‰è¶£çš„å¯èƒ½æ€§ã€‚</p><h2 id="6-ç”¨ä¾‹ï¼ˆUse-Casesï¼‰"><a href="#6-ç”¨ä¾‹ï¼ˆUse-Casesï¼‰" class="headerlink" title="6. ç”¨ä¾‹ï¼ˆUse Casesï¼‰"></a>6. ç”¨ä¾‹ï¼ˆUse Casesï¼‰</h2><p>æ°¸ä¹…å­˜å‚¨æœ‰å‡ ä¸ªç”¨ä¾‹ã€‚ å…·ä½“è€Œè¨€ï¼Œæ³•è§„è¦æ±‚å°†æ–‡ä»¶å­˜æ¡£é•¿è¾¾ä¸€å®šå¹´é™ã€‚ å¯è¯æ˜çš„åª’ä½“æŠ¥é“ï¼Œå­¦æœ¯ç ”ç©¶å’Œä¸å˜çš„è®°å½•åœ¨æˆ‘ä»¬å›å£°å®¤å’Œå‡æ–°é—»æ³›æ»¥çš„ç°ä»£ä¸–ç•Œä¸­å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚</p><h3 id="6-1-çœŸå®æ€§ï¼ˆAuthenticityï¼‰"><a href="#6-1-çœŸå®æ€§ï¼ˆAuthenticityï¼‰" class="headerlink" title="6.1 çœŸå®æ€§ï¼ˆAuthenticityï¼‰"></a>6.1 çœŸå®æ€§ï¼ˆAuthenticityï¼‰</h3><p>æ³•å¾‹ä½“ç³»å¸¸å¸¸ä¸æ–‡ä»¶çœŸå®æ€§çš„è¯‰è®¼çº ç¼ åœ¨ä¸€èµ·ã€‚ Arweaveé€šè¿‡æä¾›æ¥è‡ªä½œè€…çš„ä»»ä½•æ•°å­—å†…å®¹çš„ä¸ç¡®å®šä¸”å¯éªŒè¯çš„å­˜å‚¨æ¥è§£å†³æ­¤é—®é¢˜ã€‚ 2017å¹´ï¼Œç‰¹æ‹‰åå·è£å®šåœ¨æ³•é™¢è¯‰è®¼ç¨‹åºä¸­å¯ä»¥æ¥å—åŒºå—é“¾è¯æ®ã€‚ è¿™äº›è®°å½•å¯èƒ½ä¼šå¤§å¤§åŠ å¿«æœ‰å…³è‰ºæœ¯å½’å±å’ŒçŸ¥è¯†è´¢äº§ä¹‹äº‰çš„äº‰è®®ã€‚ å¯¹äºåˆ›æ„ç»æµè€Œè¨€ï¼Œæ•ˆæœæ˜¯åŒé‡çš„ï¼Œä½¿è‰ºæœ¯å®¶å¯ä»¥å°†è‡ªå·±çš„ä½œå“ç«‹å³è½¬è®©ç»™ä»–äººï¼Œå¹¶é¿å…çç¢çš„è¯‰è®¼ã€‚</p><h2 id="7-ç»“è®ºï¼ˆConclusionï¼‰"><a href="#7-ç»“è®ºï¼ˆConclusionï¼‰" class="headerlink" title="7. ç»“è®ºï¼ˆConclusionï¼‰"></a>7. ç»“è®ºï¼ˆConclusionï¼‰</h2><p>æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªæ–°çš„åŒºå—é“¾ç½‘ç»œï¼Œè¯¥ç½‘ç»œæ”¯æŒä½æˆæœ¬çš„ä¸å¯å˜æ•°æ®å­˜å‚¨å’Œé«˜ååé‡çš„åŠ å¯†è´§å¸ã€‚é€šè¿‡ä½¿ç”¨ä¸€ç§ç§°ä¸ºblockweaveçš„ç±»ä¼¼äºåŒºå—é“¾çš„æ–°æ•°æ®ç»“æ„ï¼Œå¯ä»¥å®ç°Arweaveåè®®ã€‚é€šè¿‡åŒºå—éšè—çµæ´»çš„å¤§å°äº¤æ˜“åŒºå—åˆ†é…ï¼›ä¸€ç§æ–°çš„å…±è¯†æœºåˆ¶ï¼Œå³å‡å°‘å¯¹å·¥ä½œè¯æ˜çš„ä¾èµ–åº¦ï¼Œç§°ä¸ºè®¿é—®è¯æ˜ï¼›ä»¥åŠç§°ä¸ºWildfireçš„è‡ªæˆ‘ä¼˜åŒ–ç½‘ç»œæ‹“æ‰‘ã€‚å°±åƒæ¯”ç‰¹å¸ç½‘ç»œä¸€æ ·ï¼Œæˆ‘ä»¬åœ¨éš”ç¦»æ–¹é¢çš„æŠ€æœ¯è¿›æ­¥å¹¶ä¸æ˜¯ååˆ†å¤æ‚ã€‚ä½†æ˜¯ï¼Œå½“ç»“åˆèµ·æ¥å½¢æˆæ•´ä¸ªç½‘ç»œæ—¶ï¼Œç´§æ€¥è¡Œä¸ºéå¸¸å¼ºå¤§ã€‚ä»æµ‹è¯•ç½‘çš„ç»“æœå¯ä»¥çœ‹å‡ºï¼Œåœ¨å…¬å…±çš„ï¼Œæ— è®¸å¯çš„å’Œåˆ†æ•£çš„ç½‘ç»œåè®®ä¸Šï¼Œå®‰å…¨ï¼Œå¯é å’Œä¸å˜çš„æ•°æ®å­˜å‚¨æ˜¯å¯èƒ½çš„ã€‚é™¤äº†æ•°æ®å­˜å‚¨æœŸé™å¤–ï¼Œä»»æ„å¤§å°çš„å—éƒ½ä½¿å®‰å…¨çš„é«˜ååé‡åŠ å¯†è´§å¸æˆä¸ºå¯èƒ½ï¼Œè€Œæ— éœ€è¯‰è¯¸å¤æ‚çš„å…±è¯†æœºåˆ¶ï¼Œä¾‹å¦‚dBFTæˆ–dPoSã€‚</p><p>Arweaveé€šè¿‡å…¶REST APIç´§å¯†åœ°è¿æ¥åˆ°Internetçš„ç»“æ„ä¸­ï¼Œå¹¶ä¸”æ­£åœ¨ä½¿ç”¨Arweaveä¸»ç½‘å»ºç«‹ä¸€äº›åˆ›æ”¶ä¸šåŠ¡ã€‚ Arweaveä¸å…¶ä»–æµè¡Œçš„åŠ å¯†è´§å¸ä¹‹é—´çš„æ¡¥æ¢ï¼Œå®‰å…¨çš„è®¡ç®—å’Œæ™ºèƒ½åˆçº¦åè®®å°†ä½¿ä½æˆæœ¬å’Œæ°¸ä¹…æ€§çš„æ•°æ®å­˜å‚¨è½»æ¾é›†æˆåˆ°åˆ†æ•£å¼åº”ç”¨ç¨‹åºçš„æŠ€æœ¯å †æ ˆä¸­ã€‚ä¸€ä¸ªå…¨é¢å…¨çƒåŒ–çš„ä¿¡æ¯å’Œé‡‘èäº¤æµä¸–ç•Œéœ€è¦æ°¸ä¹…è®°å½•ã€‚é€šè¿‡ç»“åˆåŠ å¯†æŠ€æœ¯å’Œåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæˆ‘ä»¬ä¸ºè¿™äº›æ°¸ä¹…è®°å½•æä¾›äº†åŸºç¡€ã€‚æˆ‘ä»¬å¸Œæœ›Arweaveå°†æˆä¸ºç°æœ‰äº’è”ç½‘åè®®ï¼ˆä¾‹å¦‚ï¼Œä¸‡ç»´ç½‘ï¼‰çš„å¿…è¦ä¼´ä¾£ã€‚ä¸ä»–äººåˆä½œï¼Œå»ºç«‹æ›´åŠ å¼€æ”¾å’Œé€æ˜çš„æœªæ¥ã€‚</p><h2 id="8-å¼•ç”¨ï¼ˆReferenceï¼‰"><a href="#8-å¼•ç”¨ï¼ˆReferenceï¼‰" class="headerlink" title="8. å¼•ç”¨ï¼ˆReferenceï¼‰"></a>8. å¼•ç”¨ï¼ˆReferenceï¼‰</h2><ol><li>Aweaveç™½çš®ä¹¦åœ°å€ï¼š<a href="https://www.arweave.org/files/arweave-lightpaper.pdf">https://www.arweave.org/files/arweave-lightpaper.pdf</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è½¬è½½ï¼š&lt;a href=&quot;http://ipfsdrop.com/docs/whitepaper/arweave-lightpaper/&quot;&gt;http://ipfsdrop.com/docs/whitepaper/arweave-lightpaper/&lt;/a&gt;&lt;/p&gt;
&lt;h2 </summary>
      
    
    
    
    
    <category term="Arweave" scheme="https://zhangzhishun.github.io/tags/Arweave/"/>
    
  </entry>
  
  <entry>
    <title>å¸¸ç”¨å¯†ç å­¦åº“</title>
    <link href="https://zhangzhishun.github.io/2022/03/28/cryptography/%E5%AF%86%E7%A0%81%E5%AD%A6%E5%BA%93%E6%80%BB%E7%BB%93/"/>
    <id>https://zhangzhishun.github.io/2022/03/28/cryptography/%E5%AF%86%E7%A0%81%E5%AD%A6%E5%BA%93%E6%80%BB%E7%BB%93/</id>
    <published>2022-03-28T15:29:15.000Z</published>
    <updated>2022-05-05T09:57:56.721Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h1><p><a href="https://pkg.go.dev/golang.org/x/crypto/bn256">Goå®˜æ–¹</a> å·²ç»ä¸ç»´æŠ¤bn256.goåŒ…äº†ï¼Œæ¨èä½¿ç”¨<a href="https://github.com/cloudflare/bn256">cloudflare/bn256</a> ï¼Œä½†æ˜¯ä¹Ÿæœ‰å®‰å…¨æ¼æ´.</p><p>CP-ABEå®éªŒä¸­ä½¿ç”¨çš„åŒ…ä¸º<a href="https://github.com/fentec-project/bn256">fentec-project/bn256</a> ,æ­¤åŒ…æ˜¯ä» cloudflare/bn256 forkè¿‡æ¥çš„ï¼Œåªæ˜¯åŠ äº†HashG1ã€HashG2æ–¹æ³•</p><h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><p><a href="https://github.com/JHUISI/charm">Charm</a></p><p>Charm æ˜¯ä¸€ä¸ªç”¨äºå¿«é€Ÿåˆ¶ä½œé«˜çº§å¯†ç ç³»ç»ŸåŸå‹çš„æ¡†æ¶ã€‚å®ƒåŸºäº Python è¯­è¨€ï¼Œä»å¤´å¼€å§‹è®¾è®¡ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘å¼€å‘æ—¶é—´å’Œä»£ç å¤æ‚æ€§ï¼ŒåŒæ—¶ä¿ƒè¿›ç»„ä»¶çš„é‡ç”¨ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Go&quot;&gt;&lt;a href=&quot;#Go&quot; class=&quot;headerlink&quot; title=&quot;Go&quot;&gt;&lt;/a&gt;Go&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://pkg.go.dev/golang.org/x/crypto/bn256&quot;&gt;Goå®˜æ–¹&lt;/a&gt; å·²ç»ä¸ç»´æŠ¤b</summary>
      
    
    
    
    
    <category term="å¯†ç å­¦" scheme="https://zhangzhishun.github.io/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>30åˆ†é’Ÿåˆ›å»ºä¸€æ¡åŒºå—é“¾(äºŒ)</title>
    <link href="https://zhangzhishun.github.io/2022/03/05/blockchain/other/30%E5%88%86%E9%92%9F%E5%88%9B%E5%BB%BA%E4%B8%80%E6%9D%A1%E5%8C%BA%E5%9D%97%E9%93%BE(%E4%BA%8C)/"/>
    <id>https://zhangzhishun.github.io/2022/03/05/blockchain/other/30%E5%88%86%E9%92%9F%E5%88%9B%E5%BB%BA%E4%B8%80%E6%9D%A1%E5%8C%BA%E5%9D%97%E9%93%BE(%E4%BA%8C)/</id>
    <published>2022-03-05T12:57:53.000Z</published>
    <updated>2022-04-27T02:35:55.483Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å°†åŒºå—é“¾APIåŒ–"><a href="#å°†åŒºå—é“¾APIåŒ–" class="headerlink" title="å°†åŒºå—é“¾APIåŒ–"></a>å°†åŒºå—é“¾APIåŒ–</h2><p>åœ¨è¿™ä¸ªåŒºå—é“¾ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦å®ç°ä¸‰ä¸ªAPIï¼Œåˆ†åˆ«æ˜¯</p><ul><li>/api/mineï¼šèŠ‚ç‚¹ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥æŒ–æ˜æ–°çš„åŒºå—</li><li>/api/transactions/new: è´¦æˆ·ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥å»ºç«‹æ–°çš„äº¤æ˜“</li><li>/api/chain: è¿”å›å½“å‰çš„åŒºå—é“¾</li></ul><p>ä¸ºäº†å¤ç”¨æˆ‘ä»¬åœ¨ä¸Šç¯‡å†™å¥½çš„ä»£ç ï¼Œæˆ‘ä»¬é¦–å…ˆå®‰è£…express.jsï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ app.jsã€‚expressæ˜¯ä¸€ä¸ªåŸºäºnodeçš„httpæ¡†æ¶ï¼Œå®ƒå¯ä»¥å…è®¸æˆ‘ä»¬æ¥å—é€šè¿‡httpåè®®ä¼ è¾“çš„èŠ‚ç‚¹ä¿¡æ¯ã€‚æˆ‘ä»¬è¿˜éœ€è¦body-parserå¸®åŠ©æˆ‘ä»¬è§£ç èŠ‚ç‚¹å‘é€è¿‡æ¥çš„ä¿¡æ¯ã€‚</p><h2 id="å®ç°åˆ†å¸ƒå¼å…±è¯†"><a href="#å®ç°åˆ†å¸ƒå¼å…±è¯†" class="headerlink" title="å®ç°åˆ†å¸ƒå¼å…±è¯†"></a>å®ç°åˆ†å¸ƒå¼å…±è¯†</h2><p>ä»¥ä¸Šæˆ‘ä»¬å·²ç»å®ç°äº†ä¸€ä¸ªå•æœºç‰ˆçš„åŒºå—é“¾äº†ï¼Œä½†åŒºå—é“¾ä¹‹æ‰€ä»¥æœ‰ç”¨ï¼Œæ˜¯å› ä¸ºå®ƒèƒ½è¢«éƒ¨ç½²åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šå»ï¼Œå¹¶ä¸”æ‰€æœ‰èŠ‚ç‚¹éƒ½èƒ½å¤Ÿç›¸äº’æ›´æ–°ï¼Œå®ç°åˆ†å¸ƒå¼çš„å…±è¯†ã€‚è¿™æ ·çš„æœºåˆ¶ä¿è¯äº†æˆ‘ä»¬èƒ½å¤ŸæŠµå¾¡double spending attackä»¥åŠç¡®ä¿åªæœ‰ä¸€æ¡åŒºå—é“¾åœ¨è¿è¡Œã€‚</p><p>ä¸ºäº†å®ç°æˆ‘ä»¬çš„åˆ†å¸ƒå¼å…±è¯†ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦çŸ¥é“ç½‘ç»œä¸Šå…¶ä»–çš„èŠ‚ç‚¹åœ¨å“ªé‡Œã€‚ä»¿ç…§Ethereumçš„ Node Discovery Protocolï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªç±»ä¼¼çš„æœç´¢èŠ‚ç‚¹çš„åŠŸèƒ½å’ŒèŠ‚ç‚¹æ³¨å†ŒåŠŸèƒ½</p><pre><code class="javascript">_app.post('/api/nodes/register', (req, res) =&gt; {    // æ³¨å†ŒèŠ‚ç‚¹    let newNode = _.pick(req.body, ['ip', 'port']);    neighbors.push(newNode);    console.log('new node detected. Node info: ' + JSON.stringify(newNode));    res.send({        message: 'Node ' + newNode.ip + ':' + newNode.port + ' is added to my network'    });});</code></pre><h3 id="å…±è¯†å®ç°-è§£å†³å†²çªé“¾"><a href="#å…±è¯†å®ç°-è§£å†³å†²çªé“¾" class="headerlink" title="å…±è¯†å®ç°: è§£å†³å†²çªé“¾"></a>å…±è¯†å®ç°: è§£å†³å†²çªé“¾</h3><p>çŸ¥é“äº†é™„è¿‘çš„èŠ‚ç‚¹åœ¨å“ªï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å®ç°æˆ‘ä»¬çš„å…±è¯†ç®—æ³•ã€‚å…±è¯†ç®—æ³•çš„ç¬¬ä¸€éƒ¨åˆ†éœ€è¦æˆ‘ä»¬èƒ½å¤Ÿè¾¨åˆ«å‡ºæœ€é•¿ä¸”æœ‰æ•ˆçš„é“¾ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ä¹‹å‰å†™çš„åŒºå—é“¾æ¨¡å‹é‡ŒåŠ å…¥æ–°çš„å‡½æ•°å®ç°ã€‚</p><p>åœ¨ <code>app.js</code>ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯æ¬¡æŒ–çŸ¿ä¹‹åéƒ½å‘é™„è¿‘çš„èŠ‚ç‚¹å¹¿æ’­ï¼Œä»¥è§£å†³å†²çªé“¾ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ªæ–°çš„ç«¯ç‚¹ <code>/api/nodes/resolve</code>ã€‚å»ºç«‹å¥½ç«¯ç‚¹ä¹‹åæˆ‘ä»¬éœ€è¦åœ¨æŒ–çŸ¿ä¹‹åå¯¹æ‰€æœ‰çš„é‚»å±…è¿›è¡Œå¹¿æ’­ã€‚</p><p>è¿™æ ·setupä¹‹åï¼Œæˆ‘ä»¬çš„èŠ‚ç‚¹åœ¨æ¯ä¸€æ¬¡æŒ–çŸ¿çš„æ—¶å€™éƒ½ä¼šå¯¹é™„è¿‘çš„é‚»å±…è¿›è¡Œå¹¿æ’­å¹¶å¯»æ±‚consensusã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾å®šå®šæ—¶ä»»åŠ¡æ¥æ›´é«˜é¢‘çš„è¿›è¡Œå¹¿æ’­ã€‚å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰å¯¹æ”¶åˆ°çš„chainè¿›è¡Œç”µå­éªŒè¯ï¼Œæ²¡æœ‰åŠ¨æ€åŒ–çš„å¯»æ‰¾ç›¸é‚»èŠ‚ç‚¹ï¼Œæ²¡æœ‰å°†æ¯ä¸€ä¸ªtransactionå¹¿æ’­ï¼Œä»¥åŠä¸€ç³»åˆ—å¯ä»¥å®Œå–„çš„åœ°æ–¹ï¼Œä¸è¿‡åœ¨è¿™ç¯‡æ•™ç¨‹å½“ä¸­æˆ‘ä»¬å°±ä¸ç»§ç»­ä¸‹å»äº†ã€‚</p><pre><code class="javascript">_app.get('/api/mine', (req, res) =&gt; {    // æŒ–çŸ¿    myChain.createBlock();    let p = new Promise((resolve) =&gt; resolve());    for (let i of neighbors) {        let resolveUri = 'http://' + i.ip + ':' + i.port + '/api/nodes/resolve';        console.log("send resolve to: " + resolveUri);        p.then(() =&gt; rp({            uri: resolveUri,            method: 'POST',            json: true,            body: {'chain': myChain}        })).then((res) =&gt; {            // åŒæ­¥æœ€é•¿é“¾            myChain.resolveChain(JSON.parse(res.body)["chain"]);        });    }    p.then(() =&gt; {        res.send({            message: 'A new block is mined, and conflict is resolved',            content: myChain.lastBlock()        });    });});</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»¥ä¸Šæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªç®€å•çš„åŒºå—é“¾ï¼Œè™½ç„¶è¿™ä¸ªåŒºå—é“¾ç®€é™‹ä¸”ä¸å®‰å…¨ï¼Œä½†æ˜¯æˆ‘ä»¬èƒ½å¤ŸæˆåŠŸå°†å®ƒéƒ¨ç½²åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œå®ç°äº†æœ€åŸºæœ¬çš„åŒºå—é“¾çš„åŠŸèƒ½ã€‚</p><p>å®Œæ•´ä»£ç ï¼š<a href="https://github.com/zhangzhishun/sugar-blockchain-js">ä»£ç </a></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://mp.weixin.qq.com/s/6jwIj_m86dpGk62biEJyIA">30åˆ†é’Ÿè‡ªå·±å†™ä¸€æ¡åŒºå—é“¾(ä¸€)</a></li><li><a href="https://mp.weixin.qq.com/s/UbLx2mHEb9OyPeJBwP2bvg">30åˆ†é’Ÿè‡ªå·±å†™ä¸€æ¡åŒºå—é“¾(äºŒ)</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å°†åŒºå—é“¾APIåŒ–&quot;&gt;&lt;a href=&quot;#å°†åŒºå—é“¾APIåŒ–&quot; class=&quot;headerlink&quot; title=&quot;å°†åŒºå—é“¾APIåŒ–&quot;&gt;&lt;/a&gt;å°†åŒºå—é“¾APIåŒ–&lt;/h2&gt;&lt;p&gt;åœ¨è¿™ä¸ªåŒºå—é“¾ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦å®ç°ä¸‰ä¸ªAPIï¼Œåˆ†åˆ«æ˜¯&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;/api/mine</summary>
      
    
    
    
    
    <category term="éƒ¨ç½²æ–‡æ¡£" scheme="https://zhangzhishun.github.io/tags/%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/"/>
    
    <category term="Other" scheme="https://zhangzhishun.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>30åˆ†é’Ÿåˆ›å»ºä¸€æ¡åŒºå—é“¾(ä¸€)</title>
    <link href="https://zhangzhishun.github.io/2022/02/28/blockchain/other/30%E5%88%86%E9%92%9F%E5%88%9B%E5%BB%BA%E4%B8%80%E6%9D%A1%E5%8C%BA%E5%9D%97%E9%93%BE(%E4%B8%80)/"/>
    <id>https://zhangzhishun.github.io/2022/02/28/blockchain/other/30%E5%88%86%E9%92%9F%E5%88%9B%E5%BB%BA%E4%B8%80%E6%9D%A1%E5%8C%BA%E5%9D%97%E9%93%BE(%E4%B8%80)/</id>
    <published>2022-02-28T01:10:53.000Z</published>
    <updated>2022-04-27T02:35:55.483Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚ä½•ä»æŠ€æœ¯ä¸Šå®ç°ä¸€æ¡åŒºå—é“¾ï¼Ÿ<br>é¦–å…ˆï¼Œè¿™é‡Œå‡å®šè¯»è€…æœ‰åŸºæœ¬çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œè™½ç„¶æœ¬æ–‡ç”¨äº†Javascriptæ¥å†™ï¼Œä½†æŒæ¡ä»»æ„ä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„è¯»è€…é˜…è¯»èµ·æ¥åº”è¯¥ä¸ä¼šæœ‰ä»»ä½•éš¾åº¦ã€‚</p><h2 id="å¼€å‘å‡†å¤‡"><a href="#å¼€å‘å‡†å¤‡" class="headerlink" title="å¼€å‘å‡†å¤‡"></a>å¼€å‘å‡†å¤‡</h2><p>æˆ‘ä»¬é¦–å…ˆéœ€è¦å®‰è£…æœ€æ–°ç‰ˆçš„Node.js</p><h2 id="ç¬¬ä¸€æ­¥ï¼Œæ­å»ºåŒºå—é“¾æ¨¡å‹"><a href="#ç¬¬ä¸€æ­¥ï¼Œæ­å»ºåŒºå—é“¾æ¨¡å‹" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼Œæ­å»ºåŒºå—é“¾æ¨¡å‹"></a>ç¬¬ä¸€æ­¥ï¼Œæ­å»ºåŒºå—é“¾æ¨¡å‹</h2><p>æˆ‘ä»¬é¦–å…ˆæ¥æ­ä¸€ä¸ªèƒ½å¤Ÿæ–°å»ºåŒºå—ï¼Œåˆ›å»ºäº¤æ˜“çš„åŒºå—é“¾çš„æ¨¡å‹ã€‚</p><pre><code class="javascript">'use strict';//å®šä¹‰ä¸€ä¸ªclassï¼Œå«BlockChainï¼Œæ¯ä¸€ä¸ªåŒºå—é“¾éƒ½æ˜¯è¿™ä¸ªclassçš„å®ä¾‹class BlockChain {    constructor() {        this.chain = []; // å‚¨å­˜æ‰€æœ‰åŒºå—        this.difficulty = 4; // æŒ–çŸ¿çš„éš¾åº¦    }    isProofValid(tentativeBlock) {        // è¿™é‡Œæˆ‘ä»¬åˆ¤æ–­newProofæ˜¯ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„proofçš„æ–¹æ³•æ˜¯    }    createBlock(transaction, previousHash = undefined) {        // åˆ›é€ ä¸€ä¸ªæ–°åŒºå—    }    createTransaction(sender, receiver, value) {        // åˆ›å»ºä¸€ä¸ªäº¤æ˜“    }    static hash(block) {        // å¯¹ä¸€ä¸ªåŒºå—è¿›è¡Œå“ˆå¸Œ:    }    lastBlock() {        // å–å¾—é“¾ä¸Šçš„æœ€åä¸€ä¸ªåŒºå—    }    miner() {        // æŒ–çŸ¿ç¨‹åº    }}</code></pre><p>è¿™é‡Œè¦è§£é‡Šä¸€ä¸‹åŒºå—(block)å’Œäº¤æ˜“(transaction)å„è‡ªé•¿ä»€ä¹ˆæ ·ï¼Œè™½ç„¶ä¸åŒåŒºå—é“¾çš„åŒºå—æ¨¡å‹æœ‰å¾ˆå¤§å·®å¼‚ï¼Œä½†æœ€åŸºæœ¬çš„ä¸€äº›å…ƒç´ éƒ½æ˜¯ç›¸é€šçš„ã€‚ä¸€ä¸ªæœ€åŸºæœ¬çš„åŒºå—å¤§æ¦‚é•¿ä¸‹é¢è¿™æ ·ï¼š</p><pre><code class="javascript">var block = {       timestamp: 1516245715528,     id: 0,    proof: 786453290000,    previousBlockHash: "12f79cda4fb3f084531de2034e6b4acf",    transactions: [{        sender: "0xca35b7d915458ef540ade6068dfe2f44e8fa733c",        receiver: "0x14723a09acff6d2a60dcdf7aa4aff308fddc160c",        value: 100    }]}</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªåŒºå—åŒ…å«äº†å®ƒè¢«æŒ–å‡ºæ¥çš„æ—¶é—´æˆ³(timestamp)ï¼Œå®ƒåœ¨åŒºå—é“¾é‡Œçš„ä½ç½®(id)ï¼Œå®ƒçš„è¯æ˜(proof, æ›´å¤šçš„ä¼šåœ¨ä¹‹åè®²åˆ°)ï¼Œå‰ä¸€ä¸ªåŒºå—çš„æ•´ä½“å“ˆå¸Œå€¼(previousBlockHash)ï¼ŒåŒ…å«çš„äº¤æ˜“(transactions)ã€‚ ä½œä¸ºä¸€ä¸ªæœ€åŸºæœ¬çš„äº¤æ˜“æ¨¡å‹ï¼Œæ¯ä¸€ä¸ªäº¤æ˜“åªåŒ…å«äº†å‘é€è€…çš„åœ°å€(sender)ï¼Œæ¥å—è€…çš„åœ°å€(receiver)ï¼Œä»¥åŠè¿™æ¬¡äº¤æ˜“çš„ä»·å€¼(value)ã€‚</p><h2 id="ç¬¬äºŒæ­¥ï¼Œå®ç°åŸºæœ¬åŠŸèƒ½"><a href="#ç¬¬äºŒæ­¥ï¼Œå®ç°åŸºæœ¬åŠŸèƒ½" class="headerlink" title="ç¬¬äºŒæ­¥ï¼Œå®ç°åŸºæœ¬åŠŸèƒ½"></a>ç¬¬äºŒæ­¥ï¼Œå®ç°åŸºæœ¬åŠŸèƒ½</h2><p>å·¥å…·å‡½æ•°<br>è¿™é‡Œæˆ‘ä»¬é¦–å…ˆå®ç°ä¸€ä¸ªå·¥å…·å‡½æ•°Hash(block), å®ƒä¼šå¸®åŠ©æˆ‘ä»¬å°†ä¸€ä¸ªåŒºå—è¿›è¡Œå“ˆå¸Œã€‚è¿™ä¸ªå‡½æ•°ä¼šåœ¨æˆ‘ä»¬è¿›è¡ŒæŒ–çŸ¿(å‘æ˜æ–°åŒºå—)çš„æ—¶å€™ç”¨åˆ°ã€‚</p><pre><code class="javascript">static hash(block) {    // å¯¹ä¸€ä¸ªåŒºå—è¿›è¡Œå“ˆå¸Œ:    // ç°å°†block è½¬æ¢æˆbase64    // å°†å¾—åˆ°çš„ç»“æœè¿›è¡ŒSHAå“ˆå¸Œ    const blockStr = JSON.stringify(block);    const blockB64 = new Buffer(blockStr).toString("base64");    const newHash = crypto.createHash("sha256");    newHash.update(blockB64);    return newHash.digest("hex");}</code></pre><p>è¿™ä¸ªå‡½æ•°å°†ä¸€ä¸ªåŒºå—ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªJavascript objectï¼Œå“ˆå¸Œæˆä¸€æ®µå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬ä½¿ç”¨äº†cryptoè¿™ä¸ªå·¥å…·ï¼Œåœ¨æœ€æ–°ç‰ˆçš„Node.jsé‡Œé¢å·²ç»æ˜¯å†…ç½®äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸éœ€è¦å®‰è£…å®ƒã€‚</p><p>åˆ›å»ºä¸€ä¸ªæ–°äº¤æ˜“<br>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å®ç°åˆ›å»ºæ–°äº¤æ˜“çš„æ–¹æ³•ã€‚</p><pre><code class="javascript">createTransaction(sender, receiver, value) {    // åˆ›å»ºä¸€ä¸ªäº¤æ˜“    // æ ¹æ®æä¾›çš„sender, receiveråœ°å€ï¼Œä»¥åŠè½¬è´¦çš„ä»·å€¼ï¼Œå»ºç«‹ä¸€ä¸ªäº¤æ˜“    // å¹¶æŠŠå®ƒåŠ å…¥åˆ°æˆ‘ä»¬çš„åŒºå—é“¾é‡Œ    const transaction = {        sender: sender,        receiver: receiver,        value: value    };    this._packTransactions.push(transaction);    return this.miner();}</code></pre><p>éå¸¸ç›´è§‚ï¼Œæˆ‘ä»¬åªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªobjectï¼ŒåŠ å…¥åˆ°åŒºå—é“¾é‡Œå¹¶è¿”å›è€Œå·²ã€‚</p><p>åˆ›å»ºä¸€ä¸ªæ–°åŒºå—<br>æˆ‘ä»¬ç°åœ¨æ¥å®ç°åˆ›å»ºä¸€ä¸ªåŒºå—çš„ä»£ç ã€‚å½“æˆ‘ä»¬çš„åŒºå—é“¾è¿ä¸€ä¸ªåŒºå—ä¹Ÿæ²¡æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹ç¬¬ä¸€ä¸ªåŒºå—(genesis block)ï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬åœ¨constructoré‡Œé¢å®ç°ã€‚</p><pre><code class="javascript">constructor() {    this.chain = []; // å‚¨å­˜æ‰€æœ‰åŒºå—    this.difficulty = 4; // æŒ–çŸ¿çš„éš¾åº¦    this.createBlock(["Genesis Block"], 1); // åˆ›å»ºç¬¬ä¸€ä¸ªåŒºå—    this._packTransactions = []; // å½“å‰éœ€è¦æ‰“åŒ…çš„æ•°æ®}createBlock(transaction, previousHash = undefined) {    // åˆ›é€ ä¸€ä¸ªæ–°åŒºå—    // ä¸€å¼€å§‹çš„proofæ˜¯0ï¼Œä¸ä¸€å®šæ˜¯æœ‰æ•ˆçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦mineProofæ¥æ‰¾åˆ°æœ‰æ•ˆçš„proof    let block = {        timestamp: Date.now(),        id: this.chain.length,        proof: 0,        previousBlockHash: previousHash || this.constructor.hash(this.lastBlock()),        transactions: transaction    };    const hash = this.mineProof(block);    this.chain.push(block);    return hash;}</code></pre><p>åœ¨åˆ›å»ºä¸€ä¸ªæ–°åŒºå—çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç”¨äº†å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³ï¼Œä»¥ç°åœ¨åŒºå—é“¾çš„é•¿åº¦ä½œä¸ºidï¼Œåˆå§‹çš„proofè®¾ç½®ä¸º0(proofä¼šåœ¨ä¸‹ä¸€æ­¥è¯¦ç»†è®²åˆ°)ï¼Œå¹¶å°†ä¸Šä¸€ä¸ªåŒºå—æ•´ä½“è¿›è¡Œå“ˆå¸Œå¹¶èµ‹å€¼ç»™previousBlockHashã€‚åœ¨åˆ›å»ºgenesis åŒºå—çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†previousBlockHashè®¾ç½®ä¸º1ã€‚ ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬å»ºç«‹æ–°åŒºå—çš„æ—¶å€™æ²¡æœ‰é™„ä¸Šä»»ä½•äº¤æ˜“ï¼Œå®é™…çš„æƒ…å†µæ˜¯çŸ¿å·¥å¯ä»¥è‡ªä¸»é€‰æ‹©åŒ…å«å“ªäº›äº¤æ˜“ï¼Œå¹¶éœ€è¦å¯¹è¿™äº›äº¤æ˜“è¿›è¡Œå¤„ç†å¾—åˆ°ä¸€ä¸ªé»˜å…‹å°”æ ‘ã€‚</p><h2 id="ç†è§£æŒ–çŸ¿ï¼šæ‰¾åˆ°æœ‰æ•ˆçš„Proof"><a href="#ç†è§£æŒ–çŸ¿ï¼šæ‰¾åˆ°æœ‰æ•ˆçš„Proof" class="headerlink" title="ç†è§£æŒ–çŸ¿ï¼šæ‰¾åˆ°æœ‰æ•ˆçš„Proof"></a>ç†è§£æŒ–çŸ¿ï¼šæ‰¾åˆ°æœ‰æ•ˆçš„Proof</h2><p>è¯»è€…æœ‹å‹ä»¬åº”è¯¥éƒ½å¬è¯´è¿‡å·¥ä½œé‡è¯æ˜(Proof of Work)ï¼ŒPOWæ˜¯åŒºå—é“¾ä¸­ç”¨æ¥åˆ›é€ åŒºå—çš„æ ¸å¿ƒç®—æ³•æˆ–è€…æœºåˆ¶ã€‚POWæœ¬èº«çš„ç›®çš„æ˜¯ä¸ºäº†æ‰¾åˆ°ä¸€ä¸ªæ•°å­—æ¥è§£å†³ä¸€ä¸ªæ•°å­¦é—®é¢˜ï¼Œè€Œæ‰¾åˆ°è¿™ä¸ªæ•°å­—çš„éš¾åº¦æ˜¯è¶Šæ¥è¶Šé«˜çš„ï¼Œä½†ä¸€æ—¦æ‰¾åˆ°ä¹‹åï¼Œè¦è¯æ˜å®ƒè§£å†³äº†è¿™ä¸ªæ•°å­¦é—®é¢˜åˆæ˜¯éå¸¸å®¹æ˜“çš„ï¼Œä»»ä½•äººéƒ½èƒ½å¾ˆå¿«åšåˆ°ã€‚ å½“ç„¶é™¤äº†Proof of Workä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æœ‰Proof of Space, Proof of Stakeï¼Œåœ¨ä»£ç é‡Œæˆ‘ä»¬å°±ç”¨proofæ¥ä»£è¡¨æ‰¾åˆ°çš„è¿™ä¸ªæ•°å­—ã€‚ é‚£ä¹ˆè¿™ä¸ªæ•°å­¦é—®é¢˜åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥å›ç­”ã€‚</p><p>ç»™å®šä¸€ä¸ªæ•°å­—Aï¼Œæˆ‘ä»¬æƒ³æ‰¾åˆ°æ•°å­—Bï¼Œä½¿å¾—Hash(A<em>B)çš„ç»“æœCçš„æœ€å1ä½ç­‰äº0ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCå¯ä»¥æ˜¯Hash(A</em>B)=2ba83â€¦6d0ï¼Œå› ä¸ºå®ƒçš„æœ€åä¸€ä½æ˜¯0ã€‚</p><h2 id="å®ç°æŒ–çŸ¿"><a href="#å®ç°æŒ–çŸ¿" class="headerlink" title="å®ç°æŒ–çŸ¿"></a>å®ç°æŒ–çŸ¿</h2><p>çŸ¥é“äº†å¦‚ä½•æŒ–çŸ¿ä¹‹åï¼Œæˆ‘ä»¬å°†ä¸Šé¢çš„ä»£ç èåˆåˆ°æˆ‘ä»¬çš„åŒºå—é“¾æ¨¡å‹é‡Œã€‚</p><pre><code class="javascript">    isProofValid(tentativeBlock) {        // è¿™é‡Œæˆ‘ä»¬åˆ¤æ–­newProofæ˜¯ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„proofçš„æ–¹æ³•æ˜¯        // å°†æ•´ä¸ªåŒºå—è¿›è¡Œå“ˆå¸Œ        // å¦‚æœå¾—åˆ°çš„æ•£åˆ—å€¼æŒ‡çš„æœ€ånä½éƒ½æ˜¯0ï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸€ä¸ªvalid proof        // å…¶ä¸­ï¼Œn = difficulty        const result = this.constructor.hash(tentativeBlock);        return result.substr(result.length - this.difficulty) === '0'.repeat(this.difficulty);    }    mineProof(tentativeBlock) {        console.log("miner block start: " + JSON.stringify(tentativeBlock));        while (!this.isProofValid(tentativeBlock)) {            tentativeBlock.proof += 1; // å¦‚æœä¸æ˜¯å¯ç”¨çš„proofï¼Œæˆ‘ä»¬å°±æ¥ç€æšä¸¾        }        const hash = this.constructor.hash(tentativeBlock);        console.log("miner block success. Hash: " + hash);        return hash;    }    createBlock(transaction, previousHash = undefined) {        // åˆ›é€ ä¸€ä¸ªæ–°åŒºå—        // ä¸€å¼€å§‹çš„proofæ˜¯0ï¼Œä¸ä¸€å®šæ˜¯æœ‰æ•ˆçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦mineProofæ¥æ‰¾åˆ°æœ‰æ•ˆçš„proof        let block = {            timestamp: Date.now(),            id: this.chain.length,            proof: 0,            previousBlockHash: previousHash || this.constructor.hash(this.lastBlock()),            transactions: transaction        };        const hash = this.mineProof(block);        this.chain.push(block);        return hash;    }    miner() {        // æŒ–çŸ¿ç¨‹åº        if (this._packTransactions.length &gt; 0) {            const hash = this.createBlock([this._packTransactions[this._packTransactions.length - 1]]);            if (hash) {                this._packTransactions.pop();                return hash            }        }    }</code></pre><p>å®Œæ•´ä»£ç ï¼š<a href="https://github.com/zhangzhishun/sugar-blockchain-js/blob/master/blockchain.js">blockchain</a></p><p>å‚è€ƒï¼š</p><ol><li><a href="https://mp.weixin.qq.com/s/6jwIj_m86dpGk62biEJyIA">30åˆ†é’Ÿè‡ªå·±å†™ä¸€æ¡åŒºå—é“¾(ä¸€)</a></li><li><a href="https://mp.weixin.qq.com/s/UbLx2mHEb9OyPeJBwP2bvg">30åˆ†é’Ÿè‡ªå·±å†™ä¸€æ¡åŒºå—é“¾(äºŒ)</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¦‚ä½•ä»æŠ€æœ¯ä¸Šå®ç°ä¸€æ¡åŒºå—é“¾ï¼Ÿ&lt;br&gt;é¦–å…ˆï¼Œè¿™é‡Œå‡å®šè¯»è€…æœ‰åŸºæœ¬çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œè™½ç„¶æœ¬æ–‡ç”¨äº†Javascriptæ¥å†™ï¼Œä½†æŒæ¡ä»»æ„ä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„è¯»è€…é˜…è¯»èµ·æ¥åº”è¯¥ä¸ä¼šæœ‰ä»»ä½•éš¾åº¦ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¼€å‘å‡†å¤‡&quot;&gt;&lt;a href=&quot;#å¼€å‘å‡†å¤‡&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    
    <category term="éƒ¨ç½²æ–‡æ¡£" scheme="https://zhangzhishun.github.io/tags/%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/"/>
    
    <category term="Other" scheme="https://zhangzhishun.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>NFTæ¡†æ¶ OpenZeppelin ERC721æºç åˆ†æ</title>
    <link href="https://zhangzhishun.github.io/2022/02/26/blockchain/nft/NFT%E6%A1%86%E6%9E%B6-OpenZeppelinERC721%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    <id>https://zhangzhishun.github.io/2022/02/26/blockchain/nft/NFT%E6%A1%86%E6%9E%B6-OpenZeppelinERC721%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/</id>
    <published>2022-02-26T02:25:11.000Z</published>
    <updated>2022-04-27T02:35:55.483Z</updated>
    
    <content type="html"><![CDATA[<p>ERC721å®˜æ–¹ç®€ä»‹æ˜¯ï¼šA standard interface for non-fungible tokens, also known as deeds.ä¹Ÿå«éåŒè´¨ä»£å¸ï¼Œæˆ–è€…ä¸å¯ç½®æ¢ä»£å¸ï¼ˆNFTsï¼‰ã€‚æåˆ°ERC721ï¼Œä¸€ä¸ªå¥½ç†è§£çš„ä¾‹å­å°±æ˜¯<a href="https://link.segmentfault.com/?enc=C1N3804jiPfa4j/kbVqQeA==.qKJ3FJzSnC5Qcs2rB15IvrOOttPxdU0dtue8Pk75gJ0=">CryptoKittiesè¿·æ‹çŒ«</a> ,æ¯ä¸€åªçŒ«éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„æ‹¥æœ‰ä¸åŒåŸºå› ï¼Œæœ‰æ”¶è—ä»·å€¼å±æ€§ã€‚ERC721å¯¹äºè™šæ‹Ÿèµ„äº§æ”¶è—å“é¢†åŸŸä¼šæœ‰å¾ˆå¥½çš„åº”ç”¨ä»·å€¼å’Œå¸‚åœºéœ€æ±‚ã€‚</p><p>ERC721æ˜¯ä»¥å¤ªåŠå’Œ Wanchain åŒºå—é“¾çš„<a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md">ERC-721ä¸å¯æ›¿ä»£ä»¤ç‰Œæ ‡å‡†çš„å®Œæ•´å‚è€ƒå®ç°ã€‚</a>å®ƒè¿˜ä¸å…¶ä»– EVM å…¼å®¹é“¾å…¼å®¹ï¼Œå¦‚ Binance Smart Chain (BSC)ã€Avalanche (AVAX) ç­‰ã€‚è¿™æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®Œæˆäº†<a href="https://hardhat.org/">Hardhat</a>æµ‹è¯•ã€‚</p><p>æ­¤é¡¹ç›®çš„ç›®çš„æ˜¯ä¸ºä»»ä½•æƒ³è¦åœ¨ä»¥å¤ªåŠå’Œ Wanchain åŒºå—é“¾ä¸Šä½¿ç”¨å’Œå¼€å‘ä¸å¯æ›¿ä»£ä»£å¸çš„äººæä¾›ä¸€ä¸ªè‰¯å¥½çš„èµ·ç‚¹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ç»è¿‡å¤šæ¬¡å®¡æ ¸çš„ä»£ç ï¼Œè€Œä¸æ˜¯è‡ªå·±é‡æ–°å®ç° ERC-721ï¼Œæ­¤å®ç°æ¯” ERC-721 æ ‡å‡†æ›´å…·é™åˆ¶æ€§ï¼Œå› ä¸ºå®ƒä¸æ”¯æŒ<code>payable</code>å¼€ç®±å³ç”¨çš„å‡½æ•°è°ƒç”¨ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥è‡ªå·±æ·»åŠ å®ƒã€‚</p><p>åˆçº¦åˆ—è¡¨ï¼š</p><ul><li><a href="https://github.com/nibbstack/erc721/blob/2.6.1/src/contracts/tokens/nf-token.sol"><code>nf-token.sol</code></a>ï¼šè¿™æ˜¯åŸºæœ¬çš„ ERC-721 tokenå®ç°ï¼ˆæ”¯æŒ ERC-165ï¼‰ã€‚</li><li><a href="https://github.com/nibbstack/erc721/blob/2.6.1/src/contracts/tokens/nf-token-metadata.sol"><code>nf-token-metadata.sol</code></a>ï¼šè¿™ä¸ºä»£å¸åˆçº¦å®ç°äº†å¯é€‰çš„ ERC-721 å…ƒæ•°æ®åŠŸèƒ½ã€‚å®ƒå®ç°äº†ä¸€ä¸ªtokenåç§°ã€ä¸€ä¸ªç¬¦å·å’Œä¸€ä¸ªæŒ‡å‘å…¬å¼€æš´éœ²çš„ ERC-721 JSON å…ƒæ•°æ®æ–‡ä»¶çš„ä¸åŒ URIã€‚</li><li><a href="https://github.com/nibbstack/erc721/blob/2.6.1/src/contracts/tokens/nf-token-enumerable.sol"><code>nf-token-enumerable.sol</code></a>ï¼šè¿™å®ç°äº†å¯¹æšä¸¾çš„å¯é€‰ ERC-721 æ”¯æŒã€‚å¦‚æœæ‚¨æƒ³çŸ¥é“ä»£å¸çš„æ€»ä¾›åº”é‡ã€æŒ‰ç´¢å¼•æŸ¥è¯¢ä»£å¸ç­‰ï¼Œè¿™å¾ˆæœ‰ç”¨</li></ul><p>åˆçº¦ç±»ã€æ¥å£ä¹‹é—´çš„ç»§æ‰¿å…³ç³»ï¼š</p><p><img src="/images/open-zeppelin-erc721/image-20220226171652608.png" alt="image-20220226171652608"></p><h2 id="1-SupportsInterface"><a href="#1-SupportsInterface" class="headerlink" title="1. SupportsInterface"></a>1. <a href="https://github.com/nibbstack/erc721/blob/2.6.1/src/contracts/utils/supports-interface.sol">SupportsInterface</a></h2><p>å®ç°æ£€æµ‹æ™ºèƒ½åˆçº¦æ¥å£çš„æ ‡å‡†ã€‚</p><p>ä¾‹å¦‚åœ¨åˆçº¦çš„æ„é€ å‡½æ•°å®šä¹‰å¦‚ä¸‹å†…å®¹æŒ‡å®šæ£€æµ‹æ ‡å‡†ï¼š</p><pre><code class="javascript">supportedInterfaces[0x01ffc9a7] = true; // ERC165supportedInterfaces[0x780e9d63] = true; // ERC721EnumerablesupportedInterfaces[0x5b5e139f] = true; // ERC721MetadatasupportedInterfaces[0x80ac58cd] = true; // ERC721</code></pre><p>æºç ï¼š</p><pre><code class="javascript">// SPDX-License-Identifier: MITpragma solidity ^0.8.0;import "./erc165.sol";/** * @dev Implementation of standard for detect smart contract interfaces. */contract SupportsInterface is  ERC165{  /**   * @dev Mapping of supported intefraces. You must not set element 0xffffffff to true.   */  mapping(bytes4 =&gt; bool) internal supportedInterfaces;  /**   * @dev Contract constructor.   */  constructor()  {    supportedInterfaces[0x01ffc9a7] = true; // ERC165  }  /**   * @dev Function to check which interfaces are suported by this contract.   * @param _interfaceID Id of the interface.   * @return True if _interfaceID is supported, false otherwise.   */  function supportsInterface(    bytes4 _interfaceID  )    external    override    view    returns (bool)  {    return supportedInterfaces[_interfaceID];  }}</code></pre><h2 id="2-ERC721"><a href="#2-ERC721" class="headerlink" title="2. ERC721"></a>2. <a href="https://github.com/nibbstack/erc721/blob/2.6.1/src/contracts/tokens/erc721.sol">ERC721</a></h2><p>ERC721åˆçº¦å®šä¹‰äº†åŸºæœ¬çš„æ¥å£æ–¹æ³•ï¼š</p><ul><li><p>safeTransferFromï¼šè½¬ç§»ä»£å¸æ‰€æœ‰æƒ</p></li><li><p>transferFromï¼šè½¬ç§»ä»£å¸æ‰€æœ‰æƒ</p></li><li><p>setApprovalForAllï¼šæˆæƒoperatorå…·æœ‰æ‰€æœ‰ä»£å¸çš„æ§åˆ¶æƒ</p></li><li><p>balanceOfï¼šè¿”å›ownerçš„ä»£å¸æ•°é‡</p></li><li><p>ownerOfï¼šæ ¹æ®tokenIdè¿”å›ä»£å¸æŒæœ‰è€…address</p></li><li><p>getApprovedï¼šæŸ¥è¯¢tokenIdçš„æˆæƒäººoperator address</p></li><li><p>approve æˆæƒtokenIdç»™åœ°å€to</p></li><li><p>isApprovedForAllï¼šæŸ¥è¯¢ä¸€ä¸ªåœ°å€æ˜¯å¦ä¸ºå¦ä¸€ä¸ªåœ°å€çš„æˆæƒæ“ä½œè€…ã€‚</p></li></ul><p>æºç ï¼š</p><pre><code class="javascript">// SPDX-License-Identifier: MITpragma solidity ^0.8.0;/** * @dev ERC-721 non-fungible token standard. * See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md. */interface ERC721{  /**   * @dev Emits when ownership of any NFT changes by any mechanism. This event emits when NFTs are   * created (`from` == 0) and destroyed (`to` == 0). Exception: during contract creation, any   * number of NFTs may be created and assigned without emitting Transfer. At the time of any   * transfer, the approved address for that NFT (if any) is reset to none.   */  event Transfer(    address indexed _from,    address indexed _to,    uint256 indexed _tokenId  );  /**   * @dev This emits when the approved address for an NFT is changed or reaffirmed. The zero   * address indicates there is no approved address. When a Transfer event emits, this also   * indicates that the approved address for that NFT (if any) is reset to none.   */  event Approval(    address indexed _owner,    address indexed _approved,    uint256 indexed _tokenId  );  /**   * @dev This emits when an operator is enabled or disabled for an owner. The operator can manage   * all NFTs of the owner.   */  event ApprovalForAll(    address indexed _owner,    address indexed _operator,    bool _approved  );  /**   * @notice Throws unless `msg.sender` is the current owner, an authorized operator, or the   * approved address for this NFT. Throws if `_from` is not the current owner. Throws if `_to` is   * the zero address. Throws if `_tokenId` is not a valid NFT. When transfer is complete, this   * function checks if `_to` is a smart contract (code size &gt; 0). If so, it calls   * `onERC721Received` on `_to` and throws if the return value is not   * `bytes4(keccak256("onERC721Received(address,uint256,bytes)"))`.   * @dev Transfers the ownership of an NFT from one address to another address. This function can   * be changed to payable.   * @param _from The current owner of the NFT.   * @param _to The new owner.   * @param _tokenId The NFT to transfer.   * @param _data Additional data with no specified format, sent in call to `_to`.   */  function safeTransferFrom(    address _from,    address _to,    uint256 _tokenId,    bytes calldata _data  )    external;  /**   * @notice This works identically to the other function with an extra data parameter, except this   * function just sets data to ""   * @dev Transfers the ownership of an NFT from one address to another address. This function can   * be changed to payable.   * @param _from The current owner of the NFT.   * @param _to The new owner.   * @param _tokenId The NFT to transfer.   */  function safeTransferFrom(    address _from,    address _to,    uint256 _tokenId  )    external;  /**   * @notice The caller is responsible to confirm that `_to` is capable of receiving NFTs or else   * they may be permanently lost.   * @dev Throws unless `msg.sender` is the current owner, an authorized operator, or the approved   * address for this NFT. Throws if `_from` is not the current owner. Throws if `_to` is the zero   * address. Throws if `_tokenId` is not a valid NFT.  This function can be changed to payable.   * @param _from The current owner of the NFT.   * @param _to The new owner.   * @param _tokenId The NFT to transfer.   */  function transferFrom(    address _from,    address _to,    uint256 _tokenId  )    external;  /**   * @notice The zero address indicates there is no approved address. Throws unless `msg.sender` is   * the current NFT owner, or an authorized operator of the current owner.   * @param _approved The new approved NFT controller.   * @dev Set or reaffirm the approved address for an NFT. This function can be changed to payable.   * @param _tokenId The NFT to approve.   */  function approve(    address _approved,    uint256 _tokenId  )    external;  /**   * @notice The contract MUST allow multiple operators per owner.   * @dev Enables or disables approval for a third party ("operator") to manage all of   * `msg.sender`'s assets. It also emits the ApprovalForAll event.   * @param _operator Address to add to the set of authorized operators.   * @param _approved True if the operators is approved, false to revoke approval.   */  function setApprovalForAll(    address _operator,    bool _approved  )    external;  /**   * @dev Returns the number of NFTs owned by `_owner`. NFTs assigned to the zero address are   * considered invalid, and this function throws for queries about the zero address.   * @notice Count all NFTs assigned to an owner.   * @param _owner Address for whom to query the balance.   * @return Balance of _owner.   */  function balanceOf(    address _owner  )    external    view    returns (uint256);  /**   * @notice Find the owner of an NFT.   * @dev Returns the address of the owner of the NFT. NFTs assigned to the zero address are   * considered invalid, and queries about them do throw.   * @param _tokenId The identifier for an NFT.   * @return Address of _tokenId owner.   */  function ownerOf(    uint256 _tokenId  )    external    view    returns (address);  /**   * @notice Throws if `_tokenId` is not a valid NFT.   * @dev Get the approved address for a single NFT.   * @param _tokenId The NFT to find the approved address for.   * @return Address that _tokenId is approved for.   */  function getApproved(    uint256 _tokenId  )    external    view    returns (address);  /**   * @notice Query if an address is an authorized operator for another address.   * @dev Returns true if `_operator` is an approved operator for `_owner`, false otherwise.   * @param _owner The address that owns the NFTs.   * @param _operator The address that acts on behalf of the owner.   * @return True if approved for all, false otherwise.   */  function isApprovedForAll(    address _owner,    address _operator  )    external    view    returns (bool);}</code></pre><h2 id="3-ERC721Metadata"><a href="#3-ERC721Metadata" class="headerlink" title="3. ERC721Metadata"></a>3. <a href="https://github.com/nibbstack/erc721/blob/2.6.1/src/contracts/tokens/erc721-metadata.sol">ERC721Metadata</a></h2><p>ERC-721ä¸å¯æ›¿ä»£ä»¤ç‰Œæ ‡å‡†çš„å¯é€‰å…ƒæ•°æ®æ‰©å±•ã€‚</p><p>ä¸»è¦æ–¹æ³•ï¼š</p><ul><li>nameï¼šè¿”å›NFTçš„æè¿°æ€§åç§°</li><li>symbolï¼šè¿”å›NFTçš„ç¼©å†™åç§°</li><li>tokenURIï¼šè¿”å›_tokenIdå¯¹åº”çš„èµ„æºURI</li></ul><pre><code class="javascript">// SPDX-License-Identifier: MITpragma solidity ^0.8.0;/** * @dev Optional metadata extension for ERC-721 non-fungible token standard. * See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md. */interface ERC721Metadata{  /**   * @dev Returns a descriptive name for a collection of NFTs in this contract.   * @return _name Representing name.   */  function name()    external    view    returns (string memory _name);  /**   * @dev Returns a abbreviated name for a collection of NFTs in this contract.   * @return _symbol Representing symbol.   */  function symbol()    external    view    returns (string memory _symbol);  /**   * @dev Returns a distinct Uniform Resource Identifier (URI) for a given asset. It Throws if   * `_tokenId` is not a valid NFT. URIs are defined in RFC3986. The URI may point to a JSON file   * that conforms to the "ERC721 Metadata JSON Schema".   * @return URI of _tokenId.   */  function tokenURI(uint256 _tokenId)    external    view    returns (string memory);}</code></pre><h2 id="4-ERC721Enumerable"><a href="#4-ERC721Enumerable" class="headerlink" title="4. ERC721Enumerable"></a>4. <a href="https://github.com/nibbstack/erc721/blob/2.6.1/src/contracts/tokens/erc721-enumerable.sol">ERC721Enumerable</a></h2><p>ERC-721ä¸å¯æ›¿ä»£ä»¤ç‰Œæ ‡å‡†çš„å¯é€‰æšä¸¾æ‰©å±•ã€‚</p><p>ä¸»è¦æ–¹æ³•ï¼š</p><ul><li>totalSupplyï¼šè¿”å›ç”±æ­¤å¥‘çº¦è·Ÿè¸ªçš„æœ‰æ•ˆnftçš„è®¡æ•°ï¼ˆä»£å¸æ€»é‡ï¼‰ï¼Œå…¶ä¸­æ¯ä¸ªnftéƒ½æœ‰ä¸€ä¸ªåˆ†é…çš„ã€å¯æŸ¥è¯¢çš„æ‰€æœ‰è€…ï¼Œä¸”æ‰€æœ‰è€…ä¸ç­‰äºé›¶åœ°å€</li><li>tokenByIndexï¼šè¿”å›ç¬¬indexçš„NFTçš„tokenIdã€‚æ²¡æœ‰æŒ‡å®šæ’åºé¡ºåºã€‚</li><li>tokenOfOwnerByIndexï¼šè¿”å›åˆ†é…ç»™æŒ‡å®šäººçš„ç¬¬indexçš„NFTçš„tokenIdã€‚æ²¡æœ‰æŒ‡å®šæ’åºé¡ºåº</li></ul><p>æºç ï¼š</p><pre><code class="javascript">// SPDX-License-Identifier: MITpragma solidity ^0.8.0;/** * @dev Optional enumeration extension for ERC-721 non-fungible token standard. * See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md. */interface ERC721Enumerable{  /**   * @dev Returns a count of valid NFTs tracked by this contract, where each one of them has an   * assigned and queryable owner not equal to the zero address.   * @return Total supply of NFTs.   */  function totalSupply()    external    view    returns (uint256);  /**   * @dev Returns the token identifier for the `_index`th NFT. Sort order is not specified.   * @param _index A counter less than `totalSupply()`.   * @return Token id.   */  function tokenByIndex(    uint256 _index  )    external    view    returns (uint256);  /**   * @dev Returns the token identifier for the `_index`th NFT assigned to `_owner`. Sort order is   * not specified. It throws if `_index` &gt;= `balanceOf(_owner)` or if `_owner` is the zero address,   * representing invalid NFTs.   * @param _owner An address where we are interested in NFTs owned by them.   * @param _index A counter less than `balanceOf(_owner)`.   * @return Token id.   */  function tokenOfOwnerByIndex(    address _owner,    uint256 _index  )    external    view    returns (uint256);}</code></pre><h2 id="5-NFToken"><a href="#5-NFToken" class="headerlink" title="5. NFToken"></a>5. <a href="https://github.com/nibbstack/erc721/blob/2.6.1/src/contracts/tokens/nf-token.sol">NFToken</a></h2><p>ERC721 æ ‡å‡†åŸºæœ¬å®ç°</p><p>ä¸»è¦æ–¹æ³•ï¼š</p><ul><li>safeTransferFromï¼šå°†NFTçš„æ‰€æœ‰æƒä»ä¸€ä¸ªåœ°å€è½¬ç§»åˆ°å¦ä¸€ä¸ªåœ°å€ã€‚æ­¤åŠŸèƒ½å¯æ›´æ”¹ä¸ºpayable</li><li>transferFromï¼šå°†æŒ‡å®šçš„tokenæ‰€æœ‰æƒè½¬ç§»ç»™å¦å¤–ä¸€ä¸ªåœ°å€ï¼Œä¸é¼“åŠ±ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå°½é‡ä½¿ç”¨<code>safeTransferFrom</code></li><li>approveï¼šæ‰¹å‡†å¦ä¸€ä¸ªäººaddressæ¥äº¤æ˜“æŒ‡å®šçš„ä»£å¸ï¼Œ0 address è¡¨ç¤ºæ²¡æœ‰æˆæƒçš„åœ°å€ï¼Œç»™å®šçš„æ—¶é—´å†…ï¼Œä¸€ä¸ªtokenåªèƒ½æœ‰ä¸€ä¸ªæ‰¹å‡†çš„åœ°å€ï¼Œåªæœ‰tokençš„æŒæœ‰è€…æˆ–è€…æˆæƒçš„æ“ä½œäººæ‰å¯ä»¥è°ƒç”¨ã€‚æ­¤åŠŸèƒ½å¯æ›´æ”¹ä¸ºpayable</li><li>setApprovalForAllï¼šè®¾ç½®æˆ–è€…å–æ¶ˆå¯¹æ“ä½œäººçš„æˆæƒï¼Œä¸€ä¸ªæ“ä½œäººå¯ä»¥ä»£è¡¨ä»–ä»¬è½¬è®©å‘é€è€…çš„æ‰€æœ‰token</li><li>balanceOfï¼šè·å–æŒæœ‰è€…çš„ä»£å¸æ€»æ•°</li><li>ownerOfï¼šæ ¹æ®token IDè·å–æŒæœ‰è€…</li><li>getApprovedï¼šè·å–tokenè¢«æˆæƒçš„åœ°å€ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®åœ°å€åˆ™ä¸º0</li><li>isApprovedForAllï¼šæŸ¥è¯¢æ˜¯å¦æ“ä½œäººè¢«æŒ‡å®šçš„æŒæœ‰è€…æˆæƒï¼Œè¦æŸ¥è¯¢çš„æˆæƒäººåœ°å€ï¼Œè¦æŸ¥è¯¢çš„æˆæƒæ“ä½œäººåœ°å€</li></ul><pre><code class="javascript">// SPDX-License-Identifier: MITpragma solidity ^0.8.0;import "./erc721.sol";import "./erc721-token-receiver.sol";import "../utils/supports-interface.sol";import "../utils/address-utils.sol";/** * @dev Implementation of ERC-721 non-fungible token standard. */contract NFToken is  ERC721,  SupportsInterface{  using AddressUtils for address;  /**   * @dev List of revert message codes. Implementing dApp should handle showing the correct message.   * Based on 0xcert framework error codes.   */  string constant ZERO_ADDRESS = "003001";  string constant NOT_VALID_NFT = "003002";  string constant NOT_OWNER_OR_OPERATOR = "003003";  string constant NOT_OWNER_APPROVED_OR_OPERATOR = "003004";  string constant NOT_ABLE_TO_RECEIVE_NFT = "003005";  string constant NFT_ALREADY_EXISTS = "003006";  string constant NOT_OWNER = "003007";  string constant IS_OWNER = "003008";  /**   * @dev Magic value of a smart contract that can receive NFT.   * Equal to: bytes4(keccak256("onERC721Received(address,address,uint256,bytes)")).   */  bytes4 internal constant MAGIC_ON_ERC721_RECEIVED = 0x150b7a02;  /**   * @dev A mapping from NFT ID to the address that owns it.   */  mapping (uint256 =&gt; address) internal idToOwner;  /**   * @dev Mapping from NFT ID to approved address.   */  mapping (uint256 =&gt; address) internal idToApproval;   /**   * @dev Mapping from owner address to count of their tokens.   */  mapping (address =&gt; uint256) private ownerToNFTokenCount;  /**   * @dev Mapping from owner address to mapping of operator addresses.   */  mapping (address =&gt; mapping (address =&gt; bool)) internal ownerToOperators;  /**   * @dev Guarantees that the msg.sender is an owner or operator of the given NFT.   * @param _tokenId ID of the NFT to validate.   */  modifier canOperate(    uint256 _tokenId  )  {    address tokenOwner = idToOwner[_tokenId];    require(      tokenOwner == msg.sender || ownerToOperators[tokenOwner][msg.sender],      NOT_OWNER_OR_OPERATOR    );    _;  }  /**   * @dev Guarantees that the msg.sender is allowed to transfer NFT.   * @param _tokenId ID of the NFT to transfer.   */  modifier canTransfer(    uint256 _tokenId  )  {    address tokenOwner = idToOwner[_tokenId];    require(      tokenOwner == msg.sender      || idToApproval[_tokenId] == msg.sender      || ownerToOperators[tokenOwner][msg.sender],      NOT_OWNER_APPROVED_OR_OPERATOR    );    _;  }  /**   * @dev Guarantees that _tokenId is a valid Token.   * @param _tokenId ID of the NFT to validate.   */  modifier validNFToken(    uint256 _tokenId  )  {    require(idToOwner[_tokenId] != address(0), NOT_VALID_NFT);    _;  }  /**   * @dev Contract constructor.   */  constructor()  {    supportedInterfaces[0x80ac58cd] = true; // ERC721  }  /**   * @notice Throws unless `msg.sender` is the current owner, an authorized operator, or the   * approved address for this NFT. Throws if `_from` is not the current owner. Throws if `_to` is   * the zero address. Throws if `_tokenId` is not a valid NFT. When transfer is complete, this   * function checks if `_to` is a smart contract (code size &gt; 0). If so, it calls   * `onERC721Received` on `_to` and throws if the return value is not   * `bytes4(keccak256("onERC721Received(address,uint256,bytes)"))`.   * @dev Transfers the ownership of an NFT from one address to another address. This function can   * be changed to payable.   * @param _from The current owner of the NFT.   * @param _to The new owner.   * @param _tokenId The NFT to transfer.   * @param _data Additional data with no specified format, sent in call to `_to`.   */  function safeTransferFrom(    address _from,    address _to,    uint256 _tokenId,    bytes calldata _data  )    external    override  {    _safeTransferFrom(_from, _to, _tokenId, _data);  }  /**   * @notice This works identically to the other function with an extra data parameter, except this   * function just sets data to "".   * @dev Transfers the ownership of an NFT from one address to another address. This function can   * be changed to payable.   * @param _from The current owner of the NFT.   * @param _to The new owner.   * @param _tokenId The NFT to transfer.   */  function safeTransferFrom(    address _from,    address _to,    uint256 _tokenId  )    external    override  {    _safeTransferFrom(_from, _to, _tokenId, "");  }  /**   * @notice The caller is responsible to confirm that `_to` is capable of receiving NFTs or else   * they may be permanently lost.   * @dev Throws unless `msg.sender` is the current owner, an authorized operator, or the approved   * address for this NFT. Throws if `_from` is not the current owner. Throws if `_to` is the zero   * address. Throws if `_tokenId` is not a valid NFT. This function can be changed to payable.   * @param _from The current owner of the NFT.   * @param _to The new owner.   * @param _tokenId The NFT to transfer.   */  function transferFrom(    address _from,    address _to,    uint256 _tokenId  )    external    override    canTransfer(_tokenId)    validNFToken(_tokenId)  {    address tokenOwner = idToOwner[_tokenId];    require(tokenOwner == _from, NOT_OWNER);    require(_to != address(0), ZERO_ADDRESS);    _transfer(_to, _tokenId);  }  /**   * @notice The zero address indicates there is no approved address. Throws unless `msg.sender` is   * the current NFT owner, or an authorized operator of the current owner.   * @dev Set or reaffirm the approved address for an NFT. This function can be changed to payable.   * @param _approved Address to be approved for the given NFT ID.   * @param _tokenId ID of the token to be approved.   */  function approve(    address _approved,    uint256 _tokenId  )    external    override    canOperate(_tokenId)    validNFToken(_tokenId)  {    address tokenOwner = idToOwner[_tokenId];    require(_approved != tokenOwner, IS_OWNER);    idToApproval[_tokenId] = _approved;    emit Approval(tokenOwner, _approved, _tokenId);  }  /**   * @notice This works even if sender doesn't own any tokens at the time.   * @dev Enables or disables approval for a third party ("operator") to manage all of   * `msg.sender`'s assets. It also emits the ApprovalForAll event.   * @param _operator Address to add to the set of authorized operators.   * @param _approved True if the operators is approved, false to revoke approval.   */  function setApprovalForAll(    address _operator,    bool _approved  )    external    override  {    ownerToOperators[msg.sender][_operator] = _approved;    emit ApprovalForAll(msg.sender, _operator, _approved);  }  /**   * @dev Returns the number of NFTs owned by `_owner`. NFTs assigned to the zero address are   * considered invalid, and this function throws for queries about the zero address.   * @param _owner Address for whom to query the balance.   * @return Balance of _owner.   */  function balanceOf(    address _owner  )    external    override    view    returns (uint256)  {    require(_owner != address(0), ZERO_ADDRESS);    return _getOwnerNFTCount(_owner);  }  /**   * @dev Returns the address of the owner of the NFT. NFTs assigned to the zero address are   * considered invalid, and queries about them do throw.   * @param _tokenId The identifier for an NFT.   * @return _owner Address of _tokenId owner.   */  function ownerOf(    uint256 _tokenId  )    external    override    view    returns (address _owner)  {    _owner = idToOwner[_tokenId];    require(_owner != address(0), NOT_VALID_NFT);  }  /**   * @notice Throws if `_tokenId` is not a valid NFT.   * @dev Get the approved address for a single NFT.   * @param _tokenId ID of the NFT to query the approval of.   * @return Address that _tokenId is approved for.   */  function getApproved(    uint256 _tokenId  )    external    override    view    validNFToken(_tokenId)    returns (address)  {    return idToApproval[_tokenId];  }  /**   * @dev Checks if `_operator` is an approved operator for `_owner`.   * @param _owner The address that owns the NFTs.   * @param _operator The address that acts on behalf of the owner.   * @return True if approved for all, false otherwise.   */  function isApprovedForAll(    address _owner,    address _operator  )    external    override    view    returns (bool)  {    return ownerToOperators[_owner][_operator];  }  /**   * @notice Does NO checks.   * @dev Actually performs the transfer.   * @param _to Address of a new owner.   * @param _tokenId The NFT that is being transferred.   */  function _transfer(    address _to,    uint256 _tokenId  )    internal    virtual  {    address from = idToOwner[_tokenId];    _clearApproval(_tokenId);    _removeNFToken(from, _tokenId);    _addNFToken(_to, _tokenId);    emit Transfer(from, _to, _tokenId);  }  /**   * @notice This is an internal function which should be called from user-implemented external   * mint function. Its purpose is to show and properly initialize data structures when using this   * implementation.   * @dev Mints a new NFT.   * @param _to The address that will own the minted NFT.   * @param _tokenId of the NFT to be minted by the msg.sender.   */  function _mint(    address _to,    uint256 _tokenId  )    internal    virtual  {    require(_to != address(0), ZERO_ADDRESS);    require(idToOwner[_tokenId] == address(0), NFT_ALREADY_EXISTS);    _addNFToken(_to, _tokenId);    emit Transfer(address(0), _to, _tokenId);  }  /**   * @notice This is an internal function which should be called from user-implemented external burn   * function. Its purpose is to show and properly initialize data structures when using this   * implementation. Also, note that this burn implementation allows the minter to re-mint a burned   * NFT.   * @dev Burns a NFT.   * @param _tokenId ID of the NFT to be burned.   */  function _burn(    uint256 _tokenId  )    internal    virtual    validNFToken(_tokenId)  {    address tokenOwner = idToOwner[_tokenId];    _clearApproval(_tokenId);    _removeNFToken(tokenOwner, _tokenId);    emit Transfer(tokenOwner, address(0), _tokenId);  }  /**   * @notice Use and override this function with caution. Wrong usage can have serious consequences.   * @dev Removes a NFT from owner.   * @param _from Address from which we want to remove the NFT.   * @param _tokenId Which NFT we want to remove.   */  function _removeNFToken(    address _from,    uint256 _tokenId  )    internal    virtual  {    require(idToOwner[_tokenId] == _from, NOT_OWNER);    ownerToNFTokenCount[_from] -= 1;    delete idToOwner[_tokenId];  }  /**   * @notice Use and override this function with caution. Wrong usage can have serious consequences.   * @dev Assigns a new NFT to owner.   * @param _to Address to which we want to add the NFT.   * @param _tokenId Which NFT we want to add.   */  function _addNFToken(    address _to,    uint256 _tokenId  )    internal    virtual  {    require(idToOwner[_tokenId] == address(0), NFT_ALREADY_EXISTS);    idToOwner[_tokenId] = _to;    ownerToNFTokenCount[_to] += 1;  }  /**   *&nbsp;@dev Helper function that gets NFT count of owner. This is needed for overriding in enumerable   * extension to remove double storage (gas optimization) of owner NFT count.   * @param _owner Address for whom to query the count.   * @return Number of _owner NFTs.   */  function _getOwnerNFTCount(    address _owner  )    internal    virtual    view    returns (uint256)  {    return ownerToNFTokenCount[_owner];  }  /**   * @dev Actually perform the safeTransferFrom.   * @param _from The current owner of the NFT.   * @param _to The new owner.   * @param _tokenId The NFT to transfer.   * @param _data Additional data with no specified format, sent in call to `_to`.   */  function _safeTransferFrom(    address _from,    address _to,    uint256 _tokenId,    bytes memory _data  )    private    canTransfer(_tokenId)    validNFToken(_tokenId)  {    address tokenOwner = idToOwner[_tokenId];    require(tokenOwner == _from, NOT_OWNER);    require(_to != address(0), ZERO_ADDRESS);    _transfer(_to, _tokenId);    if (_to.isContract())    {      bytes4 retval = ERC721TokenReceiver(_to).onERC721Received(msg.sender, _from, _tokenId, _data);      require(retval == MAGIC_ON_ERC721_RECEIVED, NOT_ABLE_TO_RECEIVE_NFT);    }  }  /**   * @dev Clears the current approval of a given NFT ID.   * @param _tokenId ID of the NFT to be transferred.   */  function _clearApproval(    uint256 _tokenId  )    private  {    delete idToApproval[_tokenId];  }}</code></pre><h2 id="6-NFTokenMetadata"><a href="#6-NFTokenMetadata" class="headerlink" title="6. NFTokenMetadata"></a>6. <a href="https://github.com/nibbstack/erc721/blob/2.6.1/src/contracts/tokens/nf-token-metadata.sol">NFTokenMetadata</a></h2><p>ERC-721ä¸å¯æ›¿ä»£ä»¤ç‰Œæ ‡å‡†çš„å¯é€‰å…ƒæ•°æ®å®ç°ï¼Œç»§æ‰¿NFTokenå¹¶å®ç°äº†ERC721Metadataæ¥å£</p><pre><code class="javascript">// SPDX-License-Identifier: MITpragma solidity ^0.8.0;import "./nf-token.sol";import "./erc721-metadata.sol";/** * @dev Optional metadata implementation for ERC-721 non-fungible token standard. */contract NFTokenMetadata is  NFToken,  ERC721Metadata{  /**   * @dev A descriptive name for a collection of NFTs.   */  string internal nftName;  /**   * @dev An abbreviated name for NFTokens.   */  string internal nftSymbol;  /**   * @dev Mapping from NFT ID to metadata uri.   */  mapping (uint256 =&gt; string) internal idToUri;  /**   * @notice When implementing this contract don't forget to set nftName and nftSymbol.   * @dev Contract constructor.   */  constructor()  {    supportedInterfaces[0x5b5e139f] = true; // ERC721Metadata  }  /**   * @dev Returns a descriptive name for a collection of NFTokens.   * @return _name Representing name.   */  function name()    external    override    view    returns (string memory _name)  {    _name = nftName;  }  /**   * @dev Returns an abbreviated name for NFTokens.   * @return _symbol Representing symbol.   */  function symbol()    external    override    view    returns (string memory _symbol)  {    _symbol = nftSymbol;  }  /**   * @dev A distinct URI (RFC 3986) for a given NFT.   * @param _tokenId Id for which we want uri.   * @return URI of _tokenId.   */  function tokenURI(    uint256 _tokenId  )    external    override    view    validNFToken(_tokenId)    returns (string memory)  {    return _tokenURI(_tokenId);  }  /**   * @notice This is an internal function that can be overriden if you want to implement a different   * way to generate token URI.   * @param _tokenId Id for which we want uri.   * @return URI of _tokenId.   */  function _tokenURI(    uint256 _tokenId  )    internal    virtual    view    returns (string memory)  {    return idToUri[_tokenId];  }  /**   * @notice This is an internal function which should be called from user-implemented external   * burn function. Its purpose is to show and properly initialize data structures when using this   * implementation. Also, note that this burn implementation allows the minter to re-mint a burned   * NFT.   * @dev Burns a NFT.   * @param _tokenId ID of the NFT to be burned.   */  function _burn(    uint256 _tokenId  )    internal    override    virtual  {    super._burn(_tokenId);    delete idToUri[_tokenId];  }  /**   * @notice This is an internal function which should be called from user-implemented external   * function. Its purpose is to show and properly initialize data structures when using this   * implementation.   * @dev Set a distinct URI (RFC 3986) for a given NFT ID.   * @param _tokenId Id for which we want URI.   * @param _uri String representing RFC 3986 URI.   */  function _setTokenUri(    uint256 _tokenId,    string memory _uri  )    internal    validNFToken(_tokenId)  {    idToUri[_tokenId] = _uri;  }}</code></pre><h2 id="7-NFTokenEnumerable"><a href="#7-NFTokenEnumerable" class="headerlink" title="7. NFTokenEnumerable"></a>7. <a href="https://github.com/nibbstack/erc721/blob/2.6.1/src/contracts/tokens/nf-token-enumerable.sol">NFTokenEnumerable</a></h2><p>ERC-721ä¸å¯æ›¿ä»£ä»¤ç‰Œæ ‡å‡†çš„å¯é€‰æšä¸¾å®ç°ï¼Œç»§æ‰¿NFTokenå¹¶å®ç°äº†ERC721Enumerableæ¥å£</p><pre><code class="javascript">// SPDX-License-Identifier: MITpragma solidity ^0.8.0;import "./nf-token.sol";import "./erc721-enumerable.sol";/** * @dev Optional enumeration implementation for ERC-721 non-fungible token standard. */contract NFTokenEnumerable is  NFToken,  ERC721Enumerable{  /**   * @dev List of revert message codes. Implementing dApp should handle showing the correct message.   * Based on 0xcert framework error codes.   */  string constant INVALID_INDEX = "005007";  /**   * @dev Array of all NFT IDs.   */  uint256[] internal tokens;  /**   * @dev Mapping from token ID to its index in global tokens array.   */  mapping(uint256 =&gt; uint256) internal idToIndex;  /**   * @dev Mapping from owner to list of owned NFT IDs.   */  mapping(address =&gt; uint256[]) internal ownerToIds;  /**   * @dev Mapping from NFT ID to its index in the owner tokens list.   */  mapping(uint256 =&gt; uint256) internal idToOwnerIndex;  /**   * @dev Contract constructor.   */  constructor()  {    supportedInterfaces[0x780e9d63] = true; // ERC721Enumerable  }  /**   * @dev Returns the count of all existing NFTokens.   * @return Total supply of NFTs.   */  function totalSupply()    external    override    view    returns (uint256)  {    return tokens.length;  }  /**   * @dev Returns NFT ID by its index.   * @param _index A counter less than `totalSupply()`.   * @return Token id.   */  function tokenByIndex(    uint256 _index  )    external    override    view    returns (uint256)  {    require(_index &lt; tokens.length, INVALID_INDEX);    return tokens[_index];  }  /**   * @dev returns the n-th NFT ID from a list of owner's tokens.   * @param _owner Token owner's address.   * @param _index Index number representing n-th token in owner's list of tokens.   * @return Token id.   */  function tokenOfOwnerByIndex(    address _owner,    uint256 _index  )    external    override    view    returns (uint256)  {    require(_index &lt; ownerToIds[_owner].length, INVALID_INDEX);    return ownerToIds[_owner][_index];  }  /**   * @notice This is an internal function which should be called from user-implemented external   * mint function. Its purpose is to show and properly initialize data structures when using this   * implementation.   * @dev Mints a new NFT.   * @param _to The address that will own the minted NFT.   * @param _tokenId of the NFT to be minted by the msg.sender.   */  function _mint(    address _to,    uint256 _tokenId  )    internal    override    virtual  {    super._mint(_to, _tokenId);    tokens.push(_tokenId);    idToIndex[_tokenId] = tokens.length - 1;  }  /**   * @notice This is an internal function which should be called from user-implemented external   * burn function. Its purpose is to show and properly initialize data structures when using this   * implementation. Also, note that this burn implementation allows the minter to re-mint a burned   * NFT.   * @dev Burns a NFT.   * @param _tokenId ID of the NFT to be burned.   */  function _burn(    uint256 _tokenId  )    internal    override    virtual  {    super._burn(_tokenId);    uint256 tokenIndex = idToIndex[_tokenId];    uint256 lastTokenIndex = tokens.length - 1;    uint256 lastToken = tokens[lastTokenIndex];    tokens[tokenIndex] = lastToken;    tokens.pop();    // This wastes gas if you are burning the last token but saves a little gas if you are not.    idToIndex[lastToken] = tokenIndex;    idToIndex[_tokenId] = 0;  }  /**   * @notice Use and override this function with caution. Wrong usage can have serious consequences.   * @dev Removes a NFT from an address.   * @param _from Address from wich we want to remove the NFT.   * @param _tokenId Which NFT we want to remove.   */  function _removeNFToken(    address _from,    uint256 _tokenId  )    internal    override    virtual  {    require(idToOwner[_tokenId] == _from, NOT_OWNER);    delete idToOwner[_tokenId];    uint256 tokenToRemoveIndex = idToOwnerIndex[_tokenId];    uint256 lastTokenIndex = ownerToIds[_from].length - 1;    if (lastTokenIndex != tokenToRemoveIndex)    {      uint256 lastToken = ownerToIds[_from][lastTokenIndex];      ownerToIds[_from][tokenToRemoveIndex] = lastToken;      idToOwnerIndex[lastToken] = tokenToRemoveIndex;    }    ownerToIds[_from].pop();  }  /**   * @notice Use and override this function with caution. Wrong usage can have serious consequences.   * @dev Assigns a new NFT to an address.   * @param _to Address to wich we want to add the NFT.   * @param _tokenId Which NFT we want to add.   */  function _addNFToken(    address _to,    uint256 _tokenId  )    internal    override    virtual  {    require(idToOwner[_tokenId] == address(0), NFT_ALREADY_EXISTS);    idToOwner[_tokenId] = _to;    ownerToIds[_to].push(_tokenId);    idToOwnerIndex[_tokenId] = ownerToIds[_to].length - 1;  }  /**   *&nbsp;@dev Helper function that gets NFT count of owner. This is needed for overriding in enumerable   * extension to remove double storage(gas optimization) of owner NFT count.   * @param _owner Address for whom to query the count.   * @return Number of _owner NFTs.   */  function _getOwnerNFTCount(    address _owner  )    internal    override    virtual    view    returns (uint256)  {    return ownerToIds[_owner].length;  }}</code></pre><h2 id="8-Ownable"><a href="#8-Ownable" class="headerlink" title="8. Ownable"></a>8. <a href="https://github.com/nibbstack/erc721/blob/master/src/contracts/ownership/ownable.sol">Ownable</a></h2><p>åˆåŒæœ‰ä¸€ä¸ªæ‰€æœ‰è€…åœ°å€ï¼Œå¹¶æä¾›åŸºæœ¬çš„æˆæƒæ§åˆ¶ï¼Œç®€åŒ–äº†ç”¨æˆ·æƒé™çš„å®ç°ã€‚æ­¤åˆåŒåŸºäºä»¥ä¸‹æºä»£ç : <a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/v4.5.0/contracts/access/Ownable.sol">https://github.com/OpenZeppelin/openzeppelin-contracts/blob/v4.5.0/contracts/access/Ownable.sol</a></p><pre><code class="javascriptscript">// SPDX-License-Identifier: MITpragma solidity ^0.8.0;/** * @dev The contract has an owner address, and provides basic authorization control whitch * simplifies the implementation of user permissions. This contract is based on the source code at: * https://github.com/OpenZeppelin/openzeppelin-solidity/blob/master/contracts/ownership/Ownable.sol */contract Ownable{  /**   * @dev Error constants.   */  string public constant NOT_CURRENT_OWNER = "018001";  string public constant CANNOT_TRANSFER_TO_ZERO_ADDRESS = "018002";  /**   * @dev Current owner address.   */  address public owner;  /**   * @dev An event which is triggered when the owner is changed.   * @param previousOwner The address of the previous owner.   * @param newOwner The address of the new owner.   */  event OwnershipTransferred(    address indexed previousOwner,    address indexed newOwner  );  /**   * @dev The constructor sets the original `owner` of the contract to the sender account.   */  constructor()  {    owner = msg.sender;  }  /**   * @dev Throws if called by any account other than the owner.   */  modifier onlyOwner()  {    require(msg.sender == owner, NOT_CURRENT_OWNER);    _;  }  /**   * @dev Allows the current owner to transfer control of the contract to a newOwner.   * @param _newOwner The address to transfer ownership to.   */  function transferOwnership(    address _newOwner  )    public    onlyOwner  {    require(_newOwner != address(0), CANNOT_TRANSFER_TO_ZERO_ADDRESS);    emit OwnershipTransferred(owner, _newOwner);    owner = _newOwner;  }}</code></pre><p>OpenZeppelin ERC721æºç åˆ†æåˆ°è¿™é‡Œå°±ç»“æŸäº†ã€‚</p><p>å‚è€ƒï¼š</p><ol><li><a href="https://github.com/nibbstack/erc721/tree/2.6.1">ERC721æºç v2.6.1</a></li><li><a href="https://segmentfault.com/a/1190000016070774">ERC721æºç åˆ†æ</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ERC721å®˜æ–¹ç®€ä»‹æ˜¯ï¼šA standard interface for non-fungible tokens, also known as deeds.ä¹Ÿå«éåŒè´¨ä»£å¸ï¼Œæˆ–è€…ä¸å¯ç½®æ¢ä»£å¸ï¼ˆNFTsï¼‰ã€‚æåˆ°ERC721ï¼Œä¸€ä¸ªå¥½ç†è§£çš„ä¾‹å­å°±æ˜¯&lt;a href=&quot;https://</summary>
      
    
    
    
    
    <category term="Ethereum" scheme="https://zhangzhishun.github.io/tags/Ethereum/"/>
    
    <category term="NFT" scheme="https://zhangzhishun.github.io/tags/NFT/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºä»¥å¤ªåŠçš„æˆ˜è‰‡æ¸¸æˆ(Layer2)æºç è§£æ</title>
    <link href="https://zhangzhishun.github.io/2022/02/24/blockchain/layer2/%E5%9F%BA%E4%BA%8E%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%9A%84%E6%88%98%E8%89%87%E6%B8%B8%E6%88%8F(Layer2)/"/>
    <id>https://zhangzhishun.github.io/2022/02/24/blockchain/layer2/%E5%9F%BA%E4%BA%8E%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%9A%84%E6%88%98%E8%89%87%E6%B8%B8%E6%88%8F(Layer2)/</id>
    <published>2022-02-24T03:20:30.000Z</published>
    <updated>2022-04-27T02:35:55.483Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸºäºä»¥å¤ªåŠçš„æˆ˜è‰‡æ¸¸æˆ-Layer2-æºç è§£æ"><a href="#åŸºäºä»¥å¤ªåŠçš„æˆ˜è‰‡æ¸¸æˆ-Layer2-æºç è§£æ" class="headerlink" title="åŸºäºä»¥å¤ªåŠçš„æˆ˜è‰‡æ¸¸æˆ(Layer2)æºç è§£æ"></a>åŸºäºä»¥å¤ªåŠçš„æˆ˜è‰‡æ¸¸æˆ(Layer2)æºç è§£æ</h1><h2 id="ä¸€ã€æ¸¸æˆä»‹ç»"><a href="#ä¸€ã€æ¸¸æˆä»‹ç»" class="headerlink" title="ä¸€ã€æ¸¸æˆä»‹ç»"></a>ä¸€ã€æ¸¸æˆä»‹ç»</h2><p>æ¯ä¸€ä¸ªç©å®¶éƒ½å¯ä»¥çœ‹åˆ°ä¸Šå›¾æ‰€ç¤ºçš„é¡µé¢ã€‚è¯¥é¡µé¢åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸‹é¢éƒ¨åˆ†è¡¨ç¤ºå½“å‰ç©å®¶çš„æ£‹ç›˜ä¿¡æ¯ï¼Œå¼€å§‹çš„æ—¶å€™ï¼Œè¯¥ç©å®¶éšæœºé€‰æ‹©ä¸¤ä¸ªæ ¼å­ï¼Œç”¨äºæ”¾ç½®ä¸¤ä¸ªæˆ˜èˆ°ï¼›ä¸Šé¢éƒ¨åˆ†æ˜¾ç¤ºå¯¹æ–¹ç©å®¶çš„æ£‹ç›˜ä¿¡æ¯ï¼Œé™¤äº†å¯¹æ–¹ç©å®¶çš„æˆ˜èˆ°ä½ç½®ã€‚å¼€å§‹çš„æ—¶å€™ï¼Œä¸Šé¢éƒ¨åˆ†çš„æ£‹ç›˜æ˜¯ç©ºçš„ã€‚æ¸¸æˆå¼€å§‹ä¹‹åï¼Œä¸¤ä¸ªç©å®¶è½®æµçŒœæµ‹å¯¹æ–¹çš„æˆ˜èˆ°çš„ä½ç½®ï¼Œæ¯ä¸€æ¬¡åªèƒ½çŒœä¸€ä¸ªæ–¹æ ¼ã€‚å¦‚æœå¯¹æ–¹çš„æˆ˜èˆ°ä¸åœ¨æ‰€çŒœæµ‹çš„æ–¹æ ¼ä¸­ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨å¯¹åº”ä½ç½®æ˜¾ç¤ºä¸€ä¸ªæ°´èŠ±çš„å›¾åƒï¼›åä¹‹ï¼Œåˆ™å‡ºç°ä¸€å›¢ç«çš„å›¾åƒã€‚å› ä¸ºåŒæ–¹çœ‹ä¸åˆ°å¯¹æ–¹çš„æ£‹ç›˜ï¼Œå› æ­¤ï¼Œæ¯ä¸€æ¬¡éƒ½éœ€è¦å¯¹æ–¹ç©å®¶å›å¤â€œæ‰€çŒœæµ‹çš„æ–¹æ ¼æ˜¯å¦æœ‰æˆ˜èˆ°â€ï¼ˆæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¯†ç å­¦çš„æŠ€æœ¯æ£€æµ‹å‡ºå¯¹æ–¹æ˜¯å¦æ’’è°ï¼‰ã€‚å½“æŸä¸€ä¸ªç©å®¶ç‡å…ˆçŒœä¸­äº†å¯¹æ–¹ä¸¤ä¸ªæˆ˜èˆ°çš„ä½ç½®ï¼Œè¯¥ç©å®¶å°±èµ¢äº†ï¼Œå¹¶å¯ä»¥æ”¶å–è‡ªå·±å’Œå¯¹æ–¹çš„èµŒæ³¨ã€‚</p><h2 id="äºŒã€æ¶‰åŠæŠ€æœ¯"><a href="#äºŒã€æ¶‰åŠæŠ€æœ¯" class="headerlink" title="äºŒã€æ¶‰åŠæŠ€æœ¯"></a>äºŒã€æ¶‰åŠæŠ€æœ¯</h2><p>ä½¿ç”¨çš„ç¼–ç¨‹æŠ€æœ¯æœ‰ï¼š</p><ul><li>HTMLï¼› Javascript; CCS; (ç½‘é¡µå‰ç«¯)</li><li>Web3 ï¼ˆæä¾›äº†è°ƒç”¨æ™ºèƒ½åˆçº¦çš„jsæ¥å£ï¼‰</li><li>ganache-cli ï¼ˆåœ¨æœ¬åœ°æ¨¡æ‹Ÿä»¥å¤ªåŠèŠ‚ç‚¹ï¼‰</li><li>remix ï¼ˆä»¥å¤ªåŠæ™ºèƒ½åˆçº¦çš„IDEï¼‰</li><li>Solidity ï¼ˆæ™ºèƒ½åˆçº¦ç¼–ç¨‹è¯­è¨€ï¼‰</li></ul><h2 id="ä¸‰ã€æŠ€æœ¯æ¦‚æ‹¬"><a href="#ä¸‰ã€æŠ€æœ¯æ¦‚æ‹¬" class="headerlink" title="ä¸‰ã€æŠ€æœ¯æ¦‚æ‹¬"></a>ä¸‰ã€æŠ€æœ¯æ¦‚æ‹¬</h2><p>ä¸‹å›¾æ˜¾ç¤ºï¼Œå¦‚æœä½¿ç”¨layer1çš„åŒºå—é“¾æŠ€æœ¯ï¼Œæ¯èµ°ä¸€æ­¥æ£‹éƒ½éœ€è¦å‘åŒºå—é“¾å‘å¸ƒä¸€ä¸ªäº¤æ˜“ã€‚</p><p><img src="/images/battle-ship-layer2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpYW5neWlodWFp,size_16,color_FFFFFF,t_70.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>ä¸‹å›¾æ‰€ç¤ºçš„æ­£æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„æ–¹å¼ã€‚</p><p><img src="/images/battle-ship-layer2/watermark,type_W5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpYW5neWlodWFp,size_16,color_FFFFFF,t_70.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>ä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä½•æ£€æµ‹å¯¹æ–¹ç©å®¶æ’’è°ï¼Ÿ<br>å…·ä½“ä¸ºï¼Œæ¯ä¸€ä¸ªç©å®¶åœ¨æ¸¸æˆå¼€å§‹å‰éƒ½éœ€è¦éšæœºæŒ‡å®šä¸¤ä¸ªæ ¼å­ï¼Œè¡¨ç¤ºä¸¤ä¸ªæˆ˜èˆ°çš„ä½ç½®ï¼Œå¦‚æœæŸç©å®¶ä¸­é€”å˜å¦ï¼Œä¸æ‰¿è®¤è‡ªå·±æ‰€æŒ‡å®šçš„é‚£ä¸¤ä¸ªæ ¼å­å‘¢ï¼Ÿå†è€…ï¼Œå½“å‰ç©å®¶çŒœæµ‹å¯¹æ–¹ç©å®¶æˆ˜èˆ°æ‰€åœ¨çš„æ–¹æ ¼ä½ç½®ï¼Œå¯¹æ–¹ç©å®¶éœ€è¦å›å¤è¯¥æ–¹æ ¼ä¸‹æ˜¯å¦æœ‰æˆ˜èˆ°ï¼Œå¦‚æœå¯¹æ–¹ç©å®¶ä¸è¯šä¿¡å‘¢ï¼Ÿæˆ‘ä»¬ä½¿ç”¨äº†Merkle<br>treeè¿›è¡Œcommitï¼ˆæ‰¿è¯ºï¼‰ã€‚ä»‹ç»merkle treeï¼ˆå½¢å¦‚ä¸‹å›¾ï¼‰ä¸å±äºæœ¬æ–‡çš„èŒƒå›´ã€‚</p><p>æ ¹æ®å¯†ç å­¦ä¸­çš„hashå‡½æ•°çš„ç‰¹ç‚¹ï¼Œä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„å˜åŒ–éƒ½ä¼šå¯¼è‡´æ ¹èŠ‚ç‚¹å˜åŒ–ã€‚å¹¶ä¸”ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¾ˆå®¹æ˜“è¯æ˜æŸä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦å±äºè¯¥merkle treeã€‚</p><p><img src="/images/battle-ship-layer2/watermark,type_oZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpYW5neWlodWFp,size_16,color_FFFFFF,t_70.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>è¿™é‡Œï¼Œæˆ‘ä»¬å¯¹ä¸¤ä½ç©å®¶çš„æ‰€æœ‰çš„æ¸¸æˆæ–¹æ ¼åˆ†åˆ«ç”Ÿæˆä¸¤æ£µmerkle treeï¼Œå¶å­èŠ‚ç‚¹è¡¨ç¤ºæ–¹æ ¼çš„ç¼–å·ã€‚è¿™é‡Œä¸ºäº†ä¿å¯†æ€§ï¼Œåœ¨ç¼–å·åé¢åˆå¹¶ä¸€ä¸ªéšæœºæ•°ï¼ˆåˆå¹¶åçš„æ•°æ®ä½œä¸ºhashå‡½æ•°çš„è¾“å…¥ï¼‰ã€‚</p><p>å› æ­¤ï¼Œè§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨ç©å®¶æŒ‡å®šä¸¤ä¸ªæˆ˜èˆ°çš„ä½ç½®ä¹‹åï¼Œéœ€è¦ç”Ÿæˆä¸€æ£µmerkle<br>treeï¼Œå¹¶å‘å¯¹æ–¹å‘é€æ ¹èŠ‚ç‚¹ã€‚è¯¥æ ¹èŠ‚ç‚¹ä¾¿æ˜¯å¯¹æ–¹çš„æ‰¿è¯ºï¼Œä¸”å®ƒä¸ä¼šæ³„éœ²æˆ˜èˆ°çš„ä½ç½®ä¿¡æ¯ã€‚åœ¨æ¸¸æˆè¿‡ç¨‹ä¸­ï¼Œå¦‚æœè¦æ­éœ²æŸä¸€ä¸ªæ–¹æ ¼ä¸‹æ˜¯å¦å­˜åœ¨æˆ˜èˆ°ï¼Œéœ€è¦å°†å¯¹åº”ç¼–å·çš„å¶å­èŠ‚ç‚¹å’Œä»è¯¥èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„è·¯å¾„ä¿¡æ¯å‘é€ç»™å¯¹æ–¹ã€‚è‹¥å¯¹æ–¹èƒ½å¤Ÿæ„é€ å‡ºç›¸åŒçš„æ ¹èŠ‚ç‚¹ï¼Œè¯æ˜è¯¥ç©å®¶æ˜¯è¯šä¿¡çš„ã€‚ï¼ˆè¿™é‡Œæ¶‰åŠåˆ°äº†å¯†ç å­¦hashå‡½æ•°çš„çŸ¥è¯†ï¼‰ã€‚</p><p>å¦ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœä¸€ä¸ªç©å®¶aä¸­é€”ç¦»å¼€ï¼Œæ€ä¹ˆåŠï¼Ÿ å½“å‰å®ç°çš„åŠŸèƒ½ï¼šéœ€è¦ç©å®¶bå‘æ™ºèƒ½åˆçº¦ä¸­æäº¤ä¸€ä¸ªæ§å‘Šã€‚ä¸ºäº†å›åº”è¯¥æ§å‘Šï¼Œç©å®¶aè¦åœ¨ä¸€åˆ†é’Ÿä¹‹å†…è°ƒç”¨æ™ºèƒ½åˆçº¦ï¼Œå–æ¶ˆæ‰è¯¥æ§å‘Šã€‚å¦‚æœä¸€åˆ†é’Ÿä¹‹åç©å®¶aä¸å›å¤ï¼Œé‚£ä¹ˆç©å®¶bå°±å¯ä»¥å–èµ°æ‰€æœ‰çš„èµŒæ³¨ã€‚</p><h2 id="å››ã€åŒºå—é“¾å’Œæ™ºèƒ½åˆçº¦çš„ä½œç”¨"><a href="#å››ã€åŒºå—é“¾å’Œæ™ºèƒ½åˆçº¦çš„ä½œç”¨" class="headerlink" title="å››ã€åŒºå—é“¾å’Œæ™ºèƒ½åˆçº¦çš„ä½œç”¨"></a>å››ã€åŒºå—é“¾å’Œæ™ºèƒ½åˆçº¦çš„ä½œç”¨</h2><p>åœ¨è¿™ä¸ªæ¸¸æˆä¸­ï¼Œæ™ºèƒ½åˆçº¦å……å½“äº†è£åˆ¤çš„è§’è‰²ï¼šè‹¥æŸä¸ªç©å®¶æ’’è°æˆ–è€…ä¸­é€”ç¦»å¼€ï¼Œé‚£ä¹ˆæ™ºèƒ½åˆçº¦å°±ä¼šæŠŠèµŒæ³¨ç»™å¦ä¸€ä¸ªç©å®¶ã€‚å› æ­¤ï¼Œæœ¬è´¨ä¸ŠåŒºå—é“¾ä¸­çš„æ™ºèƒ½åˆçº¦è§£å†³äº†ä¿¡ç”¨é—®é¢˜ï¼Œå¹¶ä¸”ï¼Œé‡è¦çš„æ˜¯ï¼Œä¸éœ€è¦ä¾èµ–ä»»ä½•å¯ä¿¡çš„ç¬¬ä¸‰æ–¹ã€‚æ¸¸æˆç©å®¶ä¸éœ€è¦ç›¸ä¿¡ä»»ä½•äººï¼šä¸ç”¨æ‹…å¿ƒå¯¹æ–¹ä¸è¯šä¿¡ï¼Œä¸ç”¨æ‹…å¿ƒæ¸¸æˆå¹³å°å’Œå¯¹æ–¹ç©å®¶å‹¾ç»“ï¼›ä¸ç”¨æ‹…å¿ƒè‡ªå·±çš„èµŒæ³¨è«åå¥‡å¦™å°±è¢«å–èµ°ï¼›ä¸ç”¨æ‹…å¿ƒæ¸¸æˆå¹³å°å®•æœºã€‚</p><p>ä¸‹å›¾è¡¨ç¤ºçš„æ˜¯æ™ºèƒ½åˆçº¦çš„fieldsï¼Œä¹Ÿå³æ˜¯æ™ºèƒ½åˆçº¦éœ€è¦ä¿å­˜çš„æ•°æ®ã€‚æˆ‘ä»¬ä¿å­˜äº†ä¸¤ä¸ªç©å®¶çš„åœ°å€ï¼ŒèµŒæ³¨çš„æ•°é‡ï¼Œæ¸¸æˆçŠ¶æ€ï¼Œæœ€ç»ˆèµ¢å®¶çš„åœ°å€ï¼Œä¸¤ä¸ªmerkle treeçš„è·ŸèŠ‚ç‚¹ï¼Œè¶…æ—¶ä¸å›å¤çš„æ•°æ®ç­‰ç­‰ã€‚</p><p>è¯¥é¡¹ç›®è¿˜å®ç°äº†ä¸‹è¿°åŠŸèƒ½ï¼š</p><ul><li>Forfeit Gameï¼Œè¡¨ç¤ºå½“å‰ç©å®¶æ”¾å¼ƒè¯¥æ¸¸æˆï¼ŒåŒ…æ‹¬èµŒæ³¨ã€‚ï¼ˆå·²å®ç°ï¼‰</li><li>Claim Winï¼Œåœ¨å½“å‰ç©å®¶çŒœä¸­å¯¹æ–¹ä¸¤ä¸ªæˆ˜èˆ°ä¹‹åï¼Œç‚¹å‡»è¯¥æŒ‰é’®å°±å¯ä»¥å–èµ°æ‰€æœ‰çš„èµŒæ³¨ã€‚ï¼ˆå·²å®ç°ï¼‰</li><li>Accuse<br>Cheatingï¼ŒåŸæœ¬çš„åŠŸèƒ½æ˜¯å½“å‘ç°å¯¹æ–¹ç©å®¶æ’’è°æ—¶ï¼Œå°†æ’’è°çš„æ•°æ®å‘å¸ƒåˆ°æ™ºèƒ½åˆçº¦ä¸­ï¼Œè®©æ™ºèƒ½åˆçº¦è£å†³ã€‚å¦‚æœè¯»è€…æƒ³è¦å®ç°è¯¥åŠŸèƒ½ï¼Œéœ€è¦æ³¨æ„ï¼ŒæŸä¸€ä¸ªç©å®¶åœ¨å‘å¯¹æ–¹å‘é€æ•°æ®å‰ï¼Œéœ€è¦å¯¹è¯¥æ•°æ®ç­¾åï¼Œä»¥é¿å…è€èµ–ã€‚å› æ­¤ï¼Œå½“æŸä¸€ä¸ªç©å®¶è¦æ±‚æ™ºèƒ½åˆçº¦è£å†³æ—¶ï¼Œæ™ºèƒ½åˆçº¦éœ€è¦éªŒè¯ç›¸å…³ç­¾åã€‚ï¼ˆæœªå®ç°ï¼‰</li><li>Accuse Timeoutï¼Œæ§å‘Šå¯¹æ–¹ç©å®¶ä¸­é€”ç¦»å¼€ï¼›ï¼ˆå·²å®ç°ï¼‰</li><li>Respond to Accusationï¼Œ å½“å½“å‰ç©å®¶è¢«æ§å‘Šæ—¶ï¼Œè¯¥ç©å®¶éœ€è¦åœ¨ä¸€åˆ†é’Ÿå†…ç‚¹å‡»è¯¥æŒ‰é’®ï¼Œè¡¨ç¤ºè‡ªå·±åœ¨çº¿ï¼Œæ¥å›å¤æ§å‘Šã€‚ï¼ˆå·²å®ç°ï¼‰</li><li>claim timeout winningsï¼Œå¦‚æœè¢«å‘Šäººæ²¡æœ‰åœ¨ä¸€åˆ†é’Ÿä¹‹å†…å›å¤ï¼Œå°±å¯ä»¥ç‚¹å‡»è¯¥æŒ‰é’®æ¥å–èµ°æ‰€æœ‰çš„èµŒæ³¨ã€‚ï¼ˆå·²å®ç°ï¼‰</li></ul><h2 id="äº”ã€æºç åˆ†æ"><a href="#äº”ã€æºç åˆ†æ" class="headerlink" title="äº”ã€æºç åˆ†æ"></a>äº”ã€æºç åˆ†æ</h2><h3 id="1-æ„é€ Merkleæ ‘"><a href="#1-æ„é€ Merkleæ ‘" class="headerlink" title="1. æ„é€ Merkleæ ‘"></a>1. æ„é€ Merkleæ ‘</h3><p>ä½¿ç”¨JavaScriptä»£ç å®ç°æ„é€ æ ‘ï¼Œé¦–å…ˆè®¡ç®—æ¯ä¸ªä½ç½®å¦å­˜åœ¨èˆ°è‰‡+éšæœºæ•°ç»„åˆåå–sha3ï¼Œä½œä¸ºæ¯ä¸ªä½ç½®çš„hashï¼Œç„¶åæ¯ä¸¤ä¸ªé¡µèŠ‚ç‚¹å–ä¸€æ¬¡hashï¼Œå¾ªç¯æœ€ç»ˆå½¢æˆä¸€ä¸ªæ ¹èŠ‚ç‚¹ã€‚</p><p><img src="/images/battle-ship-layer2/merkle.png" alt="img"></p><p>æœ€ç»ˆæ„é€ åçš„merkleæ ‘ä¸º5å±‚ï¼Œæ¯å±‚èŠ‚ç‚¹æ•°ä¸º1ã€2ã€4ã€8ã€16</p><p>å†…å®¹å¦‚ä¸‹ï¼š</p><p><img src="/images/battle-ship-layer2/image-20220223205315073.png" alt="image-20220223205315073"></p><p>JSä»£ç ï¼š</p><pre><code class="javascript">/* build_merkle  builds a Merkle Tree from the given initial_board and nonces  \args:    initial_board - [[]] - åˆå§‹åŒ–ç”²æ¿ä½œä¸ºçŸ©é˜µä¼ é€’ï¼ŒäºŒç»´æ•°ç»„ï¼Œå¯¹åº”æ¨ªçºµåæ ‡ï¼Œå€¼ä¸ºæ˜¯å¦å«æœ‰èˆ°è‰‡ï¼ˆboolï¼‰    nonces - [[Uint32]] - éšæœºå€¼çŸ©é˜µ*/function build_merkle(initial_board, nonces) {    check_correct_sizes(initial_board, nonces);    let merkle = [[]];    // add all leaf nodes    for (let i = 0; i &lt; BOARD_LEN; i++) {        for (let j = 0; j &lt; BOARD_LEN; j++) {            merkle[0].push(                web3.utils.keccak256(                    web3.utils.fromAscii(JSON.stringify(initial_board[i][j]) + JSON.stringify(nonces[i][j]))                )            );        }    }    // build tree from leaves    // while, current level of merkle has length &gt; 1, add more levels    let curr_level = 0;    while (merkle[curr_level].length &gt; 1) {        merkle.push([]);        curr_level += 1;        // build new layer of tree        for (let i = 0; i + 1 &lt; merkle[curr_level - 1].length; i += 2) {            // have new_node represent another node in the Merkle tree            let new_node = web3.utils.keccak256(merkle[curr_level - 1][i] + merkle[curr_level - 1][i + 1].substring(2), {encoding: 'hex'});            // finalize finally computes the hash for every argument passed in update            merkle[curr_level].push(new_node);        }        // if this most recent merkle level has an odd length, we need        // to just hoist the last element into the next level        if (merkle[curr_level - 1].length % 2 !== 0) {            merkle[curr_level].push(merkle[curr_level - 1][merkle[curr_level - 1].length - 1]);        }    }    return merkle;}</code></pre><h3 id="2-çŒœæµ‹èˆ°è‰‡ä½ç½®"><a href="#2-çŒœæµ‹èˆ°è‰‡ä½ç½®" class="headerlink" title="2. çŒœæµ‹èˆ°è‰‡ä½ç½®"></a>2. çŒœæµ‹èˆ°è‰‡ä½ç½®</h3><p>é¦–å…ˆå‘é€çŒœæµ‹ç»™å¯¹æ‰‹ï¼Œå¯¹æ‰‹å›åº”æ˜¯å¦çŒœä¸­ï¼Œå¦‚æœçŒœä¸­äº†çŒœæµ‹è€…å‘èµ·åˆçº¦éªŒè¯ã€‚</p><p>JSä»£ç ï¼š</p><pre><code class="javascript">// function called when a user guesses a squareasync function guess_square(i, j, player, opponent, callback) {    // ç­¾å    let signed_guess = await player.build_guess(i, j);    // å‘é€ç­¾åå’ŒçŒœæµ‹ç»™å¯¹æ‰‹è·å–å¯¹æ‰‹å›åº”æ˜¯å¦çŒœä¸­ã€éšæœºæ•°ã€merkleéªŒè¯ä½¿ç”¨çš„èŠ‚ç‚¹æ•°ç»„    let [opening, nonce, proof] = await opponent.respond_to_guess(i, j, signed_guess);    // æ›´æ–°é¡µé¢    $('#' + opponent.my_name + ' &gt; .my-board #' + i + '-' + j)        .css('background-image', 'url(' + (opening ? EXPLOSION_IMG : SPLASH_IMG) + ')');    // interpret response    await player.receive_response_to_guess(i, j, [opening, nonce, proof]);    // return if the guess hit a ship    callback(opening);}</code></pre><p>respond_to_guessæ–¹æ³•è·å–nonce, proofæ–¹æ³•ï¼ŒJSä»£ç ï¼š</p><pre><code class="javascript">/* è·å–é›¶çŸ¥è¯†è¯æ˜éœ€è¦çš„èŠ‚ç‚¹hash  /args:    initial_board - matrix representing my-board state    nonces - nonces for your board    guess - [i, j] - guess building proof for*/function get_proof_for_board_guess(initial_board, nonces, guess) {    let merkle_tree = build_merkle(initial_board, nonces);    let index_in_merkle = guess[0] * BOARD_LEN + guess[1];    let proof = [];    for (let i = 0; i &lt; merkle_tree.length - 1; i++) {        let merkle_group = Math.floor(index_in_merkle / Math.pow(2, i)); // goodod        let index_in_group = merkle_group % 2;        let sibling = Math.min(merkle_group - index_in_group + (index_in_group + 1) % 2, merkle_tree[i].length - 1);        if (sibling == merkle_group) continue;        proof.push(merkle_tree[i][sibling]);    }    return proof;}</code></pre><p>éªŒè¯æ˜¯å¦å‡»ä¸­ï¼ŒSolidityä»£ç ï¼š</p><pre><code class="solidity">// éªŒè¯å•ä¸ªå•æ¿ä¸Šçš„å•ä¸ªç‚¹çš„è¯æ˜// args:// - opening_nonce - å¯¹åº”äºweb3.utils.fromAscii(JSON.stringify(open) + JSON.stringify(nonce)));// - proof - sha256å“ˆå¸Œè¡¨ï¼Œå¯¹åº”äº get_proof_for_board_guess()çš„è¾“å‡º// - guess - [i, j] - guesså¼€å£å¯¹åº”ï¼ˆguess that opening corresponds toï¼‰// - commit - boardçš„é»˜å…‹å°”æ ¹function verify_opening(bytes memory opening_nonce, bytes32[] memory proof, uint guess_leaf_index, bytes32 commit) public pure returns (bool result) {    bytes32 curr_commit = keccak256(opening_nonce); // see if this changes hash    uint index_in_leaves = guess_leaf_index;    uint curr_proof_index = 0;    uint i = 0;    while (curr_proof_index &lt; proof.length) {        // å¯¹äºé»˜å…‹å°”æ ‘çš„å½“å‰å±‚çº§ï¼ŒçŒœæµ‹çš„èŠ‚ç‚¹åœ¨å“ªä¸ªç»„çš„ç´¢å¼•(ç›¸å½“äºé»˜å…‹å°”æ ‘ä¸‹ä¸€å±‚çº§parentçš„ç´¢å¼•)        // index of which group the guess is in for the current level of Merkle tree        // (equivalent to index of parent in next level of Merkle tree)        uint group_in_level_of_merkle = index_in_leaves / (2**i);        // Merkleåˆ†ç»„ï¼ˆä¸¤ä¸ªä¸ºä¸€ç»„åˆ†ç»„ï¼‰ç´¢å¼•æ•°ï¼Œåªæœ‰(0, 1)        uint index_in_group = group_in_level_of_merkle % 2;        // å½“å‰é»˜å…‹å°”å±‚çº§çš„æœ€å¤§èŠ‚ç‚¹ç´¢å¼•        uint max_node_index = ((BOARD_LEN * BOARD_LEN + (2**i) - 1) / (2**i)) - 1;        // curr_commitçš„åŒçº§ç´¢å¼•        uint sibling = group_in_level_of_merkle - index_in_group + (index_in_group + 1) % 2;        i++;        if (sibling &gt; max_node_index) continue;        if (index_in_group % 2 == 0) {            curr_commit = keccak256(merge_bytes32(curr_commit, proof[curr_proof_index]));            curr_proof_index++;        } else {            curr_commit = keccak256(merge_bytes32(proof[curr_proof_index], curr_commit));            curr_proof_index++;        }    }    return (curr_commit == commit);}</code></pre><h3 id="3-åˆ¤å®šèµ¢"><a href="#3-åˆ¤å®šèµ¢" class="headerlink" title="3. åˆ¤å®šèµ¢"></a>3. åˆ¤å®šèµ¢</h3><p>leaf_index_check_p2ä¸­è®°å½•ç€å·²ç»å‡»ä¸­äº†å¤šå°‘èˆ°è‰‡</p><p>Solidityä»£ç ï¼š</p><pre><code class="solidity">// å®£å¸ƒä½ èµ¢äº†æ¯”èµ›// å¦‚æœä½ å‡»ä¸­äº†2ä¸ªèˆ°è‰‡ï¼Œç„¶åè¿™ä¸ªå‡½æ•°ä¼šè½¬ç§»èµ¢é’±ç»™ä½ å’Œç»“æŸæ¸¸æˆã€‚function claim_win() public{    assert(msg.sender == p1 || msg.sender == p2);    bool    isP1Win = true;    if (msg.sender == p2) {        isP1Win = false;    }    if (isP1Win) {        require(leaf_index_check_p2.length &gt;= 2);        winner = p1;    } else {        require(leaf_index_check_p1.length &gt;= 2);        winner = p2;    }    // transfer all the tokens from this contract to the winner (i.e., msg sender)    msg.sender.transfer(address(this).balance);    state = 2;}</code></pre><h3 id="4-æ§å‘Šå¯¹æ‰‹ä½œå¼Š"><a href="#4-æ§å‘Šå¯¹æ‰‹ä½œå¼Š" class="headerlink" title="4. æ§å‘Šå¯¹æ‰‹ä½œå¼Š"></a>4. æ§å‘Šå¯¹æ‰‹ä½œå¼Š</h3><p>è°ƒç”¨ä¸Šé¢çš„verify_openingæ–¹æ³•éªŒè¯æ˜¯å¦æ»¡è¶³Merkleæ ‘ï¼Œä¸æ»¡è¶³è¯´æ˜å¯¹æ–¹ä½œå¼Šã€‚</p><p>Solidityä»£ç ï¼š</p><pre><code class="solidity">// æ§å‘Šå¯¹æ‰‹ä½œå¼Š â€” å¦‚æœæ˜¯çœŸçš„ï¼Œä½ å°±èµ¢äº†ã€‚// opening_nonce - å¯¹åº”äºJSä¸­çš„web3.utils.fromAscii(JSON.stringify(opening) + JSON.stringify(nonce))// proof - ä¸€ä¸ªsha256å“ˆå¸Œåˆ—è¡¨ï¼Œä½ å¯ä»¥ä»get_proof_for_board_guess(è¿™æ˜¯å‘é€è€…è®¤ä¸ºæ˜¯ä¸€ä¸ªè°è¨€)// guess_leaf_index - çŒœæµ‹èˆ¹åªä½ç½®çš„ç´¢å¼•// owner - è¿™è‰˜èˆ¹æ‰€åœ¨çš„boardçš„æ‰€æœ‰è€…çš„åœ°å€function accuse_cheating (    bytes memory opening_nonce,    bytes32[] memory proof,    uint256 guess_leaf_index,    address owner) public returns (bool result) {    assert((msg.sender == p1 &amp;&amp; owner == p2) || (msg.sender == p2 &amp;&amp; owner == p1));    bytes32 com = merkle_root_p1;    if(owner == p2){        com = merkle_root_p2;    }    if(!verify_opening(opening_nonce, proof, guess_leaf_index, com)){        msg.sender.transfer(address(this).balance);        state = 2;        winner = msg.sender;        return true;    }    return false;}</code></pre><h2 id="å…­ã€å‚è€ƒé“¾æ¥"><a href="#å…­ã€å‚è€ƒé“¾æ¥" class="headerlink" title="å…­ã€å‚è€ƒé“¾æ¥"></a>å…­ã€å‚è€ƒé“¾æ¥</h2><ol><li>æºä»£ç æä¾›ï¼š<a href="https://blog.csdn.net/liangyihuai/article/details/116459829">https://blog.csdn.net/liangyihuai/article/details/116459829</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åŸºäºä»¥å¤ªåŠçš„æˆ˜è‰‡æ¸¸æˆ-Layer2-æºç è§£æ&quot;&gt;&lt;a href=&quot;#åŸºäºä»¥å¤ªåŠçš„æˆ˜è‰‡æ¸¸æˆ-Layer2-æºç è§£æ&quot; class=&quot;headerlink&quot; title=&quot;åŸºäºä»¥å¤ªåŠçš„æˆ˜è‰‡æ¸¸æˆ(Layer2)æºç è§£æ&quot;&gt;&lt;/a&gt;åŸºäºä»¥å¤ªåŠçš„æˆ˜è‰‡æ¸¸æˆ(Layer2)æºç </summary>
      
    
    
    
    
    <category term="Ethereum" scheme="https://zhangzhishun.github.io/tags/Ethereum/"/>
    
    <category term="Layer2" scheme="https://zhangzhishun.github.io/tags/Layer2/"/>
    
  </entry>
  
  <entry>
    <title>é›ªå´©å…±è¯†</title>
    <link href="https://zhangzhishun.github.io/2022/02/08/blockchain/avalanche/%E9%9B%AA%E5%B4%A9%E5%85%B1%E8%AF%86/"/>
    <id>https://zhangzhishun.github.io/2022/02/08/blockchain/avalanche/%E9%9B%AA%E5%B4%A9%E5%85%B1%E8%AF%86/</id>
    <published>2022-02-08T03:20:30.000Z</published>
    <updated>2022-04-27T02:35:55.474Z</updated>
    
    <content type="html"><![CDATA[<p><strong>1.å¼•è¨€</strong></p><p>Avalancheä¸»ç½‘æ­£å¼ä¸Šçº¿ï¼ŒOKExä¹Ÿå·²ç»ä¸Šæ¶AvalancheåŸç”Ÿä»£å¸AVAXï¼Œæ›¾è·å¾—â€œå…±è¯†åè®®3.0â€ä¹‹ç§°çš„Avalancheé‡å›å¤§ä¼—è§†é‡ï¼Œä¸ºä½•Avalancheä¸€ä¸¾ä¸€åŠ¨å—åˆ°å¦‚æ­¤å¤§çš„å¸‚åœºå…³æ³¨ï¼Ÿ</p><p>è¿™ä¸€åˆ‡è¦ä»2015å¹´5æœˆè¯´èµ·ï¼Œåº·å¥ˆå°”å¤§å­¦å‡ºç°äº†ä¸€ç¯‡ã€Šä»â€œé›ªèŠ±â€åˆ°â€œé›ªå´©â€ï¼šä¸€ç§æ–°å‹çš„äºšç¨³æ€å…±è¯†åè®®æ—ã€‹çš„è®ºæ–‡ï¼Œåœ¨å¸‚åœºä¸Šå¼•å‘äº†é›ªå´©å¼çš„è¿…é€Ÿåå“ï¼Œæˆä¸ºå¯ä»¥å’Œä¸­æœ¬èªçš„PoWæœºåˆ¶ã€ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ç›¸åª²ç¾çš„é¢ è¦†æ€§æŠ€æœ¯åˆ›æ–°ã€‚</p><p><strong>2.ç»“åˆæ—©æœŸåè®®ä¼˜ç‚¹å¹¶æ”¹è¿›ç¼ºç‚¹</strong></p><p>æ­£å¦‚åº·å¥ˆå°”å¤§å­¦æ•™æˆåŸƒç±³Â·å†ˆÂ·ç‘Ÿå‹’ï¼ˆEmin Gun Sirerï¼‰æ‰€è¨€ï¼šâ€œAvalancheæè¿°äº†ä¸€ç§æ–°çš„å…±è¯†åè®®ï¼Œå®ƒå°†ä¸­æœ¬èªå…±è¯†åè®®ä¸ç»å…¸å…±è¯†åè®®ç›¸ç»“åˆï¼Œè¿™æ˜¯ä¸€æ¬¡é‡å¤§çš„çªç ´â€ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œç»å…¸å…±è¯†åè®®å’Œä¸­æœ¬èªå…±è¯†åè®®æ˜¯æ—©æœŸä¸¤ç±»è§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿæ‹œå åº­é—®é¢˜çš„ä¸»è¦å…±è¯†åè®®ã€‚</p><p>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å…±è¯†é—®é¢˜ä¸€ç›´æ˜¯è®¡ç®—æœºç§‘å­¦é¢†åŸŸçš„é‡è¦è¯é¢˜ï¼Œè€Œæ‹œå åº­å°†å†›é—®é¢˜åˆ™æ˜¯é‡ä¸­ä¹‹é‡ã€‚æˆ˜äº‰æ—¶æœŸï¼Œåœ¨å†›é˜Ÿå¯èƒ½æœ‰å›å¾’å’Œé—´è°çš„æƒ…å†µä¸‹å¿ è¯šçš„å°†å†›å¦‚ä½•è¾¾æˆä¸€è‡´çš„æ„è§ï¼Œè¿™ä¾¿æ˜¯æ‹œå åº­å°†å†›é—®é¢˜ã€‚ç»å…¸å…±è¯†åè®®ç”±å›¾çµå¥–å¾—ä¸»å…°ä¼¯ç‰¹æå‡ºï¼Œå…·æœ‰å¼ºä¸€è‡´æ€§ã€é«˜æ•ˆçš„ç‰¹ç‚¹ï¼Œä½†ä¹Ÿæœ‰é€šä¿¡æˆæœ¬é«˜ã€èŠ‚ç‚¹æ— æ³•è‡ªç”±è¿›å‡ºçš„ç¼ºç‚¹ã€‚</p><p><strong>å›¾1ï¼šç»å…¸å…±è¯†åè®®ï¼ˆPBFTï¼‰å·¥ä½œåŸç†</strong></p><p><img src="https://hx24.huoxing24.com/image/crawler/2020/09/28/1601261161638216.jpg" alt="æ‹œå åº­">èµ„æ–™æ¥æºï¼šã€ŠåŒºå—é“¾æŠ€æœ¯æŒ‡å—ã€‹ï¼ŒOKEx Research</p><p>è€Œè‘—åçš„ä¸­æœ¬èªå…±è¯†åè®®åˆ™åˆ›é€ æ€§åœ°ç”¨æ¦‚ç‡ä¿è¯å®é™…è¿è¡Œçš„å…±è¯†ï¼Œè§£å†³äº†èŠ‚ç‚¹æ— æ³•è‡ªç”±è¿›å‡ºçš„é—®é¢˜ï¼Œä½†æ˜¯æˆæœ¬é«˜æ˜‚é—®é¢˜ä»æœªè¢«è§£å†³ã€‚</p><p><strong>å›¾2ï¼šä¸­æœ¬èªå…±è¯†åè®®å·¥ä½œåŸç†</strong></p><p><img src="https://hx24.huoxing24.com/image/crawler/2020/09/28/1601261161662703.jpg" alt="æ‹œå åº­">èµ„æ–™æ¥æºï¼šOKEx Research</p><p>Avalancheå…±è¯†åè®®åˆ™ç»“åˆäº†ä¸¤ç±»åè®®çš„ä¼˜ç‚¹ï¼šå€Ÿé‰´äº†ä¸­æœ¬èªåè®®æ¦‚ç‡æ€§å®‰å…¨ä¿éšœçš„è®¾è®¡ï¼ŒåŒæ—¶åŠ å…¥äº†BFTå±æ€§ï¼Œå¢åŠ ç³»ç»Ÿçš„æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚</p><p><strong>3.AvalancheåŸç†ï¼šâ€œé›ªèŠ±â€åˆ°â€œé›ªå´©â€çš„å±‚å±‚å®Œå–„</strong></p><p>æ­£å¦‚Avalancheç™½çš®ä¹¦æåˆ°çš„â€œé›ªèŠ±â€åˆ°â€œé›ªå´©â€è¿‡ç¨‹ï¼ŒAvalancheçš„4ä¸ªå­åè®®ç»„æˆæ­£æ˜¯ä»æœ€ç®€å•çš„Slushåè®®ï¼Œåˆ°Snowflakeã€Snowball å’Œ Avalanchï¼Œé€æ­¥å®Œå–„ï¼Œå½¢æˆäº†â€œé›ªèŠ±â€åˆ°â€œé›ªå´©â€çš„è´¨å˜ã€‚</p><p><strong>3.1. â€œé›ªæ³¥â€Slush åè®®ï¼šä¸‡ç‰©ä¹‹åˆ</strong></p><p>Slushåè®®æ˜¯æœ€åŸºç¡€çš„â€œé›ªæ³¥â€ï¼Œé€šè¿‡å¤šæ¬¡éšæœºæŠ½æ ·æ¥è¾¾æˆå…±è¯†ã€‚ä¸ºä¾¿äºç†è§£ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥æŠ•ç¥¨ç¡®è®¤é¢œè‰²ä¸ºä¾‹ã€‚èŠ‚ç‚¹è¾¾æˆå…±è¯†çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰åˆå§‹çŠ¶æ€æ—¶æ‰€æœ‰çš„èŠ‚ç‚¹å‡æœªç€è‰²ï¼›</p><p>ï¼ˆ2ï¼‰å½“èŠ‚ç‚¹Aæ”¶åˆ°ä¿¡æ¯æ—¶ï¼Œæœªç€è‰²çš„èŠ‚ç‚¹å°†ä¿¡æ¯é¢œè‰²è®¾ä¸ºè‡ªå·±çš„é¢œè‰²ï¼Œå¹¶è¯¢é—®å…¶ä»–èŠ‚ç‚¹çš„é¢œè‰²ï¼›</p><p>ï¼ˆ3ï¼‰æœªç€è‰²çš„èŠ‚ç‚¹Bæ”¶åˆ°è¯¢é—®ï¼Œå°†è‡ªå·±æŸ“æˆç›¸åŒé¢œè‰²å¹¶å›å¤ï¼›å·²ç€è‰²çš„èŠ‚ç‚¹Cæ”¶åˆ°è¯¢é—®ä¼šå›å¤è‡ªå·±çš„é¢œè‰²ï¼›</p><p>ï¼ˆ4ï¼‰èŠ‚ç‚¹Aæ”¶åˆ°å¤šä¸ªå“åº”åï¼Œå¦‚æœå¤§å¤šæ•°é¢œè‰²å’Œè‡ªå·±çš„ä¸€ç›´ï¼Œåˆ™ä¸æ”¹å˜é¢œè‰²ï¼Œå¦åˆ™æ”¹å˜é¢œè‰²ï¼Œå³ä»¥å¤§å¤šæ•°å…¶ä»–èŠ‚ç‚¹çš„é¢œè‰²åé¦ˆæ¥æ ¡æ­£è‡ªå·±çš„é¢œè‰²ã€‚</p><p>Slushåè®®å°±å·²ç»è§£å†³äº†ç»å…¸å…±è¯†åè®®é€šè®¯æˆæœ¬é«˜çš„é—®é¢˜ï¼Œè¿˜ç”¨éƒ¨åˆ†æŠ½æ ·ç­‰æ–¹å¼é¿å…äº†ä¸­æœ¬èªå…±è¯†åè®®é«˜èƒ½è€—çš„é—®é¢˜ã€‚åç»­åè®®çš„æ”¹è¿›ä¸»è¦ä¸ºäº†æå‡å…±è¯†åè®®å®‰å…¨æ€§ã€‚</p><p><strong>3.2. â€œé›ªèŠ±â€Snowflakeåè®®ï¼šåˆæ­¥æ”¹å–„</strong></p><p>åœ¨æ‹œå åº­èŠ‚ç‚¹å­˜åœ¨çš„æƒ…å†µä¸‹ï¼ŒSlushä¸èƒ½æä¾›å¼ºå¤§çš„å®‰å…¨ä¿è¯ã€‚ä¸ºæ­¤ï¼ŒSnowflakeä½œä¸ºå‡çº§ç‰ˆåè®®å¼•å…¥äº†è®¡æ•°å™¨ï¼ˆCounterï¼‰æ¥å¢åŠ ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚</p><p>å…·ä½“è€Œè¨€ï¼Œç½‘ç»œä¸­çš„æ”»å‡»èŠ‚ç‚¹æ•…æ„æ•£æ’­é”™è¯¯çš„é¢œè‰²ï¼Œå¯èƒ½å¯¼è‡´SlushæŸä¸€è½®ç»Ÿè®¡å¾—åˆ°é”™è¯¯çš„é¢œè‰²ï¼Œè€ŒSnowflakeçš„è®¡æ•°å™¨ç»Ÿè®¡äº†æŸç§é¢œè‰²è¿ç»­å‡ºç°çš„æ¬¡æ•°ï¼Œåªæœ‰æŸç§é¢œè‰²è¿ç»­å‡ºç°å¤šæ¬¡ï¼ŒèŠ‚ç‚¹æ‰ä¼šæ”¹å˜è‡ªå·±çš„é¢œè‰²ã€‚å¦‚æ­¤é¿å…äº†æ‹œå åº­èŠ‚ç‚¹å¸¦æ¥çš„å¹²æ‰°ï¼Œç¡®ä¿äº†ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œæ´»è·ƒåº¦ã€‚</p><p><strong>3.3. â€œé›ªçƒâ€Snowballåè®®ï¼šæ·±å…¥å‡çº§</strong></p><p>Snowballåœ¨Snowflakeçš„åŸºç¡€ä¸Šæ›´è¿›ä¸€æ­¥åœ°ã€‚å¼•å…¥äº†ç±»ä¼¼ä¿¡èª‰ç§¯åˆ†çš„åˆ¶åº¦â€”â€”ä¿¡ä»»åº¦ï¼Œä»¥æé«˜å®‰å…¨æ€§ã€‚</p><p>å…·ä½“è€Œè¨€ï¼ŒSnowflakeåè®®çš„æ”¹è¿›å¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰æ¯æˆåŠŸæŸ¥è¯¢ä¸€æ¬¡ï¼ŒèŠ‚ç‚¹å°±ä¸ºè¯¥é¢œè‰²çš„ä¿¡ä»»åº¦åŠ 1åˆ†ï¼›</p><p>ï¼ˆ2ï¼‰èŠ‚ç‚¹ä¼šåˆ‡æ¢ä¸ºä¿¡ä»»åº¦è¾ƒé«˜çš„é¢œè‰²ã€‚</p><p>Snowballåè®®ä¸ä»…æ¯”Snowflakeæ›´éš¾é­å—æ”»å‡»ï¼Œè€Œä¸”æ›´å®¹æ˜“æ¨å¹¿åˆ°å¤šå‘½ä»¤åè®®ã€‚</p><p><strong>3.4. â€œé›ªå´©â€Avalancheåè®®ï¼šé‡å˜åˆ°è´¨å˜</strong></p><p>ç»ˆæBossâ€œé›ªå´©â€â€”â€”Avalancheåˆåœ¨Snowballçš„åŸºç¡€ä¸Šå¢åŠ äº†æœ‰å‘æ— å¾ªç¯å›¾ï¼ˆDAGï¼‰æ¥è®°å½•æ‰€æœ‰çš„äº¤æ˜“çŠ¶æ€ã€‚åœ¨DAGä¸­ï¼Œå¦‚æœæƒ³ç»™ä»åˆ›ä¸–ç‚¹åˆ°æŸèŠ‚ç‚¹è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æŠ•ç¥¨åªéœ€è¦ç»™è¯¥èŠ‚ç‚¹æŠ•ç¥¨ï¼Œå¤§å¤§æé«˜äº†æ•ˆç‡ã€‚å…¶æ¬¡ï¼ŒDAGæœ‰ç€ç±»ä¼¼äºåŒºå—é“¾çš„é“¾å¼ç»“æ„è®°å½•äº¤æ˜“ä¿¡æ¯ï¼Œä½¿å¾—è¿‡å»çš„äº¤æ˜“ä¿¡æ¯å¾ˆéš¾è¢«ç¯¡æ”¹ï¼Œè¿›ä¸€æ­¥æå‡äº†å®‰å…¨æ€§ã€‚</p><p>å›¾3ï¼šDAGç¤ºæ„å›¾</p><p><img src="https://hx24.huoxing24.com/image/crawler/2020/09/28/1601261161723758.jpg" alt="æ‹œå åº­">èµ„æ–™æ¥æºï¼šã€ŠåŒºå—é“¾æ–°å…±è¯†ç®—æ³• Snowflake to Avalancheã€‹ï¼ŒOKEx Research</p><p><strong>3.5. Avalancheåè®®ï¼šé›†å‰æœŸåè®®ä¹‹å¤§æˆ</strong></p><p>å¸å–äº†æ—©æœŸä¸¤ä¸ªå…±è¯†åè®®çš„ä¼˜ç‚¹ï¼Œå¹¶ç»è¿‡4ä¸ªåè®®å±‚æ¬¡é€’è¿›ã€é€æ­¥æ”¹å–„ï¼ŒAvalancheåè®®å…·æœ‰è®¸å¤šä¼˜è‰¯ç‰¹æ€§ã€‚</p><p>ï¼ˆ1ï¼‰é«˜æ•ˆçš„å¯æ‰©å±•æ€§ï¼šè½»é‡çº§ï¼Œå¯æ‰©å±•ï¼Œä½å»¶è¿Ÿï¼›</p><p>ï¼ˆ2ï¼‰é«˜æ‹œå åº­å®¹é”™ï¼šå³ä½¿ç½‘ç»œä¸­æœ‰è¶…è¿‡50%çš„èŠ‚ç‚¹æ˜¯æ‹œå åº­èŠ‚ç‚¹ï¼Œç½‘ç»œä¾ç„¶æ˜¯å®‰å…¨çš„;</p><p>ï¼ˆ3ï¼‰é™æ€ç»¿è‰²ï¼šä¸PoWæœºåˆ¶ä¸åŒï¼ŒAvalancheåè®®ä¸ä¼šæµªè´¹ä»»ä½•èµ„æº;</p><p>ï¼ˆ4ï¼‰ä½é€šä¿¡æˆæœ¬ï¼šAvalancheåè®®æ¯”ä¼ ç»Ÿå…±è¯†åè®®çš„é€šè®¯å¤æ‚åº¦æ›´ä½ã€‚</p><p><strong>4. é›¶ç¡®è®¤äº¤æ˜“ä¸Avalancheåè®®</strong></p><p>Avalancheåˆšé¢ä¸–æ—¶ï¼Œäººä»¬è¿˜æ²¡æœ‰å‘ç°Avalancheåè®®ä¸é›¶ç¡®è®¤äº¤æ˜“ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ã€‚ç„¶è€Œåœ¨2018å¹´12æœˆå·¦å³ï¼ŒBCHç¤¾åŒºçš„æŠ€æœ¯äººå‘˜Chris Paciaå‘è¡¨ä¸€ç¯‡æ–‡ç« ï¼Œè®¤ä¸ºå¯ä»¥ä½¿ç”¨Avalancheåè®®æ¥ä¿è¯é›¶ç¡®è®¤äº¤æ˜“çš„å®‰å…¨æ€§ï¼Œä¸€æ—¶èµ·åƒå±‚æµªï¼Œå¼•å‘äº†å¸‚åœºçš„å¹¿æ³›å…´è¶£ã€‚</p><p>Avalancheåè®®çš„ç¡®è®¤éœ€è¦å¤šæ¬¡æŠ½æ ·ï¼Œä¸ºç¼©çŸ­ç¡®è®¤æ—¶é—´ï¼Œåˆ™æŠ½æ ·æ¬¡æ•°å¿…é¡»å—åˆ°é™åˆ¶ï¼Œè¿™æ„å‘³ç€ï¼Œæ¶æ„èŠ‚ç‚¹è¶…è¿‡ä¸€å®šæ¯”ä¾‹åï¼Œåœ¨æœ‰é™æŠ½æ ·é‡Œè¯šå®èŠ‚ç‚¹æ— æ³•è¾¾æˆå…±è¯†ã€‚ä¸ºæ­¤ï¼ŒChris Paciaè®¤ä¸ºå¯ä»¥å¼•å…¥PoWæœºåˆ¶æ¥ä¿æŠ¤ç½‘ç»œçš„å®‰å…¨ï¼Œé˜²æ­¢é»‘å®¢çš„æ”»å‡»èŠ‚ç‚¹æ•°é‡å¤ªå¤šã€‚</p><p><strong>5. Avalancheç°çŠ¶ï¼šä¼—æœ›æ‰€å½’</strong></p><p>è‡ª2018å¹´Avalancheç™½çš®ä¹¦å‘å¸ƒä»¥æ¥ï¼Œå—åˆ°äº†å¹¿æ³›çš„é¦–è‚¯å¿ƒæŠ˜ï¼Œè®¸å¤šVCç›¸ç«ä¸ºä¹‹æŠ˜è…°ã€‚2019 å¹´ï¼Œé›ªå´©åè®®Avaè·å¾—äº† a16zã€Polychain Capital ç­‰æœºæ„ 600 ä¸‡ç¾å…ƒèèµ„ã€‚2020å¹´6æœˆï¼ŒAVA Labåˆå®Œæˆäº†ä¸€ç¬”1200ä¸‡ç¾å…ƒçš„ä»£å¸ç§å‹Ÿèèµ„ï¼ŒåŒå¹´7æœˆï¼Œåˆè·å¾—IOSG Venturesçš„æˆ˜ç•¥æŠ•èµ„ï¼Œå¹¶å°±ä¸­å›½å¸‚åœºæœªæ¥å‘å±•è¾¾æˆç‹¬å®¶æˆ˜ç•¥åˆä½œåè®®ã€‚æ ¹æ®æœ€æ–°æ¶ˆæ¯ï¼ŒAVAçš„å…¬å‹Ÿäº7æœˆ8æ—¥å¼€å¯ã€‚</p><p><strong>6. ç»“è¯­</strong></p><p>Avalancheç»“åˆäº†æ—©æœŸä¸¤ç§å…±è¯†åè®®çš„ä¼˜ç‚¹å¹¶æ”¹è¿›å…¶ç¼ºç‚¹ï¼Œå…·æœ‰é«˜æ‹“å±•æ€§ã€é™æ€ç»¿è‰²ä»¥åŠä½é€šä¿¡æˆæœ¬çš„ä¼˜ç‚¹ã€‚åŒæ—¶ï¼Œä»Slushåˆ°Avalancheå±‚å±‚é€’è¿›ã€é€æ­¥å®Œå–„ï¼Œå¼•å…¥è®¡æ•°å™¨ã€å¯ä¿¡åº¦ã€DAGç­‰ï¼Œæ—¥è‡»å®Œå–„ã€‚</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://www.avalabs.org/whitepapers">Avalanche writepaper</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;1.å¼•è¨€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Avalancheä¸»ç½‘æ­£å¼ä¸Šçº¿ï¼ŒOKExä¹Ÿå·²ç»ä¸Šæ¶AvalancheåŸç”Ÿä»£å¸AVAXï¼Œæ›¾è·å¾—â€œå…±è¯†åè®®3.0â€ä¹‹ç§°çš„Avalancheé‡å›å¤§ä¼—è§†é‡ï¼Œä¸ºä½•Avalancheä¸€ä¸¾ä¸€åŠ¨å—åˆ°å¦‚æ­¤å¤§çš„å¸‚åœºå…³æ³¨ï¼Ÿ&lt;/p&gt;
&lt;p&gt;</summary>
      
    
    
    
    
    <category term="Avalanche" scheme="https://zhangzhishun.github.io/tags/Avalanche/"/>
    
    <category term="å…±è¯†ç®—æ³•" scheme="https://zhangzhishun.github.io/tags/%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>What&#39;s Avalanche?</title>
    <link href="https://zhangzhishun.github.io/2022/02/07/blockchain/avalanche/What&#39;s%20Avalanche/"/>
    <id>https://zhangzhishun.github.io/2022/02/07/blockchain/avalanche/What&#39;s%20Avalanche/</id>
    <published>2022-02-07T03:20:30.000Z</published>
    <updated>2022-04-27T02:35:55.474Z</updated>
    
    <content type="html"><![CDATA[<h1 id="What-is-Avalanche"><a href="#What-is-Avalanche" class="headerlink" title="What is Avalanche?"></a>What is Avalanche?</h1><p>Avalanche is an open-source platform for launching decentralized applications and enterprise blockchain deployments in one interoperable, highly scalable ecosystem. Avalanche is the first decentralized smart contracts platform built for the scale of global finance, with near-instant transaction finality. Ethereum developers can quickly build on Avalanche as Solidity works out-of-the-box.</p><p>A key difference between Avalanche and other decentralized networks is the <font color="red">consensus protocol</font>. Over time, people have come to a false understanding that blockchains have to be slow and not scalable. The Avalanche protocol employs a novel approach to consensus to achieve its <font color="red">strong safety guarantees, quick finality, and high-throughput</font> without compromising decentralization.</p><h1 id="Consensus-protocol"><a href="#Consensus-protocol" class="headerlink" title="Consensus protocol"></a>Consensus protocol</h1><p><img src="https://docs.avax.network/assets/images/Consensus-protocol-comparison-aa555b20f36947d6a5ff869d8758fa6e.png" alt="image"></p><p>Protocols in the Avalanche family operate through repeated sub-sampled voting. When a <a href="http://support.avalabs.org/en/articles/4064704-what-is-a-blockchain-validator">validator</a> is determining whether a <a href="http://support.avalabs.org/en/articles/4587384-what-is-a-transaction">transaction</a> should be accepted or rejected, it asks a small, random subset of validators whether they think the transaction should be accepted or rejected. If the queried validator thinks the transaction is invalid, has already rejected the transaction, or prefers a conflicting transaction, it replies that it thinks the transaction should be rejected. Otherwise, it replies that it thinks the transaction should be accepted.</p><p>If a sufficiently large portion (<em>alpha</em> Î±) of the validators sampled reply that they think the transaction should be accepted, the validator prefers to accept the transaction. That is, when it is queried about the transaction in the future, it will reply that it thinks the transaction should be accepted. Similarly, the validator will prefer to reject the transaction if a sufficiently large portion of the validators replies that they think the transaction should be rejected.</p><p>The validator repeats this sampling process until <em>alpha</em> of the validators queried reply the same way (accept or reject) for <em>beta</em> Î² consecutive rounds.</p><p>In the common case when a transaction has no conflicts, finalization happens very quickly. When conflicts exist, honest validators quickly cluster around conflicting transactions, entering a positive feedback loop until all correct validators prefer that transaction. This leads to the acceptance of non-conflicting transactions and the rejection of conflicting transactions.</p><p><img src="https://docs.avax.network/assets/images/howavalancheconsensusworks-a37dc2bdf67c7c2997dcbfd01ee28e64.png" alt="image"></p><p>It is guaranteed (with high probability based on system parameters) that if any honest validator accepts or rejects a transaction, all honest validators will accept or reject that transaction.</p><h2 id="Key-Features"><a href="#Key-Features" class="headerlink" title="Key Features"></a>Key Features</h2><h3 id="Speed"><a href="#Speed" class="headerlink" title="Speed"></a>Speed</h3><p>Uses a novel consensus protocol, developed by a team of Cornell computer scientists, and is able to permanently confirm transactions in under <font color="red">1 second</font>.</p><h3 id="Scalability"><a href="#Scalability" class="headerlink" title="Scalability"></a>Scalability</h3><p>Capable of <font color="red">4,500 transactions per second</font>â€“an order of magnitude greater than existing blockchains.</p><h3 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h3><p><font color="red">Ensures stronger security guarantees well</font>-above the 51% standard of other networks.</p><h3 id="Flexibility"><a href="#Flexibility" class="headerlink" title="Flexibility"></a>Flexibility</h3><p><font color="red">Easily</font> create custom blockchains and decentralized apps that contain almost any arbitrary logic.</p><h3 id="Sustainability"><a href="#Sustainability" class="headerlink" title="Sustainability"></a>Sustainability</h3><p>Uses energy-efficient <font color="red">proof-of-stake</font> consensus algorithm rather than proof-of-work.</p><h3 id="Smart-Contract-Support"><a href="#Smart-Contract-Support" class="headerlink" title="Smart Contract Support"></a>Smart Contract Support</h3><p>Supports the creation of <font color="red">Solidity smart contracts</font> and your favorite Ethereum tools like Remix, Metamask, Truffle, and more.</p><h3 id="Private-and-Public-Blockchains"><a href="#Private-and-Public-Blockchains" class="headerlink" title="Private and Public Blockchains"></a>Private and Public Blockchains</h3><p>Create your own public or private blockchains.</p><h3 id="Designed-for-Finance"><a href="#Designed-for-Finance" class="headerlink" title="Designed for Finance"></a>Designed for Finance</h3><p>Native support for easily creating and trading <font color="red">digital smart assets</font> with complex, custom rulesets.</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><p><a href="https://docs.avax.network/">Avalanche website</a></p></li><li><p><a href="https://github.com/ava-labs/avalanchego">Avalanche source code</a></p></li><li><p><a href="https://academy.binance.com/zh/articles/what-is-avalanche-avax">Whatâ€™s is Avalanche?</a></p></li><li><p><a href="https://www.avalabs.org/whitepapers">Avalanche writepaper</a></p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;What-is-Avalanche&quot;&gt;&lt;a href=&quot;#What-is-Avalanche&quot; class=&quot;headerlink&quot; title=&quot;What is Avalanche?&quot;&gt;&lt;/a&gt;What is Avalanche?&lt;/h1&gt;&lt;p&gt;Avalanch</summary>
      
    
    
    
    
    <category term="Avalanche" scheme="https://zhangzhishun.github.io/tags/Avalanche/"/>
    
  </entry>
  
  <entry>
    <title>Dockeræ–¹å¼æ­å»ºä»¥å¤ªåŠç½‘ç»œ-ç§æœ‰é“¾</title>
    <link href="https://zhangzhishun.github.io/2022/01/29/blockchain/ethereum/Docker%E6%96%B9%E5%BC%8F%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%A4%AA%E5%9D%8A---%E7%A7%81%E6%9C%89%E9%93%BE/"/>
    <id>https://zhangzhishun.github.io/2022/01/29/blockchain/ethereum/Docker%E6%96%B9%E5%BC%8F%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%A4%AA%E5%9D%8A---%E7%A7%81%E6%9C%89%E9%93%BE/</id>
    <published>2022-01-29T11:29:23.000Z</published>
    <updated>2022-04-27T02:35:55.474Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ¶‰åŠçš„çŸ¥è¯†å’ŒæŠ€æœ¯æœ‰ï¼š</p><ul><li>Dockerï¼šä¸€ç§æ—¶ä¸‹æµè¡Œçš„å®¹å™¨</li><li>gethï¼šä»¥å¤ªåŠå®¢æˆ·ç«¯çš„goå®ç°</li><li>truffleï¼šä»¥å¤ªåŠåˆçº¦éƒ¨ç½²å·¥å…·</li></ul><h2 id="ä¸»æœºé…ç½®"><a href="#ä¸»æœºé…ç½®" class="headerlink" title="ä¸»æœºé…ç½®"></a>ä¸»æœºé…ç½®</h2><p>æ­¤å¤„éœ€è¦è¡¥å……ä¸€ç‚¹çš„æ˜¯ï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºã€äº‘ä¸»æœºæˆ–è€…è€ç ´å°æœºå™¨ï¼Œéœ€è¦ç¡®ä¿åˆ†é…ç»™ä¸»æœºçš„å†…å­˜è‡³å°‘2GBã€‚å› ä¸ºä»¥å¤ªåŠä¸ºäº†æŠµå¾¡æ¯”ç‰¹å¤§é™†è¿™æ ·çš„ASICçŸ¿æœºå¯¹ç®—åŠ›çš„å„æ–­ï¼Œé‡‡ç”¨äº†å’Œæ¯”ç‰¹å¸å®Œå…¨ä¸åŒçš„PoWç®—æ³•â€”â€”ethashã€‚è¯¥ç®—æ³•çš„ç‰¹ç‚¹æ˜¯ç®—åŠ›ä¸æ•æ„Ÿï¼Œå†…å­˜æ•æ„Ÿã€‚è¯¥ç®—æ³•ç›®å‰éœ€è¦åœ¨å†…å­˜åˆ›å»ºå¤§çº¦1GBçš„DAGç”¨æ¥åšPoWè¿ç®—ï¼Œä¸”DAGä¼šéšç€åŒºå—çš„å¢åŠ å‘ˆé˜¶æ¢¯çŠ¶å¢é•¿ï¼Œå› æ­¤å»ºè®®è‡³å°‘ç»™æŒ–çŸ¿èŠ‚ç‚¹çš„å®¿ä¸»æœºå™¨åˆ†é…è‡³å°‘2GBçš„å†…å­˜ï¼Œä¸”ä¿ç•™æ‰©å¤§å†…å­˜å®¹é‡çš„çµæ´»æ€§ã€‚</p><h2 id="è·å–gethé•œåƒ"><a href="#è·å–gethé•œåƒ" class="headerlink" title="è·å–gethé•œåƒ"></a>è·å–gethé•œåƒ</h2><p>docker hubä¸Šæœ‰ç°æˆçš„gethé•œåƒã€‚ç›´æ¥è·å–ï¼š</p><pre><code class="bash">docker pull ethereum/client-go:v1.8.12</code></pre><h2 id="åˆ›å»ºDockerç½‘ç»œ"><a href="#åˆ›å»ºDockerç½‘ç»œ" class="headerlink" title="åˆ›å»ºDockerç½‘ç»œ"></a>åˆ›å»ºDockerç½‘ç»œ</h2><p>æ—§ç‰ˆæœ¬çš„dockerå®¹å™¨ç›¸äº’ä¹‹é—´æ˜¯ä¾é linkå»ºç«‹å…³ç³»ã€‚<br>æ–°ç‰ˆæœ¬dockeræ¨èåˆ›å»ºè‡ªæœ‰ç½‘è·¯ï¼Œå†å°†éœ€è¦äº’è”çš„å®¹å™¨é…ç½®åˆ°ç›¸åŒçš„ç½‘ç»œä¸­ã€‚<br>äºæ˜¯ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸ºâ€œethnetâ€œçš„ç½‘ç»œã€‚è¯¥ç½‘ç»œé…ç½®å¦‚ä¸‹ï¼š</p><ul><li>å­ç½‘172.19.0.0/16<ul><li>IPæ®µ172.19.0.0</li><li>æ©ç 255.255.0.0</li><li>IPèŒƒå›´172.19.0.1~172.19.255.254</li><li>IPå¹¿æ’­172.19.255.255</li></ul></li></ul><pre><code class="bash">docker network create -d bridge --subnet=172.19.0.0/16 ethnetdocker network ls</code></pre><h1 id="é…ç½®ä»¥å¤ªåŠç½‘ç»œ"><a href="#é…ç½®ä»¥å¤ªåŠç½‘ç»œ" class="headerlink" title="é…ç½®ä»¥å¤ªåŠç½‘ç»œ"></a>é…ç½®ä»¥å¤ªåŠç½‘ç»œ</h1><p>è¿è¡Œå¦‚ä¸‹å‘½ä»¤è¿›å…¥ä¸€ä¸ªå®¹å™¨ï¼š</p><pre><code class="bash">docker run -it --rm --network ethnet --ip 172.19.0.50 -v /opt/docker-project/eth/workspace:/workspace --entrypoint /bin/sh ethereum/client-go:v1.8.12</code></pre><blockquote><p>â€“network ethnetå‚æ•°æŒ‡å®šäº†è¯¥å®¹å™¨åŠ å…¥åˆšæ‰åˆ›å»ºçš„ethnetç½‘ç»œ<br> â€“ip 172.19.0.50æŒ‡å®šäº†ä¸€ä¸ªå›ºå®šIPç»™è¯¥å®¹å™¨ã€‚</p></blockquote><h2 id="åˆ›å»ºè´¦æˆ·"><a href="#åˆ›å»ºè´¦æˆ·" class="headerlink" title="åˆ›å»ºè´¦æˆ·"></a>åˆ›å»ºè´¦æˆ·</h2><p>é¦–å…ˆï¼Œåœ¨å®¹å™¨å†…çš„/workspaceç›®å½•åˆ›å»ºç›®å½•å’Œæ–‡ä»¶</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><pre><code class="bash">mkdir -p /workspacedappmkdir -p /workspace/dapp/minermkdir -p /workspace/dapp/datatouch /workspace/dapp/genesis.json</code></pre><p>ç„¶åè¿è¡Œå¦‚ä¸‹å‘½ä»¤åˆ›å»ºè´¦æˆ·ï¼š</p><pre><code class="bash">geth -datadir /workspace/dapp/miner/data account new</code></pre><p>è¾“å…¥ä¸¤æ¬¡passwordï¼Œè·å¾—åœ°å€ã€‚å°†åœ°å€è®°å½•ä¸‹æ¥ï¼Œåé¢è¦ç”¨åˆ°ã€‚</p><blockquote><p>é‡å¤å¦‚ä¸Šæ­¥éª¤å¯ä»¥åˆ›å»ºå¤šä¸ªè´¦æˆ·ã€‚</p></blockquote><h2 id="åˆ›å»ºåˆ›ä¸–åŒºå—"><a href="#åˆ›å»ºåˆ›ä¸–åŒºå—" class="headerlink" title="åˆ›å»ºåˆ›ä¸–åŒºå—"></a>åˆ›å»ºåˆ›ä¸–åŒºå—</h2><p>ç¼–è¾‘åˆšæ‰åˆ›å»ºçš„æ–‡ä»¶</p><pre><code class="bash">vi /workspace/dapp/data/genesis.json</code></pre><p>æ–‡ä»¶å†…å®¹ï¼š</p><pre><code class="json">{  "config": {    "chainId": 88,    "homesteadBlock": 0,    "eip155Block": 0,    "eip158Block": 0  },  "alloc"      : {    "b126d89780d2221ceffe5c94efd9ca6a005a9f0c": {"balance": "100000000000000000000"},    "93415bb68da6816c581537a4fa74727ddf6f4f4d": {"balance": "1000000000000000000"},    "fa5773a704ee9e91e60ffb8fe4207e934f70619f": {"balance": "1000000000000000000"}  },  "coinbase"   : "0x0000000000000000000000000000000000000000",  "difficulty" : "0x400",  "extraData"  : "",  "gasLimit"   : "0x2fefd8",  "nonce"      : "0x0000000000000000",  "mixhash"    :  "0x0000000000000000000000000000000000000000000000000000000000000000",  "parentHash" :  "0x0000000000000000000000000000000000000000000000000000000000000000",  "timestamp"  : "0x00"}</code></pre><ul><li>genesis.jsonæ˜¯ç”¨æ¥åˆ›å»ºåˆ›ä¸–åŒºå—çš„é…ç½®æ–‡ä»¶</li><li>åŠ å…¥åŒä¸€ç§é“¾çš„èŠ‚ç‚¹å¿…é¡»ä½¿ç”¨åŒä¸€é…ç½®æ–‡ä»¶</li><li>chainidæ˜¯ç§é“¾ç½‘ç»œçš„æ ‡è¯†ï¼Œå¯ä»¥æ˜¯ä»»æ„æ•°å­—ã€‚</li><li>å³ä½¿chainidç›¸åŒï¼Œå¦‚æœgenesis.jsoné…ç½®ä¸ä¸€æ ·ï¼Œä¹Ÿå°†æ˜¯ä¸¤ä¸ªä¸å…¼å®¹çš„ç½‘ç»œ</li><li>allocä¸‹é¢åˆ—ä¸¾äº†4ä¸ªè´¦æˆ·åœ°å€ï¼Œåˆ†åˆ«æ˜¯ä¸Šä¸€æ­¥åˆ›å»ºå¹¶è®°å½•ä¸‹æ¥çš„åœ°å€ã€‚</li><li>balanceæ˜¯åˆ›ä¸–åŒºå—ä¸ºæ¯ä¸ªè´¦æˆ·åˆ†é…çš„åˆå§‹ä»¥å¤ªå¸ã€‚è¿™é‡Œçœ‹ä¼¼åˆ†é…äº†å¾ˆå¤šï¼Œå…¶å®å•ä½æ˜¯weiã€‚1eth=10^18weiã€‚ä¹Ÿå°±æ˜¯é™¤äº†ç¬¬ä¸€ä¸ªè´¦æˆ·ç»™äº†100ethå¤–ï¼Œå…¶å®ƒå‡ ä¸ªè´¦æˆ·åˆ†åˆ«åªæ‹¥æœ‰1ethã€‚è¿™é‡Œç»™ç¬¬ä¸€ä¸ªè´¦æˆ·å¤šåˆ†ç‚¹ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¹‹åéœ€è¦ç”¨å®ƒæ¥éƒ¨ç½²åˆçº¦ã€‚</li></ul><h2 id="å®Œæˆä»¥å¤ªåŠç½‘ç»œé…ç½®"><a href="#å®Œæˆä»¥å¤ªåŠç½‘ç»œé…ç½®" class="headerlink" title="å®Œæˆä»¥å¤ªåŠç½‘ç»œé…ç½®"></a>å®Œæˆä»¥å¤ªåŠç½‘ç»œé…ç½®</h2><p>æ­¤æ—¶å¯ä»¥é€€å‡ºåˆšæ‰çš„å®¹å™¨ã€‚ç”±äºæˆ‘ä»¬è¿è¡Œå®¹å™¨æ˜¯åŠ äº†â€“rmå‚æ•°ï¼Œåˆšæ‰çš„å®¹å™¨ä¼šè¢«åˆ é™¤ï¼Œä½†å®¿ä¸»æœºçš„/workspaceä¸‹çš„æ–‡ä»¶ä¼šè¢«ä¿å­˜ä¸‹æ¥ã€‚</p><h1 id="æŒ–çŸ¿"><a href="#æŒ–çŸ¿" class="headerlink" title="æŒ–çŸ¿"></a>æŒ–çŸ¿</h1><p>ä¸Šè¿°æ­¥éª¤åªæ˜¯é…ç½®å¥½äº†ä¸€ä¸ªä»¥å¤ªåŠç§æœ‰ç½‘ç»œï¼Œå¹¶æ²¡æœ‰çœŸæ­£åˆ›å»ºç½‘ç»œã€‚æˆ‘ä»¬çŸ¥é“ï¼Œä»¥å¤ªåŠç½‘ç»œæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ç½‘ç»œï¼Œæœ‰äº†çŸ¿å·¥ï¼Œæ‰æœ‰çš„ç½‘ç»œã€‚äºæ˜¯ï¼Œæˆ‘ä»¬é¦–å…ˆå¾—æœ‰ä¸€ä¸ªçŸ¿å·¥ã€‚</p><h2 id="åˆ›å»ºâ€œä¸»â€çŸ¿å·¥èŠ‚ç‚¹"><a href="#åˆ›å»ºâ€œä¸»â€çŸ¿å·¥èŠ‚ç‚¹" class="headerlink" title="åˆ›å»ºâ€œä¸»â€çŸ¿å·¥èŠ‚ç‚¹"></a>åˆ›å»ºâ€œä¸»â€çŸ¿å·¥èŠ‚ç‚¹</h2><p>æˆ‘ä»¬æ¥ä¸‹æ¥æ‰“ç®—åˆ›å»ºçš„çŸ¿å·¥èŠ‚ç‚¹ï¼Œæˆä¸ºâ€œä¸»â€çŸ¿å·¥ï¼Œå› ä¸ºå®ƒéœ€è¦æ‹¥æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p><ul><li>å®ƒæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå¹¶ä¸”æ˜¯æŒä¹…çš„å®¹å™¨</li><li>å®ƒä¼šè‡ªåŠ¨è¯»å–genesis.jsonæ–‡ä»¶ï¼Œå¹¶åˆå§‹åŒ–ä»¥å¤ªåŠç½‘ç»œ</li><li>å®ƒèƒ½å¤Ÿè¿æ¥å…¶å®ƒèŠ‚ç‚¹ï¼ˆå®¹å™¨ï¼‰</li><li>å®ƒèƒ½å¤Ÿæ¥å—å„ç§rpcè°ƒç”¨ï¼Œå¹¶èƒ½å¤Ÿéƒ¨ç½²åˆçº¦</li><li>å®ƒå·²ç»é…ç½®å¥½æŒ–çŸ¿è´¦æˆ·ï¼Œå¯ä»¥ä¸€é”®æŒ–çŸ¿</li></ul><p>äºæ˜¯ï¼Œæˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªè¦æ±‚ï¼Œå¼€å§‹ä¸€æ­¥æ­¥åˆ›å»ºçŸ¿å·¥èŠ‚ç‚¹ã€‚</p><h3 id="åˆ›å»ºentrypointè„šæœ¬"><a href="#åˆ›å»ºentrypointè„šæœ¬" class="headerlink" title="åˆ›å»ºentrypointè„šæœ¬"></a>åˆ›å»ºentrypointè„šæœ¬</h3><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼š</p><pre><code class="bash">vi /opt/docker-project/eth/workspace/dapp/init.sh</code></pre><p> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre><code class="bash">#!/bin/shgeth -datadir ~/data/ init /workspace/dapp/data/genesis.jsonif [  $# -lt 1 ]; then   exec "/bin/sh"else  exec /bin/sh -c "$@"fi</code></pre><blockquote><p>è¯¥è„šæœ¬çš„åŠŸèƒ½æ˜¯è®©ä»¥å¤ªåŠèŠ‚ç‚¹ï¼ˆå®¹å™¨ï¼‰è‡ªåŠ¨åˆå§‹åŒ–ä»¥å¤ªåŠç½‘ç»œï¼Œå¹¶ä¸”æ¥å—ä¸€ä¸ªè‡ªåŠ¨è¿è¡Œè„šæœ¬ä½œä¸ºè¾“å…¥ã€‚</p></blockquote><h3 id="åˆ›å»ºè‡ªåŠ¨è¿è¡Œè„šæœ¬"><a href="#åˆ›å»ºè‡ªåŠ¨è¿è¡Œè„šæœ¬" class="headerlink" title="åˆ›å»ºè‡ªåŠ¨è¿è¡Œè„šæœ¬"></a>åˆ›å»ºè‡ªåŠ¨è¿è¡Œè„šæœ¬</h3><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼š</p><pre><code class="bash">vi /opt/docker-project/eth/workspace/dapp/mine.sh</code></pre><p>å†…å®¹å¦‚ä¸‹ï¼š</p><pre><code class="bash">#!/bin/shaccount='b126d89780d2221ceffe5c94efd9ca6a005a9f0c'cp -r /workspace/dapp/miner/data/keystore/* ~/data/keystore/geth -datadir ~/data/ --networkid 88 --rpc --rpcaddr "172.19.0.50" --rpcapi admin,eth,miner,web3,personal,net,txpool --unlock ${account} --etherbase ${account} console</code></pre><ul><li>ç¬¬ä¸€è¡Œå‘½ä»¤æ˜¯å°†åˆšæ‰ç”Ÿæˆçš„è´¦æˆ·ç§é’¥æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨çš„homeç›®å½•ä¸‹ã€‚å› ä¸º/workspaceæ˜¯å®¿ä¸»ç›®å½•æŒ‚è½½çš„ï¼Œå¹¶ä¸æ˜¯linuxæ–‡ä»¶ç³»ç»Ÿï¼Œç›´æ¥å°†datadiræŒ‡å®šåˆ°è¯¥ç›®å½•ä¼šå¯¼è‡´gethæŠ¥é”™ã€‚</li><li>ç¬¬äºŒè¡Œå‘½ä»¤æ˜¯å¯åŠ¨ä»¥å¤ªåŠèŠ‚ç‚¹çš„å‘½ä»¤ã€‚<ul><li>â€“networkid 88æŒ‡å®šäº†networkidï¼Œè¿™ä¸ªå¿…é¡»ä¸genesis.jsonå†…è®¾ç½®ä¿æŒä¸€è‡´</li><li>â€“rpc â€“rpcaddr â€œ172.19.0.50â€ â€“rpcapi â€¦. è¿™äº›å‚æ•°è¡¨ç¤ºè¯¥èŠ‚ç‚¹æ¥å—rpcï¼Œå¹¶ä¸”æŒ‡å®šäº†rpcçš„åè®®</li><li>â€“unlock â€œ0xâ€¦â€ åŠ å…¥è¯¥å‚æ•°ä¼šéœ€è¦ç”¨æˆ·è¾“å…¥è´¦æˆ·å¯†ç ã€‚å¯†ç æ ¡éªŒåä¼šè§£é”è¯¥è´¦æˆ·ã€‚è´¦æˆ·è§£é”åï¼Œè¯¥èŠ‚ç‚¹å°±èƒ½ä½¿ç”¨æ­¤è´¦æˆ·çš„ç§é’¥è¿›è¡Œç­¾ååŠ å¯†ç­‰åŠ¨ä½œï¼Œç”¨ä»¥è¿›è¡Œäº¤æ˜“ã€å‘å¸ƒåˆçº¦ç­‰ã€‚</li><li>â€“etherbase å‚æ•°æŒ‡å®šäº†æŒ–çŸ¿æ”¶ç›Šè´¦æˆ·</li></ul></li></ul><h3 id="åˆ›å»ºå®¹å™¨"><a href="#åˆ›å»ºå®¹å™¨" class="headerlink" title="åˆ›å»ºå®¹å™¨"></a>åˆ›å»ºå®¹å™¨</h3><pre><code class="bash">chmod +x /opt/docker-project/eth/workspace/dapp/init.shchmod +x /opt/docker-project/eth/workspace/dapp/mine.shdocker run -it --name=miner --network ethnet --ip 172.19.0.50 --hostname node -v /opt/docker-project/eth/workspace:/workspace --entrypoint /workspace/dapp/init.sh ethereum/client-go:v1.8.12 /workspace/dapp/mine.sh</code></pre><blockquote><p>è¯¥å‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ªæŒä¹…åŒ–çš„å®¹å™¨ã€‚å®¹å™¨çš„entrypointå’Œè‡ªåŠ¨è¿è¡Œè„šæœ¬æŒ‡å®šä¸ºæˆ‘ä»¬åˆšåˆ›å»ºçš„é‚£ä¸¤ä¸ªè„šæœ¬ã€‚</p></blockquote><p>å¦‚æœæŠ¥é”™ï¼š</p><pre><code class="bash">Fatal: Failed to unlock account (no key for given address or file)</code></pre><p>å¯èƒ½åŸå› æ˜¯æ²¡æœ‰ä¿®æ”¹ä¸Šé¢çš„mine.shè„šæœ¬çš„accountå‚æ•°ä¸ºç¬¬ä¸€ä¸ªè´¦æˆ·åœ°å€</p><h2 id="åˆ›å»ºâ€œä»â€çŸ¿å·¥èŠ‚ç‚¹"><a href="#åˆ›å»ºâ€œä»â€çŸ¿å·¥èŠ‚ç‚¹" class="headerlink" title="åˆ›å»ºâ€œä»â€çŸ¿å·¥èŠ‚ç‚¹"></a>åˆ›å»ºâ€œä»â€çŸ¿å·¥èŠ‚ç‚¹</h2><p>åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„ç½‘ç»œï¼Œæ€ä¹ˆçœ‹éƒ½ä¸åƒâ€œåˆ†å¸ƒå¼â€ç½‘ç»œã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ›å»ºæ›´å¤šçš„èŠ‚ç‚¹æ¥å½¢æˆä¸€ä¸ªâ€œåˆ†å¸ƒå¼ç½‘ç»œâ€ã€‚æˆ‘ä»¬ç§°è¿™äº›èŠ‚ç‚¹å«åšâ€œä»â€çŸ¿å·¥ã€‚<br> è¿™ç±»çŸ¿å·¥ä¸éœ€è¦äº¤æ˜“ï¼Œä¸éœ€è¦å‘å¸ƒåˆçº¦ï¼Œå› æ­¤ä¸éœ€è¦unlockè´¦æˆ·ï¼Œä¹Ÿä¸éœ€è¦æ¥å—rpcã€‚å®ƒä»¬åªçŸ¥é“åŸ‹å¤´æŒ–çŸ¿ã€‚</p><h3 id="åˆ›å»ºè‡ªåŠ¨è¿è¡Œè„šæœ¬-1"><a href="#åˆ›å»ºè‡ªåŠ¨è¿è¡Œè„šæœ¬-1" class="headerlink" title="åˆ›å»ºè‡ªåŠ¨è¿è¡Œè„šæœ¬"></a>åˆ›å»ºè‡ªåŠ¨è¿è¡Œè„šæœ¬</h3><p>â€œä»â€çŸ¿å·¥èŠ‚ç‚¹å’Œâ€œä¸»â€çŸ¿å·¥èŠ‚ç‚¹å…±äº«entrypointï¼Œä»¥ä¿è¯å®ƒä»¬åˆ›å»ºå‡ºå®Œå…¨ç›¸åŒçš„ç½‘ç»œã€‚<br> åªæœ‰è‡ªåŠ¨è¿è¡Œè„šæœ¬ä¸å¤ªä¸€æ ·ï¼Œ</p><pre><code class="bash">vi /opt/docker-project/eth/workspace/dapp/node.sh</code></pre><p>æ–‡ä»¶å†…å®¹ï¼š</p><pre><code class="bash">#!/bin/shcp -r /workspace/dapp/miner/data/keystore/* ~/data/keystore/geth -datadir ~/data/ --networkid 88 console </code></pre><p>åˆ›å»ºå®¹å™¨:</p><pre><code class="bash">chmod +x /opt/docker-project/eth/workspace/dapp/node.shdocker run -it --name=node1 --network ethnet --ip 172.19.0.51 --hostname node1 -v /opt/docker-project/eth/workspace:/workspace --entrypoint /workspace/dapp/init.sh ethereum/client-go:v1.8.12 /workspace/dapp/node.sh</code></pre><h1 id="æ“ä½œèŠ‚ç‚¹"><a href="#æ“ä½œèŠ‚ç‚¹" class="headerlink" title="æ“ä½œèŠ‚ç‚¹"></a>æ“ä½œèŠ‚ç‚¹</h1><p>ä»¥ä¸Šåˆ›å»ºå‡ºäº†å¤šä¸ªä»¥å¤ªåŠèŠ‚ç‚¹ï¼Œè¿è¡Œåœ¨åŒä¸€ç½‘ç»œä¸‹ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥æ‰§è¡Œå¦‚ä¸‹æ“ä½œã€‚ä¾›å‚è€ƒã€‚</p><h2 id="èŠ‚ç‚¹å‘ç°"><a href="#èŠ‚ç‚¹å‘ç°" class="headerlink" title="èŠ‚ç‚¹å‘ç°"></a>èŠ‚ç‚¹å‘ç°</h2><h3 id="æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯"><a href="#æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯"></a>æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯</h3><pre><code class="bash">geth -datadir ~/data/ --networkid 88 console&gt;admin.nodeInfo.enode# è¾“å‡º"enode://708b66364c83af2d3725c309f2bdc0e7d4e395c6ac7310e1a1147b9dfe084649e6c6a3ce6c483c51ab6e924f6abade647246c2b57ecc49d9a573cea896cdf0e6@[::]:30303"</code></pre><h3 id="é…ç½®é™æ€èŠ‚ç‚¹æ–‡ä»¶"><a href="#é…ç½®é™æ€èŠ‚ç‚¹æ–‡ä»¶" class="headerlink" title="é…ç½®é™æ€èŠ‚ç‚¹æ–‡ä»¶"></a>é…ç½®é™æ€èŠ‚ç‚¹æ–‡ä»¶</h3><p>~/data/geth/static-nodes.json</p><pre><code class="json">[    "enode://&lt;node public key&gt;@&lt;node IP address&gt;:&lt;node port&gt;"]</code></pre><h3 id="æŸ¥çœ‹è¿æ¥ä¸Šçš„èŠ‚ç‚¹"><a href="#æŸ¥çœ‹è¿æ¥ä¸Šçš„èŠ‚ç‚¹" class="headerlink" title="æŸ¥çœ‹è¿æ¥ä¸Šçš„èŠ‚ç‚¹"></a>æŸ¥çœ‹è¿æ¥ä¸Šçš„èŠ‚ç‚¹</h3><pre><code class="bash">geth -datadir ~/data/ --networkid 88 console&gt;admin.peers</code></pre><h3 id="åŠ¨æ€æ·»åŠ èŠ‚ç‚¹"><a href="#åŠ¨æ€æ·»åŠ èŠ‚ç‚¹" class="headerlink" title="åŠ¨æ€æ·»åŠ èŠ‚ç‚¹"></a>åŠ¨æ€æ·»åŠ èŠ‚ç‚¹</h3><pre><code class="bash">&gt;admin.addPeer("enode://&lt;node public key&gt;@&lt;node IP address&gt;:&lt;node port&gt;")</code></pre><h2 id="æŒ–çŸ¿-1"><a href="#æŒ–çŸ¿-1" class="headerlink" title="æŒ–çŸ¿"></a>æŒ–çŸ¿</h2><p>å¯åŠ¨minerå®¹å™¨</p><pre><code class="bash">&gt;miner.start(1)</code></pre><ul><li>å‚æ•°1æŒ‡å®šäº†æŒ–çŸ¿çš„çº¿ç¨‹æ•°ã€‚</li><li>é¦–æ¬¡å¯åŠ¨èŠ‚ç‚¹ä¼šæ¶ˆè€—å¤§çº¦20~30åˆ†é’Ÿäº§ç”ŸDAG</li><li>æŸå¼€å§‹æŒ–çŸ¿åï¼Œå…¶å®ƒèŠ‚ç‚¹å°†ä¼šæ”¶åˆ°æ–°åŒºå—å¹¶æ‰“å°</li></ul><h1 id="éƒ¨ç½²åˆçº¦"><a href="#éƒ¨ç½²åˆçº¦" class="headerlink" title="éƒ¨ç½²åˆçº¦"></a>éƒ¨ç½²åˆçº¦</h1><h2 id="åˆ›å»ºtruffleé•œåƒ"><a href="#åˆ›å»ºtruffleé•œåƒ" class="headerlink" title="åˆ›å»ºtruffleé•œåƒ"></a>åˆ›å»ºtruffleé•œåƒ</h2><p>ç”±äºæ²¡æœ‰æ‰¾åˆ°å¥½ç”¨çš„truffleé•œåƒï¼Œæˆ‘è‡ªå·±åˆ›å»ºäº†ä¸€ä¸ªã€‚Dockerfileå†…å®¹å¦‚ä¸‹ï¼š</p><pre><code class="ruby">FROM alpine:3.8MAINTAINER Cary Tan hbuzzs@163.comENV PS1='[truffle@docker $PWD]\$ 'RUN echo "http://mirrors.tuna.tsinghua.edu.cn/alpine/v3.8/main" &gt; /etc/apk/repositories \      &amp;&amp; echo "http://mirrors.tuna.tsinghua.edu.cn/alpine/v3.8/community" &gt;&gt; /etc/apk/repositories \      &amp;&amp; apk update \          &amp;&amp; apk add curl \      &amp;&amp; apk add npm \      &amp;&amp; apk add git \      &amp;&amp; mkdir -p /workspace \      &amp;&amp; npm config set registry https://registry.npm.taobao.org \      &amp;&amp; npm install -g truffleWORKDIR /workspaceCMD /bin/sh</code></pre><p>ä¹Ÿå¯ä½¿ç”¨ä»–äººä¸Šä¼ çš„é•œåƒï¼š</p><pre><code class="bash">docker pull txcary/truffle:180806# è¿™ä¸ªé•œåƒæ²¡æœ‰curl éœ€è¦å®‰è£…apk add curl</code></pre><h2 id="æ–°å»ºtruffleå·¥ç¨‹"><a href="#æ–°å»ºtruffleå·¥ç¨‹" class="headerlink" title="æ–°å»ºtruffleå·¥ç¨‹"></a>æ–°å»ºtruffleå·¥ç¨‹</h2><pre><code class="bash">mkdir -p /opt/docker-project/truffle/workspace/VanTokencd /opt/docker-project/truffle/workspace/VanTokengit clone https://github.com/trufflesuite/truffle-init-bare.git</code></pre><h2 id="å¯åŠ¨truffleå®¹å™¨"><a href="#å¯åŠ¨truffleå®¹å™¨" class="headerlink" title="å¯åŠ¨truffleå®¹å™¨"></a>å¯åŠ¨truffleå®¹å™¨</h2><pre><code class="bash">docker run -it --rm -v /opt/docker-project/truffle/workspace:/workspace --network ethnet txcary/truffle:180806</code></pre><h3 id="æµ‹è¯•èŠ‚ç‚¹RPC"><a href="#æµ‹è¯•èŠ‚ç‚¹RPC" class="headerlink" title="æµ‹è¯•èŠ‚ç‚¹RPC"></a>æµ‹è¯•èŠ‚ç‚¹RPC</h3><pre><code class="bash">curl 172.19.0.50:8545 -X POST --data '{"id":1,"jsonrpc":"2.0","method":"eth_accounts", "params":[]}' -H "Content-Type: application/json"curl 172.19.0.50:8545 -X POST --data '{"id":1,"jsonrpc":"2.0","method":"eth_getBalance", "params":["0x4c283287839fd441b8c8d18771321bc06a81edae","latest"]}' -H "Content-Type: application/json"</code></pre><ul><li>ç¬¬ä¸€æ¡å‘½ä»¤è·å–èŠ‚ç‚¹ä¸Šçš„è´¦æˆ·</li><li>ç¬¬äºŒæ¡å‘½ä»¤è·å–è´¦æˆ·ä½™é¢</li><li>å¦‚æœè¿™ä¸¤æ¡å‘½ä»¤æˆåŠŸäº†ï¼Œè¯´æ˜ä»¥å¤ªåŠç§æœ‰ç½‘ç»œæ­å»ºæˆåŠŸï¼Œå¹¶ä¸”èŠ‚ç‚¹rpcè°ƒç”¨æˆåŠŸ</li></ul><h3 id="ä¿®æ”¹truffle-js"><a href="#ä¿®æ”¹truffle-js" class="headerlink" title="ä¿®æ”¹truffle.js"></a>ä¿®æ”¹truffle.js</h3><pre><code class="javascript">module.exports = {        networks: {            development: {                host: "172.19.0.50",                port: 8545,                network_id: 88,                gas: 2900000,                gasPrice: 10000000000            }        }};</code></pre><ul><li>gasä½¿ç”¨é»˜è®¤å€¼ä¼šå¯¼è‡´è¶…é™é”™è¯¯ï¼Œç ”ç©¶åŠå¤©ä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚è¦æ˜¯ææ˜ç™½çš„å¯ä»¥ç»™æˆ‘ç•™è¨€ï¼Œè°¢è°¢ï¼</li><li>gasPriceä¸ºé»˜è®¤å€¼</li></ul><h2 id="ç¼–å†™åˆçº¦Migrations-solï¼ˆtruffleå†…ç½®ï¼‰"><a href="#ç¼–å†™åˆçº¦Migrations-solï¼ˆtruffleå†…ç½®ï¼‰" class="headerlink" title="ç¼–å†™åˆçº¦Migrations.solï¼ˆtruffleå†…ç½®ï¼‰"></a>ç¼–å†™åˆçº¦Migrations.solï¼ˆtruffleå†…ç½®ï¼‰</h2><pre><code class="solidity">pragma solidity &gt;=0.4.22 &lt;0.6.0;contract Migrations {    address public owner;    uint public lastCompletedMigration;    modifier restricted() {        if (msg.sender == owner) _;    }    constructor() public {        owner = msg.sender;    }    function setCompleted(uint completed) public restricted {        lastCompletedMigration = completed;    }    function upgrade(address newAddress) public restricted {        Migrations upgraded = Migrations(newAddress);        upgraded.setCompleted(lastCompletedMigration);    }}</code></pre><h2 id="æ–°å»ºéƒ¨ç½²è„šæœ¬"><a href="#æ–°å»ºéƒ¨ç½²è„šæœ¬" class="headerlink" title="æ–°å»ºéƒ¨ç½²è„šæœ¬"></a>æ–°å»ºéƒ¨ç½²è„šæœ¬</h2><p>deploy_contracts.js</p><pre><code class="javascript">var contractsName = artifacts.require("./Storage.sol");module.exports = function(deployer) {  deployer.deploy(contractsName);};</code></pre><h2 id="ç¼–è¯‘åˆçº¦"><a href="#ç¼–è¯‘åˆçº¦" class="headerlink" title="ç¼–è¯‘åˆçº¦"></a>ç¼–è¯‘åˆçº¦</h2><pre><code class="bash">truffle compile</code></pre><h2 id="éƒ¨ç½²åˆçº¦-1"><a href="#éƒ¨ç½²åˆçº¦-1" class="headerlink" title="éƒ¨ç½²åˆçº¦"></a>éƒ¨ç½²åˆçº¦</h2><pre><code class="bash">truffle migrate --network development --verbose-rpc</code></pre><p>éƒ¨ç½²æˆåŠŸ</p><p><img src="/images/eth_network_set_up/image-20220204103544178.png" alt="image-20220204103544178"></p><h1 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h1><ul><li><a href="https://www.jianshu.com/p/7994db7a2b89?from=singlemessage">https://www.jianshu.com/p/7994db7a2b89?from=singlemessage</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ¬æ–‡æ¶‰åŠçš„çŸ¥è¯†å’ŒæŠ€æœ¯æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Dockerï¼šä¸€ç§æ—¶ä¸‹æµè¡Œçš„å®¹å™¨&lt;/li&gt;
&lt;li&gt;gethï¼šä»¥å¤ªåŠå®¢æˆ·ç«¯çš„goå®ç°&lt;/li&gt;
&lt;li&gt;truffleï¼šä»¥å¤ªåŠåˆçº¦éƒ¨ç½²å·¥å…·&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ä¸»æœºé…ç½®&quot;&gt;&lt;a href=&quot;#ä¸»æœºé…ç½®&quot; </summary>
      
    
    
    
    
    <category term="éƒ¨ç½²æ–‡æ¡£" scheme="https://zhangzhishun.github.io/tags/%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/"/>
    
    <category term="Ethereum" scheme="https://zhangzhishun.github.io/tags/Ethereum/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ</title>
    <link href="https://zhangzhishun.github.io/2022/01/18/data_struct_algorithm/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90/"/>
    <id>https://zhangzhishun.github.io/2022/01/18/data_struct_algorithm/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90/</id>
    <published>2022-01-18T02:29:15.000Z</published>
    <updated>2022-04-27T02:35:55.483Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ"><a href="#æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ" class="headerlink" title="æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ"></a>æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ</h1><h1 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h1><ul><li>äº†è§£ç®—æ³•åˆ†ææ–¹æ³•ï¼ˆç¬¬äºŒç« -13ï¼‰</li><li>ç²¾é€šè¡¨ã€æ ˆå’Œé˜Ÿåˆ—ï¼ˆç¬¬ä¸‰ç« -27ï¼‰ã€æ ‘ï¼ˆç¬¬å››ç« -40ï¼‰ã€æ•£åˆ—ï¼ˆç¬¬äº”ç« -36ï¼‰ã€ä¼˜å…ˆé˜Ÿåˆ—ã€å †ï¼ˆç¬¬å…­ç« -28ï¼‰ã€æ’åºï¼ˆç¬¬ä¸ƒç« -50ï¼‰ã€ä¸ç›¸äº¤é›†ç±»ï¼ˆç¬¬å…«ç« -17ï¼‰</li><li>ç²¾é€šå›¾è®ºï¼ˆç¬¬ä¹ç« -38ï¼‰ã€ç®—æ³•è®¾è®¡æŠ€å·§ï¼ˆç¬¬åç« -50ï¼‰ã€çº¢é»‘æ ‘ï¼ˆç¬¬åäºŒç« ç¬¬äºŒèŠ‚-5ï¼‰</li></ul><h1 id="ç¬¬-2-ç« -ç®—æ³•åˆ†ææ–¹æ³•"><a href="#ç¬¬-2-ç« -ç®—æ³•åˆ†ææ–¹æ³•" class="headerlink" title="ç¬¬ 2 ç«  ç®—æ³•åˆ†ææ–¹æ³•"></a>ç¬¬ 2 ç«  ç®—æ³•åˆ†ææ–¹æ³•</h1><h2 id="2-4-è¿è¡Œæ—¶é—´è®¡ç®—"><a href="#2-4-è¿è¡Œæ—¶é—´è®¡ç®—" class="headerlink" title="2.4 è¿è¡Œæ—¶é—´è®¡ç®—"></a>2.4 è¿è¡Œæ—¶é—´è®¡ç®—</h2><h3 id="2-4-1-ä¸€èˆ¬æ³•åˆ™"><a href="#2-4-1-ä¸€èˆ¬æ³•åˆ™" class="headerlink" title="2.4.1 ä¸€èˆ¬æ³•åˆ™"></a>2.4.1 ä¸€èˆ¬æ³•åˆ™</h3><ol><li>æ³•åˆ™1 â€”â€” forå¾ªç¯</li></ol><p>ä¸€ä¸ªforå¾ªç¯çš„è¿è¡Œæ—¶é—´è‡³å¤šæ˜¯è¯¥forå¾ªç¯å†…éƒ¨é‚£äº›è¯­å¥ï¼ˆåŒ…æ‹¬æµ‹è¯•ï¼‰çš„è¿è¡Œæ—¶é—´ä¹˜ä»¥è¿­ä»£çš„æ¬¡æ•°</p><ol><li>æ³•åˆ™2 â€”â€” åµŒå¥—çš„forå¾ªç¯</li></ol><p>åœ¨ä¸€ç»„åµŒå¥—å¾ªç¯å†…éƒ¨çš„ä¸€æ¡è¯­å¥çš„è¿è¡Œæ—¶é—´ä¸ºè¯¥è¯­å¥çš„è¿è¡Œæ—¶é—´ä¹˜ä»¥è¯¥ç»„æ‰€æœ‰çš„forå¾ªç¯çš„å¤§å°çš„ä¹˜ç§¯</p><ol><li>æ³•åˆ™3 â€”â€” é¡ºåºè¯­å¥</li></ol><p>å°†å„ä¸ªè¯­å¥çš„è¿è¡Œæ—¶é—´æ±‚å’Œå³å¯ã€‚è¿™æ„å‘³ç€å…¶ä¸­çš„æœ€å¤§å€¼å°±æ˜¯æ‰€å¾—çš„è¿è¡Œæ—¶é—´ã€‚</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled.png" alt="Untitled"></p><ol><li>æ³•åˆ™4 â€”â€” if/elseè¯­å¥</li></ol><p>ä¸€ä¸ªif/elseè¯­å¥çš„è¿è¡Œæ—¶é—´ä»ä¸è¶…è¿‡åˆ¤æ–­çš„è¿è¡Œæ—¶é—´å†åŠ ä¸ŠS1å’ŒS2ä¸­è¿è¡Œæ—¶é—´é•¿è€…çš„æ€»çš„è¿è¡Œæ—¶é—´ã€‚</p><h1 id="ç¬¬-3-ç« -è¡¨ã€æ ˆå’Œé˜Ÿåˆ—"><a href="#ç¬¬-3-ç« -è¡¨ã€æ ˆå’Œé˜Ÿåˆ—" class="headerlink" title="ç¬¬ 3 ç«  è¡¨ã€æ ˆå’Œé˜Ÿåˆ—"></a>ç¬¬ 3 ç«  è¡¨ã€æ ˆå’Œé˜Ÿåˆ—</h1><h2 id="3-1-æŠ½è±¡æ•°æ®ç±»å‹"><a href="#3-1-æŠ½è±¡æ•°æ®ç±»å‹" class="headerlink" title="3.1 æŠ½è±¡æ•°æ®ç±»å‹"></a>3.1 æŠ½è±¡æ•°æ®ç±»å‹</h2><p>æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆADTï¼‰æ˜¯å¸¦æœ‰ä¸€ç»„æ“ä½œçš„ä¸€äº›å¯¹è±¡çš„é›†åˆã€‚</p><h2 id="3-2-è¡¨ADT"><a href="#3-2-è¡¨ADT" class="headerlink" title="3.2 è¡¨ADT"></a>3.2 è¡¨ADT</h2><p>æˆ‘ä»¬ç§°å½¢å¦‚$A_0$$,A_1,A_2,â€¦,A_{N-1}$çš„ä¸ºè¡¨ï¼Œè¯¥è¡¨å¤§å°ä¸ºN</p><h3 id="3-2-1-è¡¨çš„ç®€å•æ•°ç»„å®ç°"><a href="#3-2-1-è¡¨çš„ç®€å•æ•°ç»„å®ç°" class="headerlink" title="3.2.1 è¡¨çš„ç®€å•æ•°ç»„å®ç°"></a>3.2.1 è¡¨çš„ç®€å•æ•°ç»„å®ç°</h3><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%201.png" alt="Untitled"></p><h3 id="3-2-2-ç®€å•é“¾è¡¨"><a href="#3-2-2-ç®€å•é“¾è¡¨" class="headerlink" title="3.2.2 ç®€å•é“¾è¡¨"></a>3.2.2 ç®€å•é“¾è¡¨</h3><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%202.png" alt="Untitled"></p><h2 id="3-6-æ ˆADT"><a href="#3-6-æ ˆADT" class="headerlink" title="3.6 æ ˆADT"></a>3.6 æ ˆADT</h2><h3 id="3-6-1-æ ˆæ¨¡å‹"><a href="#3-6-1-æ ˆæ¨¡å‹" class="headerlink" title="3.6.1 æ ˆæ¨¡å‹"></a>3.6.1 æ ˆæ¨¡å‹</h3><p>æ ˆæ˜¯é™åˆ¶æ’å…¥å’Œåˆ é™¤åªèƒ½åœ¨ä¸€ä¸ªä½ç½®ä¸Šè¿›è¡Œçš„è¡¨ï¼Œè¯¥ä½ç½®æ˜¯è¡¨çš„æœ«ç«¯ï¼Œå«åšç«™çš„é¡¶ï¼ˆtopï¼‰ã€‚</p><p>æ ˆçš„åŸºæœ¬æ“ä½œæœ‰pushï¼ˆè¿›æ ˆï¼‰ã€popï¼ˆå‡ºæ ˆï¼‰</p><p>æ ˆæœ‰æ—¶åˆå«LIFOï¼ˆåè¿›å…ˆå‡ºï¼‰è¡¨</p><h3 id="3-6-3-åº”ç”¨"><a href="#3-6-3-åº”ç”¨" class="headerlink" title="3.6.3 åº”ç”¨"></a>3.6.3 åº”ç”¨</h3><ul><li>å¹³è¡¡ç¬¦å·</li><li>åç¼€è¡¨è¾¾å¼</li><li>æ–¹æ³•è°ƒç”¨</li></ul><h2 id="3-7-é˜Ÿåˆ—ADT"><a href="#3-7-é˜Ÿåˆ—ADT" class="headerlink" title="3.7 é˜Ÿåˆ—ADT"></a>3.7 é˜Ÿåˆ—ADT</h2><h3 id="3-7-1-é˜Ÿåˆ—æ¨¡å‹"><a href="#3-7-1-é˜Ÿåˆ—æ¨¡å‹" class="headerlink" title="3.7.1 é˜Ÿåˆ—æ¨¡å‹"></a>3.7.1 é˜Ÿåˆ—æ¨¡å‹</h3><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%203.png" alt="Untitled"></p><h1 id="ç¬¬-4-ç« -æ ‘"><a href="#ç¬¬-4-ç« -æ ‘" class="headerlink" title="ç¬¬ 4 ç«  æ ‘"></a>ç¬¬ 4 ç«  æ ‘</h1><h2 id="4-1-é¢„å¤‡çŸ¥è¯†"><a href="#4-1-é¢„å¤‡çŸ¥è¯†" class="headerlink" title="4.1 é¢„å¤‡çŸ¥è¯†"></a>4.1 é¢„å¤‡çŸ¥è¯†</h2><h2 id="4-2-äºŒå‰æ ‘"><a href="#4-2-äºŒå‰æ ‘" class="headerlink" title="4.2 äºŒå‰æ ‘"></a>4.2 äºŒå‰æ ‘</h2><h2 id="4-3-æŸ¥æ‰¾æ ‘ADT-â€”â€”-äºŒå‰æŸ¥æ‰¾æ ‘"><a href="#4-3-æŸ¥æ‰¾æ ‘ADT-â€”â€”-äºŒå‰æŸ¥æ‰¾æ ‘" class="headerlink" title="4.3 æŸ¥æ‰¾æ ‘ADT â€”â€”  äºŒå‰æŸ¥æ‰¾æ ‘"></a>4.3 æŸ¥æ‰¾æ ‘ADT â€”â€”  äºŒå‰æŸ¥æ‰¾æ ‘</h2><h2 id="4-4-AVLæ ‘"><a href="#4-4-AVLæ ‘" class="headerlink" title="4.4 AVLæ ‘"></a>4.4 AVLæ ‘</h2><p>AVLæ ‘æ˜¯å¸¦æœ‰å¹³è¡¡æ¡ä»¶çš„äºŒå‰æŸ¥æ‰¾æ ‘</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>æœ¬èº«é¦–å…ˆæ˜¯ä¸€æ£µäºŒå‰æœç´¢æ ‘ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ï¼ˆå¹³è¡¡å› å­ï¼‰æœ€å¤šä¸º1</li></ul><h3 id="4-4-1-å•æ—‹è½¬"><a href="#4-4-1-å•æ—‹è½¬" class="headerlink" title="4.4.1 å•æ—‹è½¬"></a>4.4.1 å•æ—‹è½¬</h3><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%204.png" alt="Untitled"></p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%205.png" alt="Untitled"></p><h3 id="4-4-2-åŒæ—‹è½¬"><a href="#4-4-2-åŒæ—‹è½¬" class="headerlink" title="4.4.2 åŒæ—‹è½¬"></a>4.4.2 åŒæ—‹è½¬</h3><h2 id="4-5-ä¼¸å±•æ ‘"><a href="#4-5-ä¼¸å±•æ ‘" class="headerlink" title="4.5 ä¼¸å±•æ ‘"></a>4.5 ä¼¸å±•æ ‘</h2><p>ä¼¸å±•æ ‘ä¿è¯ä»ç©ºæ ‘å¼€å§‹è¿ç»­Mæ¬¡å¯¹æ ‘çš„æ“ä½œæœ€å¤šèŠ±è´¹*O(M log N)*æ—¶é—´</p><p>ä¼¸å±•æ ‘åŸºäºè¿™æ ·çš„äº‹å®ï¼šå¯¹äºäºŒå‰æŸ¥æ‰¾æ ‘æ¥è¯´ï¼Œæ¯æ¬¡æ“ä½œæœ€åæƒ…å½¢æ—¶é—´*O(N)*å¹¶ä¸åï¼Œåªè¦å®ƒç›¸å¯¹ä¸å¸¸å‘ç”Ÿå°±è¡Œã€‚</p><h2 id="4-6-æ ‘çš„éå†"><a href="#4-6-æ ‘çš„éå†" class="headerlink" title="4.6 æ ‘çš„éå†"></a>4.6 æ ‘çš„éå†</h2><ul><li>å…ˆåºéå†</li><li>ä¸­åºéå†</li><li>ååºéå†</li><li>å±‚åºéå†</li></ul><h2 id="4-7-B-æ ‘"><a href="#4-7-B-æ ‘" class="headerlink" title="4.7 B+æ ‘**"></a>4.7 B+æ ‘**</h2><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%206.png" alt="Untitled"></p><p>é˜¶ä¸ºMçš„B+æ ‘çš„ç‰¹æ€§ï¼š</p><ul><li>æ•°æ®é¡¹å­˜å‚¨åœ¨æ ‘å¶ä¸Š</li><li>éå¶å­èŠ‚ç‚¹å­˜å‚¨ç›´åˆ°M-1ä¸ªå…³é”®å­—ä»¥æŒ‡ç¤ºæœç´¢çš„æ–¹å‘ï¼›å…³é”®å­—iä»£è¡¨å­æ ‘i+1ä¸­çš„æœ€å°çš„å…³é”®å­—</li><li>æ ‘çš„æ ¹æˆ–è€…æ˜¯ä¸€ç‰‡æ ‘å¶ï¼Œæˆ–è€…å…¶å„¿å­æ•°åœ¨2å’ŒMä¹‹é—´</li><li>é™¤æ ¹å¤–ï¼Œæ‰€æœ‰éæ ‘å¶èŠ‚ç‚¹çš„å„¿å­æ•°åœ¨<code>âŒˆM/2âŒ‰</code>å’Œ<code>M</code>ä¹‹é—´</li><li>æ‰€æœ‰çš„æ ‘å¶éƒ½åœ¨ç›¸åŒçš„æ·±åº¦ä¸Šå¹¶æœ‰<code>âŒˆL/2âŒ‰</code>å’Œ<code>L</code> ä¹‹é—´ä¸ªæ•°æ®é¡¹</li></ul><p>Bæ ‘ä¸B+æ ‘ä¸åŒç‚¹ï¼š</p><ul><li>å•ä¸€èŠ‚ç‚¹å­˜å‚¨çš„å…ƒç´ æ›´å¤šï¼Œä½¿å¾—æŸ¥è¯¢çš„IOæ¬¡æ•°æ›´å°‘ï¼Œæ‰€ä»¥ä¹Ÿå°±ä½¿å¾—å®ƒæ›´é€‚åˆåšä¸ºæ•°æ®åº“MySQLçš„åº•å±‚æ•°æ®ç»“æ„äº†ã€‚</li><li>æ‰€æœ‰çš„æŸ¥è¯¢éƒ½è¦æŸ¥æ‰¾åˆ°å¶å­èŠ‚ç‚¹ï¼ŒæŸ¥è¯¢æ€§èƒ½æ˜¯ç¨³å®šçš„ï¼Œè€ŒBæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥æŸ¥æ‰¾åˆ°æ•°æ®ï¼Œæ‰€ä»¥ä¸ç¨³å®šã€‚</li><li>æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹å½¢æˆäº†ä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼Œæ›´åŠ ä¾¿äºæŸ¥æ‰¾ã€‚</li></ul><h1 id="ç¬¬-5-ç« -æ•£åˆ—"><a href="#ç¬¬-5-ç« -æ•£åˆ—" class="headerlink" title="ç¬¬ 5 ç«  æ•£åˆ—"></a>ç¬¬ 5 ç«  æ•£åˆ—</h1><h2 id="5-1-ä¸€èˆ¬æƒ³æ³•"><a href="#5-1-ä¸€èˆ¬æƒ³æ³•" class="headerlink" title="5.1 ä¸€èˆ¬æƒ³æ³•"></a>5.1 ä¸€èˆ¬æƒ³æ³•</h2><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%207.png" alt="Untitled"></p><h2 id="5-2-æ•£åˆ—å‡½æ•°"><a href="#5-2-æ•£åˆ—å‡½æ•°" class="headerlink" title="5.2 æ•£åˆ—å‡½æ•°"></a>5.2 æ•£åˆ—å‡½æ•°</h2><p>å¦‚æœå…³é”®å­—æ˜¯æ•´æ•°ä¸€èˆ¬åˆç†çš„æ–¹æ³•å°±æ˜¯ç›´æ¥è¿”å›<em>key mod Tablesize</em></p><p>å¦‚æœå…³é”®å­—æ˜¯å­—ç¬¦ä¸²ï¼Œ</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%208.png" alt="Untitled"></p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%209.png" alt="Untitled"></p><h2 id="5-3-åˆ†ç¦»é“¾æ¥æ³•"><a href="#5-3-åˆ†ç¦»é“¾æ¥æ³•" class="headerlink" title="5.3 åˆ†ç¦»é“¾æ¥æ³•"></a>5.3 åˆ†ç¦»é“¾æ¥æ³•</h2><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2010.png" alt="Untitled"></p><p>åˆ†ç¦»é“¾æ¥æ³•ï¼šå…¶åšæ³•æ˜¯å°†æ•£åˆ—åˆ°åŒä¸€ä¸ªå€¼çš„æ‰€æœ‰å…ƒç´ ä¿ç•™åˆ°ä¸€ä¸ªè¡¨ä¸­</p><h2 id="5-4-ä¸åŒé“¾è¡¨çš„æ•£åˆ—è¡¨"><a href="#5-4-ä¸åŒé“¾è¡¨çš„æ•£åˆ—è¡¨" class="headerlink" title="5.4 ä¸åŒé“¾è¡¨çš„æ•£åˆ—è¡¨"></a>5.4 ä¸åŒé“¾è¡¨çš„æ•£åˆ—è¡¨</h2><h3 id="5-4-1-çº¿æ€§æ¢æµ‹æ³•"><a href="#5-4-1-çº¿æ€§æ¢æµ‹æ³•" class="headerlink" title="5.4.1 çº¿æ€§æ¢æµ‹æ³•"></a>5.4.1 çº¿æ€§æ¢æµ‹æ³•</h3><p>åœ¨çº¿æ€§æ¢æµ‹æ³•ä¸­ï¼Œå‡½æ•°fæ˜¯içš„çº¿æ€§å‡½æ•°ï¼Œå…¸å‹æƒ…å½¢æ˜¯$f(i) = i$</p><h3 id="5-4-2-å¹³æ–¹æ¢æµ‹æ³•"><a href="#5-4-2-å¹³æ–¹æ¢æµ‹æ³•" class="headerlink" title="5.4.2 å¹³æ–¹æ¢æµ‹æ³•"></a>5.4.2 å¹³æ–¹æ¢æµ‹æ³•</h3><p>å¹³æ–¹æ¢æµ‹æ˜¯æ¶ˆé™¤çº¿æ€§æ¢æµ‹ä¸­ä¸€æ¬¡èšé›†é—®é¢˜çš„å†²çªè§£å†³æ–¹æ³•ã€‚</p><p>å¹³æ–¹æ¢æµ‹å°±æ˜¯å†²çªå‡½æ•°ä¸ºäºŒæ¬¡çš„æ¢æµ‹æ–¹æ³•ï¼Œæµè¡Œçš„é€‰æ‹©æ˜¯$f(i)=i^2$</p><p>å®šç†ï¼šå¦‚æœä½¿ç”¨å¹³æ–¹æ¢æµ‹ï¼Œä¸”è¡¨çš„å¤§å°æ˜¯ç´ æ•°ï¼Œé‚£ä¹ˆå½“è¡¨è‡³å°‘æœ‰ä¸€åŠæ˜¯ç©ºçš„æ—¶å€™æ€»èƒ½å¤Ÿæ’å…¥ä¸€ä¸ªæ–°å…ƒç´ </p><h3 id="5-4-3-åŒæ•£åˆ—"><a href="#5-4-3-åŒæ•£åˆ—" class="headerlink" title="5.4.3 åŒæ•£åˆ—"></a>5.4.3 åŒæ•£åˆ—</h3><p>å¯¹äºåŒæ•£åˆ—ï¼Œä¸€ç§æµè¡Œçš„é€‰æ‹©æ˜¯$f(i)=i*hash_2(x)$</p><h2 id="5-5-å†æ•£åˆ—"><a href="#5-5-å†æ•£åˆ—" class="headerlink" title="5.5 å†æ•£åˆ—"></a>5.5 å†æ•£åˆ—</h2><p>å»ºç«‹å¦å¤–ä¸€ä¸ªå¤§çº¦ä¸¤å€å¤§çš„è¡¨ï¼ˆè€Œä¸”ä½¿ç”¨ä¸€ä¸ªç›¸å…³çš„æ–°æ•£åˆ—å‡½æ•°ï¼‰ï¼Œæ‰«ææ•´ä¸ªåŸå§‹æ•£åˆ—è¡¨ï¼Œè®¡ç®—æ¯ä¸ªï¼ˆæœªåˆ é™¤çš„ï¼‰å…ƒç´ çš„æ–°æ•£åˆ—å€¼å¹¶å°†å…¶æ’å…¥åˆ°æ–°è¡¨ä¸­</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2011.png" alt="Untitled"></p><h2 id="5-6-æ ‡å‡†åº“ä¸­çš„æ•£åˆ—è¡¨"><a href="#5-6-æ ‡å‡†åº“ä¸­çš„æ•£åˆ—è¡¨" class="headerlink" title="5.6 æ ‡å‡†åº“ä¸­çš„æ•£åˆ—è¡¨"></a>5.6 æ ‡å‡†åº“ä¸­çš„æ•£åˆ—è¡¨</h2><h2 id="5-7-æœ€åæƒ…å½¢ä¸‹O-1-è®¿é—®çš„æ•£åˆ—è¡¨"><a href="#5-7-æœ€åæƒ…å½¢ä¸‹O-1-è®¿é—®çš„æ•£åˆ—è¡¨" class="headerlink" title="5.7 æœ€åæƒ…å½¢ä¸‹O(1)è®¿é—®çš„æ•£åˆ—è¡¨"></a>5.7 æœ€åæƒ…å½¢ä¸‹O(1)è®¿é—®çš„æ•£åˆ—è¡¨</h2><h3 id="5-7-1-å®Œç¾æ•£åˆ—"><a href="#5-7-1-å®Œç¾æ•£åˆ—" class="headerlink" title="5.7.1 å®Œç¾æ•£åˆ—"></a>5.7.1 å®Œç¾æ•£åˆ—</h3><h3 id="5-7-2-å¸ƒè°·é¸Ÿæ•£åˆ—"><a href="#5-7-2-å¸ƒè°·é¸Ÿæ•£åˆ—" class="headerlink" title="5.7.2 å¸ƒè°·é¸Ÿæ•£åˆ—"></a>5.7.2 å¸ƒè°·é¸Ÿæ•£åˆ—</h3><p>åœ¨å¸ƒè°·é¸Ÿæ•£åˆ—ä¸­ï¼Œå‡è®¾æœ‰Nä¸ªé¡¹ã€‚æˆ‘ä»¬ç»´æŠ¤ä¸¤ä¸ªåˆ†åˆ«è¶…è¿‡åŠç©ºçš„è¡¨ï¼Œä¸”æœ‰ä¸¤ä¸ªç‹¬ç«‹çš„æ•£åˆ—å‡½æ•°ï¼Œå¯ä»¥æŠŠæ¯ä¸ªé¡¹åˆ†é…åˆ°æ¯ä¸ªè¡¨ä¸­çš„ä¸€ä¸ªä½ç½®ã€‚å¸ƒè°·é¸Ÿæ•£åˆ—ä¿æŒä¸å˜çš„æ˜¯ä¸€ä¸ªé¡¹æ€»ä¼šè¢«å­˜å‚¨åœ¨è¿™ä¸¤ä¸ªä½ç½®ä¹‹ä¸€ã€‚</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2012.png" alt="Untitled"></p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2013.png" alt="Untitled"></p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2014.png" alt="Untitled"></p><h3 id="5-7-3-è·³æˆ¿å­æ•£åˆ—"><a href="#5-7-3-è·³æˆ¿å­æ•£åˆ—" class="headerlink" title="5.7.3 è·³æˆ¿å­æ•£åˆ—"></a>5.7.3 è·³æˆ¿å­æ•£åˆ—</h3><p>è·³æˆ¿å­æ•£åˆ—çš„æ€è·¯æ˜¯ç”¨äº‹å…ˆç¡®å®šçš„ã€å¯¹è®¡ç®—æœºçš„åº•å±‚ä½“ç³»ç»“æ„è€Œè¨€æ˜¯æœ€ä¼˜çš„ä¸€ä¸ªå¸¸æ•°ï¼Œç»™æ¢æµ‹åºåˆ—çš„æœ€å¤§é•¿åº¦åŠ ä¸ªä¸Šç•Œã€‚è¿™æ ·åšå¯ä»¥ç»™å‡ºå¸¸æ•°é›†çš„æœ€åæŸ¥è¯¢æ—¶é—´ï¼Œå¹¶ä¸”ä¸å¸ƒè°·é¸Ÿæ•£åˆ—ä¸€æ ·ï¼ŒæŸ¥è¯¢å¯ä»¥å¹¶è¡ŒåŒ–ï¼Œä»¥åŒæ—¶æ£€æŸ¥å¯ç”¨ä½ç½®çš„æœ‰é™é›†ã€‚</p><h2 id="5-8-é€šç”¨æ•£åˆ—æ³•"><a href="#5-8-é€šç”¨æ•£åˆ—æ³•" class="headerlink" title="5.8 é€šç”¨æ•£åˆ—æ³•"></a>5.8 é€šç”¨æ•£åˆ—æ³•</h2><h1 id="ç¬¬-6-ç« -ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå †ï¼‰"><a href="#ç¬¬-6-ç« -ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå †ï¼‰" class="headerlink" title="ç¬¬ 6 ç«  ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå †ï¼‰"></a>ç¬¬ 6 ç«  ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå †ï¼‰</h1><h2 id="6-1-æ¨¡å‹"><a href="#6-1-æ¨¡å‹" class="headerlink" title="6.1 æ¨¡å‹"></a>6.1 æ¨¡å‹</h2><p>ä¼˜å…ˆé˜Ÿåˆ—æ˜¯å…è®¸è‡³å°‘ä¸‹åˆ—ä¸¤ç§æ“ä½œçš„æ•°æ®ç»“æ„ï¼šæ’å…¥å’Œåˆ é™¤æœ€å°è€…ã€‚</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2015.png" alt="Untitled"></p><h2 id="6-2-ä¸€äº›ç®€å•çš„å®ç°"><a href="#6-2-ä¸€äº›ç®€å•çš„å®ç°" class="headerlink" title="6.2 ä¸€äº›ç®€å•çš„å®ç°"></a>6.2 ä¸€äº›ç®€å•çš„å®ç°</h2><ol><li>ä½¿ç”¨ç®€å•é“¾è¡¨</li><li>ä½¿ç”¨äºŒå‰æŸ¥æ‰¾æ ‘</li></ol><h2 id="6-3-äºŒå‰å †"><a href="#6-3-äºŒå‰å †" class="headerlink" title="6.3 äºŒå‰å †"></a>6.3 äºŒå‰å †</h2><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2016.png" alt="Untitled"></p><h3 id="6-3-1-ç»“æ„æ€§è´¨"><a href="#6-3-1-ç»“æ„æ€§è´¨" class="headerlink" title="6.3.1 ç»“æ„æ€§è´¨"></a>6.3.1 ç»“æ„æ€§è´¨</h3><p>å †æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2017.png" alt="Untitled"></p><ol><li>æ’å…¥</li></ol><p>ä¸ºå°†ä¸€ä¸ªå…ƒç´ Xæ’å…¥åˆ°å †ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªå¯ç”¨ä½ç½®åˆ›å»ºä¸€ä¸ªç©ºç©´ï¼Œå¦åˆ™è¯¥å †å°†ä¸æ˜¯å®Œå…¨ç†Ÿï¼Œå¦‚æœå¯ä»¥æ”¾åœ¨è¯¥ç©ºç©´ä¸­è€Œä¸ç ´åå †çš„åºï¼Œé‚£ä¹ˆæ’å…¥å®Œæˆã€‚å¦åˆ™æˆ‘ä»¬æŠŠç©ºç©´çš„çˆ¶èŠ‚ç‚¹ä¸Šçš„å…ƒç´ ç§»å…¥è¯¥ç©ºç©´ä¸­ï¼Œè¿™æ ·ç©ºç©´å°±æœç€æ ¹çš„æ–¹å‘ä¸Šå†’ä¸€æ­¥ã€‚ç»§ç»­è¯¥è¿‡ç¨‹ç›´åˆ°Xèƒ½è¢«æ”¾å…¥ç©ºç©´ä¸­ä¸ºæ­¢ã€‚</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2018.png" alt="Untitled"></p><ol><li>åˆ é™¤æœ€å°å…ƒ</li></ol><p>åˆ é™¤æœ€å°å…ƒä»¥ç±»ä¼¼äºæ’å…¥çš„æ–¹å¼å¤„ç†ã€‚å½“åˆ é™¤ä¸€ä¸ªæœ€å°å…ƒæ—¶ï¼Œè¦åœ¨è·ŸèŠ‚ç‚¹å»ºç«‹ä¸€ä¸ªç©ºç©´ã€‚ç”±äºç°åœ¨å †å°‘äº†ä¸€ä¸ªå…ƒç´ ï¼Œå› æ­¤å †ä¸­æœ€åä¸€ä¸ªå…ƒç´ Xå¿…é¡»ç§»åŠ¨åˆ°è¯¥å †çš„æŸä¸ªåœ°æ–¹ã€‚å¦‚æœXå¯ä»¥è¢«æ”¾å€’ç©ºç©´ä¸­ï¼Œé‚£ä¹ˆdeleteMinå®Œæˆï¼Œå¦åˆ™æˆ‘ä»¬å°†ç©ºç©´çš„ä¸¤ä¸ªå„¿å­ä¸­è¾ƒå°è€…ç§»å…¥ç©ºç©´ï¼Œè¿™æ ·å°±æŠŠç©ºç©´å‘ä¸‹æ¨äº†ä¸€å±‚ï¼Œé‡å¤è¯¥æ­¥éª¤ç›´åˆ°Xå¯ä»¥è¢«æ”¾å…¥ç©ºç©´ä¸­ã€‚</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2019.png" alt="Untitled"></p><h2 id="6-4-ä¼˜å…ˆé˜Ÿåˆ—çš„åº”ç”¨"><a href="#6-4-ä¼˜å…ˆé˜Ÿåˆ—çš„åº”ç”¨" class="headerlink" title="6.4 ä¼˜å…ˆé˜Ÿåˆ—çš„åº”ç”¨"></a>6.4 ä¼˜å…ˆé˜Ÿåˆ—çš„åº”ç”¨</h2><h2 id="6-5-d-å †"><a href="#6-5-d-å †" class="headerlink" title="6.5 d-å †"></a>6.5 d-å †</h2><p>d-å †æ˜¯äºŒå‰å †çš„ç®€å•æ¨å¹¿ï¼Œå°±åƒä¸€ä¸ªäºŒå‰å †ï¼Œåªæ˜¯æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æœ‰dä¸ªå„¿å­ï¼ˆå› æ­¤ï¼ŒäºŒå‰å †æ˜¯2-å †ï¼‰</p><h2 id="6-6-å·¦å¼å †"><a href="#6-6-å·¦å¼å †" class="headerlink" title="6.6 å·¦å¼å †"></a>6.6 å·¦å¼å †</h2><p>å·¦å¼å †åƒäºŒå‰å †é‚£æ ·ä¹Ÿå…·æœ‰ç»“æ„æ€§å’Œæœ‰åºæ€§ã€‚å·¦å¼å †å…·æœ‰ç›¸åŒçš„å †åºæ€§è´¨ï¼Œå·¦å¼å †ä¹Ÿæ˜¯äºŒå‰æ ‘ï¼Œå·¦å¼å †å’Œå‰äºŒæ ‘å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼šå·¦å¼å †ä¸æ˜¯ç†æƒ³å¹³è¡¡çš„ï¼Œè€Œå®é™…ä¸Šè¶‹å‘äºéå¸¸ä¸å¹³è¡¡ã€‚</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2020.png" alt="Untitled"></p><h2 id="6-7-æ–œå †"><a href="#6-7-æ–œå †" class="headerlink" title="6.7 æ–œå †"></a>6.7 æ–œå †</h2><p>æ–œå †æ˜¯å·¦å¼å †çš„è‡ªè°ƒèŠ‚å½¢å¼ï¼Œå®ç°èµ·æ¥æå…¶ç®€å•ã€‚</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2021.png" alt="Untitled"></p><h2 id="6-8-äºŒé¡¹é˜Ÿåˆ—"><a href="#6-8-äºŒé¡¹é˜Ÿåˆ—" class="headerlink" title="6.8 äºŒé¡¹é˜Ÿåˆ—"></a>6.8 äºŒé¡¹é˜Ÿåˆ—</h2><h3 id="6-8-1-äºŒé¡¹é˜Ÿåˆ—ç»“æ„"><a href="#6-8-1-äºŒé¡¹é˜Ÿåˆ—ç»“æ„" class="headerlink" title="6.8.1 äºŒé¡¹é˜Ÿåˆ—ç»“æ„"></a>6.8.1 äºŒé¡¹é˜Ÿåˆ—ç»“æ„</h3><p>ä¸€ä¸ªäºŒé¡¹é˜Ÿåˆ—ä¸æ˜¯ä¸€é¢—å †åºçš„æ ‘ï¼Œè€Œæ˜¯å †åºçš„æ ‘çš„é›†åˆï¼Œç§°ä¸ºæ£®æ—ã€‚</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2022.png" alt="Untitled"></p><h1 id="ç¬¬-7-ç« -æ’åº"><a href="#ç¬¬-7-ç« -æ’åº" class="headerlink" title="ç¬¬ 7 ç«  æ’åº"></a>ç¬¬ 7 ç«  æ’åº</h1><h2 id="7-2-æ’å…¥æ’åº"><a href="#7-2-æ’å…¥æ’åº" class="headerlink" title="7.2 æ’å…¥æ’åº"></a>7.2 æ’å…¥æ’åº</h2><p>æ’å…¥æ’åºç”±N-1è¶Ÿæ’åºç»„æˆã€‚å¯¹äºp=1åˆ°N-1è¶Ÿï¼Œæ’å…¥æ’åºä¿è¯ä»ä½ç½®0åˆ°ä½ç½®pä¸Šçš„å…ƒç´ ä¸ºå·²æ’åºçŠ¶æ€ã€‚</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2023.png" alt="Untitled"></p><p>æ—¶é—´å¤æ‚åº¦ï¼š$O(N^2)$</p><p>å®šç†ï¼šé€šè¿‡äº¤æ¢ç›¸é‚»å…ƒç´ è¿›è¡Œæ’åºçš„ä»»ä½•ç®—æ³•å¹³å‡éƒ½éœ€è¦$Î©(N^2)$æ—¶é—´</p><h2 id="7-4-å¸Œå°”æ’åº"><a href="#7-4-å¸Œå°”æ’åº" class="headerlink" title="7.4 å¸Œå°”æ’åº"></a>7.4 å¸Œå°”æ’åº</h2><p>å®šç†ï¼šä½¿ç”¨å¸Œå°”æ’åºæœ€åæƒ…å½¢è¿è¡Œæ—¶é—´ä¸º$O(N^2)$</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2024.png" alt="Untitled"></p><h2 id="7-5-å †æ’åº"><a href="#7-5-å †æ’åº" class="headerlink" title="7.5 å †æ’åº"></a>7.5 å †æ’åº</h2><p>ä¼˜å…ˆé˜Ÿåˆ—å¯ä»¥ç”¨ä»¥$O(NlogN)$æ—¶é—´çš„æ’åºã€‚åŸºäºè¯¥æ€æƒ³çš„ç®—æ³•å«åšå †æ’åºã€‚</p><h2 id="7-6-å½’å¹¶æ’åº"><a href="#7-6-å½’å¹¶æ’åº" class="headerlink" title="7.6 å½’å¹¶æ’åº"></a>7.6 å½’å¹¶æ’åº</h2><p>å½’å¹¶æ’åºä»¥O(NlogN)æœ€åæƒ…å½¢æ—¶é—´è¿è¡Œã€‚å®ƒæ˜¯é€’å½’ç®—æ³•ä¸€ä¸ªå¥½çš„å®ä¾‹ã€‚</p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2025.png" alt="Untitled"></p><h2 id="7-7-å¿«é€Ÿæ’åº"><a href="#7-7-å¿«é€Ÿæ’åº" class="headerlink" title="7.7 å¿«é€Ÿæ’åº"></a>7.7 å¿«é€Ÿæ’åº</h2><p>å¿«é€Ÿæ’åºæ˜¯äº‹ä»¶ä¸­ä¸€ç§å¿«é€Ÿçš„æ’åºç®—æ³•ï¼Œåœ¨C++æˆ–å¯¹JavaåŸºæœ¬ç±»å‹çš„æ’åºæ±‡æ€»ç‰¹åˆ«æœ‰ç”¨ã€‚å¹³å‡è¿è¡Œæ—¶é—´æ˜¯$O(NlogN)$ã€‚</p><h1 id="ç¬¬-9-ç« -å›¾è®º"><a href="#ç¬¬-9-ç« -å›¾è®º" class="headerlink" title="ç¬¬ 9 ç«  å›¾è®º"></a>ç¬¬ 9 ç«  å›¾è®º</h1><h2 id="9-1-å®šä¹‰"><a href="#9-1-å®šä¹‰" class="headerlink" title="9.1 å®šä¹‰"></a>9.1 å®šä¹‰</h2><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2026.png" alt="Untitled"></p><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2027.png" alt="Untitled"></p><h2 id="9-2-æ‹“æ‰‘æ’åº"><a href="#9-2-æ‹“æ‰‘æ’åº" class="headerlink" title="9.2 æ‹“æ‰‘æ’åº"></a>9.2 æ‹“æ‰‘æ’åº</h2><h2 id="9-3-æœ€çŸ­è·¯å¾„ç®—æ³•"><a href="#9-3-æœ€çŸ­è·¯å¾„ç®—æ³•" class="headerlink" title="9.3 æœ€çŸ­è·¯å¾„ç®—æ³•"></a>9.3 æœ€çŸ­è·¯å¾„ç®—æ³•</h2><h3 id="9-3-1-æ— æƒæœ€çŸ­è·¯å¾„"><a href="#9-3-1-æ— æƒæœ€çŸ­è·¯å¾„" class="headerlink" title="9.3.1 æ— æƒæœ€çŸ­è·¯å¾„"></a>9.3.1 æ— æƒæœ€çŸ­è·¯å¾„</h3><p><img src="/images/data_structures_and_algorithms_analysis/Untitled%2028.png" alt="Untitled"></p><h2 id="æœªå®Œ"><a href="#æœªå®Œ" class="headerlink" title="æœªå®Œ"></a>æœªå®Œ</h2><h1 id="ç¬¬-9-ç« -ç®—æ³•è®¾è®¡æŠ€å·§"><a href="#ç¬¬-9-ç« -ç®—æ³•è®¾è®¡æŠ€å·§" class="headerlink" title="ç¬¬ 9 ç«  ç®—æ³•è®¾è®¡æŠ€å·§"></a>ç¬¬ 9 ç«  ç®—æ³•è®¾è®¡æŠ€å·§</h1><h2 id="10-1-è´ªå©ªç®—æ³•"><a href="#10-1-è´ªå©ªç®—æ³•" class="headerlink" title="10.1 è´ªå©ªç®—æ³•"></a>10.1 è´ªå©ªç®—æ³•</h2><p>è´ªå©ªç®—æ³•åˆ†é˜¶æ®µåœ°å·¥ä½œï¼Œåœ¨æ¯ä¸€ä¸ªé˜¶æ®µå¯ä»¥è®¤ä¸ºæ‰€åšå†³å®šæ˜¯å¥½çš„ã€‚è€Œä¸è€ƒè™‘å°†æ¥çš„åæœã€‚</p><h2 id="10-2-åˆ†æ²»ç®—æ³•"><a href="#10-2-åˆ†æ²»ç®—æ³•" class="headerlink" title="10.2 åˆ†æ²»ç®—æ³•"></a>10.2 åˆ†æ²»ç®—æ³•</h2><p>åˆ†æ²»ç®—æ³•ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>åˆ†ï¼šé€’å½’è§£å†³è¾ƒå°çš„é—®é¢˜</li><li>æ²»ï¼šç„¶åä»å­é—®é¢˜çš„è§£æ„å»ºåŸé—®é¢˜çš„è§£</li></ul><h2 id="10-3-åŠ¨æ€è§„åˆ’"><a href="#10-3-åŠ¨æ€è§„åˆ’" class="headerlink" title="10.3 åŠ¨æ€è§„åˆ’"></a>10.3 åŠ¨æ€è§„åˆ’</h2><p>å°†é€’å½’ç®—æ³•é‡æ–°å†™æˆéé€’å½’ç®—æ³•ï¼Œè®©åè€…æŠŠé‚£äº›å­é—®é¢˜çš„ç­”æ¡ˆç³»ç»Ÿç¬¬è®°å½•åœ¨ä¸€ä¸ªè¡¨å†…ï¼Œåˆ©ç”¨è¿™ç§æ–¹æ³•çš„ä¸€ç§æŠ€å·§å«åšåŠ¨æ€è§„åˆ’</p><h2 id="10-4-éšæœºæ•°ç®—æ³•"><a href="#10-4-éšæœºæ•°ç®—æ³•" class="headerlink" title="10.4 éšæœºæ•°ç®—æ³•"></a>10.4 éšæœºæ•°ç®—æ³•</h2><h2 id="10-5-å›æº¯ç®—æ³•"><a href="#10-5-å›æº¯ç®—æ³•" class="headerlink" title="10.5 å›æº¯ç®—æ³•"></a>10.5 å›æº¯ç®—æ³•</h2><h1 id="ç¬¬-12-ç« -é«˜çº§æ•°æ®ç»“æ„åŠå…¶å®ç°"><a href="#ç¬¬-12-ç« -é«˜çº§æ•°æ®ç»“æ„åŠå…¶å®ç°" class="headerlink" title="ç¬¬ 12 ç«  é«˜çº§æ•°æ®ç»“æ„åŠå…¶å®ç°"></a>ç¬¬ 12 ç«  é«˜çº§æ•°æ®ç»“æ„åŠå…¶å®ç°</h1><h2 id="12-2-çº¢é»‘æ ‘"><a href="#12-2-çº¢é»‘æ ‘" class="headerlink" title="12.2 çº¢é»‘æ ‘"></a>12.2 çº¢é»‘æ ‘</h2><p>å¯¹çº¢é»‘æ ‘çš„æ“ä½œåœ¨æœ€åæƒ…å½¢ä¸‹èŠ±è´¹O(logN)æ—¶é—´</p><p>çº¢é»‘æ ‘æ˜¯å…·æœ‰ä¸‹åˆ—ç€è‰²æ€§è´¨çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼š</p><ul><li>æ¯ä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…ç€æˆçº¢è‰²ï¼Œæˆ–è€…ç€æˆé»‘è‰²</li><li>æ ¹æ˜¯é»‘è‰²çš„</li><li>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œé‚£ä¹ˆå®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²çš„</li><li>ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°ä¸€ä¸ªnullå¼•ç”¨çš„æ¯ä¸€æ¡è·¯å¾„å¿…é¡»åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ&quot;&gt;&lt;a href=&quot;#æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ&quot;&gt;&lt;/a&gt;æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ&lt;/h1&gt;&lt;h1 id=&quot;ç›®æ ‡&quot;&gt;&lt;a href=&quot;#ç›®æ ‡&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://zhangzhishun.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>IPFSåŸç†æ·±å…¥åˆ†æ</title>
    <link href="https://zhangzhishun.github.io/2022/01/18/distributed_storage/IPFS%E5%8E%9F%E7%90%86%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90/"/>
    <id>https://zhangzhishun.github.io/2022/01/18/distributed_storage/IPFS%E5%8E%9F%E7%90%86%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90/</id>
    <published>2022-01-18T02:29:15.000Z</published>
    <updated>2022-04-28T06:15:52.578Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã€‡ã€ç›®æ ‡"><a href="#ã€‡ã€ç›®æ ‡" class="headerlink" title="ã€‡ã€ç›®æ ‡"></a>ã€‡ã€ç›®æ ‡</h1><ol><li>ç†Ÿæ‚‰IPFSæ¦‚å¿µ</li><li>ç†Ÿæ‚‰IPFSä¸Šä¼ æ–‡ä»¶ã€ä¸‹è½½æ–‡ä»¶è¿‡ç¨‹</li></ol><h1 id="ä¸€ã€æ¦‚å¿µ"><a href="#ä¸€ã€æ¦‚å¿µ" class="headerlink" title="ä¸€ã€æ¦‚å¿µ"></a>ä¸€ã€æ¦‚å¿µ</h1><h2 id="2-BACKGROUND"><a href="#2-BACKGROUND" class="headerlink" title="2. BACKGROUND"></a>2. BACKGROUND</h2><h3 id="Distributed-Hash-Tables-DHTs"><a href="#Distributed-Hash-Tables-DHTs" class="headerlink" title="Distributed Hash Tables(DHTs)"></a>Distributed Hash Tables(DHTs)</h3><ol><li><p>Kademlia DHT</p><p> ä¼˜ç‚¹</p><ul><li>ã€é€šä¿¡æ€§èƒ½ã€‘é€šè¿‡å¤§è§„æ¨¡ç½‘ç»œé«˜æ•ˆæŸ¥æ‰¾:æŸ¥è¯¢å¹³å‡éœ€è¦é€šä¿¡$log_2(n)$å‘ä¸Šå–æ•´èŠ‚ç‚¹ã€‚(ä¾‹å¦‚ï¼Œä¸€ä¸ªç”±10,000,000ä¸ªèŠ‚ç‚¹ç»„æˆçš„ç½‘ç»œéœ€è¦20ä¸ªè·³æ•°)</li><li>ã€é€šä¿¡æ€§èƒ½ã€‘ä½åè°ƒå¼€é”€:ä¼˜åŒ–äº†å‘é€ç»™å…¶ä»–èŠ‚ç‚¹çš„æ§åˆ¶æ¶ˆæ¯çš„æ•°é‡</li><li>ã€å®‰å…¨ã€‘é€šè¿‡é€‰æ‹©é•¿æœŸå­˜åœ¨çš„èŠ‚ç‚¹æ¥æŠµæŠ—å„ç§æ”»å‡»</li><li>ã€åº”ç”¨ã€‘åœ¨å¯¹ç­‰åº”ç”¨ç¨‹åºä¸­å¹¿æ³›ä½¿ç”¨ï¼ŒåŒ…æ‹¬Gnutellaå’ŒBitTorrentï¼Œå½¢æˆäº†è¶…è¿‡2000ä¸‡ä¸ªèŠ‚ç‚¹çš„ç½‘ç»œã€‚</li></ul></li><li><p>Coral DSHT</p><p> ä¼˜ç‚¹</p><ul><li>ã€é€šä¿¡æ€§èƒ½ã€‘Kademliaå°†å€¼å­˜å‚¨åœ¨idä¸é”®æœ€æ¥è¿‘(ä½¿ç”¨XOR-distance)çš„èŠ‚ç‚¹ä¸­ã€‚è¿™å¹¶ä¸è€ƒè™‘åº”ç”¨ç¨‹åºæ•°æ®çš„å±€åŸŸæ€§ï¼Œå¿½ç•¥å¯èƒ½å·²ç»æ‹¥æœ‰æ•°æ®çš„è¿œèŠ‚ç‚¹ï¼Œå¹¶ä¸ç®¡æœ€è¿‘èŠ‚ç‚¹æ˜¯å¦éœ€è¦è¿™ä»½æ•°æ®è€Œå»å¼ºåˆ¶å®ƒä»¬å­˜å‚¨æ•°æ®ã€‚è¿™æµªè´¹äº†å¤§é‡çš„å­˜å‚¨å’Œå¸¦å®½ã€‚ç›¸åï¼ŒCoralåœ¨èƒ½å¤Ÿæä¾›æ•°æ®å—çš„å¯¹ç­‰èŠ‚ç‚¹å­˜å‚¨åœ°å€ä¿¡æ¯</li><li>ã€é€šä¿¡æ€§èƒ½ã€‘Coralå°†DHT APIä»get_value(key)æ”¾å®½ä¸ºget_any_values(key) (DSHTä¸­çš„â€œsloppyâ€)ã€‚è¿™ä»ç„¶å·¥ä½œç›´åˆ°Coralç”¨æˆ·åªéœ€è¦ä¸€ä¸ª(å·¥ä½œ)peerï¼Œè€Œä¸æ˜¯å®Œæ•´çš„åˆ—è¡¨ã€‚ä½œä¸ºäº¤æ¢ï¼ŒCoralåªèƒ½å°†å€¼çš„å­é›†åˆ†å‘åˆ°æœ€è¿‘çš„èŠ‚ç‚¹ï¼Œä»è€Œé¿å…äº†çƒ­ç‚¹(å½“ä¸€ä¸ªé”®å˜å¾—æµè¡Œæ—¶ï¼Œä¼šé‡è½½æ‰€æœ‰æœ€è¿‘çš„èŠ‚ç‚¹)</li><li>ã€é€šä¿¡æ€§èƒ½ã€‘Coralæ ¹æ®åŒºåŸŸå’Œå¤§å°ç»„ç»‡äº†ä¸€ä¸ªç§°ä¸ºç°‡çš„ç‹¬ç«‹DSHTå±‚æ¬¡ç»“æ„ã€‚è¿™ä½¿å¾—èŠ‚ç‚¹å¯ä»¥é¦–å…ˆæŸ¥è¯¢å…¶åŒºåŸŸå†…çš„å¯¹ç­‰èŠ‚ç‚¹ï¼Œåœ¨ä¸æŸ¥è¯¢è¿œå¤„èŠ‚ç‚¹çš„æƒ…å†µä¸‹æŸ¥æ‰¾é™„è¿‘çš„æ•°æ®ï¼Œå¤§å¤§å‡å°‘äº†æŸ¥æ‰¾çš„å»¶è¿Ÿ</li></ul></li><li><p>S/Kademlia DHT</p><p>S/Kademliaæ‰©å±•äº†Kademliaä»¥ä¸¤ç§ç‰¹åˆ«é‡è¦çš„æ–¹å¼æ¥æŠµå¾¡æ¶æ„æ”»å‡»:</p><ul><li>ã€å®‰å…¨ã€‘S/Kademliaæä¾›äº†å®‰å…¨çš„NodeIdç”Ÿæˆæ–¹æ¡ˆï¼Œå¹¶é˜²æ­¢å¥³å·«æ”»å‡»ã€‚å®ƒè¦æ±‚èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªPKIå¯†é’¥å¯¹ï¼Œä»å¯†é’¥å¯¹ä¸­è·å¾—è‡ªå·±çš„èº«ä»½ï¼Œå¹¶å¯¹å½¼æ­¤çš„æ¶ˆæ¯è¿›è¡Œç­¾åã€‚ä¸€ç§æ–¹æ¡ˆåŒ…æ‹¬ä¸€ä¸ªå·¥ä½œè¯æ˜åŠ å¯†è°œé¢˜ï¼Œä»¥ä½¿ç”Ÿæˆå¥³å·«æ”»å‡»çš„æˆæœ¬å¾ˆé«˜</li><li>ã€å®‰å…¨ã€‘S/KademliaèŠ‚ç‚¹åœ¨ä¸ç›¸äº¤çš„è·¯å¾„ä¸ŠæŸ¥æ‰¾å€¼ï¼Œä»¥ç¡®ä¿åœ¨ç½‘ç»œä¸­å­˜åœ¨å¤§é‡å¯¹æ‰‹çš„æƒ…å†µä¸‹ï¼Œè¯šå®çš„èŠ‚ç‚¹å¯ä»¥ç›¸äº’è¿æ¥ã€‚å³ä½¿å¯¹æŠ—åˆ†æ•°é«˜è¾¾ä¸€åŠçš„èŠ‚ç‚¹S/Kademliaå®ç°äº†0.85çš„æˆåŠŸç‡ï¼Œ</li></ul></li></ol><h3 id="Block-Exchanges-BitTorrentc"><a href="#Block-Exchanges-BitTorrentc" class="headerlink" title="Block Exchanges - BitTorrentc"></a>Block Exchanges - BitTorrentc</h3><p>BitTorrentï¼ˆç®€ç§°BTï¼‰æ˜¯ä¸€ä¸ªæ–‡ä»¶åˆ†å‘åè®®ï¼Œæ¯ä¸ªä¸‹è½½è€…åœ¨ä¸‹è½½çš„åŒæ—¶ä¸æ–­å‘å…¶ä»–ä¸‹è½½è€…ä¸Šä¼ å·²ä¸‹è½½çš„æ•°æ®ã€‚</p><p>BitTorrentæ˜¯ä¸€ä¸ªå¹¿æ³›æˆåŠŸçš„ç‚¹å¯¹ç‚¹æ–‡ä»¶å¤„ç†ç³»ç»Ÿï¼Œå®ƒæˆåŠŸåœ°åè°ƒäº†äº’ä¸ä¿¡ä»»çš„ç‚¹(ç¾¤)ç½‘ç»œï¼Œåœ¨ç›¸äº’åˆ†å‘æ–‡ä»¶çš„è¿‡ç¨‹ä¸­è¿›è¡Œåˆä½œã€‚BitTorrentåŠå…¶ç”Ÿæ€ç³»ç»Ÿä¸­IPFSè®¾è®¡çš„å…³é”®ç‰¹æ€§åŒ…æ‹¬:</p><ol><li>BitTorrentçš„æ•°æ®äº¤æ¢åè®®ä½¿ç”¨äº†ä¸€ç§ç±»ä¼¼äºtit-for-tatçš„ç­–ç•¥ï¼Œå¥–åŠ±é‚£äº›ç›¸äº’è´¡çŒ®çš„èŠ‚ç‚¹ï¼Œæƒ©ç½šé‚£äº›åªçªƒå–åˆ«äººèµ„æºçš„èŠ‚ç‚¹</li><li>BitTorrentåŒè¡Œè·Ÿè¸ªæ–‡ä»¶ç‰‡æ®µçš„å¯ç”¨æ€§ï¼Œä¼˜å…ˆå‘é€æœ€ç½•è§çš„ç‰‡æ®µã€‚è¿™å‡è½»äº†ç§å­çš„è´Ÿæ‹…ï¼Œä½¿éç§å­åŒä¼´èƒ½å¤Ÿç›¸äº’äº¤æ˜“</li><li>BitTorrentæ ‡å‡†çš„tit-for-tatæ˜“å—æŸäº›åˆ©ç”¨å¸¦å®½å…±äº«ç­–ç•¥çš„æ”»å‡»ã€‚PropShareæ˜¯ä¸€ç§ä¸åŒçš„å¯¹ç­‰å¸¦å®½åˆ†é…ç­–ç•¥ï¼Œå®ƒèƒ½æ›´å¥½åœ°æŠµæŠ—åˆ©ç”¨ç­–ç•¥ï¼Œå¹¶æé«˜ç¾¤çš„æ€§èƒ½</li></ol><h3 id="Version-Control-Systems-Git"><a href="#Version-Control-Systems-Git" class="headerlink" title="Version Control Systems - Git"></a>Version Control Systems - Git</h3><p>ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæä¾›äº†å¯¹éšæ—¶é—´å˜åŒ–çš„æ–‡ä»¶å»ºæ¨¡çš„å·¥å…·ï¼Œå¹¶æœ‰æ•ˆåœ°åˆ†å‘ä¸åŒçš„ç‰ˆæœ¬ã€‚æµè¡Œçš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»ŸGitæä¾›äº†ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„Merkle dagå¯¹è±¡æ¨¡å‹ï¼Œå®ƒä»¥åˆ†å¸ƒå¼å‹å¥½çš„æ–¹å¼æ•è·å¯¹æ–‡ä»¶ç³»ç»Ÿæ ‘çš„æ›´æ”¹ã€‚</p><ol><li>ä¸å¯å˜å¯¹è±¡ä»£è¡¨Files (blob)ã€Directories (tree)å’ŒChanges (commit)</li><li>å¯¹è±¡æ˜¯å†…å®¹å¯»å€çš„ï¼Œé€šè¿‡å…¶å†…å®¹çš„åŠ å¯†æ•£åˆ—</li><li>ä¸å…¶ä»–ç‰©ä½“çš„é“¾æ¥è¢«åµŒå…¥ï¼Œå½¢æˆä¸€ä¸ªé»˜å…‹å°”DAGã€‚è¿™æä¾›äº†è®¸å¤šæœ‰ç”¨çš„å®Œæ•´æ€§å’Œå·¥ä½œæµå±æ€§</li><li>å¤§å¤šæ•°ç‰ˆæœ¬åŒ–å…ƒæ•°æ®(åˆ†æ”¯ã€æ ‡ç­¾ç­‰)éƒ½æ˜¯ç®€å•çš„æŒ‡é’ˆå¼•ç”¨ï¼Œå› æ­¤åˆ›å»ºå’Œæ›´æ–°çš„æˆæœ¬å¾ˆä½</li><li>ç‰ˆæœ¬æ›´æ”¹ä»…æ›´æ–°å¼•ç”¨æˆ–æ·»åŠ å¯¹è±¡</li><li>å°†ç‰ˆæœ¬æ›´æ”¹åˆ†å‘ç»™å…¶ä»–ç”¨æˆ·åªæ˜¯ç®€å•åœ°ä¼ è¾“å¯¹è±¡å’Œæ›´æ–°è¿œç¨‹å¼•ç”¨</li></ol><h3 id="Self-Certified-Filesystems-SFS"><a href="#Self-Certified-Filesystems-SFS" class="headerlink" title="Self-Certified Filesystems - SFS"></a>Self-Certified Filesystems - SFS</h3><p>SFS[12,11]æå‡ºäº†ä¸¤ç§å¼•äººæ³¨ç›®çš„å®ç°ï¼š</p><ul><li>åˆ†å¸ƒå¼ä¿¡ä»»é“¾</li><li>å¹³ç­‰å…±äº«çš„å…¨å±€å‘½åç©ºé—´</li></ul><p>SFSå¼•å…¥äº†ä¸€ç§ç”¨äºæ„å»ºè‡ªè®¤è¯æ–‡ä»¶ç³»ç»Ÿçš„æŠ€æœ¯:</p><p>ä½¿ç”¨ä»¥ä¸‹schemeï¼š</p><p><code>/sfs/&lt;Location&gt;:&lt;HostID&gt;</code></p><p>å…¶ä¸­Locationæ˜¯æœåŠ¡å™¨çš„ç½‘ç»œåœ°å€ï¼Œå¹¶ä¸”:HostID = hash(public_key || Location)</p><p>å› æ­¤SFSæ–‡ä»¶ç³»ç»Ÿçš„åç§°è¯æ˜äº†å®ƒçš„æœåŠ¡å™¨ã€‚ç”¨æˆ·å¯ä»¥éªŒè¯æœåŠ¡å™¨æä¾›çš„å…¬é’¥ï¼Œåå•†å…±äº«å¯†é’¥ï¼Œå¹¶ç¡®ä¿æ‰€æœ‰æµé‡çš„å®‰å…¨ã€‚æ‰€æœ‰SFSå®ä¾‹å…±äº«ä¸€ä¸ªå…¨å±€å‘½åç©ºé—´ï¼Œå…¶ä¸­çš„åç§°åˆ†é…æ˜¯åŠ å¯†çš„ï¼Œä¸å—ä»»ä½•é›†ä¸­ä¸»ä½“çš„é™åˆ¶ã€‚</p><h2 id="3-IPFS-DESIGN"><a href="#3-IPFS-DESIGN" class="headerlink" title="3. IPFS DESIGN"></a>3. IPFS DESIGN</h2><p>IPFSåè®®è¢«åˆ’åˆ†ä¸ºè´Ÿè´£ä¸åŒåŠŸèƒ½çš„å­åè®®å †æ ˆ</p><h3 id="3-1-èº«ä»½â€”â€”ç®¡ç†èŠ‚ç‚¹èº«ä»½çš„ç”Ÿæˆå’Œæ›´æ–°"><a href="#3-1-èº«ä»½â€”â€”ç®¡ç†èŠ‚ç‚¹èº«ä»½çš„ç”Ÿæˆå’Œæ›´æ–°" class="headerlink" title="3.1 èº«ä»½â€”â€”ç®¡ç†èŠ‚ç‚¹èº«ä»½çš„ç”Ÿæˆå’Œæ›´æ–°"></a>3.1 èº«ä»½â€”â€”ç®¡ç†èŠ‚ç‚¹èº«ä»½çš„ç”Ÿæˆå’Œæ›´æ–°</h3><p>èŠ‚ç‚¹ç”±ä¸€ä¸ªNodeIdæ ‡è¯†ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¬é’¥çš„åŠ å¯†å“ˆå¸Œï¼Œæ˜¯ç”¨S/Kademliaçš„é™æ€åŠ å¯†è°œé¢˜åˆ›å»ºçš„ã€‚èŠ‚ç‚¹å­˜å‚¨å®ƒä»¬çš„å…¬é’¥å’Œç§é’¥(ä½¿ç”¨å¯†ç çŸ­è¯­åŠ å¯†)ã€‚ç”¨æˆ·å¯ä»¥åœ¨æ¯æ¬¡å¯åŠ¨æ—¶è‡ªç”±å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹æ ‡è¯†ï¼Œå°½ç®¡è¿™æ ·ä¼šæŸå¤±å·²ç§¯ç´¯çš„ç½‘ç»œåˆ©ç›Šã€‚èŠ‚ç‚¹è¢«æ¿€åŠ±ä¿æŒä¸å˜</p><h3 id="3-2-ç½‘ç»œâ€”â€”ç®¡ç†ä¸å…¶ä»–å¯¹ç­‰ä½“çš„è¿æ¥ï¼Œä½¿ç”¨å„ç§åº•å±‚ç½‘ç»œåè®®ã€‚å¯é…ç½®çš„"><a href="#3-2-ç½‘ç»œâ€”â€”ç®¡ç†ä¸å…¶ä»–å¯¹ç­‰ä½“çš„è¿æ¥ï¼Œä½¿ç”¨å„ç§åº•å±‚ç½‘ç»œåè®®ã€‚å¯é…ç½®çš„" class="headerlink" title="3.2 ç½‘ç»œâ€”â€”ç®¡ç†ä¸å…¶ä»–å¯¹ç­‰ä½“çš„è¿æ¥ï¼Œä½¿ç”¨å„ç§åº•å±‚ç½‘ç»œåè®®ã€‚å¯é…ç½®çš„"></a>3.2 ç½‘ç»œâ€”â€”ç®¡ç†ä¸å…¶ä»–å¯¹ç­‰ä½“çš„è¿æ¥ï¼Œä½¿ç”¨å„ç§åº•å±‚ç½‘ç»œåè®®ã€‚å¯é…ç½®çš„</h3><p>IPFSç½‘ç»œæ ˆç‰¹æ€§:</p><ul><li>ä¼ è¾“:IPFSå¯ä»¥ä½¿ç”¨ä»»ä½•ä¼ è¾“åè®®ï¼Œæœ€é€‚åˆäºWebRTCæ•°æ®é€šé“(ç”¨äºæµè§ˆå™¨è¿æ¥)æˆ–uTP(LEDBAT)</li><li>å¯é æ€§:å¦‚æœåº•å±‚ç½‘ç»œä¸æä¾›ï¼ŒIPFSå¯ä»¥ä½¿ç”¨uTP (LEDBAT[14])æˆ–SCTP[15]æä¾›å¯é æ€§</li><li>è¿é€šæ€§:IPFSä¹Ÿä½¿ç”¨ICE NATç©¿è¶ŠæŠ€æœ¯</li><li>å®Œæ•´æ€§:å¯é€‰åœ°ä½¿ç”¨å“ˆå¸Œæ ¡éªŒå’Œæ£€æŸ¥æ¶ˆæ¯çš„å®Œæ•´æ€§</li><li>çœŸå®æ€§:å¯é€‰åœ°æ£€æŸ¥mes- sageçš„çœŸå®æ€§ï¼Œé€šè¿‡ä½¿ç”¨å‘é€æ–¹çš„ç‰¹æƒå¯†é’¥è¿›è¡Œæ•°å­—ç­¾åã€‚</li></ul><h3 id="3-3-è·¯ç”±â€”â€”ç»´æŠ¤å®šä½ç‰¹å®šå¯¹ç­‰ä½“å’Œå¯¹è±¡çš„ä¿¡æ¯ã€‚å“åº”æœ¬åœ°å’Œè¿œç¨‹æŸ¥è¯¢ã€‚é»˜è®¤ä¸ºDHTï¼Œä½†å¯åˆ‡æ¢"><a href="#3-3-è·¯ç”±â€”â€”ç»´æŠ¤å®šä½ç‰¹å®šå¯¹ç­‰ä½“å’Œå¯¹è±¡çš„ä¿¡æ¯ã€‚å“åº”æœ¬åœ°å’Œè¿œç¨‹æŸ¥è¯¢ã€‚é»˜è®¤ä¸ºDHTï¼Œä½†å¯åˆ‡æ¢" class="headerlink" title="3.3 è·¯ç”±â€”â€”ç»´æŠ¤å®šä½ç‰¹å®šå¯¹ç­‰ä½“å’Œå¯¹è±¡çš„ä¿¡æ¯ã€‚å“åº”æœ¬åœ°å’Œè¿œç¨‹æŸ¥è¯¢ã€‚é»˜è®¤ä¸ºDHTï¼Œä½†å¯åˆ‡æ¢"></a>3.3 è·¯ç”±â€”â€”ç»´æŠ¤å®šä½ç‰¹å®šå¯¹ç­‰ä½“å’Œå¯¹è±¡çš„ä¿¡æ¯ã€‚å“åº”æœ¬åœ°å’Œè¿œç¨‹æŸ¥è¯¢ã€‚é»˜è®¤ä¸ºDHTï¼Œä½†å¯åˆ‡æ¢</h3><p>IPFSèŠ‚ç‚¹éœ€è¦ä¸€ä¸ªè·¯ç”±ç³»ç»Ÿï¼Œå®ƒå¯ä»¥æ‰¾åˆ°å…¶ä»–èŠ‚ç‚¹çš„ç½‘ç»œåœ°å€ï¼Œä»¥åŠå¯ä»¥ä¸ºç‰¹å®šå¯¹è±¡æœåŠ¡çš„èŠ‚ç‚¹ã€‚IPFSä½¿ç”¨S/Kademliaå’ŒCoral DSHTå®ç°è¿™ä¸€ç‚¹ã€‚IPFSçš„å¯¹è±¡å¤§å°å’Œä½¿ç”¨æ¨¡å¼ç±»ä¼¼äºCoralå’ŒMainlineï¼Œå› æ­¤IPFS DHTæ ¹æ®å…¶å¤§å°å¯¹å­˜å‚¨çš„å€¼è¿›è¡ŒåŒºåˆ†ã€‚å°å€¼(ç­‰äºæˆ–å°äº1KB)ç›´æ¥å­˜å‚¨åœ¨DHTä¸Šã€‚å¯¹äºè¾ƒå¤§çš„å€¼ï¼ŒDHTå­˜å‚¨å¼•ç”¨ï¼Œè¿™äº›å¼•ç”¨æ˜¯å¯ä»¥ä¸ºå—æä¾›æœåŠ¡çš„èŠ‚ç‚¹çš„nodeid</p><h3 id="3-4-å—äº¤æ¢â€”â€”ä¸€ä¸ªæ–°çš„å—äº¤æ¢åè®®-BitSwap-ï¼Œå®ƒç®¡ç†æœ‰æ•ˆçš„å—åˆ†é…ã€‚ä»¥å¸‚åœºä¸ºæ¨¡å‹ï¼Œå¯¹æ•°æ®å¤åˆ¶çš„æ¿€åŠ±å¾ˆå¼±ã€‚å¯åˆ‡æ¢çš„è´¸æ˜“ç­–ç•¥"><a href="#3-4-å—äº¤æ¢â€”â€”ä¸€ä¸ªæ–°çš„å—äº¤æ¢åè®®-BitSwap-ï¼Œå®ƒç®¡ç†æœ‰æ•ˆçš„å—åˆ†é…ã€‚ä»¥å¸‚åœºä¸ºæ¨¡å‹ï¼Œå¯¹æ•°æ®å¤åˆ¶çš„æ¿€åŠ±å¾ˆå¼±ã€‚å¯åˆ‡æ¢çš„è´¸æ˜“ç­–ç•¥" class="headerlink" title="3.4 å—äº¤æ¢â€”â€”ä¸€ä¸ªæ–°çš„å—äº¤æ¢åè®®(BitSwap)ï¼Œå®ƒç®¡ç†æœ‰æ•ˆçš„å—åˆ†é…ã€‚ä»¥å¸‚åœºä¸ºæ¨¡å‹ï¼Œå¯¹æ•°æ®å¤åˆ¶çš„æ¿€åŠ±å¾ˆå¼±ã€‚å¯åˆ‡æ¢çš„è´¸æ˜“ç­–ç•¥"></a>3.4 å—äº¤æ¢â€”â€”ä¸€ä¸ªæ–°çš„å—äº¤æ¢åè®®(BitSwap)ï¼Œå®ƒç®¡ç†æœ‰æ•ˆçš„å—åˆ†é…ã€‚ä»¥å¸‚åœºä¸ºæ¨¡å‹ï¼Œå¯¹æ•°æ®å¤åˆ¶çš„æ¿€åŠ±å¾ˆå¼±ã€‚å¯åˆ‡æ¢çš„è´¸æ˜“ç­–ç•¥</h3><p>åœ¨IPFSä¸­ï¼Œæ•°æ®åˆ†å‘æ˜¯é€šè¿‡ä½¿ç”¨BitTorrentå¯å‘çš„åè®®BitSwapä¸å¯¹ç­‰ç‚¹äº¤æ¢å—æ¥å®ç°çš„ã€‚åƒBitTorrentä¸€æ ·ï¼ŒBitSwapå¯¹ç­‰ä½“æ­£åœ¨å¯»æ‰¾ä¸€ç»„å—(want_list)ï¼Œå¹¶æœ‰å¦ä¸€ç»„å—äº¤æ¢(have_list)ã€‚ä¸BitTorrentä¸åŒï¼ŒBitSwapå¹¶ä¸å±€é™äºä¸€ä¸ªtorrentä¸­çš„åŒºå—ã€‚BitSwapæ“ä½œæ˜¯ä¸€ä¸ªæŒä¹…çš„å¸‚åœºï¼ŒèŠ‚ç‚¹å¯ä»¥è·å–ä»–ä»¬éœ€è¦çš„å—ï¼Œè€Œä¸ç®¡è¿™äº›å—æ˜¯ä»€ä¹ˆæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ã€‚è¿™äº›å—å¯ä»¥æ¥è‡ªæ–‡ä»¶ç³»ç»Ÿä¸­å®Œå…¨ä¸ç›¸å…³çš„æ–‡ä»¶ã€‚èŠ‚ç‚¹èšé›†åœ¨ä¸€èµ·è¿›è¡Œäº¤æ˜“ã€‚</p><h3 id="3-5-å¯¹è±¡â€”â€”ä¸€ä¸ªMerkle-DAGï¼Œç”±å…·æœ‰é“¾æ¥çš„å†…å®¹å®šä½çš„ä¸å¯å˜å¯¹è±¡ç»„æˆã€‚ç”¨äºè¡¨ç¤ºä»»æ„çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚æ–‡ä»¶å±‚æ¬¡ç»“æ„å’Œé€šä¿¡ç³»ç»Ÿ"><a href="#3-5-å¯¹è±¡â€”â€”ä¸€ä¸ªMerkle-DAGï¼Œç”±å…·æœ‰é“¾æ¥çš„å†…å®¹å®šä½çš„ä¸å¯å˜å¯¹è±¡ç»„æˆã€‚ç”¨äºè¡¨ç¤ºä»»æ„çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚æ–‡ä»¶å±‚æ¬¡ç»“æ„å’Œé€šä¿¡ç³»ç»Ÿ" class="headerlink" title="3.5 å¯¹è±¡â€”â€”ä¸€ä¸ªMerkle DAGï¼Œç”±å…·æœ‰é“¾æ¥çš„å†…å®¹å®šä½çš„ä¸å¯å˜å¯¹è±¡ç»„æˆã€‚ç”¨äºè¡¨ç¤ºä»»æ„çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚æ–‡ä»¶å±‚æ¬¡ç»“æ„å’Œé€šä¿¡ç³»ç»Ÿ"></a>3.5 å¯¹è±¡â€”â€”ä¸€ä¸ªMerkle DAGï¼Œç”±å…·æœ‰é“¾æ¥çš„å†…å®¹å®šä½çš„ä¸å¯å˜å¯¹è±¡ç»„æˆã€‚ç”¨äºè¡¨ç¤ºä»»æ„çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚æ–‡ä»¶å±‚æ¬¡ç»“æ„å’Œé€šä¿¡ç³»ç»Ÿ</h3><p>DHTå’ŒBitSwapå…è®¸IPFSå½¢æˆä¸€ä¸ªå¤§è§„æ¨¡çš„ç‚¹å¯¹ç‚¹ç³»ç»Ÿï¼Œç”¨äºå¿«é€Ÿã€å¯é åœ°å­˜å‚¨å’Œåˆ†å‘å—ã€‚åœ¨è¿™äº›ä¹‹ä¸Šï¼ŒIPFSæ„å»ºäº†ä¸€ä¸ªMerkle DAGï¼Œä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼Œå…¶ä¸­å¯¹è±¡ä¹‹é—´çš„é“¾æ¥æ˜¯åµŒå…¥æºä¸­çš„ç›®æ ‡çš„åŠ å¯†æ•£åˆ—ã€‚è¿™æ˜¯Gitæ•°æ®ç»“æ„çš„ä¸€èˆ¬åŒ–ã€‚</p><p>é»˜å…‹å°”DAGä¸ºIPFSæä¾›äº†è®¸å¤šæœ‰ç”¨çš„å±æ€§ï¼š</p><ol><li>å†…å®¹å¯»å€:æ‰€æœ‰å†…å®¹ç”±å…¶å¤šå“ˆå¸Œæ ¡éªŒå’Œå”¯ä¸€æ ‡è¯†ï¼ŒåŒ…æ‹¬é“¾æ¥</li><li>æŠ—ç¯¡æ”¹:æ‰€æœ‰å†…å®¹éƒ½é€šè¿‡æ ¡éªŒå’Œè¿›è¡ŒéªŒè¯ã€‚å¦‚æœæ•°æ®è¢«ç¯¡æ”¹æˆ–æŸåï¼ŒIPFSä¼šæ£€æµ‹åˆ°å®ƒ</li><li>é‡å¤æ•°æ®åˆ é™¤:æ‰€æœ‰åŒ…å«ç›¸åŒå†…å®¹çš„å¯¹è±¡éƒ½æ˜¯ç›¸åŒçš„ï¼Œä¸”åªå­˜å‚¨ä¸€æ¬¡ã€‚å¯¹äºç´¢å¼•å¯¹è±¡ï¼Œå¦‚gitæ ‘å’Œæäº¤ï¼Œæˆ–æ•°æ®çš„å…¬å…±éƒ¨åˆ†ï¼Œè¿™å°¤å…¶æœ‰ç”¨ã€‚</li></ol><h3 id="3-6-æ–‡ä»¶â€”â€”å—Gitå¯å‘çš„æ–‡ä»¶ç‰ˆæœ¬çš„æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„"><a href="#3-6-æ–‡ä»¶â€”â€”å—Gitå¯å‘çš„æ–‡ä»¶ç‰ˆæœ¬çš„æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„" class="headerlink" title="3.6 æ–‡ä»¶â€”â€”å—Gitå¯å‘çš„æ–‡ä»¶ç‰ˆæœ¬çš„æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„"></a>3.6 æ–‡ä»¶â€”â€”å—Gitå¯å‘çš„æ–‡ä»¶ç‰ˆæœ¬çš„æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„</h3><p>IPFSè¿˜å®šä¹‰äº†ä¸€ç»„å¯¹è±¡ï¼Œç”¨äºåœ¨Merkle DAGä¹‹ä¸Šå¯¹ç‰ˆæœ¬åŒ–çš„æ–‡ä»¶ç³»ç»Ÿå»ºæ¨¡ã€‚è¯¥å¯¹è±¡æ¨¡å‹ç±»ä¼¼äºGit s:</p><ol><li>å—:ä¸€ä¸ªå¯å˜å¤§å°çš„æ•°æ®å—</li><li>åˆ—è¡¨:å—æˆ–å…¶ä»–åˆ—è¡¨çš„é›†åˆ</li><li>æ ‘:å—ã€åˆ—è¡¨æˆ–å…¶ä»–æ ‘çš„é›†åˆ</li><li>æäº¤:æ ‘ç‰ˆæœ¬å†å²ä¸­çš„å¿«ç…§ã€‚</li></ol><h3 id="3-7-å‘½åâ€”â€”ä¸€ä¸ªè‡ªè®¤è¯çš„å¯å˜åç§°ç³»ç»Ÿ"><a href="#3-7-å‘½åâ€”â€”ä¸€ä¸ªè‡ªè®¤è¯çš„å¯å˜åç§°ç³»ç»Ÿ" class="headerlink" title="3.7 å‘½åâ€”â€”ä¸€ä¸ªè‡ªè®¤è¯çš„å¯å˜åç§°ç³»ç»Ÿ"></a>3.7 å‘½åâ€”â€”ä¸€ä¸ªè‡ªè®¤è¯çš„å¯å˜åç§°ç³»ç»Ÿ</h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒIPFSå †æ ˆå½¢æˆäº†ä¸€ä¸ªç‚¹å¯¹ç‚¹å—äº¤æ¢ï¼Œæ„é€ äº†ä¸€ä¸ªå¯¹è±¡çš„å†…å®¹å¯»å€DAGã€‚å®ƒç”¨äºå‘å¸ƒå’Œæ£€ç´¢ä¸å¯å˜å¯¹è±¡ã€‚å®ƒç”šè‡³å¯ä»¥è·Ÿè¸ªè¿™äº›å¯¹è±¡çš„ç‰ˆæœ¬å†å²ã€‚ä½†æ˜¯ï¼Œç¼ºå°‘ä¸€ä¸ªå…³é”®ç»„ä»¶:å¯å˜å‘½åã€‚æ²¡æœ‰å®ƒï¼Œæ‰€æœ‰æ–°å†…å®¹çš„é€šä¿¡éƒ½å¿…é¡»åœ¨å¸¦å¤–è¿›è¡Œï¼Œå‘é€IPFSé“¾æ¥ã€‚éœ€è¦çš„æ˜¯åœ¨åŒä¸€è·¯å¾„ä¸Šæ£€ç´¢å¯å˜çŠ¶æ€çš„æŸç§æ–¹æ³•ã€‚å€¼å¾—è¯´æ˜çš„æ˜¯ï¼Œå¦‚æœå¯å˜æ•°æ®æ˜¯å¿…è¦çš„ï¼Œæˆ‘ä»¬æœ€ç»ˆåŠªåŠ›å»ºç«‹ä¸€ä¸ªä¸å¯å˜çš„é»˜å…‹å°”DAGã€‚è€ƒè™‘ä¸€ä¸‹æ¥è‡ªMerkle DAGçš„IPFSå±æ€§:å¯¹è±¡å¯ä»¥(a)é€šè¿‡å…¶æ•£åˆ—æ£€ç´¢ï¼Œ(b)å®Œæ•´æ€§æ£€æŸ¥ï¼Œ(c)é“¾æ¥åˆ°å…¶ä»–å¯¹è±¡ï¼Œä»¥åŠ(d)æ— é™æœŸç¼“å­˜ã€‚åœ¨æŸç§æ„ä¹‰ä¸Š:å¯¹è±¡æ˜¯æ°¸ä¹…çš„ã€‚è¿™äº›æ˜¯é«˜æ€§èƒ½åˆ†å¸ƒå¼ç³»ç»Ÿçš„å…³é”®å±æ€§ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ•°æ®è·¨ç½‘ç»œé“¾è·¯ç§»åŠ¨çš„ä»£ä»·å¾ˆé«˜ã€‚å¯¹è±¡å†…å®¹å¯»å€æ„å»ºäº†ä¸€ä¸ªå…·æœ‰(a)æ˜¾è‘—å¸¦å®½ä¼˜åŒ–ã€(b)ä¸å¯ä¿¡å†…å®¹æœåŠ¡ã€(c)æ°¸ä¹…é“¾æ¥å’Œ(d)å¯¹ä»»ä½•å¯¹è±¡åŠå…¶å¼•ç”¨è¿›è¡Œå®Œå…¨æ°¸ä¹…å¤‡ä»½çš„èƒ½åŠ›çš„webã€‚Merkle DAG(ä¸å¯å˜çš„å†…å®¹å¯»å€å¯¹è±¡)å’Œå‘½å(æŒ‡å‘Merkle DAGçš„å¯å˜æŒ‡é’ˆ)ç¬æ—¶å‡ºç°åœ¨è®¸å¤šæˆåŠŸçš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ã€‚è¿™åŒ…æ‹¬Gitç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå®ƒæœ‰ä¸å¯å˜å¯¹è±¡å’Œå¯å˜å¼•ç”¨;å’ŒPlanï¼Œ UNIXçš„åˆ†å¸ƒå¼ç»§æ‰¿è€…ï¼ŒåŠå…¶å¯å˜çš„Fossilå’Œä¸å¯å˜çš„Ventiæ–‡ä»¶ç³»ç»Ÿã€‚LBFSä¹Ÿä½¿ç”¨å¯å˜ç´¢å¼•å’Œä¸å¯å˜å—ã€‚</p><h2 id="4-IPFSå…±è¯†"><a href="#4-IPFSå…±è¯†" class="headerlink" title="4. IPFSå…±è¯†"></a>4. IPFSå…±è¯†</h2><p>IPFSåˆ›æ–°çš„é‡‡ç”¨äº†ä¸€ç§æ··åˆå…±è¯†æœºåˆ¶â€”â€”å¤åˆ¶è¯æ˜ï¼ˆPoRepï¼‰+æ—¶ç©ºè¯æ˜ï¼ˆPoStï¼‰+ é¢„æœŸå…±è¯†(EC)</p><ol><li>å¤åˆ¶è¯æ˜ï¼šå…±è¯†æœºåˆ¶ä¸­çš„æ ¸å¿ƒå› ç´ ï¼Œå°½ç®¡IPFSçš„ç½‘ç»œåè®®ã€å…±è¯†ã€å…¶ä»–ç®—æ³•éƒ½åŸºæœ¬å®šå‹ï¼Œä½†æ˜¯å¤åˆ¶è¯æ˜ä»ç„¶å¤„äºä¸æ–­å®Œå–„çš„æ–¹æ¡ˆä¸­ã€‚</li><li>æ—¶ç©ºè¯æ˜:ï¼ˆPoSt)æå‡ºäº†è¯æ˜é“¾ï¼ˆproof-chainï¼‰çš„æ•°æ®ç»“æ„ï¼Œè¯æ˜é“¾æŠŠä¸€äº›çš„æŒ‘æˆ˜ï¼ˆchallengeï¼‰å’Œè¯æ˜ï¼ˆproofï¼‰é“¾æ¥èµ·æ¥å½¢æˆã€‚åœ¨è¯æ˜é“¾çš„åŸºç¡€ä¸Šæ·»åŠ ä¸Šæ—¶é—´æ®µï¼Œè¿™æ ·å°±å¾—åˆ°äº†ä¸€æ®µæ—¶é—´å†…çš„çŸ¿å·¥å­˜å‚¨æ•°æ®çš„è¯æ˜ï¼Œè¿™å°±æ˜¯æ—¶ç©ºè¯æ˜ï¼ˆProof of Spacetimeï¼ŒPoStï¼‰ã€‚PoStå¯ä»¥è¯æ˜åœ¨è¯¥æ®µæ—¶é—´å†…çŸ¿å·¥å­˜å‚¨äº†ç‰¹å®šçš„æ•°æ®ï¼Œå¹¶ä¸”åˆ©ç”¨æ—¶é—´æˆ³é”šå®šè¿™äº›è¯æ˜é“¾ï¼Œè¿™æ ·å³ä½¿éªŒè¯è€…ï¼ˆverifierï¼‰ä¸åœ¨çº¿ï¼Œä¹Ÿå¯ä»¥åœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´å†…åˆ©ç”¨æ—¶ç©ºè¯æ˜å»éªŒè¯è¯¥çŸ¿å·¥ç”Ÿæˆäº†è¯æ˜é“¾ï¼ŒPoStä¼šè¢«æäº¤åˆ°é“¾ä¸Šç”¨æ¥äº§ç”Ÿæ–°çš„Blockã€‚</li><li>é¢„æœŸå…±è¯†:ï¼ˆExpected Consensusï¼ŒECï¼‰æ˜¯åœ¨æ¯ä¸€è½®é‡Œé¢é€‰ä¸¾å‡ºæ¥ä¸€åæˆ–è€…å¤šåçŸ¿å·¥æ¥åˆ›å»ºæ–°çš„åŒºå—ï¼ŒçŸ¿å·¥èµ¢å¾—é€‰ä¸¾çš„å¯èƒ½æ€§è·ŸçŸ¿å·¥å½“å‰çš„æœ‰æ•ˆå­˜å‚¨ï¼ˆç®—åŠ›ï¼‰æˆæ­£æ¯”ã€‚IPFSæŠŠçŸ¿å·¥åœ¨ç½‘ç»œä¸­çš„å½“å‰å­˜å‚¨æ•°æ®ç›¸å¯¹äºæ•´ä¸ªç½‘ç»œçš„å­˜å‚¨æ¯”ä¾‹è½¬åŒ–ä¸ºçŸ¿å·¥æŠ•ç¥¨æƒï¼ˆvoting power of the minerï¼‰ã€‚æ— è®ºåœ¨è¯¥å‘¨æœŸé‡Œï¼Œé€‰ä¸¾å‡ºæ¥çš„æ˜¯ä¸€åè¿˜æ˜¯å¤šåçŸ¿å·¥ï¼Œè¢«é€‰ä¸¾å‡ºæ¥çš„çŸ¿å·¥éƒ½éœ€è¦åˆ›å»ºæ–°çš„åŒºå—ï¼Œå¹¶æŠŠæ–°çš„åŒºå—å¯¹ç½‘ç»œè¿›è¡Œå¹¿æ’­ã€‚ å°½ç®¡é“¾ä¸­çš„åŒºå—æ˜¯çº¿æ€§çš„ï¼Œä½†æ˜¯IPFSçš„åŒºå—æ•°æ®ç»“æ„é‡‡ç”¨çš„DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰ï¼Œå¯ä»¥åœ¨åŒä¸€æ—¶é—´äº§ç”Ÿå¤šä¸ªåŒºå—ï¼ˆæ‰€ä»¥Filecoinçš„äº¤æ˜“è¦æ¯”BTCçš„æœ‰æ•ˆçš„å¤šï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæŠŠFilecoinå«åšâ€œå¯èƒ½çš„blockchain 3.0â€çš„åŸå› ï¼‰ </li></ol><p>Filecoiné¦–åˆ›çš„æ··åˆå…±è¯†æœºåˆ¶ï¼Œä»æ ¹æœ¬ä¸Šå®šä¹‰äº†Filecoinæ˜¯ä¸€ä¸ªåˆç†é«˜æ•ˆã€å»ä¸­å¿ƒåŒ–çš„ç³»ç»Ÿï¼Œå¹¶ä½“ç°å‡ºFilecoinçš„å…¬å¹³æ€§ã€ä¿å¯†æ€§å’Œå…¬å¼€å¯éªŒè¯æ€§</p><h1 id="äºŒã€ä¸Šä¼ æ–‡ä»¶"><a href="#äºŒã€ä¸Šä¼ æ–‡ä»¶" class="headerlink" title="äºŒã€ä¸Šä¼ æ–‡ä»¶"></a>äºŒã€ä¸Šä¼ æ–‡ä»¶</h1><p><img src="/images/ipfs/upload_file.png" alt="img.png"></p><h2 id="1-ç”Ÿæˆé»˜å…‹å°”DAGçš„ç»“æ„"><a href="#1-ç”Ÿæˆé»˜å…‹å°”DAGçš„ç»“æ„" class="headerlink" title="1. ç”Ÿæˆé»˜å…‹å°”DAGçš„ç»“æ„"></a>1. ç”Ÿæˆé»˜å…‹å°”DAGçš„ç»“æ„</h2><p>ç”Ÿæˆçš„ç»“æ„æœ‰ä¸¤ç§Layoutï¼šbalancedå’Œtrickleçš„ã€‚è¿™é‡Œä»‹ç»é»˜è®¤çš„balancedç»“æ„ï¼Œé¦–å…ˆç”Ÿæˆrootä½œä¸ºæ ¹èŠ‚ç‚¹ï¼Œç„¶åå°†æ–‡ä»¶åˆ†å‰²ï¼Œé»˜è®¤æŒ‰ç…§256KBå¤§å°è¯»å–ä¸€ä¸ªchunkï¼Œç”Ÿæˆå¶å­èŠ‚ç‚¹ï¼Œä¾æ¬¡ç”Ÿæˆnode1ï¼Œnode2ï¼ŒrootèŠ‚ç‚¹ä¼šæœ‰LinkæŒ‡å‘æŒ‚åœ¨rootèŠ‚ç‚¹çš„å¶å­èŠ‚ç‚¹node1å’Œnode2ã€‚rootèŠ‚ç‚¹ä¸‹é¢èƒ½å¤ŸLinkçš„å¶å­èŠ‚ç‚¹æ•°é‡æ˜¯æœ‰é™çš„ï¼ŒIPFSä¸­é»˜è®¤è®¾ç½®çš„æ˜¯174ä¸ªï¼ˆå®šä¹‰çš„Linkçš„æ€»çš„å¤§å°æ˜¯8KBï¼Œæ¯ä¸ªLinkçš„å¤§å°æ˜¯34 + 8 + 5ã€sha256 multihash + size + no name + protobuf framingã€‘ï¼Œé»˜è®¤çš„Linkçš„ä¸ªæ•°ä¸º8192/47çº¦ç­‰äº174ï¼‰ã€‚</p><p><img src="/images/ipfs/image-1.png" alt="/images/ipfs/image-1.png"></p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¶…è¿‡174ä¸ªååˆ™ä¼šæ–°åˆ›å»ºä¸€ä¸ªnew rootèŠ‚ç‚¹ï¼Œå¹¶Linkåˆ°old rootï¼Œæ–°çš„chunkä½œä¸ºnode3ï¼ˆè¿™é‡Œç”¨node3ç®€çº¦äº†ï¼Œå®é™…ä¸Šæ˜¯ç¬¬175ä¸ªèŠ‚ç‚¹ï¼‰è¢«new rootç›´æ¥Linkã€‚</p><p><img src="/images/ipfs/image-4.png" alt="/images/ipfs/image-4.png"></p><p>å½“ç»§ç»­æœ‰æ–°çš„chunkæ·»åŠ æ—¶ï¼Œåˆ™ä¼šç”Ÿæˆnode34ä½œä¸ºnode3å’Œnode4çš„çˆ¶èŠ‚ç‚¹ï¼Œnode34å«æœ‰ä¸¤ä¸ªLinkåˆ†åˆ«é“¾æ¥åˆ°node3å’Œnode4ã€‚</p><p><img src="/images/ipfs/image-5.png" alt="/images/ipfs/image-5.png"></p><p>IPFSåœ¨initçš„æ—¶å€™ä¼šç”Ÿæˆ.ipfsç›®å½•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶ä¸­blocksåˆ™ä¸ºæ–‡ä»¶å—å­˜å‚¨çš„ç›®å½•ï¼Œdatastoreä¸ºleveldbæ•°æ®åº“ï¼Œå…¶ä¸­å­˜å‚¨äº†æ–‡ä»¶ç³»ç»Ÿçš„æ ¹å“ˆå¸Œç­‰ï¼Œå­˜å‚¨ç›¸å…³çš„é…ç½®å…³è”åœ¨.ipfsç›®å½•ä¸‹é¢çš„configæ–‡ä»¶ã€‚</p><p><img src="/images/ipfs/image-6.png" alt="/images/ipfs/image-6.png"></p><h2 id="2-å¯¹å—è¿›è¡Œå­˜å‚¨"><a href="#2-å¯¹å—è¿›è¡Œå­˜å‚¨" class="headerlink" title="2. å¯¹å—è¿›è¡Œå­˜å‚¨"></a>2. å¯¹å—è¿›è¡Œå­˜å‚¨</h2><ul><li>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸€ä¸ªBlockå­˜å‚¨æ—¶ï¼Œé¦–å…ˆç”±dagServiceï¼ˆå®ç°äº†DAGServiceæ¥å£ï¼‰è°ƒç”¨Addè¿›è¡Œæ·»åŠ ï¼›</li><li>ä¹‹åç”±blockServiceï¼ˆå®ç°äº†BlockServiceæ¥å£ï¼‰è°ƒç”¨AddBlockæ·»åŠ è¯¥Blockï¼›</li><li>å†è°ƒç”¨arccacheçš„Putï¼Œarccacheæ˜¯å¯¹å­˜å‚¨çš„Blockåšarcç­–ç•¥çš„ç¼“å­˜ï¼›</li><li>å†ä¹‹åç”±VerifBSè°ƒç”¨Putè¿›è¡Œå­˜å‚¨ï¼ŒVerifyBSä¸»è¦å¯¹CIDçš„åˆæ³•æ€§è¿›è¡Œæ ¡éªŒï¼Œåˆæ³•åˆ™è¿›è¡ŒPutï¼›</li><li>æ¥ç€blockstoreï¼ˆå®ç°äº†Blockstoreæ¥å£ï¼‰è°ƒç”¨Putè¿›è¡Œå­˜å‚¨ï¼ŒPutå‡½æ•°ä¸­ä¼šå¯¹CIDè¿›è¡Œè½¬åŒ–ï¼Œè°ƒç”¨dshelpçš„CidToDsKeyæ–¹æ³•å°†CIDè½¬åŒ–æˆå­˜å‚¨çš„Keyï¼›</li><li>å†æ¥ç€è°ƒç”¨keytransform.Datastoreçš„Putï¼ŒPutå‡½æ•°ä¸­ä¼šå°†å‰ç¼€æ‹¼ä¸Šï¼Œè¿™æ—¶KeyåŠ ä¸Šäº†å‰ç¼€/blocksï¼›</li><li>ç„¶åè°ƒç”¨measureçš„Putå‡½æ•°ï¼Œmeasureæ˜¯å¯¹mountçš„å°è£…ï¼›</li><li>ä¹‹åè°ƒç”¨mountçš„Putå‡½æ•°ï¼Œmountå’ŒIPFSçš„configé…ç½®æ–‡ä»¶ä¸­ç»“æ„å¯¹åº”ï¼Œæ ¹æ®keyå»æŸ¥æ‰¾å¯¹åº”çš„datastoreï¼Œç”±äºå‰ç¼€æ˜¯/blocksåˆ™å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„measureï¼›</li><li>è°ƒç”¨è¯¥measureçš„Putå‡½æ•°ï¼›</li><li>æœ€åè°ƒç”¨flatfsçš„Putå‡½æ•°ï¼Œç”±Putå‡½æ•°è°ƒç”¨doPutæœ€ç»ˆè°ƒç”¨encodeå‡½æ•°å°†å®Œæ•´çš„blockå†™å…¥çš„ç›®å½•æŒ‡å®šä¸º/home/test/.ipfs/blocks/WDï¼Œå…¶ä¸­WDæ¥è‡ªäºblocks/CIQFSQATUBIEIFDECKTNGHOKPOEE7WUPM5NNNSJCCDROMM6YHEKTWDYä¸­çš„å€’æ•°ç¬¬ä¸‰ç¬¬äºŒä¸ªå­—ç¬¦ã€‚è¿™æ ·è¯¥Blockåˆ™å†™å…¥äº†è¯¥ç›®å½•ä¸‹é¢çš„æ–‡ä»¶ä¸­ã€‚</li></ul><p><img src="/images/ipfs/image-7.png" alt="/images/ipfs/image-7.png"></p><p><img src="/images/ipfs/image-9.png" alt="/images/ipfs/image-9.png"></p><h1 id="ä¸‰ã€ä¸‹è½½æ–‡ä»¶"><a href="#ä¸‰ã€ä¸‹è½½æ–‡ä»¶" class="headerlink" title="ä¸‰ã€ä¸‹è½½æ–‡ä»¶"></a>ä¸‰ã€ä¸‹è½½æ–‡ä»¶</h1><p><img src="/images/ipfs/download_file.png" alt="img.png"></p><ol><li>æ£€æŸ¥æœ¬åœ°çš„blockstoreä¸­æ˜¯å¦å­˜åœ¨è¯·æ±‚çš„æ•°æ®ï¼Œå¦‚æœå­˜åœ¨åˆ™ç›´æ¥ä»æœ¬åœ°è¿”å›ï¼›å¦åˆ™ä¼šå‘å¯¹ç­‰èŠ‚ç‚¹å‘é€block hashåˆ—è¡¨ï¼›</li><li>å¯¹ç­‰èŠ‚ç‚¹é€šè¿‡DHTå’Œè·¯ç”±å±‚ç®—æ³•ï¼Œæ‰¾åˆ°æ¯ä¸ªblock hashæ‰€åœ¨çš„èŠ‚ç‚¹ï¼Œå°†æ–‡ä»¶è¿”å›æ¥ï¼›</li><li>æœ¬åœ°èŠ‚ç‚¹åœ¨æ¥æ”¶blockæ–‡ä»¶çš„åŒæ—¶ç¼“å­˜ä¸€ä»½åˆ°æœ¬åœ°çš„blockstoreä¸­</li><li>æ›´æ–°DHT</li><li>ç»„è£…blockæ–‡ä»¶ï¼Œè¿”å›è‡³ç”¨æˆ·ç«¯</li></ol><h1 id="é™„ï¼šèµ„æ–™"><a href="#é™„ï¼šèµ„æ–™" class="headerlink" title="é™„ï¼šèµ„æ–™"></a>é™„ï¼šèµ„æ–™</h1><ol><li>IPFSç™½çš®ä¹¦ï¼š<a href="https://github.com/ipfs/papers/raw/master/ipfs-cap2pfs/ipfs-p2p-file-system.pdf">https://github.com/ipfs/papers/raw/master/ipfs-cap2pfs/ipfs-p2p-file-system.pdf</a></li><li>ä¸Šä¼ /ä¸‹è½½æ–‡ä»¶è¿‡ç¨‹ï¼š<ul><li><a href="https://www.jianshu.com/p/9eb1e5f83e13">https://www.jianshu.com/p/9eb1e5f83e13</a></li><li><a href="https://www.chaindesk.cn/witbook/24/449">https://www.chaindesk.cn/witbook/24/449</a></li></ul></li><li><a href="https://www.jiabaotz.com/finance/79470.html">IPFS/Filecoinçš„å…±è¯†æœºåˆ¶æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ã€‡ã€ç›®æ ‡&quot;&gt;&lt;a href=&quot;#ã€‡ã€ç›®æ ‡&quot; class=&quot;headerlink&quot; title=&quot;ã€‡ã€ç›®æ ‡&quot;&gt;&lt;/a&gt;ã€‡ã€ç›®æ ‡&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;ç†Ÿæ‚‰IPFSæ¦‚å¿µ&lt;/li&gt;
&lt;li&gt;ç†Ÿæ‚‰IPFSä¸Šä¼ æ–‡ä»¶ã€ä¸‹è½½æ–‡ä»¶è¿‡ç¨‹&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;ä¸€</summary>
      
    
    
    
    
    <category term="Distributed Storage" scheme="https://zhangzhishun.github.io/tags/Distributed-Storage/"/>
    
  </entry>
  
  <entry>
    <title>Goè¯­è¨€æ ¸å¿ƒç¼–ç¨‹</title>
    <link href="https://zhangzhishun.github.io/2022/01/17/go/Go%E8%AF%AD%E8%A8%80%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/"/>
    <id>https://zhangzhishun.github.io/2022/01/17/go/Go%E8%AF%AD%E8%A8%80%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/</id>
    <published>2022-01-17T02:29:15.000Z</published>
    <updated>2022-04-27T02:35:55.484Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Go-Core-Programming"><a href="#Go-Core-Programming" class="headerlink" title="Go Core Programming"></a>Go Core Programming</h1><h1 id="ç¬¬-1-ç« -åŸºç¡€çŸ¥è¯†"><a href="#ç¬¬-1-ç« -åŸºç¡€çŸ¥è¯†" class="headerlink" title="ç¬¬ 1 ç«  åŸºç¡€çŸ¥è¯†"></a>ç¬¬ 1 ç«  åŸºç¡€çŸ¥è¯†</h1><h2 id="1-1-è¯­è¨€ç®€ä»‹"><a href="#1-1-è¯­è¨€ç®€ä»‹" class="headerlink" title="1.1 è¯­è¨€ç®€ä»‹"></a>1.1 è¯­è¨€ç®€ä»‹</h2><h3 id="1-1-1-Goè¯­è¨€çš„è¯ç”ŸèƒŒæ™¯"><a href="#1-1-1-Goè¯­è¨€çš„è¯ç”ŸèƒŒæ™¯" class="headerlink" title="1.1.1 Goè¯­è¨€çš„è¯ç”ŸèƒŒæ™¯"></a>1.1.1 Goè¯­è¨€çš„è¯ç”ŸèƒŒæ™¯</h3><ul><li><strong>å½“å‰ç¼–ç¨‹è¯­è¨€å¯¹å¹¶å‘çš„æ”¯æŒä¸æ˜¯å¾ˆå¥½</strong>ï¼Œä¸èƒ½å¾ˆå¥½åœ°å‘æŒ¥å¤šæ ¸CPUçš„å¨åŠ›</li><li>ç¨‹åºè§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼Œ<strong>ç¼–è¯‘é€Ÿåº¦è¶Šæ¥è¶Šæ…¢</strong></li><li>ç°æœ‰çš„<strong>ç¼–ç¨‹è¯­è¨€è®¾è®¡è¶Šæ¥è¶Šå¤æ‚</strong>ï¼ŒæŸäº›ç‰¹æ€§çš„å®ç°ä¸æ€ä¹ˆä¼˜é›…</li></ul><h3 id="1-1-3-Goè¯­è¨€çš„ç‰¹æ€§"><a href="#1-1-3-Goè¯­è¨€çš„ç‰¹æ€§" class="headerlink" title="1.1.3 Goè¯­è¨€çš„ç‰¹æ€§"></a>1.1.3 Goè¯­è¨€çš„ç‰¹æ€§</h3><p><img src="/images/go_core_programming/Untitled.png" alt="Untitled"></p><p><img src="/images/go_core_programming/Untitled%201.png" alt="Untitled"></p><h2 id="1-3-Goè¯æ³•å•å…ƒ"><a href="#1-3-Goè¯æ³•å•å…ƒ" class="headerlink" title="1.3 Goè¯æ³•å•å…ƒ"></a>1.3 Goè¯æ³•å•å…ƒ</h2><h3 id="1-3-1-token"><a href="#1-3-1-token" class="headerlink" title="1.3.1 token"></a>1.3.1 token</h3><p>tokenæ˜¯æ„æˆæºç¨‹åºçš„åŸºæœ¬ä¸å¯å†åˆ†å‰²çš„å•å…ƒã€‚</p><p>ç¼–è¯‘å™¨ç¼–è¯‘æºç¨‹åºçš„ç¬¬ä¸€æ­¥å°±æ˜¯å°†æºç¨‹åºåˆ†å‰²æˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„tokenï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯è¯æ³•åˆ†æã€‚</p><p>Goè¯­è¨€çš„tokenå¯ä»¥åˆ†ä¸ºå…³é”®å­—ã€æ ‡è¯†ç¬¦ã€æ“ä½œç¬¦ã€åˆ†éš”ç¬¦å’Œå­—é¢å¸¸é‡</p><p><img src="/images/go_core_programming/Untitled%202.png" alt="Untitled"></p><h3 id="1-3-2-æ ‡è¯†ç¬¦"><a href="#1-3-2-æ ‡è¯†ç¬¦" class="headerlink" title="1.3.2 æ ‡è¯†ç¬¦"></a>1.3.2 æ ‡è¯†ç¬¦</h3><ol><li>æ ‡è¯†ç¬¦ç”¨æ¥æ ‡è¯†å˜é‡ã€ç±»å‹ã€å¸¸é‡ç­‰è¯­æ³•å¯¹è±¡çš„ç¬¦å·åç§°ï¼Œå…¶åœ¨è¯­æ³•åˆ†ææ—¶ä½œä¸ºä¸€ä¸ªtokenå­˜åœ¨ã€‚</li><li>æ ‡è¯†ç¬¦åˆ†ä¸ºä¸¤ç±»ï¼š<ul><li>è¯­è¨€è®¾è®¡è€…é¢„ç•™çš„æ ‡è¯†ç¬¦ï¼šè¯­è¨€è®¾è®¡è€…ç¡®å®šï¼ŒåŒ…æ‹¬è¯­è¨€çš„é¢„å£°æ˜æ ‡è¯†ç¬¦åŠä¿ç•™å­—</li><li>ç¼–ç¨‹è€…å¯ä»¥è‡ªå®šä¹‰çš„æ ‡è¯†ç¬¦ï¼šç”¨æˆ·å®šä¹‰çš„å˜é‡åã€å¸¸é‡åã€å‡½æ•°åç­‰</li></ul></li><li>æ ‡è¯†ç¬¦è§„åˆ™ï¼šå¼€å¤´ä¸€ä¸ªå­—ç¬¦å¿…é¡»æ˜¯å­—æ¯æˆ–ä¸‹åˆ’çº¿ï¼ŒåŒºåˆ†å¤§å°å†™</li><li><strong>å…³é”®å­—ï¼ˆkeywordsï¼Œ25ä¸ªï¼‰</strong></li></ol><p><img src="/images/go_core_programming/Untitled%203.png" alt="Untitled"></p><ol><li><strong>å†…ç½®æ•°æ®ç±»å‹æ ‡è¯†ç¬¦ï¼ˆ20ä¸ªï¼‰</strong></li></ol><p><img src="/images/go_core_programming/Untitled%204.png" alt="Untitled"></p><ol><li><strong>å†…ç½®å‡½æ•°ï¼ˆ15ä¸ªï¼‰</strong></li></ol><p><img src="/images/go_core_programming/Untitled%205.png" alt="Untitled"></p><ol><li><strong>å¸¸é‡å€¼æ ‡è¯†ç¬¦ï¼ˆ4ä¸ªï¼‰</strong></li></ol><p><img src="/images/go_core_programming/Untitled%206.png" alt="Untitled"></p><p>ç©ºç™½æ ‡è¯†ç¬¦ï¼š <code>_</code></p><h3 id="1-3-3-æ“ä½œç¬¦ï¼ˆoperatorsï¼‰å’Œåˆ†éš”ç¬¦ï¼ˆdelimitersï¼‰"><a href="#1-3-3-æ“ä½œç¬¦ï¼ˆoperatorsï¼‰å’Œåˆ†éš”ç¬¦ï¼ˆdelimitersï¼‰" class="headerlink" title="1.3.3 æ“ä½œç¬¦ï¼ˆoperatorsï¼‰å’Œåˆ†éš”ç¬¦ï¼ˆdelimitersï¼‰"></a>1.3.3 æ“ä½œç¬¦ï¼ˆoperatorsï¼‰å’Œåˆ†éš”ç¬¦ï¼ˆdelimitersï¼‰</h3><p>æ“ä½œç¬¦åŒ…æ‹¬è¿ç®—ç¬¦ã€ç°å¼çš„åˆ†éš”ç¬¦ã€å…¶ä»–è¯­æ³•è¾…åŠ©ç¬¦å·</p><h3 id="1-3-4-å­—é¢å¸¸é‡"><a href="#1-3-4-å­—é¢å¸¸é‡" class="headerlink" title="1.3.4 å­—é¢å¸¸é‡"></a>1.3.4 å­—é¢å¸¸é‡</h3><ol><li>Goçš„å­—é¢é‡å‡ºç°åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š<ul><li>ç”¨äºå¸¸é‡å’Œå˜é‡çš„åˆå§‹åŒ–</li><li>ç”¨åœ¨è¡¨è¾¾å¼é‡Œæˆ–å‡½æ•°è°ƒç”¨å®å‚</li></ul></li><li>å­—é¢é‡åˆ†ç±»ï¼š<ul><li>æ•´å‹å­—é¢é‡</li><li>æµ®ç‚¹å‹å­—é¢é‡</li><li>å¤æ•°ç±»å‹å­—é¢é‡</li><li>å­—ç¬¦å‹å­—é¢é‡</li><li>å­—ç¬¦ä¸²å­—é¢é‡</li></ul></li></ol><h2 id="1-4-å˜é‡å’Œå¸¸é‡"><a href="#1-4-å˜é‡å’Œå¸¸é‡" class="headerlink" title="1.4 å˜é‡å’Œå¸¸é‡"></a>1.4 å˜é‡å’Œå¸¸é‡</h2><h3 id="1-4-1-å˜é‡"><a href="#1-4-1-å˜é‡" class="headerlink" title="1.4.1 å˜é‡"></a>1.4.1 å˜é‡</h3><h3 id="1-4-2-å¸¸é‡"><a href="#1-4-2-å¸¸é‡" class="headerlink" title="1.4.2 å¸¸é‡"></a>1.4.2 å¸¸é‡</h3><h2 id="1-5-åŸºæœ¬æ•°æ®ç±»å‹"><a href="#1-5-åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="1.5 åŸºæœ¬æ•°æ®ç±»å‹"></a>1.5 åŸºæœ¬æ•°æ®ç±»å‹</h2><p>Goå†…ç½®ä¸ƒç±»åŸºæœ¬æ•°æ®ç±»å‹ï¼š</p><p><img src="/images/go_core_programming/Untitled%207.png" alt="Untitled"></p><p><img src="/images/go_core_programming/Untitled%208.png" alt="Untitled"></p><h2 id="1-5-4-å¤æ•°ç±»å‹"><a href="#1-5-4-å¤æ•°ç±»å‹" class="headerlink" title="1.5.4 å¤æ•°ç±»å‹"></a>1.5.4 å¤æ•°ç±»å‹</h2><p>Goè¯­è¨€å†…ç½®çš„å¤æ•°ç±»å‹æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯complex64å’Œcomplex128ã€‚å¤æ•°çš„å­—é¢é‡è¡¨ç¤ºå’Œæ•°å­¦è¡¨ç¤ºæ³•ä¸€æ ·ã€‚</p><p><img src="/images/go_core_programming/Untitled%209.png" alt="Untitled"></p><p><img src="/images/go_core_programming/Untitled%2010.png" alt="Untitled"></p><h3 id="1-5-6-runeç±»å‹"><a href="#1-5-6-runeç±»å‹" class="headerlink" title="1.5.6 runeç±»å‹"></a>1.5.6 runeç±»å‹</h3><p>Goå†…ç½®ä¸¤ç§å­—ç¬¦ç±»å‹ï¼š</p><ul><li>buteçš„å­—èŠ‚ç±»ç±»å‹ï¼ˆbyteæ˜¯uintçš„åˆ«åï¼‰</li><li>è¡¨ç¤ºUniocodeç¼–ç çš„å­—ç¬¦runeï¼ˆruneæ˜¯int32ç±»å‹çš„åˆ«åï¼‰</li></ul><h2 id="1-6-å¤åˆæ•°æ®ç±»å‹"><a href="#1-6-å¤åˆæ•°æ®ç±»å‹" class="headerlink" title="1.6 å¤åˆæ•°æ®ç±»å‹"></a>1.6 å¤åˆæ•°æ®ç±»å‹</h2><ol><li>å¤åˆæ•°æ®ç±»å‹å°±æ˜¯ç”±å…¶ä»–ç±»å‹ç»„åˆè€Œæˆçš„ç±»å‹ã€‚</li><li>GoåŸºæœ¬çš„å¤åˆæ•°æ®ç±»å‹æœ‰ï¼š<ul><li><p>æŒ‡é’ˆ</p></li><li><p>æ•°æ®</p></li><li><p>åˆ‡ç‰‡</p></li><li><p>å­—å…¸ï¼ˆmapï¼‰</p></li><li><p>é€šé“</p></li><li><p>ç»“æ„</p></li><li><p>æ¥å£</p><p><img src="/images/go_core_programming/Untitled%2011.png" alt="Untitled"></p></li></ul></li></ol><h3 id="1-6-1-æŒ‡é’ˆ"><a href="#1-6-1-æŒ‡é’ˆ" class="headerlink" title="1.6.1 æŒ‡é’ˆ"></a>1.6.1 æŒ‡é’ˆ</h3><ol><li>Goæ”¯æŒæŒ‡é’ˆï¼Œå£°æ˜ç±»å‹ä¸º <code>*T</code> ï¼ŒGoæ”¯æŒå¤šçº§æŒ‡é’ˆ <code>**T</code> ã€‚é€šè¿‡åœ¨å˜é‡åå‰åŠ  <code>&amp;</code> è·å–å˜é‡çš„åœ°å€ã€‚</li><li>æŒ‡é’ˆçš„ç‰¹ç‚¹ï¼š<ul><li>åœ¨èµ‹å€¼è¯­å¥ä¸­ï¼Œ<code>*T</code> å‡ºç°åœ¨ <code>=</code> å·¦è¾¹è¡¨ç¤ºæŒ‡é’ˆå£°æ˜ï¼Œ<code>*T</code> å‡ºç°åœ¨ <code>=</code> å³è¾¹è¡¨ç¤ºå–æŒ‡é’ˆæŒ‡å‘çš„å€¼ï¼ˆvarNameä¸ºå˜é‡åï¼‰ã€‚ç¤ºä¾‹ï¼š<pre><code class="go">var a = 11p := &amp;a // *på’Œaçš„å€¼éƒ½æ˜¯11</code></pre></li><li>ç»“æ„ä½“æŒ‡é’ˆè®¿é—®ç»“æ„ä½“å­—æ®µä»ç„¶ä½¿ç”¨ <code>.</code> ç‚¹æ“ä½œç¬¦ï¼ŒGoè¯­è¨€æ²¡æœ‰ <code>-&gt;</code> æ“ä½œç¬¦ï¼Œä¾‹å¦‚ï¼š<pre><code class="go">type User struct {    name string    age int}andes := User {    name: "andes",    age: 10,}p := &amp;andesfmt.Println(p.name) // p.nameé€šè¿‡"."æ“ä½œç¬¦è®¿é—®æˆå‘˜å˜é‡</code></pre></li><li>Goä¸æ”¯æŒæŒ‡é’ˆçš„è¿ç®—  Goç”±äºæ”¯æŒåƒåœ¾å›æ”¶ï¼Œå¦‚æœæ”¯æŒæŒ‡é’ˆè¿ç®—åˆ™ä¼šç»™åƒåœ¾å›æ”¶çš„å®ç°å¸¦æ¥å¾ˆå¤šä¸ä¾¿ã€‚ä¾‹å¦‚ï¼š  <img src="/images/go_core_programming/Untitled%2012.png" alt="Untitled"></li><li>å‡½æ•°ä¸­å…è®¸è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€  Goç¼–è¯‘å™¨ä½¿ç”¨â€æ ˆé€ƒé€¸â€œæœºåˆ¶å°†è¿™ç§å±€éƒ¨å˜é‡çš„ç©ºé—´åˆ†é…åœ¨å †ä¸Šï¼Œä¾‹å¦‚ï¼š  <img src="/images/go_core_programming/Untitled%2013.png" alt="Untitled"></li></ul></li></ol><h3 id="1-6-2-æ•°ç»„"><a href="#1-6-2-æ•°ç»„" class="headerlink" title="1.6.2 æ•°ç»„"></a>1.6.2 æ•°ç»„</h3><ol><li>æ•°ç»„çš„ç±»å‹åæ˜¯<code>[n]elementType</code>ï¼Œnæ˜¯æ•°ç»„é•¿åº¦ï¼ŒelementTypeæ˜¯æ•°ç»„å…ƒç´ ç±»å‹ã€‚</li></ol><p><img src="/images/go_core_programming/Untitled%2014.png" alt="Untitled"></p><ol><li>æ•°ç»„çš„ç‰¹ç‚¹ï¼š<ul><li>æ•°ç»„åˆ›å»ºå®Œé•¿åº¦å°±å›ºå®šäº†ï¼Œä¸å¯ä»¥å†è¿½åŠ å…ƒç´ äº†</li><li>æ•°ç»„æ˜¯å€¼ç±»å‹çš„ï¼Œæ•°ç»„èµ‹å€¼æˆ–ä½œä¸ºå‡½æ•°å‚æ•°éƒ½æ˜¯å€¼æ‹·è´</li><li>æ•°ç»„é•¿åº¦æ˜¯æ•°ç»„ç±»å‹çš„ç»„æˆéƒ¨åˆ†ï¼Œ<code>[10]int</code>å’Œ<code>[20]int</code>æ˜¯ä¸åŒçš„ç±»å‹</li><li>å¯ä»¥æ ¹æ®æ•°ç»„åˆ›å»ºåˆ‡ç‰‡</li></ul></li><li>æ•°ç»„ç›¸å…³æ“ä½œï¼š<ul><li><p>æ•°ç»„å…ƒç´ è®¿é—®</p><p><img src="/images/go_core_programming/Untitled%2015.png" alt="Untitled"></p></li><li><p>æ•°ç»„é•¿åº¦</p><p><img src="/images/go_core_programming/Untitled%2016.png" alt="Untitled"></p></li></ul></li></ol><h3 id="1-6-3-åˆ‡ç‰‡"><a href="#1-6-3-åˆ‡ç‰‡" class="headerlink" title="1.6.3 åˆ‡ç‰‡"></a>1.6.3 åˆ‡ç‰‡</h3><p>Goè¯­è¨€çš„æ•°ç»„çš„å®šé•¿æ€§å’Œå€¼æ‹·è´é™åˆ¶äº†å…¶ä½¿ç”¨åœºæ™¯ï¼ŒGpæä¾›äº†å¦ä¸€ç§æ•°æ®ç±»å‹sliceï¼ˆåˆ‡ç‰‡ï¼‰ï¼Œè¿™æ˜¯ä¸€ç§å˜é•¿æ•°ç»„ï¼Œå…¶æ•°æ®ç»“æ„ä¸­æœ‰æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Œæ‰€ä»¥æ˜¯ä¸€ç§å¼•ç”¨ç±»å‹ã€‚</p><p>ä¾‹å¦‚ï¼š</p><pre><code class="go">type slice struct {    array unsafe.Pointer    len int    cap int}</code></pre><p>Goä¸ºåˆ‡ç‰‡ç»´æŠ¤ä¸‰ä¸ªå…ƒç´ ï¼š</p><ul><li>æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆ</li><li>åˆ‡ç‰‡çš„å…ƒç´ æ•°é‡</li><li>åº•å±‚æ•°ç»„çš„å®¹é‡</li></ul><p><img src="/images/go_core_programming/Untitled%2017.png" alt="Untitled"></p><ol><li>åˆ‡ç‰‡çš„åˆ›å»º<ul><li>ç”±æ•°ç»„åˆ›å»ºï¼šåˆ›å»ºè¯­æ³•<code>array[b:e]</code> ï¼Œè¡¨ç¤ºåˆ›å»ºä¸€ä¸ªåŒ…å«e-bå„å…ƒç´ é¢çš„åˆ‡ç‰‡ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯<code>array[b]</code>ï¼Œæœ€åä¸€ä¸ªå…ƒç´ æ˜¯<code>array[e-1]</code> ã€‚ä¾‹å¦‚ï¼š  <img src="/images/go_core_programming/Untitled%2018.png" alt="Untitled"></li><li>é€šè¿‡å†…ç½®å‡½æ•°<code>make</code>åˆ›å»ºåˆ‡ç‰‡ã€‚<code>make</code>åˆ›å»ºçš„åˆ‡ç‰‡å„å…ƒç´ è¢«é»˜è®¤ä¸ºè¾“å‡ºåä¸ºåˆ‡ç‰‡å…ƒç´ ç±»å‹çš„é›¶å€¼ã€‚  <img src="/images/go_core_programming/Untitled%2019.png" alt="Untitled">  <img src="/images/go_core_programming/Untitled%2020.png" alt="Untitled"></li></ul><ol><li>åˆ‡ç‰‡æ”¯æŒçš„æ“ä½œ<ul><li>å†…ç½®å‡½æ•°<code>len()</code>è¿”å›åˆ‡ç‰‡é•¿åº¦</li><li>å†…ç½®å‡½æ•°<code>cap()</code>è¿”å›åˆ‡ç‰‡åº•å±‚æ•°ç»„å®¹é‡</li><li>å†…ç½®å‡½æ•°<code>append()</code>å¯¹åˆ‡ç‰‡è¿½åŠ å…ƒç´ </li><li>å†…ç½®å‡½æ•°<code>copy()</code>ç”¨äºå¤åˆ¶ä¸€ä¸ªåˆ‡ç‰‡</li></ul></li></ol></li></ol><h3 id="1-6-4-map"><a href="#1-6-4-map" class="headerlink" title="1.6.4 map"></a>1.6.4 map</h3><p>Goè¯­è¨€å†…ç½®çš„å­—å…¸ç±»å‹å«mapã€‚</p><p><code>map</code>ç±»å‹çš„æ ¼å¼æ˜¯ï¼š<code>map[K]T</code> ï¼Œå…¶ä¸­Kå¯ä»¥æ˜¯ä»»æ„å¯ä»¥è¿›è¡Œæ¯”è¾ƒçš„ç±»å‹ï¼ŒTæ˜¯å€¼ç±»å‹ã€‚</p><p><code>map</code>ä¹Ÿæ˜¯ä¸€ç§å¼•ç”¨ç±»å‹ã€‚</p><ol><li><code>map</code>çš„åˆ›å»º<ul><li>ä½¿ç”¨å­—é¢é‡åˆ›å»ºï¼Œä¾‹å¦‚ï¼š  <img src="/images/go_core_programming/Untitled%2021.png" alt="Untitled"></li><li>ä½¿ç”¨å†…ç½®çš„makeå‡½æ•°åˆ›å»ºï¼Œä¾‹å¦‚  <img src="/images/go_core_programming/Untitled%2022.png" alt="Untitled">  <img src="/images/go_core_programming/Untitled%2023.png" alt="Untitled"></li></ul></li><li><code>map</code>æ”¯æŒçš„æ“ä½œ<ul><li><p><code>map</code>çš„å•ä¸ªé”®å€¼è®¿é—®æ ¼å¼ä¸º<code>mapName[key]</code></p></li><li><p>å¯ä»¥ä½¿ç”¨<code>range</code>éå†ä¸€ä¸ª<code>map</code>ç±»å‹çš„å˜é‡ï¼Œä½†ä¸èƒ½ä¿è¯æ¯æ¬¡è¿­ä»£å…ƒç´ çš„é¡ºåº</p></li><li><p>åˆ é™¤<code>map</code>ä¸­çš„æŸä¸ªé”®å€¼ï¼Œ<code>delete(mapName,key)</code> ã€‚<code>delete</code>æ˜¯å†…ç½®å‡½æ•°ï¼Œç”¨æ¥åˆ é™¤<code>map</code>ä¸­çš„æŸä¸ªé”®å€¼å¯¹</p></li><li><p>å¯ä»¥ä½¿ç”¨å†…ç½®çš„<code>len()</code> å‡½æ•°è¿”å›<code>map</code>ä¸­çš„é”®å€¼å¯¹æ•°é‡</p><p>æ³¨æ„ï¼š</p></li><li><p>Goå†…ç½®çš„<code>map</code>ä¸æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œå¹¶å‘å®‰å…¨çš„<code>map</code>å¯ä»¥ä½¿ç”¨æ ‡å‡†åŒ…<code>sync</code>ä¸­çš„map</p></li><li><p>ä¸è¦ç›´æ¥ä¿®æ”¹<code>map value</code>å†…æŸä¸ªå…ƒç´ çš„å€¼ï¼Œå¦‚æœæƒ³ä¿®æ”¹<code>map</code>çš„æŸä¸ªé”®å€¼ï¼Œåˆ™å¿…é¡»æ•´ç†èµ‹å€¼</p></li></ul></li></ol><h3 id="1-6-5-struct"><a href="#1-6-5-struct" class="headerlink" title="1.6.5 struct"></a>1.6.5 struct</h3><p>Goä¸­çš„structç±»å‹å’ŒCç±»ä¼¼ï¼Œä¸­æ–‡ç¿»è¯‘ä¸ºç»“æ„ï¼Œç”±å¤šä¸ªä¸åŒç±»å‹å…ƒç´ ç»„åˆè€Œæˆã€‚</p><ul><li>structç»“æ„ä¸­çš„ç±»å‹å¯ä»¥æ˜¯ä»»æ„ç±»å‹</li><li>structçš„å­˜å‚¨ç©ºé—´æ˜¯è¿ç»­çš„ï¼Œå…¶å­—æ®µæŒ‰ç…§å£°æ˜æ—¶çš„é¡ºåºå­˜æ”¾ï¼ˆæ³¨æ„å­—æ®µå€¼ä¹‹é—´æœ‰å¯¹é½è¦æ±‚ï¼‰</li></ul><p>structæœ‰ä¸¤ç§å½¢å¼ï¼š</p><ul><li>structç±»å‹å­—é¢é‡</li><li>ä½¿ç”¨typeå£°æ˜çš„è‡ªå®šä¹‰structç±»å‹</li></ul><ol><li>strctç±»å‹å­—é¢é‡ structç±»å‹å­—é¢é‡çš„å£°æ˜æ ¼å¼å¦‚ä¸‹ï¼š <img src="/images/go_core_programming/Untitled%2024.png" alt="Untitled"></li><li>è‡ªå®šä¹‰structç±»å‹ è‡ªå®šä¹‰structç±»å‹å£°æ˜æ ¼å¼å¦‚ä¸‹ï¼š <img src="/images/go_core_programming/Untitled%2025.png" alt="Untitled"></li><li>structç±»å‹å˜é‡çš„åˆå§‹åŒ–ï¼Œç¤ºä¾‹ï¼š <img src="/images/go_core_programming/Untitled%2026.png" alt="Untitled"></li><li>å…¶ä»–å¤åˆç±»å‹<ul><li>æ¥å£ï¼ˆInterfaceï¼‰</li><li>é€šé“ï¼ˆchanï¼‰</li></ul></li></ol><h2 id="1-7-æ§åˆ¶ç»“æ„"><a href="#1-7-æ§åˆ¶ç»“æ„" class="headerlink" title="1.7 æ§åˆ¶ç»“æ„"></a>1.7 æ§åˆ¶ç»“æ„</h2><p>ç¨‹åºæ‰§è¡Œä»æœ¬è´¨ä¸Šæ¥è¯´å°±æ˜¯ä¸¤ç§æ¨¡å¼ï¼šé¡ºåºå’Œè·³è½¬</p><h3 id="1-7-1-if-è¯­å¥"><a href="#1-7-1-if-è¯­å¥" class="headerlink" title="1.7.1 if è¯­å¥"></a>1.7.1 if è¯­å¥</h3><h3 id="1-7-2-switch-è¯­å¥"><a href="#1-7-2-switch-è¯­å¥" class="headerlink" title="1.7.2 switch è¯­å¥"></a>1.7.2 switch è¯­å¥</h3><h3 id="1-7-3-for-è¯­å¥"><a href="#1-7-3-for-è¯­å¥" class="headerlink" title="1.7.3 for è¯­å¥"></a>1.7.3 for è¯­å¥</h3><h3 id="1-7-4-æ ‡ç­¾å’Œè·³è½¬"><a href="#1-7-4-æ ‡ç­¾å’Œè·³è½¬" class="headerlink" title="1.7.4 æ ‡ç­¾å’Œè·³è½¬"></a>1.7.4 æ ‡ç­¾å’Œè·³è½¬</h3><ol><li>æ ‡ç­¾ Goè¯­è¨€ä½¿ç”¨æ ‡ç­¾ï¼ˆLableï¼‰æ¥æ ‡è¯†ä¸€ä¸ªè¯­å¥çš„ä½ç½®ï¼Œç”¨äºgotoã€breakã€continueè¯­å¥çš„è·³è½¬ã€‚æ ‡ç­¾çš„è¯­æ³•æ˜¯ï¼š <img src="/images/go_core_programming/Untitled%2027.png" alt="Untitled"></li><li>goto gotoè¯­å¥ç”¨äºå‡½æ•°çš„å†…éƒ¨è·³è½¬ï¼Œéœ€è¦é…åˆæ ‡ç­¾ä¸€èµ·ä½¿ç”¨ï¼š <img src="/images/go_core_programming/Untitled%2028.png" alt="Untitled"> gotoç‰¹ç‚¹ï¼š<ul><li>gotoè¯­å¥åªèƒ½åœ¨å‡½æ•°å†…è·³è½¬</li><li>gotoè¯­å¥ä¸èƒ½è·³è¿‡å†…éƒ¨å˜é‡å£°æ˜è¯­å¥ï¼Œè¿™äº›å˜é‡åœ¨gotoè¯­å¥çš„æ ‡ç­¾è¯­å¥å¤„æœ‰äº‹å¯è§çš„</li><li>gotoè¯­å¥åªèƒ½è°ƒåˆ°åŒçº§ä½œç”¨åŸŸæˆ–è€…ä¸Šå±‚ä½œç”¨åŸŸï¼Œä¸èƒ½è·³åˆ°å†…éƒ¨ä½œç”¨åŸŸ</li></ul></li><li>break breakç”¨äºå‡½æ•°å†…è·³å‡ºforã€switchã€selectè¯­å¥çš„æ‰§è¡Œï¼Œæœ‰ä¸¤ç§ä½¿ç”¨æ ¼å¼ï¼š<ul><li>å•ç‹¬ä½¿ç”¨ï¼šç”¨äºè·³å‡ºbreakå½“å‰æ‰€åœ¨çš„forã€switchã€selectè¯­å¥çš„æ‰§è¡Œ</li><li>å’Œæ ‡ç­¾ä¸€èµ·ä½¿ç”¨ï¼šç”¨äºè·³å‡ºæ ‡ç­¾æ‰€æ ‡è¯†çš„forã€switchã€selectè¯­å¥çš„æ‰§è¡Œï¼Œå¯ç”¨äºè·³å‡ºå¤šé‡å¾ªç¯ï¼Œä½†æ ‡ç­¾å’Œbreakå¿…é¡»åœ¨åŒä¸€ä¸ªå‡½æ•°å†…ï¼Œä¾‹å¦‚ï¼š  <img src="/images/go_core_programming/Untitled%2029.png" alt="Untitled"></li></ul></li><li>continue continueç”¨äºè·³å‡ºforå¾ªç¯çš„æœ¬æ¬¡è¿­ä»£ï¼Œè·³åˆ°forå¾ªç¯çš„ä¸‹ä¸€æ¬¡è¿­ä»£çš„postè¯­å¥å¤„æ‰§è¡Œï¼Œæœ‰ä¸¤ç§ä½¿ç”¨æ ¼å¼ï¼š<ul><li><p>å•ç‹¬ä½¿ç”¨ï¼šè·³å‡ºcontinueå½“å‰æ‰€åœ¨çš„forå¾ªç¯çš„æœ¬æ¬¡è¿­ä»£</p></li><li><p>å’Œæ ‡ç­¾ä¸€èµ·ä½¿ç”¨ï¼šè·³å‡ºæ ‡ç­¾æ‰€æ ‡ç¤ºçš„forè¯­å¥çš„æœ¬æ¬¡è¿­ä»£ï¼Œä½†æ ‡ç­¾å’Œcontinueå¿…é¡»åœ¨åŒä¸€ä¸ªå‡½æ•°å†…ï¼Œä¾‹å¦‚ï¼š</p><p><img src="/images/go_core_programming/Untitled%2030.png" alt="Untitled"></p></li></ul></li><li>returnå’Œå‡½æ•°è°ƒç”¨ returnè¯­å¥ä¹Ÿèƒ½å¼•å‘æ§åˆ¶æµç¨‹çš„è·³è½¬ï¼Œç”¨äºå‡½æ•°å’Œæ–¹æ³•çš„é€€å‡ºã€‚</li></ol><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><ol><li><p><code>slice</code> å’Œ <code>array</code> åŒºåˆ«</p><ul><li>åˆ›å»ºæ–¹å¼ä¸åŒï¼šæ•°ç»„<code>var identifier [len]type</code> ï¼›åˆ‡ç‰‡<code>var slice3 = []int{}</code></li><li><code>slice</code>çš„<code>array</code>å®é™…ä¸Šæ˜¯æ•°ç»„çš„æŒ‡é’ˆï¼Œæ‰€ä»¥ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’æ—¶ä¸åŒï¼šæ•°ç»„ä¼ é€’çš„æ˜¯æ•°ç»„çš„å‰¯æœ¬ï¼›<code>slice</code>ä¼ é€’çš„æ˜¯æ•°ç»„çš„æŒ‡é’ˆ</li><li>é•¿åº¦æ˜¯å¦å›ºå®šï¼šæ•°ç»„é•¿åº¦å›ºå®šï¼›åˆ‡ç‰‡çš„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œå¯ä»¥è¿½åŠ å…ƒç´ ï¼Œåœ¨è¿½åŠ æ—¶å¯èƒ½ä½¿åˆ‡ç‰‡çš„å®¹é‡å¢å¤§</li></ul></li><li><p>structèƒ½ä¸èƒ½æ¯”è¾ƒï¼Ÿ<a href="https://juejin.cn/post/6881912621616857102">https://juejin.cn/post/6881912621616857102</a> </p></li><li><p>sliceï¼Œlenï¼Œcapï¼Œå…±äº«ï¼Œæ‰©å®¹</p></li><li><p>for å¾ªç¯éå† slice æœ‰ä»€ä¹ˆé—®é¢˜</p><ul><li>for rang Aï¼Œæ˜¯å¯¹Açš„å€¼æ‹·è´ï¼Œé—®é¢˜ä»£ç ï¼š<pre><code class="go">func TestName(t *testing.T) {    s :=[]int{1,2,3,4}    m :=make(map[int]*int)    for k,v:=range s{        m[k]= &amp;v    }    for key, value := range m {        fmt.Printf("map[%v]=%v\n", key, *value)    }    fmt.Println(m)}</code></pre>  æ”¹æ­£ï¼š<pre><code class="go">func TestName(t *testing.T) {    s := []int{1, 2, 3, 4}    m := make(map[int]*int)    for k, v := range s {        // è¿™é‡Œå˜åŠ¨        n := v        m[k] = &amp;n    }    for key, value := range m {        fmt.Printf("map[%v]=%v\n", key, *value)    }    fmt.Println(m)}</code></pre></li></ul></li><li><p>è¯·ä½ è¯´è¯´golangçš„CSPæ€æƒ³</p></li><li><p>è¿›ç¨‹ï¼Œåç¨‹ï¼Œçº¿ç¨‹å„è‡ªçš„ä¼˜ç¼ºç‚¹</p></li></ol><h1 id="ç¬¬-2-ç« -å‡½æ•°"><a href="#ç¬¬-2-ç« -å‡½æ•°" class="headerlink" title="ç¬¬ 2 ç«  å‡½æ•°"></a>ç¬¬ 2 ç«  å‡½æ•°</h1><p>Goä¸­çš„å‡½æ•°ï¼š</p><ul><li>å‡½æ•°æ˜¯ä¸€ç§ç±»å‹ï¼Œå‡½æ•°ç±»å‹å˜é‡å¯ä»¥å‘å…¶ä»–ç±»å‹å˜é‡ä¸€æ ·ä½¿ç”¨ï¼Œå¯ä»¥ä½œä¸ºå…¶å®ƒå‡½æ•°çš„å‚æ•°æˆ–è¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨æ‰§è¡Œ</li><li>å‡½æ•°æ”¯æŒå¤šå€¼è¿”å›</li><li>æ”¯æŒé—­åŒ…</li><li>å‡½æ•°æ”¯æŒå¯å˜å‚æ•°</li></ul><h2 id="2-1-åŸºæœ¬æ¦‚å¿µ"><a href="#2-1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="2.1 åŸºæœ¬æ¦‚å¿µ"></a>2.1 åŸºæœ¬æ¦‚å¿µ</h2><h3 id="2-1-1-å‡½æ•°å®šä¹‰"><a href="#2-1-1-å‡½æ•°å®šä¹‰" class="headerlink" title="2.1.1 å‡½æ•°å®šä¹‰"></a>2.1.1 å‡½æ•°å®šä¹‰</h3><p>åŒ…æ‹¬å¦‚ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>å‡½æ•°å£°æ˜å…³é”®å­—func</li><li>å‡½æ•°å</li><li>å‚æ•°åˆ—è¡¨</li><li>è¿”å›åˆ—è¡¨å’Œå‡½æ•°ä½“</li></ul><p>å‡½æ•°çš„ç‰¹ç‚¹ï¼š</p><ul><li>å‡½æ•°å¯ä»¥æ²¡æœ‰è¾“å…¥å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰è¿”å›å€¼ï¼ˆé»˜è®¤è¿”å›0ï¼‰</li><li>å¤šä¸ªç›¸é‚»çš„ç›¸åŒç±»å‹çš„å‚æ•°å¯ä»¥ä½¿ç”¨ç®€å†™æ¨¡å¼</li><li>æ”¯æŒæœ‰åçš„è¿”å›å€¼ï¼Œå‚æ•°åå°±ç›¸å½“äºå‡½æ•°ä½“å†…æœ€å¤–å±‚çš„å±€éƒ¨å˜é‡ï¼Œå‘½åè¿”å›å€¼å˜é‡ä¼šè¢«åˆå§‹åŒ–æˆç±»å‹é›¶å€¼</li><li>ä¸æ”¯æŒé»˜è®¤å€¼å‚æ•°</li><li>ä¸æ”¯æŒå‡½æ•°é‡è½½</li><li>ä¸æ”¯æŒå‡½æ•°åµŒå¥—ï¼Œä¸¥æ ¼çš„è¯´æ˜¯ä¸æ”¯æŒå‘½åå‡½æ•°çš„åµŒå¥—å®šä¹‰ï¼Œä½†æ”¯æŒåµŒå¥—åŒ¿åå‡½æ•°</li></ul><h3 id="2-1-2-å¤šå€¼è¿”å›"><a href="#2-1-2-å¤šå€¼è¿”å›" class="headerlink" title="2.1.2 å¤šå€¼è¿”å›"></a>2.1.2 å¤šå€¼è¿”å›</h3><p>ä¹ æƒ¯ç”¨æ³•ï¼šå¦‚æœå¤šå€¼è¿”å›ä¹‹æœ‰é”™è¯¯ç±»å‹ï¼Œåˆ™ä¸€èˆ¬å°†é”™è¯¯ç±»å‹ä½œä¸ºæœ€åä¸€ä¸ªè¿”å›å€¼</p><h3 id="2-1-3-å®å‚åˆ°å½¢å‚çš„ä¼ é€’"><a href="#2-1-3-å®å‚åˆ°å½¢å‚çš„ä¼ é€’" class="headerlink" title="2.1.3 å®å‚åˆ°å½¢å‚çš„ä¼ é€’"></a>2.1.3 å®å‚åˆ°å½¢å‚çš„ä¼ é€’</h3><p>Goå‡½æ•°å®å‚åˆ°å½¢å‚çš„ä¼ é€’æ°¸è¿œæ˜¯å€¼æ‹·è´ã€‚æœ‰æ—¶å‡½æ•°è°ƒç”¨åå®å‚æŒ‡å‘çš„å€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£æ˜¯å› ä¸ºå‚æ•°ä¼ é€’çš„æ˜¯æŒ‡é’ˆå€¼çš„æ‹·è´ï¼Œå®å‚æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œä¼ é€’ç»™å½¢å‚çš„æ˜¯è¿™ä¸ªæŒ‡é’ˆå˜é‡çš„å‰¯æœ¬ï¼ŒäºŒè€…æŒ‡å‘åŒä¸€åœ°å€ã€‚</p><h3 id="2-1-4-ä¸å®šå‚æ•°"><a href="#2-1-4-ä¸å®šå‚æ•°" class="headerlink" title="2.1.4 ä¸å®šå‚æ•°"></a>2.1.4 ä¸å®šå‚æ•°</h3><p>Goæ”¯æŒä¸å®šæ•°æ®çš„å½¢å¼å‚æ•°ï¼Œå£°æ˜ä½¿ç”¨<code>param ...type</code> .</p><p>ä¸å®šå‚æ•°ç‰¹ç‚¹ï¼š</p><ul><li>æ‰€æœ‰çš„ä¸å®šå‚æ•°ç±»å‹å¿…é¡»æ˜¯ç›¸åŒçš„</li><li>ä¸å®šå‚æ•°å¿…é¡»æ˜¯å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°</li><li>ä¸å®šå‚æ•°åœ¨å‡½æ•°ä½“å†…ç›¸å½“äºåˆ‡ç‰‡ï¼Œå¯¹åˆ‡ç‰‡çš„æ“ä½œåŒæ ·é€‚åˆå¯¹ä¸å®šå‚æ•°çš„æ“ä½œ</li><li>åˆ‡ç‰‡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™ä¸å®šå‚æ•°ï¼Œåˆ‡ç‰‡ååè¦åŠ ä¸Šâ€â€¦â€</li><li>å½¢å‚ä¸ºä¸å®šå‚æ•°çš„å‡½æ•°å’Œå½¢å‚ä¸ºåˆ‡ç‰‡çš„å‡½æ•°ç±»å‹ä¸ç›¸åŒ</li></ul><h2 id="2-2-å‡½æ•°ç­¾åå’ŒåŒ¿åå‡½æ•°"><a href="#2-2-å‡½æ•°ç­¾åå’ŒåŒ¿åå‡½æ•°" class="headerlink" title="2.2 å‡½æ•°ç­¾åå’ŒåŒ¿åå‡½æ•°"></a>2.2 å‡½æ•°ç­¾åå’ŒåŒ¿åå‡½æ•°</h2><h3 id="2-2-1-å‡½æ•°ç­¾å"><a href="#2-2-1-å‡½æ•°ç­¾å" class="headerlink" title="2.2.1 å‡½æ•°ç­¾å"></a>2.2.1 å‡½æ•°ç­¾å</h3><p>å‡½æ•°ç±»å‹åˆå«å‡½æ•°ç­¾åï¼Œå¯ä»¥ä½¿ç”¨fmt.Printfçš„%Tæ ¼å¼åŒ–å‚æ•°æ‰“å°å‡½æ•°çš„ç±»å‹</p><h3 id="2-2-2-åŒ¿åå‡½æ•°"><a href="#2-2-2-åŒ¿åå‡½æ•°" class="headerlink" title="2.2.2 åŒ¿åå‡½æ•°"></a>2.2.2 åŒ¿åå‡½æ•°</h3><p>Goæä¾›ä¸¤ç§å‡½æ•°ï¼šæœ‰åå‡½æ•°å’ŒåŒ¿åå‡½æ•°</p><p>åŒ¿åå‡½æ•°å¯ä»¥ç›´æ¥å¤åˆ¶ç»™å‡½æ•°å˜é‡ï¼Œå¯ä»¥å½“åšå®å‚ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè¿”å›å€¼ï¼Œè¿˜å¯ä»¥ç›´æ¥è¢«è°ƒç”¨ã€‚</p><h2 id="2-3-defer"><a href="#2-3-defer" class="headerlink" title="2.3 defer"></a>2.3 defer</h2><p>Goæä¾›äº†deferå…³é”®å­—ï¼Œå¯ä»¥æ³¨å†Œå¤šä¸ªå»¶è¿Ÿè°ƒç”¨ï¼Œè¿™äº›è°ƒç”¨ä»¥å…ˆè¿›åå‡ºçš„é¡ºåºåœ¨å‡½æ•°è¿”å›å‰è¢«æ‰§è¡Œã€‚è¿™æœ‰ç‚¹ç±»ä¼¼äºJavaè¯­è¨€ä¸­å¼‚å¸¸å¤„ç†çš„finalyè¯­å¥ã€‚</p><p>deferå¸¸ç”¨è¯­ä¿è¯ä¸€äº›èµ„æºæœ€ç»ˆä¸€å®šèƒ½å¤Ÿå¾—åˆ°å›æ”¶å’Œé‡Šæ”¾ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>deferåé¢å¿…é¡»æ˜¯å‡½æ•°æˆ–æ–¹æ³•çš„è°ƒç”¨ï¼Œä¸èƒ½æ˜¯è¯­å¥</li><li>deferå‡½æ•°çš„å®å‚åœ¨æ³¨å†Œæ—¶é€šè¿‡å€¼æ‹·è´ä¼ é€’è¿›å»</li><li>deferè¯­å¥å¿…é¡»å…ˆæ³¨å†Œåæ‰èƒ½æ‰§è¡Œ</li></ul><p>ä¼˜åŠ¿ï¼šå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…èµ„æºæ³„éœ²</p><p>ç¼ºç‚¹ï¼š</p><ul><li>deferä¼šæ¨è¿Ÿèµ„æºçš„é‡Šæ”¾</li><li>deferä¸è¦å†™åœ¨å¾ªç¯è¯­å¥é‡Œé¢</li><li>deferæœ€å¥½ä¸è¦å¯¹æœ‰åè¿”å›å€¼å‚æ•°è¿›è¡Œæ“ä½œ</li></ul><h2 id="2-4-é—­åŒ…"><a href="#2-4-é—­åŒ…" class="headerlink" title="2.4 é—­åŒ…"></a>2.4 é—­åŒ…</h2><p>é—­åŒ…æ˜¯ç”±å‡½æ•°åŠå…¶ç›¸å…³å¼•ç”¨ç¯å¢ƒç»„åˆè€Œæˆçš„å®ä½“ã€‚</p><p><code>é—­åŒ… = å‡½æ•° + å¼•ç”¨ç¯å¢ƒ</code></p><ol><li>é—­åŒ…å¯¹é—­åŒ…å¤–çš„ç¯å¢ƒå¼•å…¥æ˜¯ç›´æ¥å¼•ç”¨ï¼Œç¼–è¯‘å™¨æ£€æµ‹åˆ°é—­åŒ…ä¼šå°†é—­åŒ…å¼•ç”¨çš„å¤–éƒ¨å˜é‡åˆ†é…åˆ°å †ä¸Š</li><li>å¦‚æœå‡½æ•°è¿”å›çš„é—­åŒ…å¼•ç”¨äº†è¯¥å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼ˆå‚æ•°æˆ–å‡½æ•°å†…éƒ¨å˜é‡ï¼‰<ol><li>å¤šæ¬¡è°ƒç”¨è¯¥å‡½æ•°è¿”å›çš„å¤šä¸ªé—­åŒ…æ‰€å¼•ç”¨çš„å¤–éƒ¨å˜é‡æ˜¯å¤šä¸ªå‰¯æœ¬ï¼ŒåŸå› æ˜¯æ¯æ¬¡è°ƒç”¨å‡½æ•°éƒ½ä¼šä¸ºå±€éƒ¨å˜é‡åˆ†é…å†…å­˜</li><li>ç”¨ä¸€ä¸ªé—­åŒ…å‡½æ•°å¤šæ¬¡ï¼Œå¦‚æœè¯¥é—­åŒ…ä¿®æ”¹äº†å…¶å¼•ç”¨çš„å¤–éƒ¨å˜é‡ï¼Œåˆ™æ¯ä¸€æ¬¡è°ƒç”¨è¯¥é—­åŒ…å¯¹è¯¥å¤–åŒ…å˜é‡éƒ½æœ‰å½±å“ï¼Œå› ä¸ºé—­åŒ…å‡½æ•°å…±äº«å¤–éƒ¨å¼•ç”¨</li></ol></li></ol><h3 id="2-4-2-é—­åŒ…çš„ä»·å€¼"><a href="#2-4-2-é—­åŒ…çš„ä»·å€¼" class="headerlink" title="2.4.2 é—­åŒ…çš„ä»·å€¼"></a>2.4.2 é—­åŒ…çš„ä»·å€¼</h3><p>å¯¹è±¡æ˜¯é™„æœ‰è¡Œä¸ºçš„æ•°æ®ï¼Œé—­åŒ…æ˜¯é™„æœ‰æ•°æ®çš„è¡Œä¸ºã€‚</p><h2 id="2-5-panicå’Œrecover"><a href="#2-5-panicå’Œrecover" class="headerlink" title="2.5 panicå’Œrecover"></a>2.5 panicå’Œrecover</h2><p>panicç”¨æ¥ä¸»åŠ¨æŠ›å‡ºé”™è¯¯</p><p>recoverç”¨æ¥æ•è·panicæŠ›å‡ºçš„é”™è¯¯</p><h3 id="2-5-1-åŸºæœ¬æ¦‚å¿µ"><a href="#2-5-1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="2.5.1 åŸºæœ¬æ¦‚å¿µ"></a>2.5.1 åŸºæœ¬æ¦‚å¿µ</h3><p><img src="/images/go_core_programming/Untitled%2031.png" alt="Untitled"></p><p>å¼•å‘panicçš„æƒ…å†µï¼š</p><ul><li>ç¨‹åºä¸»åŠ¨è°ƒç”¨panicå‡½æ•°</li><li>ç¨‹åºäº§ç”Ÿè¿è¡Œæ—¶é”™è¯¯ï¼Œç”±è¿è¡Œæ—¶æ£€æµ‹å¹¶æŠ›å‡º</li></ul><p>recoverç”¨æ¥æ•è·panicï¼Œé˜»æ­¢panicç»§ç»­å‘ä¸Šä¼ é€’</p><h3 id="2-5-2-ä½¿ç”¨åœºæ™¯"><a href="#2-5-2-ä½¿ç”¨åœºæ™¯" class="headerlink" title="2.5.2 ä½¿ç”¨åœºæ™¯"></a>2.5.2 ä½¿ç”¨åœºæ™¯</h3><ul><li>ç¨‹åºé‡åˆ°äº†æ— æ³•æ­£å¸¸æ‰§è¡Œä¸‹å»çš„é”™è¯¯ï¼Œä¸»åŠ¨è°ƒç”¨panicå‡½æ•°ç»“æŸç¨‹åºè¿è¡Œ</li><li>åœ¨è°ƒè¯•ç¨‹åºæ—¶ï¼Œé€šè¿‡ä¸»åŠ¨è°ƒç”¨panicå®ç°å¿«é€Ÿé€€å‡ºï¼Œpanicæ‰“å°å‡ºçš„å †æ ˆèƒ½å¤Ÿæ›´å¿«çš„å®šä½é”™è¯¯</li></ul><h2 id="2-6-é”™è¯¯å¤„ç†"><a href="#2-6-é”™è¯¯å¤„ç†" class="headerlink" title="2.6 é”™è¯¯å¤„ç†"></a>2.6 é”™è¯¯å¤„ç†</h2><h3 id="2-6-1-error"><a href="#2-6-1-error" class="headerlink" title="2.6.1 error"></a>2.6.1 error</h3><p>Goè¯­è¨€å†…ç½®é”™è¯¯æ¥å£ç±»å‹error</p><p>é”™è¯¯å¤„ç†çš„æœ€ä½³å®è·µï¼š</p><ul><li>åœ¨å¤šä¸ªè¿”å›å€¼çš„å‡½æ•°ä¸­ï¼Œerroré€šå¸¸ä½œä¸ºå‡½æ•°æœ€åä¸€ä¸ªè¿”å›å€¼</li><li>å¦‚æœä¸€ä¸ªå‡½æ•°è¿”å›errorç±»å‹å˜é‡ï¼Œåˆ™å…ˆç”¨ifè¯­å¥å¤„ç†<code>error != nil</code> çš„å¼‚å¸¸åœºæ™¯ï¼Œæ­£å¸¸é€»è¾‘æ”¾åˆ°ifè¯­å¥å—åé¢ä¿æŒä»£ç å¹³å¦</li><li>deferè¯­å¥åº”è¯¥æ”¾åˆ°erråˆ¤æ–­çš„åé¢ï¼Œä¸ç„¶æœ‰å¯èƒ½äº§ç”Ÿpanic</li><li>åœ¨é”™è¯¯é€çº§å‘ä¸Šä¼ é€’çš„è¿‡ç¨‹ä¸­ï¼Œé”™è¯¯ä¿¡æ¯åº”è¯¥ä¸æ–­åœ°ä¸°å¯Œå’Œå®Œå–„ï¼Œè€Œä¸æ˜¯ç®€å•æŠ›å‡ºä¸‹å±‚è°ƒç”¨çš„é”™è¯¯</li></ul><pre><code class="go">func deferDemo() error {    err := createResource1()    if err != nil {        return ERR_CREATE_RESOURCE1_FAILED    }    defer func() {        if err != nil {            destroyResource1()        }    }()}</code></pre><h3 id="2-6-2-é”™è¯¯å’Œå¼‚å¸¸"><a href="#2-6-2-é”™è¯¯å’Œå¼‚å¸¸" class="headerlink" title="2.6.2 é”™è¯¯å’Œå¼‚å¸¸"></a>2.6.2 é”™è¯¯å’Œå¼‚å¸¸</h3><p>Goç¨‹åºéœ€è¦å¤„ç†çš„é”™è¯¯ç±»å‹ï¼š</p><ul><li>è¿è¡Œæ—¶é”™è¯¯ï¼šæ— æ³•é¿å…ï¼Œå¯ä»¥recoverè¿™äº›panic</li><li>ç¨‹åºé€»è¾‘é”™è¯¯</li></ul><p>errorå’Œpanicåº”è¯¥éµå¾ªå¦‚ä¸‹åŸåˆ™ï¼š</p><ul><li>ç¨‹åºå‘ç”Ÿçš„é”™è¯¯å¯¼è‡´ç¨‹åºä¸èƒ½å®¹é”™ç»§ç»­æ‰§è¡Œï¼Œæ­¤æ—¶ç¨‹åºåº”è¯¥ä¸»åŠ¨è°ƒç”¨panicæˆ–ç”±è¿è¡Œæ—¶æŠ›å‡ºpanic</li><li>ç¨‹åºè™½ç„¶å‘ç”Ÿé”™è¯¯ï¼Œä½†æ˜¯ç¨‹åºèƒ½å¤Ÿå®¹é”™ç»§ç»­æ‰§è¡Œï¼Œæ­¤æ—¶åº”è¯¥ä½¿ç”¨é”™è¯¯è¿”å›å€¼çš„æ–¹å¼å¤„ç†é”™è¯¯ï¼Œæˆ–è€…åœ¨å¯èƒ½å‘ç”Ÿè¿è¡Œæ—¶é”™è¯¯çš„éå…³é”®åˆ†æ”¯ä¸Šä½¿ç”¨recoveræ•è·panic</li></ul><pre><code class="go">func TestName(t *testing.T) {    height := []int{2,3,4,5,18,17,6}    defer func() {        if err := recover(); err != nil {            fmt.Println(err)        }    }()    print(height[10])}</code></pre><h2 id="2-7-åº•å±‚å®ç°"><a href="#2-7-åº•å±‚å®ç°" class="headerlink" title="2.7 åº•å±‚å®ç°"></a>2.7 åº•å±‚å®ç°</h2><h1 id="ç¬¬-3-ç« -ç±»å‹ç³»ç»Ÿ"><a href="#ç¬¬-3-ç« -ç±»å‹ç³»ç»Ÿ" class="headerlink" title="ç¬¬ 3 ç«  ç±»å‹ç³»ç»Ÿ"></a>ç¬¬ 3 ç«  ç±»å‹ç³»ç»Ÿ</h1><h2 id="3-1-ç±»å‹ç®€ä»‹"><a href="#3-1-ç±»å‹ç®€ä»‹" class="headerlink" title="3.1 ç±»å‹ç®€ä»‹"></a>3.1 ç±»å‹ç®€ä»‹</h2><h3 id="3-1-1-å‘½åç±»å‹å’Œæœªå‘½åç±»å‹"><a href="#3-1-1-å‘½åç±»å‹å’Œæœªå‘½åç±»å‹" class="headerlink" title="3.1.1 å‘½åç±»å‹å’Œæœªå‘½åç±»å‹"></a>3.1.1 å‘½åç±»å‹å’Œæœªå‘½åç±»å‹</h3><p>å‘½åç±»å‹ï¼šå¯ä»¥é€šè¿‡æ ‡è¯†ç¬¦æ¥è¡¨ç¤ºï¼ˆ3.2èŠ‚è¯¦ç»†ä»‹ç»ï¼‰</p><p>æœªå‘½åç±»å‹ï¼šä¸€ä¸ªç±»å‹ç”±é¢„å£°æ˜ç±»å‹ã€å…³é”®å­—å’Œæ“ä½œç¬¦ç»„åˆè€Œæˆï¼Œåˆç§°ä¸ºç±»å‹å­—é¢é‡ã€‚ä¾‹å¦‚ï¼šæ•°ç»„ï¼ˆarrayï¼‰ã€åˆ‡ç‰‡ï¼ˆsliceï¼‰ã€å­—å…¸ï¼ˆmapï¼‰ã€é€šé“ï¼ˆchannelï¼‰ã€æŒ‡é’ˆï¼ˆpointerï¼‰ã€å‡½æ•°å­—é¢é‡ï¼ˆfunctionï¼‰ã€ç»“æ„ï¼ˆstructï¼‰å’Œæ¥å£ï¼ˆinterfaceï¼‰éƒ½å±äºç±»å‹å­—é¢é‡</p><h3 id="3-1-2-åº•å±‚ç±»å‹"><a href="#3-1-2-åº•å±‚ç±»å‹" class="headerlink" title="3.1.2 åº•å±‚ç±»å‹"></a>3.1.2 åº•å±‚ç±»å‹</h3><p>æ‰€æœ‰â€œç±»å‹â€éƒ½æœ‰ä¸€ä¸ªunderlying typeï¼ˆåº•å±‚ç±»å‹ï¼‰ã€‚åº•å±‚ç±»å‹çš„è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>é¢„å£°æ˜ç±»å‹ï¼ˆPre-declared typesï¼‰å’Œç±»å‹å­—é¢é‡ï¼ˆtype literalsï¼‰çš„åº•å±‚ç±»å‹æ˜¯ä»–ä»¬è‡ªèº«</li><li>è‡ªå®šä¹‰ç±»å‹type newtype oldtypeä¸­çš„newtypeçš„åº•å±‚æ˜¯é€å±‚é€’å½’å‘ä¸‹æŸ¥æ‰¾çš„ï¼ŒçŸ¥é“æŸ¥åˆ°çš„oldtypeæ˜¯é¢„å£°æ˜ç±»å‹ï¼ˆPre-declared typesï¼‰æˆ–ç±»å‹å­—é¢é‡ï¼ˆtype literalsï¼‰ä¸ºæ­¢ã€‚</li></ul><h3 id="3-1-3-ç±»å‹ç›¸åŒå’Œç±»å‹èµ‹å€¼"><a href="#3-1-3-ç±»å‹ç›¸åŒå’Œç±»å‹èµ‹å€¼" class="headerlink" title="3.1.3 ç±»å‹ç›¸åŒå’Œç±»å‹èµ‹å€¼"></a>3.1.3 ç±»å‹ç›¸åŒå’Œç±»å‹èµ‹å€¼</h3><p><strong>ç±»å‹ç›¸åŒ</strong></p><p>Goæ˜¯å¼ºç±»å‹çš„è¯­è¨€ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¼šè¿›è¡Œä¸¥æ ¼çš„ç±»å‹æ ¡éªŒã€‚ä¸¤ä¸ªå‘½åç±»å‹æ˜¯å¦ç›¸åŒçš„åˆ¤æ–­ï¼š</p><ul><li>ä¸¤ä¸ªå‘½åç±»å‹ç›¸åŒçš„æ¡ä»¶æ˜¯ä¸¤ä¸ªç±»å‹å£°æ˜çš„è¯­å¥å®Œå…¨ç›¸åŒ</li><li>å‘½åç±»å‹å’Œæœªå‘½ä»¤ç±»å‹æ°¸è¿œä¸ç›¸åŒ</li><li>ä¸¤ä¸ªæœªå‘½åç±»å‹ç›¸åŒçš„æ¡ä»¶æ˜¯ä»–ä»¬çš„ç±»å‹å£°æ˜å­—é¢é‡çš„ç»“æ„ç›¸åŒï¼Œå¹¶ä¸”å†…éƒ¨å…ƒç´ çš„ç±»å‹ç›¸åŒ</li><li>é€šè¿‡ç±»å‹åˆ«åè¯­å¥å£°æ˜çš„ä¸¤ä¸ªç±»å‹ç›¸åŒ</li></ul><p><strong>ç±»å‹å¯ç›´æ¥èµ‹å€¼</strong></p><p>ç±»å‹ä¸ºT1çš„å˜é‡aå¯ä»¥èµ‹å€¼ç»™ç±»å‹ä¸ºT2çš„å˜é‡bï¼Œç§°ä¸ºç±»å‹T1å¯ä»¥èµ‹å€¼ç»™ç±»å‹T2ï¼Œä¼ªä»£ç ï¼š</p><pre><code class="go">var b T2 = a</code></pre><p>aå¯ä»¥èµ‹å€¼ç»™å˜é‡bå¿…é¡»è¦æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ä¸­çš„ä¸€ä¸ªï¼š</p><ul><li>T1å’ŒT2çš„ç±»å‹ç›¸åŒ</li><li>T1å’ŒT2å…·æœ‰ç›¸åŒçš„åº•å±‚ç±»å‹ï¼Œå¹¶ä¸”T1å’ŒT2é‡Œé¢è‡³å°‘æœ‰ä¸€ä¸ªæ˜¯æœªå‘½åç±»å‹</li><li>T2æ˜¯æ¥å£ç±»å‹ï¼ŒT1æ˜¯å…·ä½“ç±»å‹ï¼ŒT1çš„æ–¹æ³•é›†æ˜¯T2æ–¹æ³•é›†çš„è¶…çº§</li><li>T1å’ŒT2éƒ½æ˜¯é€šé“ç±»å‹ï¼Œä»–ä»¬æ‹¥æœ‰ç›¸åŒçš„å…ƒç´ ç±»å‹ï¼Œå¹¶ä¸”T1å’ŒT2è‡³å°‘æœ‰ä¸€ä¸ªæ˜¯æœªå‘½åç±»å‹</li><li>aæ˜¯é¢„å£°æ˜æ ‡è¯†ç¬¦nilï¼ŒT2æ˜¯pointerã€functionã€sliceã€mapã€channelã€interfaceç±»å‹ä¸­çš„ä¸€ä¸ª</li><li>aæ˜¯ä¸€ä¸ªå­—é¢å¸¸é‡å€¼ï¼Œå¯ä»¥ç”¨æ¥è¡¨ç¤ºç±»å‹Tçš„å€¼</li></ul><h3 id="3-1-4-ç±»å‹å¼ºåˆ¶è½¬æ¢"><a href="#3-1-4-ç±»å‹å¼ºåˆ¶è½¬æ¢" class="headerlink" title="3.1.4 ç±»å‹å¼ºåˆ¶è½¬æ¢"></a>3.1.4 ç±»å‹å¼ºåˆ¶è½¬æ¢</h3><p>ç”±äºGoæ˜¯å¼ºç±»å‹çš„è¯­è¨€ï¼Œå¦‚æœä¸æ»¡è¶³è‡ªåŠ¨è½¬æ¢çš„æ¡ä»¶ï¼Œåˆ™å¿…é¡»è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p><p>éå¸¸é‡ç±»å‹çš„å˜é‡xå¯ä»¥å¼ºåˆ¶è½¬åŒ–å¹¶ä¼ é€’ç»™ç±»å‹Tï¼Œéœ€è¦æ»¡è¶³å¦‚ä¸‹ä»»ä¸€æ¡ä»¶ï¼š</p><ul><li>xå¯ä»¥ç›´æ¥èµ‹å€¼ç»™Tç±»å‹å˜é‡</li><li>xç±»å‹å’ŒTå…·æœ‰ç›¸åŒçš„åº•å±‚ç±»å‹</li><li>xçš„ç±»å‹å’ŒTéƒ½æ˜¯æœªå‘½åçš„æŒ‡é’ˆç±»å‹ï¼Œå¹¶ä¸”æŒ‡é’ˆæŒ‡å‘çš„ç±»å‹å…·æœ‰ç›¸åŒçš„åº•å±‚ç±»å‹</li><li>xçš„ç±»å‹å’ŒTéƒ½æ˜¯æ•´å‹æˆ–è€…éƒ½æ˜¯æµ®ç‚¹å‹</li><li>xçš„ç±»å‹å’ŒTéƒ½æ˜¯å¤æ•°ç±»å‹</li><li>xæ˜¯æ•´æ•°å€¼æˆ–[]byteç±»å‹çš„å€¼ï¼ŒTæ˜¯stringç±»å‹</li><li>xæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒTæ˜¯[]byteæˆ–[]rune</li></ul><h2 id="3-2-ç±»å‹æ–¹æ³•"><a href="#3-2-ç±»å‹æ–¹æ³•" class="headerlink" title="3.2 ç±»å‹æ–¹æ³•"></a>3.2 ç±»å‹æ–¹æ³•</h2><h3 id="3-2-1-è‡ªå®šä¹‰ç±»å‹"><a href="#3-2-1-è‡ªå®šä¹‰ç±»å‹" class="headerlink" title="3.2.1 è‡ªå®šä¹‰ç±»å‹"></a>3.2.1 è‡ªå®šä¹‰ç±»å‹</h3><p>è‡ªå®šä¹‰ç±»å‹éƒ½æ˜¯å‘½åç±»å‹</p><p><img src="/images/go_core_programming/Untitled%2032.png" alt="Untitled"></p><p>è‡ªå®šä¹‰structç±»å‹</p><h3 id="3-2-2-æ–¹æ³•"><a href="#3-2-2-æ–¹æ³•" class="headerlink" title="3.2.2 æ–¹æ³•"></a>3.2.2 æ–¹æ³•</h3><p><img src="/images/go_core_programming/Untitled%2033.png" alt="Untitled"></p><p>ç±»å‹æ–¹æ³•æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>å¯ä»¥ä¸ºå‘½åç±»å‹å¢åŠ æ–¹æ³•ï¼ˆé™¤äº†æ¥å£ï¼‰ï¼Œéå‘½åç±»å‹ä¸èƒ½è‡ªå®šä¹‰æ–¹æ³•</li><li>ä¸ºç±»å‹å¢åŠ æ–¹æ³•æœ‰ä¸€ä¸ªé™åˆ¶ï¼Œå°±æ˜¯æ–¹æ³•çš„å®šä¹‰å¿…é¡»å’Œç±»å‹çš„å®šä¹‰åœ¨åŒä¸€ä¸ªåŒ…ä¸­</li><li>æ–¹æ³•çš„å‘½åç©ºé—´å¯è§æ€§å’Œå˜é‡ä¸€æ ·ï¼Œå¤§å†™å¼€å¤´çš„æ–¹æ³•å¯ä¹Ÿåœ¨åŒ…å¤–è¢«è®¿é—®ï¼Œå¦åˆ™åªèƒ½åœ¨åŒ…å†…å¯è§</li><li>ä½¿ç”¨typeå®šä¹‰çš„è‡ªå®šä¹‰ç±»å‹æ˜¯ä¸€ä¸ªæ–°ç±»å‹ï¼Œæ–°ç±»å‹ä¸èƒ½è°ƒç”¨åŸæœ‰ç±»å‹çš„æ–¹æ³•ï¼Œä½†æ˜¯åº•å±‚ç±»å‹æ”¯æŒçš„è¿ç®—å¯ä»¥è¢«æ–°ç±»å‹ç»§æ‰¿</li></ul><p><img src="/images/go_core_programming/Untitled%2034.png" alt="Untitled"></p><p><img src="/images/go_core_programming/Untitled%2035.png" alt="Untitled"></p><h2 id="3-3-æ–¹æ³•è°ƒç”¨"><a href="#3-3-æ–¹æ³•è°ƒç”¨" class="headerlink" title="3.3 æ–¹æ³•è°ƒç”¨"></a>3.3 æ–¹æ³•è°ƒç”¨</h2><h3 id="3-3-1-ä¸€èˆ¬è°ƒç”¨"><a href="#3-3-1-ä¸€èˆ¬è°ƒç”¨" class="headerlink" title="3.3.1 ä¸€èˆ¬è°ƒç”¨"></a>3.3.1 ä¸€èˆ¬è°ƒç”¨</h3><p><img src="/images/go_core_programming/Untitled%2036.png" alt="Untitled"></p><h3 id="3-3-2-æ–¹æ³•å€¼"><a href="#3-3-2-æ–¹æ³•å€¼" class="headerlink" title="3.3.2 æ–¹æ³•å€¼"></a>3.3.2 æ–¹æ³•å€¼</h3><p><img src="/images/go_core_programming/Untitled%2037.png" alt="Untitled"></p><h3 id="3-3-3-æ–¹æ³•è¡¨è¾¾å¼"><a href="#3-3-3-æ–¹æ³•è¡¨è¾¾å¼" class="headerlink" title="3.3.3 æ–¹æ³•è¡¨è¾¾å¼"></a>3.3.3 æ–¹æ³•è¡¨è¾¾å¼</h3><p>æ–¹æ³•è¡¨è¾¾å¼ç›¸å½“äºæä¾›ä¸€ç§è¯­æ³•å°†ç±»å‹æ–¹æ³•è°ƒç”¨æ˜¾ç¤ºç¬¬è½¬æ¢ä¸ºå‡½æ•°è°ƒç”¨ï¼Œæ¥å—è€…å¿…é¡»æ˜¾ç¤ºåœ°ä¼ é€’è¿›å»ã€‚</p><h3 id="3-3-4-æ–¹æ³•é›†"><a href="#3-3-4-æ–¹æ³•é›†" class="headerlink" title="3.3.4 æ–¹æ³•é›†"></a>3.3.4 æ–¹æ³•é›†</h3><p>å‘½åç±»å‹æ–¹æ³•æ¥å—è€…æœ‰ä¸¤ç§ç±»å‹ï¼Œä¸€ä¸ªæ˜¯å€¼ç±»å‹ï¼Œå¦ä¸€ä¸ªæ˜¯æŒ‡é’ˆç±»å‹ï¼Œè¿™ä¸ªå’Œå‡½æ•°æ˜¯ä¸€æ ·çš„ï¼Œå‰è€…çš„å½¢å‚æ˜¯å€¼ç±»å‹ï¼Œåè€…çš„å½¢å‚æ˜¯æŒ‡é’ˆç±»å‹ã€‚</p><p>æ— è®ºæ¥å—è€…æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ–¹æ³•å’Œå‡½æ•°çš„å®å‚ä¼ é€’éƒ½æ˜¯å€¼æ‹·è´ï¼Œå¦‚æœæ¥å—è€…æ˜¯å€¼ç±»å‹ï¼Œåˆ™ä¼ é€’çš„æ˜¯å€¼çš„å‰¯æœ¬ï¼›å¦‚æœæ¥å—è€…æ˜¯æŒ‡é’ˆç±»å‹ï¼Œåˆ™ä¼ é€’çš„æ˜¯æŒ‡é’ˆçš„å‰¯æœ¬</p><h3 id="3-3-5-å€¼è°ƒç”¨å’Œè¡¨è¾¾å¼è°ƒç”¨çš„æ–¹æ³•é›†"><a href="#3-3-5-å€¼è°ƒç”¨å’Œè¡¨è¾¾å¼è°ƒç”¨çš„æ–¹æ³•é›†" class="headerlink" title="3.3.5 å€¼è°ƒç”¨å’Œè¡¨è¾¾å¼è°ƒç”¨çš„æ–¹æ³•é›†"></a>3.3.5 å€¼è°ƒç”¨å’Œè¡¨è¾¾å¼è°ƒç”¨çš„æ–¹æ³•é›†</h3><h2 id="3-4-ç»„åˆå’Œæ–¹æ³•é›†"><a href="#3-4-ç»„åˆå’Œæ–¹æ³•é›†" class="headerlink" title="3.4 ç»„åˆå’Œæ–¹æ³•é›†"></a>3.4 ç»„åˆå’Œæ–¹æ³•é›†</h2><p>ç»“æ„ç±»å‹ä¸ºGoæä¾›äº†å¼ºå¤§çš„ç±»å‹æ‰©å±•ï¼Œä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š</p><ul><li>structå¯ä»¥åµŒå…¥ä»»æ„å…¶ä»–ç±»å‹çš„å­—æ®µ</li><li>structå¯ä»¥åµŒå¥—è‡ªèº«çš„æŒ‡é’ˆç±»å‹çš„å­—æ®µ</li></ul><h3 id="3-4-1-ç»„åˆ"><a href="#3-4-1-ç»„åˆ" class="headerlink" title="3.4.1 ç»„åˆ"></a>3.4.1 ç»„åˆ</h3><p>å› ä¸ºGoæ²¡æœ‰ç»§æ‰¿çš„è¯­ä¹‰ï¼Œç»“æ„å’Œå­—æ®µä¹‹é—´æ˜¯â€œhas aâ€çš„å…³ç³»è€Œä¸æ˜¯â€œis aâ€çš„å…³ç³»ï¼Œæ²¡æœ‰çˆ¶å­æ¦‚å¿µï¼Œä»…ä»…æ˜¯æ•´ä½“å’Œå±€éƒ¨çš„æ¦‚å¿µï¼Œæ‰€ä»¥åç»­ç»Ÿç§°è¿™ç§åµŒå¥—çš„ç»“æ„å’Œå­—æ®µçš„å…³ç³»ä¸ºç»„åˆ</p><h3 id="3-4-2-ç»„åˆçš„æ–¹æ³•é›†"><a href="#3-4-2-ç»„åˆçš„æ–¹æ³•é›†" class="headerlink" title="3.4.2 ç»„åˆçš„æ–¹æ³•é›†"></a>3.4.2 ç»„åˆçš„æ–¹æ³•é›†</h3><h2 id="3-5-å‡½æ•°ç±»å‹"><a href="#3-5-å‡½æ•°ç±»å‹" class="headerlink" title="3.5 å‡½æ•°ç±»å‹"></a>3.5 å‡½æ•°ç±»å‹</h2><h1 id="ç¬¬-4-ç« -æ¥å£ï¼ˆæœªçœ‹ï¼‰"><a href="#ç¬¬-4-ç« -æ¥å£ï¼ˆæœªçœ‹ï¼‰" class="headerlink" title="ç¬¬ 4 ç«  æ¥å£ï¼ˆæœªçœ‹ï¼‰"></a>ç¬¬ 4 ç«  æ¥å£ï¼ˆæœªçœ‹ï¼‰</h1><h1 id="ç¬¬-5-ç« -å¹¶å‘"><a href="#ç¬¬-5-ç« -å¹¶å‘" class="headerlink" title="ç¬¬ 5 ç«  å¹¶å‘"></a>ç¬¬ 5 ç«  å¹¶å‘</h1><h2 id="5-1-å¹¶å‘åŸºç¡€"><a href="#5-1-å¹¶å‘åŸºç¡€" class="headerlink" title="5.1 å¹¶å‘åŸºç¡€"></a>5.1 å¹¶å‘åŸºç¡€</h2><h3 id="5-1-1-å¹¶å‘å’Œå¹¶è¡Œ"><a href="#5-1-1-å¹¶å‘å’Œå¹¶è¡Œ" class="headerlink" title="5.1.1 å¹¶å‘å’Œå¹¶è¡Œ"></a>5.1.1 å¹¶å‘å’Œå¹¶è¡Œ</h3><ol><li>å¹¶è¡Œå°±æ˜¯åœ¨ä»»ä¸€ç²’åº¦çš„æ—¶é—´å†…éƒ½å…·å¤‡åŒæ—¶æ‰§è¡Œçš„èƒ½åŠ›ï¼šä¾‹å¦‚å¤šæœº</li><li>å¹¶å‘æ˜¯åœ¨è§„å®šçš„æ—¶é—´å†…å¤šä¸ªè¯·æ±‚éƒ½å¾—åˆ°æ‰§è¡Œå’Œå¤„ç†ï¼Œå¼ºè°ƒçš„æ˜¯ç»™å¤–ç•Œçš„æ„Ÿå—ï¼Œå®é™…ä¸Šå†…éƒ¨å¯èƒ½æ˜¯åˆ†æ—¶æ“ä½œçš„</li></ol><h3 id="5-1-2-goroutine"><a href="#5-1-2-goroutine" class="headerlink" title="5.1.2 goroutine"></a>5.1.2 goroutine</h3><p>Goè¯­è¨€çš„å¹¶å‘æ‰§è¡Œä½“ç§°ä¸ºgoroutineï¼Œé€šè¿‡goå…³é”®å­—æ¥å¯åŠ¨ä¸€ä¸ªgoroutineã€‚</p><p>goroutineç‰¹æ€§ï¼š</p><ul><li>goçš„æ‰§è¡Œæ˜¯éé˜»å¡çš„ï¼Œä¸ä¼šç­‰å¾…</li><li>goåé¢çš„å‡½æ•°çš„è¿”å›å€¼ä¼šè¢«å¿½ç•¥</li><li>è°ƒåº¦å™¨ä¸èƒ½ä¿è¯å¤šä¸ªgoroutineçš„æ‰§è¡Œæ¬¡åº</li><li>æ²¡æœ‰çˆ¶å­goroutineçš„æ¦‚å¿µï¼Œæ‰€æœ‰goroutneæ˜¯å¹³ç­‰åœ°è¢«è°ƒç”¨å’Œæ‰§è¡Œçš„</li><li>Goç¨‹åºåœ¨æ‰§è¡Œæ—¶ä¼šå•ç‹¬ä¸ºmainå‡½æ•°åˆ›å»ºä¸€ä¸ªgoroutineï¼Œé‡åˆ°å…¶ä»–goå…³é”®å­—æ—¶å†å»åˆ›å»ºå…¶ä»–çš„goroutinue</li><li>Goæ²¡æœ‰æš´éœ²goroutine idç»™ç”¨æˆ·ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨ä¸€ä¸ªgoroutineé‡Œé¢æ˜¾å¼åœ°æ“ä½œå¦ä¸€ä¸ªgoroutineï¼Œä¸è¿‡runtimeåŒ…æä¾›äº†ä¸€äº›å‡½æ•°è®¿é—®å’Œè®¾ç½®goroutineçš„ç›¸å…³ä¿¡æ¯</li></ul><ol><li>func GOMAXPROCS</li></ol><p>è®¾ç½®æˆ–æŸ¥è¯¢å¯ä»¥å¹¶å‘æ‰§è¡Œçš„goroutineæ•°ç›®</p><pre><code class="go">package goroutine_testimport (    "runtime"    "testing")func TestName(t *testing.T) {    // è·å–GOMAXPROCS    println("GOMAXPROCS=",runtime.GOMAXPROCS(0))    // è®¾ç½®GOMAXPROCS    runtime.GOMAXPROCS(2)    // è·å–GOMAXPROCS    println("GOMAXPROCS=",runtime.GOMAXPROCS(0))}</code></pre><ol><li>func Goexit</li></ol><p>ç»“æŸå½“å‰goroutinueçš„è¿è¡Œã€‚Goexitä¸ä¼šäº§ç”Ÿpanicã€‚</p><ol><li>fun Gosched</li></ol><p>æ”¾å¼ƒå½“å‰è°ƒåº¦æ‰§è¡Œæœºä¼šï¼Œå°†å½“å‰goroutinueæ”¾åˆ°é˜Ÿåˆ—ä¸­ç­‰å¾…ä¸‹æ¬¡è¢«è°ƒåº¦</p><h3 id="5-1-3-chan"><a href="#5-1-3-chan" class="headerlink" title="5.1.3 chan"></a>5.1.3 chan</h3><ol><li>chanæ˜¯Goè¯­è¨€é‡Œé¢çš„ä¸€ä¸ªå…³é”®å­—ï¼Œæ˜¯channelçš„ç®€å†™ï¼Œé€šé“ã€‚é€šé“æ˜¯Goé€šè¿‡é€šä¿¡æ¥å…±äº«å†…å®¹çš„è½½ä½“ã€‚</li><li>é€šé“ç±»å‹ï¼š<ul><li><p>æœ‰ç¼“å†²çš„é€šé“ï¼šä¸»è¦ç”¨äºé€šä¿¡</p></li><li><p>æ— ç¼“å†²çš„é€šé“ï¼šæ—¢å¯ä»¥ç”¨äºé€šä¿¡ï¼Œä¹Ÿå¯ä»¥ç”¨äºä¸¤ä¸ªgoroutinueçš„åŒæ­¥</p><p><img src="/images/go_core_programming/Untitled%2038.png" alt="Untitled"></p><pre><code class="go">func TestName(t *testing.T) {  println("NumGoroutinue=", runtime.NumGoroutine())  c := make(chan struct{})  ci := make(chan int, 100)  go func(i chan struct{}, j chan int) {      for i := 0; i &lt; 10; i++ {          ci &lt;- i      }      close(ci)      // å†™é€šé“      c &lt;- struct{}{}  }(c, ci)  // NumGoroutinueå¯ä»¥è¿”å›å½“å‰ç¨‹åºçš„goroutinueæ•°ç›®  println("NumGoroutinue=", runtime.NumGoroutine())  // è¯»é€šé“cï¼Œé€šè¿‡é€šé“è¿›è¡ŒåŒæ­¥ç­‰å¾…  &lt;-c  // æ­¤æ—¶cié€šé“å·²ç»å…³é—­ï¼ŒåŒ¿åå‡½æ•°å¯åŠ¨çš„goroutinueå·²ç»é€€å‡º  println("NumGoroutinue=", runtime.NumGoroutine())  for v := range ci {      println(v)  }}</code></pre></li></ul></li><li>æ“ä½œä¸åŒçŠ¶æ€çš„chanä¼šå¼•å‘ä¸‰ç§è¡Œä¸º<ul><li>panic<ul><li>å‘å·²ç»å…³é—­çš„é€šé“å†™æ•°æ®ä¼šå¯¼è‡´panicã€‚ç”±å†™å…¥è€…å…³é—­é€šé“èƒ½æœ€å¤§ç¨‹åº¦åœ°é¿å…å‘å·²ç»å…³é—­çš„é€šé“å†™æ•°æ®è€Œå¯¼è‡´panic</li><li>é‡å¤å…³é—­çš„é€šé“ä¼šå¯¼è‡´panic</li></ul></li><li>é˜»å¡<ul><li>å‘æœªåˆå§‹åŒ–çš„é€šé“å†™æ•°æ®æˆ–è¯»æ•°æ®éƒ½ä¼šå¯¼è‡´å½“å‰goroutineçš„æ°¸ä¹…é˜»å¡</li><li>å‘ç¼“å†²åŒºå·²æ»¡çš„é€šé“å†™å…¥æ•°æ®ä¼šå¯¼è‡´goroutinueé˜»å¡</li><li>é€šé“ä¸­æ²¡æœ‰æ•°æ®ï¼Œè¯»å–è¯¥é€šé“ä¼šå¯¼è‡´goroutinueé˜»å¡</li></ul></li><li>éé˜»å¡<ul><li>è¯»è€…å·²ç»å…³é—­çš„é€šé“ä¸ä¼šå¼•å‘é˜»å¡è€Œæ˜¯ç«‹å³è¿”å›é€šé“å…ƒç´ ç±»å‹çš„é›¶å€¼ï¼Œå¯ä»¥ä½¿ç”¨commaï¼Œokè¯­æ³•åˆ¤æ–­é€šé“æ˜¯å¦å·²ç»å…³é—­</li><li>å‘æœ‰ç¼“å†²ä¸”æ²¡æœ‰æ»¡çš„é€šé“è¯»/å†™ä¸ä¼šå¼•å‘é˜»å¡</li></ul></li></ul></li></ol><h3 id="5-1-4-WaitGroup"><a href="#5-1-4-WaitGroup" class="headerlink" title="5.1.4 WaitGroup"></a>5.1.4 WaitGroup</h3><p>syncåŒ…æä¾›äº†å¤šä¸ªgoroutineåŒæ­¥çš„æœºåˆ¶ï¼Œä¸»è¦æ˜¯é€šè¿‡WaitGroupå®ç°çš„ã€‚</p><h3 id="5-1-5-select"><a href="#5-1-5-select" class="headerlink" title="5.1.5 select"></a>5.1.5 select</h3><p>selectç”¨äºå¤šè·¯ç›‘å¬å¤šä¸ªé€šé“</p><ul><li>å½“ç›‘å¬çš„é€šé“æ²¡æœ‰çŠ¶æ€æ˜¯å¯è¯»æˆ–å¯å†™çš„ï¼Œselectæ˜¯é˜»å¡çš„</li><li>ç›‘å¬çš„é€šé“ä¸­æœ‰ä¸€ä¸ªçŠ¶æ€æ˜¯å¯è¯»æˆ–å¯å†™çš„ï¼Œåˆ™selectå°±ä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯è¿›å…¥å¤„ç†å°±ç»ªé€šé“çš„åˆ†æ”¯æµç¨‹</li><li>å¦‚æœç›‘å¬çš„é€šé“æœ‰å¤šä¸ªå¯è¯»æˆ–å¯å†™çš„çŠ¶æ€ï¼Œåˆ™selectéšæœºé€‰å–ä¸€ä¸ªå¤„ç†</li></ul><pre><code class="go">import "testing"func TestName(t *testing.T) {    ch := make(chan int, 2)    go func(chan int) {        for {            select {            case ch &lt;- 0:            case ch &lt;- 1:            }        }    }(ch)    for i := 0; i &lt; 10; i++ {        println(&lt;-ch)    }}</code></pre><h3 id="5-1-6-æ‰‡å…¥ï¼ˆFan-inï¼‰å’Œæ‰‡å‡ºï¼ˆFan-outï¼‰"><a href="#5-1-6-æ‰‡å…¥ï¼ˆFan-inï¼‰å’Œæ‰‡å‡ºï¼ˆFan-outï¼‰" class="headerlink" title="5.1.6 æ‰‡å…¥ï¼ˆFan inï¼‰å’Œæ‰‡å‡ºï¼ˆFan outï¼‰"></a>5.1.6 æ‰‡å…¥ï¼ˆFan inï¼‰å’Œæ‰‡å‡ºï¼ˆFan outï¼‰</h3><p>æ‰‡å…¥ï¼šå°†å¤šè·¯é€šé“èšåˆåˆ°ä¸€æ¡é€šé“ä¸­å¤„ç†ï¼ŒGoæœ€ç®€å•çš„æ‰‡å…¥å°±æ˜¯ä½¿ç”¨selectèšåˆå¤šæ¡é€šé“æœåŠ¡</p><p>æ‰‡å‡ºï¼šå°†ä¸€æ¡é€šé“å‘æ•£åˆ°å¤šæ¡é€šé“ä¸­å¤„ç†ï¼ŒGoè¯­è¨€é‡Œé¢å…·ä½“å®ç°å°±æ˜¯ä½¿ç”¨goå…³é”®å­—å¯åŠ¨å¤šä¸ªgoroutineå¹¶å‘å¤„ç† </p><pre><code class="go">import (    "fmt"    "sync"    "testing")var wg sync.WaitGroupfunc TestWaitGroup(t *testing.T) {    for i := 0; i &lt; 10; i++ {        wg.Add(1)        go func(i int) {            defer wg.Done()            fmt.Printf("go func: %d\n", i)        }(i)    }    wg.Wait()    println("success!")}</code></pre><h3 id="5-1-7-é€šçŸ¥é€€å‡ºæœºåˆ¶"><a href="#5-1-7-é€šçŸ¥é€€å‡ºæœºåˆ¶" class="headerlink" title="5.1.7 é€šçŸ¥é€€å‡ºæœºåˆ¶"></a>5.1.7 é€šçŸ¥é€€å‡ºæœºåˆ¶</h3><p>è¯»å–å·²ç»å…³é—­çš„é€šé“ä¸ä¼šå¼•èµ·é˜»å¡ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´panicï¼Œè€Œæ˜¯ç«‹å³è¿”å›è¯¥é€šé“å­˜å‚¨ç±»å‹çš„é›¶å€¼ã€‚</p><p>å…³é—­selectç›‘å¬çš„æŸä¸ªé€šé“èƒ½ä½¿selectç«‹å³æ„ŸçŸ¥è¿™ç§é€šçŸ¥ï¼Œç„¶åè¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„é€€å‡ºé€šçŸ¥æœºåˆ¶ã€‚</p><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªéšæœºæ•°ç”Ÿæˆå™¨çš„ç¤ºä¾‹æ©é¥°é€€å‡ºé€šçŸ¥æœºåˆ¶ï¼Œä¸‹æ¸¸çš„æ¶ˆè´¹è€…ä¸éœ€è¦éšæœºæ•°æ—¶æ˜¾å¼åœ°é€šçŸ¥ç”Ÿäº§è€…åœæ­¢ç”Ÿäº§ï¼š</p><pre><code class="go">import (    "fmt"    "math/rand"    "runtime"    "testing")func GenerateIntA(done chan struct{}) chan int {    ch := make(chan int)    go func() {    Lable:        for {            select {            case ch &lt;- rand.Int():            case &lt;-done:                break Lable            }        }        close(ch)    }()    return ch}func TestNotiExit(t *testing.T) {    println("NumGoroutine=", runtime.NumGoroutine())    done := make(chan struct{})    ch := GenerateIntA(done)    println("NumGoroutine=", runtime.NumGoroutine())    fmt.Println(&lt;-ch)    fmt.Println(&lt;-ch)    close(done)    fmt.Println(&lt;-ch)    fmt.Println(&lt;-ch)    println("NumGoroutine=", runtime.NumGoroutine())}</code></pre><h2 id="5-2-å¹¶å‘èŒƒå¼"><a href="#5-2-å¹¶å‘èŒƒå¼" class="headerlink" title="5.2 å¹¶å‘èŒƒå¼"></a>5.2 å¹¶å‘èŒƒå¼</h2><h3 id="5-2-1-ç”Ÿæˆå™¨"><a href="#5-2-1-ç”Ÿæˆå™¨" class="headerlink" title="5.2.1 ç”Ÿæˆå™¨"></a>5.2.1 ç”Ÿæˆå™¨</h3><ol><li>æœ€ç®€å•çš„å¸¦ç¼“å†²çš„ç”Ÿæˆå™¨</li></ol><pre><code class="go">import (    "fmt"    "math/rand"    "testing")func GenerateInt() chan int {    ch := make(chan int, 3)    go func() {        for {            ch &lt;- rand.Int()        }    }()    return ch}func TestGenerateInt(t *testing.T) {    ch := GenerateInt()    fmt.Println(&lt;-ch)    fmt.Println(&lt;-ch)    fmt.Println(&lt;-ch)    fmt.Println(&lt;-ch)}</code></pre><ol><li>å¤šä¸ªgoroutinueå¢å¼ºå‹ç”Ÿæˆå™¨</li></ol><p><img src="/images/go_core_programming/Untitled%2039.png" alt="Untitled"></p><ol><li>æœ‰æ—¶å¸Œæœ›ç”Ÿæˆå™¨èƒ½å¤Ÿè‡ªåŠ¨é€€å‡ºï¼Œå¯ä»¥å€ŸåŠ©Goé€šé“çš„é€€å‡ºé€šçŸ¥æœºåˆ¶å®ç°ï¼Œä¾‹å¦‚ï¼š</li></ol><p><img src="/images/go_core_programming/Untitled%2040.png" alt="Untitled"></p><p><img src="/images/go_core_programming/Untitled%2041.png" alt="Untitled"></p><ol><li>èåˆå¹¶å‘ã€ç¼“å†²ã€é€€å‡ºé€šçŸ¥ç­‰å¤šé‡ç‰¹æ€§çš„ç”Ÿæˆå™¨</li></ol><pre><code class="go">package genericimport (    "fmt"    "math/rand"    "testing")func GenerateIntA(done chan struct{}) chan int {    fmt.Println("GenerateIntA")    ch := make(chan int, 5)    go func() {    Lable:        for {            select {            case ch &lt;- rand.Int():            case &lt;-done:                break Lable            }        }        close(ch)    }()    return ch}func GenerateIntB(done chan struct{}) chan int {    fmt.Println("GenerateIntB")    ch := make(chan int, 5)    go func() {    Lable:        for {            select {            case ch &lt;- rand.Int():            case &lt;-done:                break Lable            }        }        close(ch)    }()    return ch}func GenerateInt(done chan struct{}) chan int {    ch := make(chan int)    send := make(chan struct{})    go func() {    Lable:        for {            select {            case ch &lt;- &lt;-GenerateIntA(send):            case ch &lt;- &lt;-GenerateIntB(send):            case &lt;-done:                send &lt;- struct{}{}                send &lt;- struct{}{}                break Lable            }        }        close(ch)    }()    return ch}func Test(t *testing.T)  {    done := make(chan struct{})    ch := GenerateInt(done)    for i := 0; i &lt; 10; i++ {        fmt.Println(&lt;-ch)    }    done &lt;- struct{}{}    fmt.Println("stop generate")}</code></pre><h3 id="5-2-2-ç®¡é“"><a href="#5-2-2-ç®¡é“" class="headerlink" title="5.2.2 ç®¡é“"></a>5.2.2 ç®¡é“</h3><p>é€šé“å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªæ–¹å‘ï¼Œä¸€ä¸ªæ˜¯è¯»å¦ä¸€ä¸ªæ˜¯å†™ï¼ŒåŠ å…¥ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥å‚æ•°å’Œè¾“å‡ºå‚æ•°éƒ½æ˜¯ç›¸åŒçš„chanç±»å‹ï¼Œåˆ™è¯¥å‡½æ•°å¯ä»¥è°ƒç”¨è‡ªå·±ï¼Œæœ€ç»ˆå½¢æˆä¸€ä¸ªè°ƒç”¨é“¾ã€‚è¿™å¾ˆåƒUNIXç³»ç»Ÿçš„ç®¡é“ï¼Œæ˜¯ä¸€ä¸ªæœ‰ç±»å‹çš„ç®¡é“</p><h3 id="5-2-3-æ¯ä¸ªè¯·æ±‚ä¸€ä¸ªgoroutine"><a href="#5-2-3-æ¯ä¸ªè¯·æ±‚ä¸€ä¸ªgoroutine" class="headerlink" title="5.2.3 æ¯ä¸ªè¯·æ±‚ä¸€ä¸ªgoroutine"></a>5.2.3 æ¯ä¸ªè¯·æ±‚ä¸€ä¸ªgoroutine</h3><p>æ¥ä¸€ä¸ªè¯·æ±‚æˆ–ä»»åŠ¡å°±å¯åŠ¨ä¸€ä¸ªgoroutineå»å¤„ç†ï¼Œå…¸å‹çš„å°±æ˜¯Goä¸­çš„HTTP serveræœåŠ¡ã€‚</p><h3 id="5-2-4-å›ºå®šworkerå·¥ä½œæ± "><a href="#5-2-4-å›ºå®šworkerå·¥ä½œæ± " class="headerlink" title="5.2.4 å›ºå®šworkerå·¥ä½œæ± "></a>5.2.4 å›ºå®šworkerå·¥ä½œæ± </h3><p>ç¨‹åºä¸­é™¤äº†ä¸»è¦çš„main goroutineï¼Œè¿˜å¼€å¯äº†å¦‚ä¸‹å‡ ç±»goroutineï¼š</p><ul><li>åˆå§‹åŒ–ä»»åŠ¡çš„goroutine</li><li>åˆ†å‘ä»»åŠ¡çš„goroutine</li><li>ç­‰å¾…æ‰€æœ‰workerç»“æŸé€šçŸ¥ï¼Œç„¶åå…³é—­ç»“æœé€šé“çš„goroutine</li></ul><p>ç¨‹åºé‡‡ç”¨ä¸‰ä¸ªé€šé“ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>ä¼ é€’taskä»»åŠ¡çš„é€šé“</li><li>ä¼ é€’taskç»“æœçš„é€šé“</li><li>æ¥æ”¶workerå¤„ç†å®Œä»»åŠ¡åæ‰€å‘é€é€šçŸ¥çš„é€šé“</li></ul><p>è®¡ç®—å¤šä¸ªæ•´æ•°çš„å’Œæ ·ä¾‹ä»£ç ï¼š</p><pre><code class="go">package mainimport (    "fmt"    "math/rand"    "time")// å·¥ä½œæ± çš„goroutineæ•°ç›®const NUMBER = 10// å·¥ä½œä»»åŠ¡type task struct {    // å­˜æ”¾æ•°æ®    data int    // ä»»åŠ¡ç»“æœ    result chan&lt;- int}// ä»»åŠ¡å¤„ç†ï¼šè®¡ç®—beginå’Œendçš„å’Œ// æ‰§è¡Œç»“æœå†™å…¥ç»“æœchan resultfunc (t *task) do() {    // æ¨¡æ‹Ÿè®¡ç®—è€—æ—¶    r := rand.Intn(1000)    fmt.Println("Sleep:", r, "ms")    time.Sleep(time.Duration(r) * time.Millisecond)    // æ¨¡æ‹Ÿä»»åŠ¡ç»“æœå°±æ˜¯ä»»åŠ¡æ•°æ®    t.result &lt;- t.data}func main() {    workers := NUMBER    taskChan := make(chan task, 10)    resultChan := make(chan int, 10)    done := make(chan struct{}, 10)    // åˆå§‹åŒ–taskçš„goroutine    go InitTask(taskChan, resultChan, 100)    // åˆ†å‘ä»»åŠ¡åˆ°NUMBERä¸ªgoroutineæ±     DistributeTask(taskChan, workers, done)    // è·å–å„ä¸ªgoroutineå¤„ç†å®Œä»»åŠ¡çš„é€šçŸ¥å¹¶å…³é—­ç»“æœé€šé“    go CloseResult(done, resultChan, workers)    // é€šè¿‡ç»“æœé€šé“è·å–ç»“æœå¹¶æ±‡æ€»    sum := ProcessResult(resultChan)    fmt.Println("sum=", sum)}// åˆå§‹åŒ–å¾…å¤„ç†task chanfunc InitTask(taskChan chan&lt;- task, r chan int, p int) {    for i := 0; i &lt;= p; i++ {        taskChan &lt;- task{            data:   i,            result: r,        }    }    close(taskChan)}// è¯»å–task chanå¹¶åˆ†å‘åˆ°worker goroutineå¤„ç†ï¼Œæ€»çš„æ•°é‡æ˜¯workersfunc DistributeTask(taskChan &lt;-chan task, works int, done chan struct{}) {    for i := 0; i &lt; works; i++ {        go ProcessTask(taskChan, done)    }}// å·¥ä½œgoroutineå¤„ç†å…·ä½“å·¥ä½œï¼Œå¹¶å°†å¤„ç†ç»“æœå‘é€åˆ°ç»“æœchanfunc ProcessTask(taskChan &lt;-chan task, done chan struct{}) {    for t := range taskChan {        t.do()    }    done &lt;- struct{}{}}// é€šè¿‡done channelåŒæ­¥ç­‰å¾…æ‰€æœ‰å·¥ä½œgoroutineçš„ç»“æŸï¼Œç„¶åå…³é—­ç»“æœchanfunc CloseResult(done chan struct{}, resultChan chan int, workers int) {    for i := 0; i &lt; workers; i++ {        &lt;-done    }    close(done)    close(resultChan)}// è¯»å–ç»“æœé€šé“ï¼Œæ±‡æ€»ç»“æœfunc ProcessResult(resultChan chan int) int {    sum := 0    for r := range resultChan {        sum += r    }    return sum}</code></pre><p><img src="/images/go_core_programming/Untitled%2042.png" alt="Untitled"></p><p><img src="/images/go_core_programming/Untitled%2043.png" alt="Untitled"></p><h3 id="5-2-5-futureæ¨¡å¼"><a href="#5-2-5-futureæ¨¡å¼" class="headerlink" title="5.2.5 futureæ¨¡å¼"></a>5.2.5 futureæ¨¡å¼</h3><p>ç”¨å¤„ï¼šå­è°ƒç”¨ç›¸äº’ä¹‹é—´æ²¡æœ‰ä¾èµ–ï¼Œå¦‚æœä¸²è¡Œè°ƒç”¨åˆ™è€—æ—¶ä¼šå¾ˆé•¿ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨Goå¹¶å‘ç¼–ç¨‹ä¸­çš„futureæ¨¡å¼</p><p>å·¥ä½œåŸç†ï¼š</p><ol><li>ä½¿ç”¨chanä½œä¸ºå‡½æ•°å‚æ•°</li><li>å¯åŠ¨goroutineè°ƒç”¨å®‰å¾½çœå†œæˆ·</li><li>é€šè¿‡chanä¼ é€’å¦‚å‚æ•°</li><li>åšå…¶ä»–å¯ä»¥å¹¶è¡Œå¤„ç†çš„äº‹æƒ…</li><li>é€šè¿‡chanå¼‚æ­¥è·å–ç»“æœ</li></ol><pre><code class="go">package mainimport (    "fmt"    "time")// ä¸€ä¸ªæŸ¥è¯¢ç»“æ„ä½“// è¿™é‡Œçš„sqlå’Œresultæ˜¯ä¸€ä¸ªç®€å•çš„æŠ½è±¡ï¼Œå…·ä½“çš„åº”ç”¨å¯èƒ½æ˜¯æ›´å¤æ‚çš„æ•°æ®ç±»å‹type query struct {    // å‚æ•°Channel    sql chan string    // ç»“æœChannel    result chan string}// æ‰§è¡ŒQueryfunc execQuery(q query) {    // å¯åŠ¨åç¨‹    go func() {        // è·å–è¾“å…¥        sql := &lt;-q.sql        // è®¿é—®æ•°æ®åº“        // è¾“å‡ºç»“æœé€šé“        q.result &lt;- "result from " + sql    }()}func main() {    // åˆå§‹åŒ–Query    q := query{make(chan string, 1), make(chan string, 1)}    // æ‰§è¡ŒQueryï¼Œæ³¨æ„æ‰§è¡Œçš„æ—¶å€™æ— éœ€å‡†å¤‡å‚æ•°    go execQuery(q)    // å‘é€å‚æ•°    q.sql &lt;- "select * from table"    // åšå…¶ä»–äº‹æƒ…    time.Sleep(1 * time.Second)    // è·å–ç»“æœ    fmt.Println(&lt;-q.result)}</code></pre><p><img src="/images/go_core_programming/Untitled%2044.png" alt="Untitled"></p><h2 id="5-3-contextæ ‡å‡†åº“"><a href="#5-3-contextæ ‡å‡†åº“" class="headerlink" title="5.3 contextæ ‡å‡†åº“"></a>5.3 contextæ ‡å‡†åº“</h2><p>Goä¸­çš„goroutineä¹‹é—´æ²¡æœ‰çˆ¶ä¸å­çš„å…³ç³»ï¼Œæ²¡æœ‰æ‰€è°“çš„å­è¿›ç¨‹é€€å‡ºåçš„é€šçŸ¥æœºåˆ¶ï¼Œgoroutineä¹‹é—´å¹³è¡Œåœ°è¢«è°ƒåº¦ï¼Œå¤šä¸ªgoroutineå¦‚ä½•åä½œå·¥ä½œè®¾è®¡é€šä¿¡ã€åŒæ­¥ã€é€šçŸ¥å’Œé€€å‡ºå››ä¸ªæ–¹é¢</p><ul><li>é€šä¿¡ï¼šchané€šé“æ˜¯goroutineä¹‹é—´é€šä¿¡çš„åŸºç¡€ï¼ˆé€šä¿¡æŒ‡ç¨‹åºçš„æ•°æ®é€šé“ï¼‰</li><li>åŒæ­¥ï¼šä¸å¸¦ç¼“å†²çš„chanæä¾›äº†ä¸€ä¸ªå¤©ç„¶çš„åŒæ­¥ç­‰å¾…æœºåˆ¶ï¼›sync.WaitGroupä¹Ÿä¸ºå¤šä¸ªgoroutineååŒå·¥ä½œæä¾›ä¸€ç§åŒæ­¥ç­‰å¾…æœºåˆ¶</li><li>é€šçŸ¥ï¼šè¿™ä¸ªé€šçŸ¥å’Œä¸Šé¢é€šä¿¡çš„æ•°æ®ä¸ä¸€æ ·ï¼Œé€šçŸ¥ä¸æ˜¯ä¸šåŠ¡æ•°æ®ï¼Œè€Œæ˜¯ç®¡ç†ã€æ§åˆ¶æµæ•°æ®ã€‚åœ¨è¾“å…¥ç«¯ç»‘å®šä¸¤ä¸ªchanï¼Œä¸€ä¸ªç”¨äºä¸šåŠ¡æµæ•°æ®ï¼Œå¦ä¸€ä¸ªç”¨äºå¼‚å¸¸é€šçŸ¥æ•°æ®ï¼Œç„¶åä½¿ç”¨selectæ”¶æ•›è¿›è¡Œå¤„ç†</li><li>é€€å‡ºï¼šå€ŸåŠ©é€šé“å’Œselectçš„å¹¿æ’­æœºåˆ¶å®ç°é€€å‡º</li></ul><h3 id="5-3-1-contextçš„è®¾è®¡ç›®çš„"><a href="#5-3-1-contextçš„è®¾è®¡ç›®çš„" class="headerlink" title="5.3.1 contextçš„è®¾è®¡ç›®çš„"></a>5.3.1 contextçš„è®¾è®¡ç›®çš„</h3><ul><li>é€€å‡ºé€šçŸ¥æœºåˆ¶ï¼šé€šçŸ¥å¯ä»¥ä¼ é€’ç»™æ•´ä¸ªgoroutineè°ƒç”¨æ ‘ä¸Šçš„æ¯ä¸€ä¸ªgoroutine</li><li>æ•°æ®ä¼ é€’ï¼šæ•°æ®å¯ä»¥ä¼ é€’ç»™æ•´ä¸ªgoroutineè°ƒç”¨æ ‘ä¸Šçš„æ¯ä¸€ä¸ªgoroutine</li></ul><h3 id="5-3-2-åŸºæœ¬æ•°æ®ç»“æ„"><a href="#5-3-2-åŸºæœ¬æ•°æ®ç»“æ„" class="headerlink" title="5.3.2 åŸºæœ¬æ•°æ®ç»“æ„"></a>5.3.2 åŸºæœ¬æ•°æ®ç»“æ„</h3><p>contextå·¥ä½œæœºåˆ¶ï¼šç¬¬ä¸€ä¸ªåˆ›å»º Context goroutineè¢«ç§°ä¸º root èŠ‚ç‚¹ã€‚ root èŠ‚ç‚¹è´Ÿè´£åˆ›å»ºä¸€ä¸ªå®ç°contextæ¥å£çš„å…·ä½“å¯¹è±¡ï¼Œå¹¶å°†è¯¥å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°å…¶æ–°æ‹‰èµ·çš„goroutineï¼Œä¸‹æ¸¸çš„ goroutine ç»§ç»­å°è£…è¯¥å¯¹è±¡ï¼Œå†ä¼ é€’åˆ°æ›´ä¸‹æ¸¸çš„goroutineï¼ŒContext å¯¹è±¡åœ¨ä¼ é€’çš„è¿‡ç¨‹ä¸­æœ€ç»ˆå½¢æˆä¸€ä¸ªæ ‘çŠ¶çš„æ•°æ®ç»“æ„ï¼Œè¿™æ ·é€šè¿‡ä½äº root èŠ‚ç‚¹ï¼ˆæ ‘çš„æ ¹èŠ‚ç‚¹ï¼‰ Context å¯¹è±¡å°±èƒ½éå†æ•´ä¸ª Context å¯¹è±¡æ ‘ï¼Œé€šçŸ¥å’Œæ¶ˆæ¯å°±å¯ä»¥é€šè¿‡ root èŠ‚ç‚¹ä¼ é€’å‡ºå»ï¼Œå®ç°äº†ä¸Šæ¸¸ goroutine ä¸‹æ¸¸ goroutine çš„æ¶ˆæ¯ä¼ é€’ã€‚</p><p><strong>Contextæ¥å£</strong></p><p>Contextä½œä¸ºå‚æ•°ä¼ é€’</p><p><img src="/images/go_core_programming/Untitled%2045.png" alt="Untitled"></p><p><img src="/images/go_core_programming/Untitled%2046.png" alt="Untitled"></p><p><strong>canceleræ¥å£</strong></p><p>concelerè§„å®šäº†å–æ¶ˆé€šçŸ¥çš„Contextå…·ä½“ç±»å‹éœ€è¦å®ç°çš„æ¥å£</p><p><img src="/images/go_core_programming/Untitled%2047.png" alt="Untitled"></p><p><strong>empty Contextç»“æ„</strong></p><p>å®ç°äº†Contextæ¥å£ä½†ä¸å…·å¤‡ä»»ä½•åŠŸèƒ½ï¼Œå…¶å­˜åœ¨çš„ç›®çš„æ˜¯ä½œä¸ºContextå¯¹è±¡æ ‘çš„æ ¹ï¼ˆrootèŠ‚ç‚¹ï¼‰</p><p><strong>cancelCtx</strong></p><p>cancelCtxæ˜¯ä¸€ä¸ªå®ç°äº†Contextè€³æœºå£çš„å…·ä½“ç±»å‹ï¼ŒåŒæ—¶å®ç°äº†conceleræ¥å£</p><p><strong>timerCtx</strong></p><p>timerCtxæ˜¯ä¸€ä¸ªå®ç°äº†Contextæ¥å£çš„å…·ä½“ç±»å‹ï¼Œå†…éƒ¨å°è£…cancelCtxç±»å‹å®ä¾‹ï¼ŒåŒæ—¶æœ‰ä¸€ä¸ªdeadlinebianl,yonglaishixianå®šæ—¶é€€å‡ºé€šçŸ¥</p><p><strong>valueCtx</strong></p><p>valueCtxæ˜¯ä¸€ä¸ªå®ç°äº†Contextæ¥å£çš„å…·ä½“ç±»å‹ï¼Œå†…éƒ¨å°è£…äº†Contextæ¥å£ç±»å‹ï¼ŒåŒæ—¶å°è£…äº†ä¸€ä¸ªk/vçš„å­˜å‚¨éå†ï¼ŒvalueCtxå¯ä»¥ç”¨æ¥ä¼ é€’é€šçŸ¥ä¿¡æ¯</p><p><img src="/images/go_core_programming/Untitled%2048.png" alt="Untitled"></p><h3 id="5-3-3-APIå‡½æ•°"><a href="#5-3-3-APIå‡½æ•°" class="headerlink" title="5.3.3 APIå‡½æ•°"></a>5.3.3 APIå‡½æ•°</h3><p>ä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°æ˜¯æ„é€ Contextå–æ¶ˆæ ‘çš„æ ¹èŠ‚ç‚¹å¯¹è±¡ï¼Œæ ¹èŠ‚ç‚¹å¯¹è±¡ç”¨ä½œåç»­WithåŒ…è£…å‡½æ•°çš„å®å‚ï¼š</p><ul><li>func Background() Context</li><li>func TODO() Context</li></ul><h3 id="5-3-6-ä½¿ç”¨Contextä¼ é€’æ•°æ®çš„äº‰è®®"><a href="#5-3-6-ä½¿ç”¨Contextä¼ é€’æ•°æ®çš„äº‰è®®" class="headerlink" title="5.3.6 ä½¿ç”¨Contextä¼ é€’æ•°æ®çš„äº‰è®®"></a>5.3.6 ä½¿ç”¨Contextä¼ é€’æ•°æ®çš„äº‰è®®</h3><p>ä½¿ç”¨contextä¼ é€’æ•°æ®çš„åå¤„ï¼š</p><ul><li>ä¼ é€’çš„éƒ½æ˜¯interface{}ç±»å‹çš„å€¼ï¼Œç¼–è¯‘å™¨ä¸èƒ½è¿›è¡Œä¸¥æ ¼çš„ç±»å‹æ ¡éªŒ</li><li>ä»interface{}åˆ°å…·ä½“ç±»å‹éœ€è¦ä½¿ç”¨ç±»å‹æ–­è¨€å’Œæ¥å£æŸ¥è¯¢ï¼Œæœ‰ä¸€å®šçš„è¿è¡ŒæœŸå¼€é”€å’Œæ€§èƒ½æŸå¤±</li><li>å€¼åœ¨ä¼ é€’è¿‡ç¨‹ä¸­æœ‰å¯èƒ½è¢«åç»­çš„æœåŠ¡è¦†ç›–ä¸”ä¸æ˜“è¢«å‘ç°</li><li>ä¼ é€’ä¿¡æ¯ä¸ç®€æ˜ã€‚è¾ƒæ™¦æ¶©ï¼›ä¸èƒ½é€šè¿‡ä»£ç æˆ–æ–‡æ¡£ä¸€çœ¼çœ‹åˆ°ä¼ é€’çš„æ˜¯ä»€ä¹ˆï¼Œä¸åˆ©äºåç»­ç»´æŠ¤</li></ul><p>contextåº”è¯¥ä¼ é€’ä»€ä¹ˆæ•°æ®ï¼š</p><ul><li>æ—¥å¿—ä¿¡æ¯</li><li>è°ƒä½æ˜¯ä¿¡æ¯</li><li>ä¸å½±å“ä¸šåŠ¡ä¸»é€»è¾‘çš„å¯é€‰æ•°æ®</li></ul><h2 id="5-4-å¹¶å‘æ¨¡å‹"><a href="#5-4-å¹¶å‘æ¨¡å‹" class="headerlink" title="5.4 å¹¶å‘æ¨¡å‹"></a>5.4 å¹¶å‘æ¨¡å‹</h2><h3 id="5-4-1-CSPç®€ä»‹"><a href="#5-4-1-CSPç®€ä»‹" class="headerlink" title="5.4.1 CSPç®€ä»‹"></a>5.4.1 CSPç®€ä»‹</h3><p>CSPåŸºæœ¬æ€æƒ³ï¼šå°†å¹¶å‘ç³»ç»ŸæŠ½è±¡ä¸ºChannelå’ŒProcessä¸¤éƒ¨åˆ†ï¼ŒChannelç”¨æ¥ä¼ é€’æ¶ˆæ¯ï¼ŒProcessç”¨äºæ‰§è¡Œï¼ŒChannelå’ŒProcessä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œæ²¡æœ‰ä»å±å…³ç³»ï¼Œæ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶æœ‰ä¸¥æ ¼çš„æ—¶åºé™åˆ¶ã€‚</p><p>Goä¸­Channelå°±æ˜¯é€šé“ï¼ŒProcesså°±æ˜¯goroutine</p><h3 id="5-4-2-è°ƒåº¦æ¨¡å‹"><a href="#5-4-2-è°ƒåº¦æ¨¡å‹" class="headerlink" title="5.4.2 è°ƒåº¦æ¨¡å‹"></a>5.4.2 è°ƒåº¦æ¨¡å‹</h3><p>åç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œå†™æˆçš„è°ƒåº¦å®Œå…¨ç”±ç”¨æˆ·æ€ç¨‹åºæ§åˆ¶ï¼Œåç¨‹æ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆã€‚</p><p>åç¨‹è°ƒåº¦åˆ‡æ¢æ—¶ï¼Œå°†å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆä¿å­˜åˆ°å…¶ä»–åœ°æ–¹ï¼Œåœ¨åˆ‡å›æ¥çš„æ—¶å€™æ¢å¤å…ˆå‰ä¿å­˜çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆï¼Œæ¯ä¸ªå†…æ ¸çº¿ç¨‹å¯ä»¥å¯¹åº”å¤šä¸ªç”¨æˆ·åç¨‹ï¼Œå½“ä¸€ä¸ªåç¨‹æ‰§è¡Œä½“é˜»å¡äº†ï¼Œè°ƒåº¦å™¨ä¼šè°ƒåº¦å¦ä¸€ä¸ªæºç¨‹æ‰§è¡Œï¼Œæœ€å¤§æ•ˆç‡åœ°åˆ©ç”¨æ“ä½œç³»ç»Ÿåˆ†ç»™ç³»ç»Ÿçº¿ç¨‹çš„æ—¶é—´ç‰‡ã€‚</p><p>å¥½å¤„ï¼š</p><ul><li>æ§åˆ¶äº†ç³»ç»Ÿçº¿ç¨‹æ•°ï¼Œä¿è¯æ¯ä¸ªçº¿ç¨‹çš„è¿è¡Œæ—¶é—´ç‰‡å……è¶³</li><li>è°ƒåº¦å±‚èƒ½è¿›è¡Œç”¨æˆ·æ€çš„åˆ‡æ¢ï¼Œä¸ä¼šå¯¼è‡´å•ä¸ªåç¨‹é˜»å¡æ•´ä¸ªç¨‹åºçš„æƒ…å†µï¼Œå°½é‡å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæå‡è¿è¡Œæ•ˆç‡</li></ul><p>ç”±æ­¤å¯è§ï¼Œåç¨‹æ˜¯ä¸€ç§éå¸¸é«˜æ•ˆã€ç†æƒ³çš„æ‰§è¡Œæ¨¡å‹ã€‚Goçš„å¹¶å‘æ‰§è¡Œæ¨¡å‹å°±æ˜¯ä¸€ç§å˜ç§çš„åç¨‹æ¨¡å‹ã€‚</p><h3 id="5-4-3-å¹¶å‘å’Œè°ƒåº¦"><a href="#5-4-3-å¹¶å‘å’Œè°ƒåº¦" class="headerlink" title="5.4.3 å¹¶å‘å’Œè°ƒåº¦"></a>5.4.3 å¹¶å‘å’Œè°ƒåº¦</h3><p>goroutineå¥½å¤„ï¼š</p><ul><li>goroutineå¯ä»¥åœ¨ç”¨æˆ·ç©ºé—´è°ƒåº¦ï¼Œé¿å…äº†å†…æ ¸æ€å’Œç”¨æˆ·æ€çš„åˆ‡æ¢å¯¼è‡´çš„æˆæœ¬</li><li>goroutineæ˜¯è¯­è¨€åŸç”Ÿæ”¯æŒçš„ï¼Œæä¾›äº†éå¸¸ç®€æ´çš„è¯­æ³•ï¼Œå±è”½äº†å¤§éƒ¨åˆ†å¤æ‚åº•å±‚å®ç°</li><li>goroutineæ›´å°çš„å ç©ºé—´å…è®¸ç”¨æˆ·åˆ›å»ºæˆåƒä¸Šä¸‡çš„å®ä¾‹</li></ul><p>goroutinueè°ƒåº¦æ¨¡å‹ï¼š</p><ol><li>å®ä½“Gï¼ˆGoroutineï¼‰</li></ol><p>Gæ˜¯Goè¿è¡Œæ—¶å¯¹goroutineçš„æŠ½è±¡æè¿°ï¼ŒGä¸­å­˜æ”¾å¹¶å‘æ‰§è¡Œçš„ä»£ç å…¥å£åœ°å€ã€ä¸Šä¸‹æ–‡ã€è¿è¡Œç¯å¢ƒï¼ˆå…³è”çš„På’ŒMï¼‰ã€è¿è¡Œæ ˆç­‰æ‰§è¡Œç›¸å…³çš„å…ƒä¿¡æ¯</p><ol><li>å®ä½“Mï¼ˆMachineï¼‰</li></ol><p>Mä»£è¡¨OSå†…æ ¸çº¿ç¨‹ï¼Œæ˜¯æ“ä½œç³»ç»Ÿå±‚é¢è°ƒåº¦å’Œæ‰§è¡Œçš„å®ä½“ã€‚Mä»…è´Ÿè´£æ‰§è¡Œï¼ŒMä¸åœåœ°è¢«å”¤é†’æˆ–åˆ›å»ºï¼Œç„¶åæ‰§è¡Œã€‚Må¯åŠ¨æ—¶è¿›å…¥çš„æ˜¯è¿è¡Œæ—¶çš„ç®¡ç†ä»£ç ï¼Œæœ‰è¿™æ®µä»£ç è·å–Gå’ŒPèµ„æºï¼Œç„¶åæ‰§è¡Œè°ƒåº¦ã€‚å¦å¤–Go</p><p>è¯­è¨€è¿è¡Œæ—¶ä¼šå•ç‹¬åˆ›å»ºä¸€ä¸ªç›‘æ§çº¿ç¨‹ï¼Œè´Ÿè´£å¯¹ç¨‹åºçš„å†…å­˜ã€è°ƒåº¦ç­‰ä¿¡æ¯è¿›è¡Œç›‘æ§å’Œæ§åˆ¶</p><ol><li>å®ä½“Pï¼ˆProcessorï¼‰</li></ol><p>Pä»£è¡¨Mè¿è¡ŒGæ‰€éœ€çš„èµ„æºï¼Œæ˜¯å¯¹èµ„æºçš„ä¸€ç§æŠ½è±¡å’Œç®¡ç†ï¼ŒPä¸æ˜¯ä¸€æ®µä»£ç å®ä½“ï¼Œè€Œæ˜¯ä¸€ä¸ªç®¡ç†çš„æ•°æ®ç»“æ„ï¼ŒPä¸»è¦æ˜¯é™ä½Mç®¡ç†è°ƒåº¦Gçš„å¤æ‚æ€§ï¼Œå¢åŠ ä¸€ä¸ªç®€æ´çš„æ§åˆ¶å±‚æ•°æ®ç»“æ„ã€‚</p><p><img src="/images/go_core_programming/Untitled%2049.png" alt="Untitled"></p><p><strong>m0å’Œg0</strong></p><p>m0å’Œg0æ˜¯å¯åŠ¨ç¨‹åºåçš„ä¸»çº¿ç¨‹ï¼Œè¿™ä¸ªmå¯¹åº”çš„ä¿¡æ¯ä¼šå­˜æ”¾åœ¨å…¨å±€å˜é‡m0ç§ï¼Œm0è´Ÿè´£æ‰§è¡Œåˆå§‹åŒ–æ“ä½œå’Œå¯åŠ¨ç¬¬ä¸€ä¸ªgï¼Œä¹‹åm0å°±å’Œå…¶ä»–mä¸€æ ·äº†ã€‚</p><p><img src="/images/go_core_programming/Untitled%2050.png" alt="Untitled"></p><h1 id="ç¬¬-7-ç« -è¯­è¨€é™·é˜±"><a href="#ç¬¬-7-ç« -è¯­è¨€é™·é˜±" class="headerlink" title="ç¬¬ 7 ç«  è¯­è¨€é™·é˜±"></a>ç¬¬ 7 ç«  è¯­è¨€é™·é˜±</h1><h2 id="7-1-å¤šå€¼èµ‹å€¼å’ŒçŸ­å˜é‡å£°æ˜"><a href="#7-1-å¤šå€¼èµ‹å€¼å’ŒçŸ­å˜é‡å£°æ˜" class="headerlink" title="7.1 å¤šå€¼èµ‹å€¼å’ŒçŸ­å˜é‡å£°æ˜"></a>7.1 å¤šå€¼èµ‹å€¼å’ŒçŸ­å˜é‡å£°æ˜</h2><h3 id="7-1-1-å¤šå€¼èµ‹å€¼"><a href="#7-1-1-å¤šå€¼èµ‹å€¼" class="headerlink" title="7.1.1 å¤šå€¼èµ‹å€¼"></a>7.1.1 å¤šå€¼èµ‹å€¼</h3><p>éæ³•ï¼š</p><p><img src="/images/go_core_programming/Untitled%2051.png" alt="Untitled"></p><p>å¤šå€¼èµ‹å€¼è¯­ä¹‰ï¼š</p><ul><li>å¯¹å·¦ä¾§æ“ä½œæ•°ä¸­çš„è¡¨è¾¾å¼ã€ç´¢å¼•å€¼è¿›è¡Œè®¡ç®—å’Œç¡®å®šï¼Œé¦–å…ˆç¡®å®šå·¦ä¾§çš„æ“ä½œæ•°çš„åœ°å€ï¼Œç„¶åå¯¹å³ä¾§çš„èµ‹å€¼è¡¨è¾¾å¼è¿›è¡Œè®¡ç®—ï¼Œå¦‚æœå‘ç°å³ä¾§çš„è¡¨è¾¾å¼è®¡ç®—å¼•ç”¨äº†å·¦ä¾§çš„å˜é‡ï¼Œåˆ™åˆ›å»ºä¸´æ—¶å˜é‡è¿›è¡Œå€¼æ‹·è´ï¼Œæœ€åå®Œæˆè®¡ç®—</li><li>ä»å·¦åˆ°å³çš„é¡ºåºä¾æ¬¡èµ‹å€¼</li></ul><p>ç¤ºä¾‹ï¼š</p><pre><code class="go">import (    "fmt"    "testing")func Test(t *testing.T) {    x := []int{1, 2, 3}    i := 0    i, x[i] = 1, 2    fmt.Println(i, x) // 1 [2 2 3]    x = []int{1, 2, 3}    i = 0    x[i], i = 2, 1    fmt.Println(i, x) // 1 [2 2 3]    x = []int{1, 2, 3}    i = 0    x[i], i = 2, x[i] // set tmp=x[0],x[0]=2,i=tmp ==&gt; i=1    fmt.Println(i, x) // 1 [2 2 3]    x[0], x[0] = 1, 2    fmt.Println(x[0]) // 2}</code></pre><h3 id="7-1-2-çŸ­å˜é‡çš„å£°æ˜å’Œèµ‹å€¼"><a href="#7-1-2-çŸ­å˜é‡çš„å£°æ˜å’Œèµ‹å€¼" class="headerlink" title="7.1.2 çŸ­å˜é‡çš„å£°æ˜å’Œèµ‹å€¼"></a>7.1.2 çŸ­å˜é‡çš„å£°æ˜å’Œèµ‹å€¼</h3><p>çº¦å®šï¼š</p><ul><li>ä½¿ç”¨â€œ:=â€æ“ä½œç¬¦ï¼Œå˜é‡çš„å®šä¹‰å’Œåˆå§‹åŒ–åŒæ—¶å®Œæˆ</li><li>å˜é‡ååä¸è¦è·Ÿä»»ä½•ç±»å‹åï¼ŒGoç¼–è¯‘å™¨å®Œå…¨é å³è¾¹çš„å€¼è¿›è¡Œæ¨å¯¼</li><li>æ”¯æŒå¤šå€¼çŸ­å˜é‡å£°æ˜èµ‹å€¼</li><li>åªèƒ½ç”¨åœ¨å‡½æ•°å’Œç±»å‹æ–¹æ³•çš„å†…éƒ¨</li></ul><p><img src="/images/go_core_programming/Untitled%2052.png" alt="Untitled"></p><p><img src="/images/go_core_programming/Untitled%2053.png" alt="Untitled"></p><h2 id="7-2-rangeå¤ç”¨ä¸´æ—¶å˜é‡"><a href="#7-2-rangeå¤ç”¨ä¸´æ—¶å˜é‡" class="headerlink" title="7.2 rangeå¤ç”¨ä¸´æ—¶å˜é‡"></a>7.2 rangeå¤ç”¨ä¸´æ—¶å˜é‡</h2><p><img src="/images/go_core_programming/Untitled%2054.png" alt="Untitled"></p><p>ç»“æœæ‰“å°çš„éƒ½æ˜¯9ï¼ŒåŸå› ï¼š</p><ul><li>for rangeä¸‹çš„è¿­ä»£å˜é‡içš„å€¼æ˜¯å…±ç”¨çš„</li><li>mainå‡½æ•°æ‰€åœ¨çš„goiroutinueå’Œåç»­å¯åŠ¨çš„goroutineså­˜åœ¨ç«äº‰å…³ç³»</li></ul><p>æ­£ç¡®å†™æ³•ï¼š</p><p><img src="/images/go_core_programming/Untitled%2055.png" alt="Untitled"></p><h2 id="7-3-deferé™·é˜±"><a href="#7-3-deferé™·é˜±" class="headerlink" title="7.3 deferé™·é˜±"></a>7.3 deferé™·é˜±</h2><p>å¯¹å¸¦deferçš„å‡½æ•°è¿”å›æ•´ä½“ä¸Šæœ‰ä¸‰ä¸ªæ­¥éª¤</p><ul><li>æ‰§è¡Œreturnçš„å€¼æ‹·è´ï¼Œå°†returnè¯­å¥è¿”å›çš„å€¼å¤åˆ¶åˆ°å‡½æ•°è¿”å›å€¼æ ˆåŒºï¼ˆå¦‚æœåªæœ‰ä¸€ä¸ªreturnï¼Œä¸å¸¦ä»»ä½•å˜é‡æˆ–å€¼ï¼Œåˆ™æ­¤æ­¥éª¤ä¸åšä»»ä½•åŠ¨ä½œï¼‰</li><li>æ‰§è¡Œdeferè¯­å¥ï¼Œå¤šä¸ªdeferæŒ‰ç…§FILOé¡ºåºæ‰§è¡Œ</li><li>æ‰§è¡Œè°ƒæ•´RETæŒ‡ä»¤</li></ul><h2 id="7-4-åˆ‡ç‰‡å›°æƒ‘"><a href="#7-4-åˆ‡ç‰‡å›°æƒ‘" class="headerlink" title="7.4 åˆ‡ç‰‡å›°æƒ‘"></a>7.4 åˆ‡ç‰‡å›°æƒ‘</h2><h3 id="7-4-1-æ•°ç»„"><a href="#7-4-1-æ•°ç»„" class="headerlink" title="7.4.1 æ•°ç»„"></a>7.4.1 æ•°ç»„</h3><p>Goçš„æ•°ç»„æ˜¯æœ‰å›ºå®šä¸ªç›¸åŒç±»å‹å…ƒç´ çš„æ•°æ®ç»“æ„ï¼Œåº•å±‚é‡‡ç”¨è¿ç»­çš„å†…å­˜ç©ºé—´å­˜æ”¾ï¼Œæ•°ç»„ä¸€æ—¦å£°æ˜åå¤§å°å°±ä¸å¯æ”¹å˜äº†ã€‚</p><p>Goä¸­çš„æ•°ç»„æ˜¯ä¸€ç§åŸºæœ¬ç±»å‹ã€‚æ•°ç»„çš„ç±»å‹ä¸ä»…åŒ…æ‹¬å…¶å…ƒç´ ç±»å‹ï¼Œä¹ŸåŒ…æ‹¬å…¶å¤§å°ï¼Œ[2]intå’Œ[5]intæ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ•°ç»„ç±»å‹</p><p><img src="/images/go_core_programming/Untitled%2056.png" alt="Untitled"></p><p>æ•°ç»„åæ— è®ºä½œä¸ºå‡½æ•°å®å‚è¿˜æ˜¯ä½œä¸ºstructåµŒå…¥å­—æ®µï¼Œæˆ–è€…æ•°ç»„ä¹‹é—´çš„ç›´æ¥èµ‹å€¼éƒ½æ˜¯å€¼æ‹·è´</p><h3 id="7-4-2-åˆ‡ç‰‡"><a href="#7-4-2-åˆ‡ç‰‡" class="headerlink" title="7.4.2 åˆ‡ç‰‡"></a>7.4.2 åˆ‡ç‰‡</h3><p><strong>åˆ‡ç‰‡åˆ›å»º</strong></p><ol><li>é€šè¿‡æ•°ç»„åˆ›å»º</li></ol><p>array[b:e]åˆ›å»ºä¸€ä¸ªåŒ…æ‹¬e-bä¸ªå…ƒç´ çš„åˆ‡ç‰‡ï¼ŒåŒ…å«bï¼Œä¸åŒ…å«e</p><ol><li>make</li></ol><p>make([]T, len, cap)ä¸­çš„Tæ˜¯åˆ‡ç‰‡å…ƒç´ ç±»å‹ï¼Œlenæ˜¯é•¿åº¦ï¼Œcapæ˜¯åº•å±‚æ•°ç»„çš„å®¹é‡ã€‚capæ˜¯å¯é€‰å‚æ•°</p><ol><li>ç›´æ¥å£°æ˜</li></ol><p><img src="/images/go_core_programming/Untitled%2057.png" alt="Untitled"></p><p>åˆ‡ç‰‡æ•°æ®ç»“æ„</p><p><img src="/images/go_core_programming/Untitled%2058.png" alt="Untitled"></p><p>å¤šä¸ªåˆ‡ç‰‡å…±äº«ä¸€ä¸ªåº•å±‚æ•°ç»„ï¼Œå…¶ä¸­ä¸€ä¸ªåˆ‡ç‰‡çš„appendæ“ä½œå¯èƒ½å¼•å‘å¦‚ä¸‹ä¸¤ç§æƒ…å†µï¼š</p><ul><li>appendè¿½åŠ çš„å…ƒç´ æ²¡æœ‰è¶…è¿‡åº•å±‚æ•°ç»„çš„å®¹é‡ï¼Œæ­¤ç§appendæ“ä½œä¼šç›´æ¥æ“ä½œå…±äº«çš„åº•å±‚æ•°ç»„ï¼Œå¦‚æœå…¶ä»–åˆ‡ç‰‡æœ‰å¼•ç”¨æ•°ç»„è¢«è¦†ç›–çš„åŸè‰²ï¼Œåˆ™ä¼šå¯¼è‡´å…¶ä»–åˆ‡ç‰‡çš„å€¼ä¹Ÿä¼šéšå¼åœ°å‘ç”Ÿå˜åŒ–</li><li>appendè¿½åŠ çš„å…ƒç´ åŠ ä¸ŠåŸæ¥çš„å…ƒç´ å¦‚æœè¶…å‡ºåº•å±‚æ•°ç»„çš„å®¹é‡ï¼Œåˆ™æ­¤ç§appendæ“ä½œä¼šé‡æ–°ç”³è¯·æ–°æ•°ç»„ï¼Œå¹¶å°†åŸæ¥æ•°ç»„çš„å€¼å¤åˆ¶åˆ°æ–°æ•°ç»„</li></ul><p>ç”±äºæœ‰è¿™ç§äºŒä¹‰æ€§ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨åˆ‡ç‰‡è¿‡ç¨‹ä¸­åº”è¯¥å°½é‡é¿å…å¤šä¸ªåˆ‡é¢å…±äº«åº•å±‚æ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨copyè¿›è¡Œæ˜¾å¼çš„å¤åˆ¶</p><h2 id="7-5-å€¼ã€æŒ‡é’ˆå’Œå¼•ç”¨"><a href="#7-5-å€¼ã€æŒ‡é’ˆå’Œå¼•ç”¨" class="headerlink" title="7.5 å€¼ã€æŒ‡é’ˆå’Œå¼•ç”¨"></a>7.5 å€¼ã€æŒ‡é’ˆå’Œå¼•ç”¨</h2><h3 id="7-5-1-ä¼ å€¼è¿˜æ˜¯ä¼ å¼•ç”¨"><a href="#7-5-1-ä¼ å€¼è¿˜æ˜¯ä¼ å¼•ç”¨" class="headerlink" title="7.5.1 ä¼ å€¼è¿˜æ˜¯ä¼ å¼•ç”¨"></a>7.5.1 ä¼ å€¼è¿˜æ˜¯ä¼ å¼•ç”¨</h3><p>Goåªæœ‰ä¸€ç§å‚æ•°ä¼ é€’è§„åˆ™ï¼šå€¼æ‹·è´ï¼Œå«ä¹‰ï¼š</p><ul><li>å‡½æ•°å‚æ•°ä¼ é€’æ—¶ä½¿ç”¨çš„æ˜¯å€¼æ‹·è´</li><li>å®ä¾‹èµ‹å€¼ç»™æ¥å£å˜é‡ï¼Œæ¥å£å¯¹å®ä¾‹çš„å¼•ç”¨æ˜¯å€¼æ‹·è´</li></ul><p>æœ‰æ—¶åœ¨æ˜æ˜æ˜¯å€¼æ‹·è´çš„åœ°æ–¹ç»“æœå´ä¿®æ”¹äº†å˜é‡çš„å†…å®¹ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p><ul><li>ç›´æ¥ä¼ é€’çš„æ˜¯æŒ‡é’ˆï¼ŒæŒ‡é’ˆä¼ é€’åŒæ ·æ˜¯å€¼æ‹·è´ï¼Œä½†æŒ‡é’ˆå’ŒæŒ‡é’ˆå‰¯æœ¬çš„å€¼æŒ‡å‘çš„åœ°å€æ˜¯åŒä¸€åœ°æ–¹ï¼Œæ‰€ä»¥èƒ½ä¿®æ”¹å®å‚å€¼</li><li>å‚æ•°æ˜¯è´Ÿè·æ•°æ®ç±»å‹ï¼Œè¿™äº›å¤åˆæ•°æ®ç±»å‹å†…éƒ¨æœ‰æŒ‡é’ˆç±»å‹çš„å…ƒç´ ï¼Œæ­¤æ—¶å‚æ•°çš„å€¼biæ‹·è´å¹¶ä¸å½±å“æŒ‡é’ˆçš„æŒ‡å‘</li></ul><h3 id="7-5-2-å‡½æ•°åçš„æ„ä¹‰"><a href="#7-5-2-å‡½æ•°åçš„æ„ä¹‰" class="headerlink" title="7.5.2 å‡½æ•°åçš„æ„ä¹‰"></a>7.5.2 å‡½æ•°åçš„æ„ä¹‰</h3><ul><li>ç±»å‹ä¿¡æ¯</li><li>å‡½æ•°çš„æ‰§è¡Œä»£ç çš„èµ·å§‹ä½ç½®</li><li>å¯ä»¥é€šè¿‡å‡½æ•°åè¿›è¡Œå‡½æ•°è°ƒç”¨</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Go-Core-Programming&quot;&gt;&lt;a href=&quot;#Go-Core-Programming&quot; class=&quot;headerlink&quot; title=&quot;Go Core Programming&quot;&gt;&lt;/a&gt;Go Core Programming&lt;/h1&gt;&lt;h1 i</summary>
      
    
    
    
    
    <category term="Go" scheme="https://zhangzhishun.github.io/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>Goé¢è¯•é¢˜æ‰‹å†™å†…å®¹</title>
    <link href="https://zhangzhishun.github.io/2022/01/16/go/Go%E9%9D%A2%E8%AF%95%E9%A2%98%E6%89%8B%E5%86%99/"/>
    <id>https://zhangzhishun.github.io/2022/01/16/go/Go%E9%9D%A2%E8%AF%95%E9%A2%98%E6%89%8B%E5%86%99/</id>
    <published>2022-01-16T02:29:15.000Z</published>
    <updated>2022-04-27T02:35:55.484Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/go_interview/GO-r-01.jpg" alt="img"><br><img src="/images/go_interview/GO-r-02.jpg" alt="img"><br><img src="/images/go_interview/GO-r-03.jpg" alt="img"><br><img src="/images/go_interview/GO-r-04.jpg" alt="img"><br><img src="/images/go_interview/GO-r-05.jpg" alt="img"><br><img src="/images/go_interview/GO-r-06.jpg" alt="img"><br><img src="/images/go_interview/GO-r-07.jpg" alt="img"><br><img src="/images/go_interview/GO-r-08.jpg" alt="img"><br><img src="/images/go_interview/GO-r-09.jpg" alt="img"><br><img src="/images/go_interview/GO-r-10.jpg" alt="img"><br><img src="/images/go_interview/GO-r-11.jpg" alt="img"><br><img src="/images/go_interview/GO-r-12.jpg" alt="img"><br><img src="/images/go_interview/GO-r-13.jpg" alt="img"><br><img src="/images/go_interview/GO-r-14.jpg" alt="img"><br><img src="/images/go_interview/GO-r-15.jpg" alt="img"><br><img src="/images/go_interview/GO-r-16.jpg" alt="img"><br><img src="/images/go_interview/GO-r-17.jpg" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/images/go_interview/GO-r-01.jpg&quot; alt=&quot;img&quot;&gt;&lt;br&gt;&lt;img src=&quot;/images/go_interview/GO-r-02.jpg&quot; alt=&quot;img&quot;&gt;&lt;br&gt;&lt;img src=&quot;/images/go_</summary>
      
    
    
    
    
    <category term="Go" scheme="https://zhangzhishun.github.io/tags/Go/"/>
    
    <category term="é¢è¯•é¢˜" scheme="https://zhangzhishun.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>Goé¢è¯•é¢˜</title>
    <link href="https://zhangzhishun.github.io/2022/01/16/go/Go%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    <id>https://zhangzhishun.github.io/2022/01/16/go/Go%E9%9D%A2%E8%AF%95%E9%A2%98/</id>
    <published>2022-01-16T02:29:15.000Z</published>
    <updated>2022-04-27T02:35:55.484Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://geektutu.com/post/qa-golang.html">å‚è€ƒé“¾æ¥</a></p><h1 id="ä¸€ã€Go-è¯­è¨€ç¬”è¯•é¢è¯•é¢˜-åŸºç¡€è¯­æ³•"><a href="#ä¸€ã€Go-è¯­è¨€ç¬”è¯•é¢è¯•é¢˜-åŸºç¡€è¯­æ³•" class="headerlink" title="ä¸€ã€Go è¯­è¨€ç¬”è¯•é¢è¯•é¢˜(åŸºç¡€è¯­æ³•)"></a>ä¸€ã€Go è¯­è¨€ç¬”è¯•é¢è¯•é¢˜(åŸºç¡€è¯­æ³•)</h1><h2 id="1-å’Œ-çš„åŒºåˆ«ï¼Ÿ"><a href="#1-å’Œ-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="1. = å’Œ := çš„åŒºåˆ«ï¼Ÿ"></a>1. = å’Œ := çš„åŒºåˆ«ï¼Ÿ</h2><p>ç­”æ¡ˆ<br>:= å£°æ˜+èµ‹å€¼<br>= ä»…èµ‹å€¼</p><pre><code class="go">var foo intfoo = 10// ç­‰ä»·äºfoo := 10</code></pre><h2 id="2-æŒ‡é’ˆçš„ä½œç”¨ï¼Ÿ"><a href="#2-æŒ‡é’ˆçš„ä½œç”¨ï¼Ÿ" class="headerlink" title="2. æŒ‡é’ˆçš„ä½œç”¨ï¼Ÿ"></a>2. æŒ‡é’ˆçš„ä½œç”¨ï¼Ÿ</h2><p>ç­”æ¡ˆ<br>æŒ‡é’ˆç”¨æ¥ä¿å­˜å˜é‡çš„åœ°å€ã€‚<br>ä¾‹å¦‚</p><pre><code class="go">var x =  5var p *int = &amp;xfmt.Printf("x = %d",  *p) // x å¯ä»¥ç”¨ *p è®¿é—®</code></pre><ul><li>è¿ç®—ç¬¦ï¼Œä¹Ÿç§°ä¸ºè§£å¼•ç”¨è¿ç®—ç¬¦ï¼Œç”¨äºè®¿é—®åœ°å€ä¸­çš„å€¼ã€‚<br>ï¼†è¿ç®—ç¬¦ï¼Œä¹Ÿç§°ä¸ºåœ°å€è¿ç®—ç¬¦ï¼Œç”¨äºè¿”å›å˜é‡çš„åœ°å€ã€‚<br>Q3 Go å…è®¸å¤šä¸ªè¿”å›å€¼å—ï¼Ÿ<br>ç­”æ¡ˆ<br>å…è®¸<pre><code>func swap(x, y string) (string, string) { return y, x}</code></pre></li></ul><p>func main() {<br>   a, b := swap(â€œAâ€, â€œBâ€)<br>   fmt.Println(a, b) // B A<br>}</p><pre><code>## 4. Go æœ‰å¼‚å¸¸ç±»å‹å—ï¼Ÿç­”æ¡ˆGo æ²¡æœ‰å¼‚å¸¸ç±»å‹ï¼Œåªæœ‰é”™è¯¯ç±»å‹ï¼ˆErrorï¼‰ï¼Œé€šå¸¸ä½¿ç”¨è¿”å›å€¼æ¥è¡¨ç¤ºå¼‚å¸¸çŠ¶æ€ã€‚```gof, err := os.Open("test.txt")if err != nil {    log.Fatal(err)}</code></pre><h2 id="5-ä»€ä¹ˆæ˜¯åç¨‹ï¼ˆGoroutineï¼‰"><a href="#5-ä»€ä¹ˆæ˜¯åç¨‹ï¼ˆGoroutineï¼‰" class="headerlink" title="5. ä»€ä¹ˆæ˜¯åç¨‹ï¼ˆGoroutineï¼‰"></a>5. ä»€ä¹ˆæ˜¯åç¨‹ï¼ˆGoroutineï¼‰</h2><p>ç­”æ¡ˆ<br>Goroutine æ˜¯ä¸å…¶ä»–å‡½æ•°æˆ–æ–¹æ³•åŒæ—¶è¿è¡Œçš„å‡½æ•°æˆ–æ–¹æ³•ã€‚ Goroutines å¯ä»¥è¢«è®¤ä¸ºæ˜¯è½»é‡çº§çš„çº¿ç¨‹ã€‚ ä¸çº¿ç¨‹ç›¸æ¯”ï¼Œåˆ›å»º Goroutine çš„å¼€é”€å¾ˆå°ã€‚ Goåº”ç”¨ç¨‹åºåŒæ—¶è¿è¡Œæ•°åƒä¸ª Goroutine æ˜¯éå¸¸å¸¸è§çš„åšæ³•ã€‚</p><h2 id="6-å¦‚ä½•é«˜æ•ˆåœ°æ‹¼æ¥å­—ç¬¦ä¸²"><a href="#6-å¦‚ä½•é«˜æ•ˆåœ°æ‹¼æ¥å­—ç¬¦ä¸²" class="headerlink" title="6. å¦‚ä½•é«˜æ•ˆåœ°æ‹¼æ¥å­—ç¬¦ä¸²"></a>6. å¦‚ä½•é«˜æ•ˆåœ°æ‹¼æ¥å­—ç¬¦ä¸²</h2><p>ç­”æ¡ˆ<br>Go è¯­è¨€ä¸­ï¼Œå­—ç¬¦ä¸²æ˜¯åªè¯»çš„ï¼Œä¹Ÿå°±æ„å‘³ç€æ¯æ¬¡ä¿®æ”¹æ“ä½œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚å¦‚æœéœ€è¦æ‹¼æ¥å¤šæ¬¡ï¼Œåº”ä½¿ç”¨ strings.Builderï¼Œæœ€å°åŒ–å†…å­˜æ‹·è´æ¬¡æ•°ã€‚</p><pre><code class="go">var str strings.Builderfor i := 0; i &lt; 1000; i++ {    str.WriteString("a")}fmt.Println(str.String())</code></pre><h2 id="7-ä»€ä¹ˆæ˜¯-rune-ç±»å‹"><a href="#7-ä»€ä¹ˆæ˜¯-rune-ç±»å‹" class="headerlink" title="7. ä»€ä¹ˆæ˜¯ rune ç±»å‹"></a>7. ä»€ä¹ˆæ˜¯ rune ç±»å‹</h2><p>ç­”æ¡ˆ<br>ASCII ç åªéœ€è¦ 7 bit å°±å¯ä»¥å®Œæ•´åœ°è¡¨ç¤ºï¼Œä½†åªèƒ½è¡¨ç¤ºè‹±æ–‡å­—æ¯åœ¨å†…çš„128ä¸ªå­—ç¬¦ï¼Œä¸ºäº†è¡¨ç¤ºä¸–ç•Œä¸Šå¤§éƒ¨åˆ†çš„æ–‡å­—ç³»ç»Ÿï¼Œå‘æ˜äº† Unicodeï¼Œ å®ƒæ˜¯ASCIIçš„è¶…é›†ï¼ŒåŒ…å«ä¸–ç•Œä¸Šä¹¦å†™ç³»ç»Ÿä¸­å­˜åœ¨çš„æ‰€æœ‰å­—ç¬¦ï¼Œå¹¶ä¸ºæ¯ä¸ªä»£ç åˆ†é…ä¸€ä¸ªæ ‡å‡†ç¼–å·ï¼ˆç§°ä¸ºUnicode CodePointï¼‰ï¼Œåœ¨ Go è¯­è¨€ä¸­ç§°ä¹‹ä¸º runeï¼Œæ˜¯ int32 ç±»å‹çš„åˆ«åã€‚<br>Go è¯­è¨€ä¸­ï¼Œå­—ç¬¦ä¸²çš„åº•å±‚è¡¨ç¤ºæ˜¯ byte (8 bit) åºåˆ—ï¼Œè€Œé rune (32 bit) åºåˆ—ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ä¸­ è¯­ å’Œ è¨€ ä½¿ç”¨ UTF-8 ç¼–ç åå„å  3 ä¸ª byteï¼Œå› æ­¤ len(â€œGoè¯­è¨€â€) ç­‰äº 8ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º rune åºåˆ—ã€‚</p><pre><code class="go">fmt.Println(len("Goè¯­è¨€")) // 8fmt.Println(len([]rune("Goè¯­è¨€"))) // 4</code></pre><h2 id="8-å¦‚ä½•åˆ¤æ–­-map-ä¸­æ˜¯å¦åŒ…å«æŸä¸ª-key-ï¼Ÿ"><a href="#8-å¦‚ä½•åˆ¤æ–­-map-ä¸­æ˜¯å¦åŒ…å«æŸä¸ª-key-ï¼Ÿ" class="headerlink" title="8. å¦‚ä½•åˆ¤æ–­ map ä¸­æ˜¯å¦åŒ…å«æŸä¸ª key ï¼Ÿ"></a>8. å¦‚ä½•åˆ¤æ–­ map ä¸­æ˜¯å¦åŒ…å«æŸä¸ª key ï¼Ÿ</h2><p>ç­”æ¡ˆ</p><pre><code class="go">if val, ok := dict["foo"]; ok {    //do something here}</code></pre><p>dict[â€œfooâ€] æœ‰ 2 ä¸ªè¿”å›å€¼ï¼Œval å’Œ okï¼Œå¦‚æœ ok ç­‰äº trueï¼Œåˆ™è¯´æ˜ dict åŒ…å« key â€œfooâ€ï¼Œval å°†è¢«èµ‹äºˆ â€œfooâ€ å¯¹åº”çš„å€¼ã€‚</p><h2 id="9-Go-æ”¯æŒé»˜è®¤å‚æ•°æˆ–å¯é€‰å‚æ•°å—ï¼Ÿ"><a href="#9-Go-æ”¯æŒé»˜è®¤å‚æ•°æˆ–å¯é€‰å‚æ•°å—ï¼Ÿ" class="headerlink" title="9. Go æ”¯æŒé»˜è®¤å‚æ•°æˆ–å¯é€‰å‚æ•°å—ï¼Ÿ"></a>9. Go æ”¯æŒé»˜è®¤å‚æ•°æˆ–å¯é€‰å‚æ•°å—ï¼Ÿ</h2><p>ç­”æ¡ˆ<br>Go è¯­è¨€ä¸æ”¯æŒå¯é€‰å‚æ•°ï¼ˆpython æ”¯æŒï¼‰ï¼Œä¹Ÿä¸æ”¯æŒæ–¹æ³•é‡è½½ï¼ˆjavaæ”¯æŒï¼‰ã€‚</p><h2 id="10-defer-çš„æ‰§è¡Œé¡ºåº"><a href="#10-defer-çš„æ‰§è¡Œé¡ºåº" class="headerlink" title="10. defer çš„æ‰§è¡Œé¡ºåº"></a>10. defer çš„æ‰§è¡Œé¡ºåº</h2><p>ç­”æ¡ˆ<br>å¤šä¸ª defer è¯­å¥ï¼Œéµä»åè¿›å…ˆå‡º(Last In First Outï¼ŒLIFO)çš„åŸåˆ™ï¼Œæœ€åå£°æ˜çš„ defer è¯­å¥ï¼Œæœ€å…ˆå¾—åˆ°æ‰§è¡Œã€‚<br>defer åœ¨ return è¯­å¥ä¹‹åæ‰§è¡Œï¼Œä½†åœ¨å‡½æ•°é€€å‡ºä¹‹å‰ï¼Œdefer å¯ä»¥ä¿®æ”¹è¿”å›å€¼ã€‚<br>ä¾‹å¦‚ï¼š</p><pre><code class="go">func test() int {    i := 0    defer func() {        fmt.Println("defer1")    }()    defer func() {        i += 1        fmt.Println("defer2")    }()    return i}func main() {    fmt.Println("return", test())}// defer2// defer1// return 0</code></pre><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯ä»¥çœ‹åˆ° defer çš„æ‰§è¡Œé¡ºåºï¼šåè¿›å…ˆå‡ºã€‚ä½†æ˜¯è¿”å›å€¼å¹¶æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œè¿™æ˜¯ç”±äº Go çš„è¿”å›æœºåˆ¶å†³å®šçš„ï¼Œæ‰§è¡Œ return è¯­å¥åï¼ŒGo ä¼šåˆ›å»ºä¸€ä¸ªä¸´æ—¶å˜é‡ä¿å­˜è¿”å›å€¼ï¼Œå› æ­¤ï¼Œdefer è¯­å¥ä¿®æ”¹äº†å±€éƒ¨å˜é‡ iï¼Œå¹¶æ²¡æœ‰ä¿®æ”¹è¿”å›å€¼ã€‚é‚£å¦‚æœæ˜¯æœ‰åçš„è¿”å›å€¼å‘¢ï¼Ÿ</p><pre><code class="go">func test() (i int) {    i = 0    defer func() {        i += 1        fmt.Println("defer2")    }()    return i}func main() {    fmt.Println("return", test())}// defer2// return 1</code></pre><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿”å›å€¼è¢«ä¿®æ”¹äº†ã€‚å¯¹äºæœ‰åè¿”å›å€¼çš„å‡½æ•°ï¼Œæ‰§è¡Œ return è¯­å¥æ—¶ï¼Œå¹¶ä¸ä¼šå†åˆ›å»ºä¸´æ—¶å˜é‡ä¿å­˜ï¼Œå› æ­¤ï¼Œdefer è¯­å¥ä¿®æ”¹äº† iï¼Œå³å¯¹è¿”å›å€¼äº§ç”Ÿäº†å½±å“ã€‚<br>Q11 å¦‚ä½•äº¤æ¢ 2 ä¸ªå˜é‡çš„å€¼ï¼Ÿ<br>ç­”æ¡ˆ</p><pre><code class="go">a, b := "A", "B"a, b = b, afmt.Println(a, b) // B A</code></pre><h2 id="12-Go-è¯­è¨€-tag-çš„ç”¨å¤„ï¼Ÿ"><a href="#12-Go-è¯­è¨€-tag-çš„ç”¨å¤„ï¼Ÿ" class="headerlink" title="12. Go è¯­è¨€ tag çš„ç”¨å¤„ï¼Ÿ"></a>12. Go è¯­è¨€ tag çš„ç”¨å¤„ï¼Ÿ</h2><p>ç­”æ¡ˆ<br>tag å¯ä»¥ç†è§£ä¸º struct å­—æ®µçš„æ³¨è§£ï¼Œå¯ä»¥ç”¨æ¥å®šä¹‰å­—æ®µçš„ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§ã€‚æ¡†æ¶/å·¥å…·å¯ä»¥é€šè¿‡åå°„è·å–åˆ°æŸä¸ªå­—æ®µå®šä¹‰çš„å±æ€§ï¼Œé‡‡å–ç›¸åº”çš„å¤„ç†æ–¹å¼ã€‚tag ä¸°å¯Œäº†ä»£ç çš„è¯­ä¹‰ï¼Œå¢å¼ºäº†çµæ´»æ€§ã€‚<br>ä¾‹å¦‚ï¼š</p><pre><code class="go">package mainimport "fmt"import "encoding/json"type Stu struct {    Name string `json:"stu_name"`    ID   string `json:"stu_id"`    Age  int    `json:"-"`}func main() {    buf, _ := json.Marshal(Stu{"Tom", "t001", 18})    fmt.Printf("%s\n", buf)}</code></pre><p>è¿™ä¸ªä¾‹å­ä½¿ç”¨ tag å®šä¹‰äº†ç»“æ„ä½“å­—æ®µä¸ json å­—æ®µçš„è½¬æ¢å…³ç³»ï¼ŒName -&gt; stu_name, ID -&gt; stu_idï¼Œå¿½ç•¥ Age å­—æ®µã€‚å¾ˆæ–¹ä¾¿åœ°å®ç°äº† Go ç»“æ„ä½“ä¸ä¸åŒè§„èŒƒçš„ json æ–‡æœ¬ä¹‹é—´çš„è½¬æ¢ã€‚</p><h2 id="13-å¦‚ä½•åˆ¤æ–­-2-ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼ˆslice-æ˜¯ç›¸ç­‰çš„ï¼Ÿ"><a href="#13-å¦‚ä½•åˆ¤æ–­-2-ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼ˆslice-æ˜¯ç›¸ç­‰çš„ï¼Ÿ" class="headerlink" title="13. å¦‚ä½•åˆ¤æ–­ 2 ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼ˆslice) æ˜¯ç›¸ç­‰çš„ï¼Ÿ"></a>13. å¦‚ä½•åˆ¤æ–­ 2 ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼ˆslice) æ˜¯ç›¸ç­‰çš„ï¼Ÿ</h2><p>ç­”æ¡ˆ<br>go è¯­è¨€ä¸­å¯ä»¥ä½¿ç”¨åå°„ reflect.DeepEqual(a, b) åˆ¤æ–­ aã€b ä¸¤ä¸ªåˆ‡ç‰‡æ˜¯å¦ç›¸ç­‰ï¼Œä½†æ˜¯é€šå¸¸ä¸æ¨èè¿™ä¹ˆåšï¼Œä½¿ç”¨åå°„éå¸¸å½±å“æ€§èƒ½ã€‚<br>é€šå¸¸é‡‡ç”¨çš„æ–¹å¼å¦‚ä¸‹ï¼Œéå†æ¯”è¾ƒåˆ‡ç‰‡ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼ˆæ³¨æ„å¤„ç†è¶Šç•Œçš„æƒ…å†µï¼‰ã€‚</p><pre><code class="go">func StringSliceEqualBCE(a, b []string) bool {    if len(a) != len(b) {        return false    }    if (a == nil) != (b == nil) {        return false    }    b = b[:len(a)]    for i, v := range a {        if v != b[i] {            return false        }    }    return true}</code></pre><h2 id="14-å­—ç¬¦ä¸²æ‰“å°æ—¶ï¼Œ-v-å’Œ-v-çš„åŒºåˆ«"><a href="#14-å­—ç¬¦ä¸²æ‰“å°æ—¶ï¼Œ-v-å’Œ-v-çš„åŒºåˆ«" class="headerlink" title="14. å­—ç¬¦ä¸²æ‰“å°æ—¶ï¼Œ%v å’Œ %+v çš„åŒºåˆ«"></a>14. å­—ç¬¦ä¸²æ‰“å°æ—¶ï¼Œ%v å’Œ %+v çš„åŒºåˆ«</h2><p>ç­”æ¡ˆ<br>%v å’Œ %+v éƒ½å¯ä»¥ç”¨æ¥æ‰“å° struct çš„å€¼ï¼ŒåŒºåˆ«åœ¨äº %v ä»…æ‰“å°å„ä¸ªå­—æ®µçš„å€¼ï¼Œ%+v è¿˜ä¼šæ‰“å°å„ä¸ªå­—æ®µçš„åç§°ã€‚</p><pre><code class="go">type Stu struct {    Name string}func main() {    fmt.Printf("%v\n", Stu{"Tom"}) // {Tom}    fmt.Printf("%+v\n", Stu{"Tom"}) // {Name:Tom}}</code></pre><p>ä½†å¦‚æœç»“æ„ä½“å®šä¹‰äº† String() æ–¹æ³•ï¼Œ%v å’Œ %+v éƒ½ä¼šè°ƒç”¨ String() è¦†ç›–é»˜è®¤å€¼ã€‚</p><h2 id="15-Go-è¯­è¨€ä¸­å¦‚ä½•è¡¨ç¤ºæšä¸¾å€¼-enums"><a href="#15-Go-è¯­è¨€ä¸­å¦‚ä½•è¡¨ç¤ºæšä¸¾å€¼-enums" class="headerlink" title="15. Go è¯­è¨€ä¸­å¦‚ä½•è¡¨ç¤ºæšä¸¾å€¼(enums)"></a>15. Go è¯­è¨€ä¸­å¦‚ä½•è¡¨ç¤ºæšä¸¾å€¼(enums)</h2><p>ç­”æ¡ˆ<br>é€šå¸¸ä½¿ç”¨å¸¸é‡(const) æ¥è¡¨ç¤ºæšä¸¾å€¼ã€‚</p><pre><code class="go">type StuType int32const (    Type1 StuType = iota    Type2    Type3    Type4)func main() {    fmt.Println(Type1, Type2, Type3, Type4) // 0, 1, 2, 3}</code></pre><p>å‚è€ƒ What is an idiomatic way of representing enums in Go? - StackOverflow</p><h2 id="16-ç©º-struct-çš„ç”¨é€”"><a href="#16-ç©º-struct-çš„ç”¨é€”" class="headerlink" title="16. ç©º struct{} çš„ç”¨é€”"></a>16. ç©º struct{} çš„ç”¨é€”</h2><p>ç­”æ¡ˆ<br>ä½¿ç”¨ç©ºç»“æ„ä½“ struct{} å¯ä»¥èŠ‚çœå†…å­˜ï¼Œä¸€èˆ¬ä½œä¸ºå ä½ç¬¦ä½¿ç”¨ï¼Œè¡¨æ˜è¿™é‡Œå¹¶ä¸éœ€è¦ä¸€ä¸ªå€¼ã€‚</p><pre><code class="go">fmt.Println(unsafe.Sizeof(struct{}{})) // 0</code></pre><p>æ¯”å¦‚ä½¿ç”¨ map è¡¨ç¤ºé›†åˆæ—¶ï¼Œåªå…³æ³¨ keyï¼Œvalue å¯ä»¥ä½¿ç”¨ struct{} ä½œä¸ºå ä½ç¬¦ã€‚å¦‚æœä½¿ç”¨å…¶ä»–ç±»å‹ä½œä¸ºå ä½ç¬¦ï¼Œä¾‹å¦‚ intï¼Œboolï¼Œä¸ä»…æµªè´¹äº†å†…å­˜ï¼Œè€Œä¸”å®¹æ˜“å¼•èµ·æ­§ä¹‰ã€‚</p><pre><code class="go">type Set map[string]struct{}func main() {    set := make(Set)    for _, item := range []string{"A", "A", "B", "C"} {        set[item] = struct{}{}    }    fmt.Println(len(set)) // 3    if _, ok := set["A"]; ok {        fmt.Println("A exists") // A exists    }}</code></pre><p>å†æ¯”å¦‚ï¼Œä½¿ç”¨ä¿¡é“(channel)æ§åˆ¶å¹¶å‘æ—¶ï¼Œæˆ‘ä»¬åªæ˜¯éœ€è¦ä¸€ä¸ªä¿¡å·ï¼Œä½†å¹¶ä¸éœ€è¦ä¼ é€’å€¼ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ struct{} ä»£æ›¿ã€‚</p><pre><code class="go">func main() {    ch := make(chan struct{}, 1)    go func() {        &lt;-ch        // do something    }()    ch &lt;- struct{}{}    // ...}</code></pre><p>å†æ¯”å¦‚ï¼Œå£°æ˜åªåŒ…å«æ–¹æ³•çš„ç»“æ„ä½“ã€‚</p><pre><code class="go">type Lamp struct{}func (l Lamp) On() {        println("On")}func (l Lamp) Off() {        println("Off")}</code></pre><h1 id="äºŒã€Go-è¯­è¨€ç¬”è¯•é¢è¯•é¢˜-å®ç°åŸç†"><a href="#äºŒã€Go-è¯­è¨€ç¬”è¯•é¢è¯•é¢˜-å®ç°åŸç†" class="headerlink" title="äºŒã€Go è¯­è¨€ç¬”è¯•é¢è¯•é¢˜(å®ç°åŸç†)"></a>äºŒã€Go è¯­è¨€ç¬”è¯•é¢è¯•é¢˜(å®ç°åŸç†)</h1><h2 id="1-init-å‡½æ•°æ˜¯ä»€ä¹ˆæ—¶å€™æ‰§è¡Œçš„ï¼Ÿ"><a href="#1-init-å‡½æ•°æ˜¯ä»€ä¹ˆæ—¶å€™æ‰§è¡Œçš„ï¼Ÿ" class="headerlink" title="1. init() å‡½æ•°æ˜¯ä»€ä¹ˆæ—¶å€™æ‰§è¡Œçš„ï¼Ÿ"></a>1. init() å‡½æ•°æ˜¯ä»€ä¹ˆæ—¶å€™æ‰§è¡Œçš„ï¼Ÿ</h2><p>ç­”æ¡ˆ<br>init() å‡½æ•°æ˜¯ Go ç¨‹åºåˆå§‹åŒ–çš„ä¸€éƒ¨åˆ†ã€‚Go ç¨‹åºåˆå§‹åŒ–å…ˆäº main å‡½æ•°ï¼Œç”± runtime åˆå§‹åŒ–æ¯ä¸ªå¯¼å…¥çš„åŒ…ï¼Œåˆå§‹åŒ–é¡ºåºä¸æ˜¯æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„å¯¼å…¥é¡ºåºï¼Œè€Œæ˜¯æŒ‰ç…§è§£æçš„ä¾èµ–å…³ç³»ï¼Œæ²¡æœ‰ä¾èµ–çš„åŒ…æœ€å…ˆåˆå§‹åŒ–ã€‚<br>æ¯ä¸ªåŒ…é¦–å…ˆåˆå§‹åŒ–åŒ…ä½œç”¨åŸŸçš„å¸¸é‡å’Œå˜é‡ï¼ˆå¸¸é‡ä¼˜å…ˆäºå˜é‡ï¼‰ï¼Œç„¶åæ‰§è¡ŒåŒ…çš„ init() å‡½æ•°ã€‚åŒä¸€ä¸ªåŒ…ï¼Œç”šè‡³æ˜¯åŒä¸€ä¸ªæºæ–‡ä»¶å¯ä»¥æœ‰å¤šä¸ª init() å‡½æ•°ã€‚init() å‡½æ•°æ²¡æœ‰å…¥å‚å’Œè¿”å›å€¼ï¼Œä¸èƒ½è¢«å…¶ä»–å‡½æ•°è°ƒç”¨ï¼ŒåŒä¸€ä¸ªåŒ…å†…å¤šä¸ª init() å‡½æ•°çš„æ‰§è¡Œé¡ºåºä¸ä½œä¿è¯ã€‚<br>ä¸€å¥è¯æ€»ç»“ï¼š import â€“&gt; const â€“&gt; var â€“&gt; init() â€“&gt; main()<br>ç¤ºä¾‹ï¼š</p><pre><code class="go">package mainimport "fmt"func init()  {    fmt.Println("init1:", a)}func init()  {    fmt.Println("init2:", a)}var a = 10const b = 100func main() {    fmt.Println("main:", a)}// æ‰§è¡Œç»“æœ// init1: 10// init2: 10// main: 10</code></pre><h2 id="2-Go-è¯­è¨€çš„å±€éƒ¨å˜é‡åˆ†é…åœ¨æ ˆä¸Šè¿˜æ˜¯å †ä¸Šï¼Ÿ"><a href="#2-Go-è¯­è¨€çš„å±€éƒ¨å˜é‡åˆ†é…åœ¨æ ˆä¸Šè¿˜æ˜¯å †ä¸Šï¼Ÿ" class="headerlink" title="2. Go è¯­è¨€çš„å±€éƒ¨å˜é‡åˆ†é…åœ¨æ ˆä¸Šè¿˜æ˜¯å †ä¸Šï¼Ÿ"></a>2. Go è¯­è¨€çš„å±€éƒ¨å˜é‡åˆ†é…åœ¨æ ˆä¸Šè¿˜æ˜¯å †ä¸Šï¼Ÿ</h2><p>ç­”æ¡ˆ<br>ç”±ç¼–è¯‘å™¨å†³å®šã€‚Go è¯­è¨€ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å†³å®šæŠŠä¸€ä¸ªå˜é‡æ”¾åœ¨æ ˆè¿˜æ˜¯æ”¾åœ¨å †ï¼Œç¼–è¯‘å™¨ä¼šåšé€ƒé€¸åˆ†æ(escape analysis)ï¼Œå½“å‘ç°å˜é‡çš„ä½œç”¨åŸŸæ²¡æœ‰è¶…å‡ºå‡½æ•°èŒƒå›´ï¼Œå°±å¯ä»¥åœ¨æ ˆä¸Šï¼Œåä¹‹åˆ™å¿…é¡»åˆ†é…åœ¨å †ä¸Šã€‚</p><pre><code class="go">func foo() *int {    v := 11    return &amp;v}func main() {    m := foo()    println(*m) // 11}</code></pre><p>foo() å‡½æ•°ä¸­ï¼Œå¦‚æœ v åˆ†é…åœ¨æ ˆä¸Šï¼Œfoo å‡½æ•°è¿”å›æ—¶ï¼Œ&amp;v å°±ä¸å­˜åœ¨äº†ï¼Œä½†æ˜¯è¿™æ®µå‡½æ•°æ˜¯èƒ½å¤Ÿæ­£å¸¸è¿è¡Œçš„ã€‚Go ç¼–è¯‘å™¨å‘ç° v çš„å¼•ç”¨è„±ç¦»äº† foo çš„ä½œç”¨åŸŸï¼Œä¼šå°†å…¶åˆ†é…åœ¨å †ä¸Šã€‚å› æ­¤ï¼Œmain å‡½æ•°ä¸­ä»èƒ½å¤Ÿæ­£å¸¸è®¿é—®è¯¥å€¼ã€‚</p><h2 id="3-2-ä¸ª-interface-å¯ä»¥æ¯”è¾ƒå—ï¼Ÿ"><a href="#3-2-ä¸ª-interface-å¯ä»¥æ¯”è¾ƒå—ï¼Ÿ" class="headerlink" title="3. 2 ä¸ª interface å¯ä»¥æ¯”è¾ƒå—ï¼Ÿ"></a>3. 2 ä¸ª interface å¯ä»¥æ¯”è¾ƒå—ï¼Ÿ</h2><p>ç­”æ¡ˆ<br>Go è¯­è¨€ä¸­ï¼Œinterface çš„å†…éƒ¨å®ç°åŒ…å«äº† 2 ä¸ªå­—æ®µï¼Œç±»å‹ T å’Œ å€¼ Vï¼Œinterface å¯ä»¥ä½¿ç”¨ == æˆ– != æ¯”è¾ƒã€‚2 ä¸ª interface ç›¸ç­‰æœ‰ä»¥ä¸‹ 2 ç§æƒ…å†µ<br>ä¸¤ä¸ª interface å‡ç­‰äº nilï¼ˆæ­¤æ—¶ V å’Œ T éƒ½å¤„äº unset çŠ¶æ€ï¼‰<br>ç±»å‹ T ç›¸åŒï¼Œä¸”å¯¹åº”çš„å€¼ V ç›¸ç­‰ã€‚<br>çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><pre><code class="go">type Stu struct {    Name string}type StuInt interface{}func main() {    var stu1, stu2 StuInt = &amp;Stu{"Tom"}, &amp;Stu{"Tom"}    var stu3, stu4 StuInt = Stu{"Tom"}, Stu{"Tom"}    fmt.Println(stu1 == stu2) // false    fmt.Println(stu3 == stu4) // true}</code></pre><p>stu1 å’Œ stu2 å¯¹åº”çš„ç±»å‹æ˜¯ *Stuï¼Œå€¼æ˜¯ Stu ç»“æ„ä½“çš„åœ°å€ï¼Œä¸¤ä¸ªåœ°å€ä¸åŒï¼Œå› æ­¤ç»“æœä¸º falseã€‚<br>stu3 å’Œ stu4 å¯¹åº”çš„ç±»å‹æ˜¯ Stuï¼Œå€¼æ˜¯ Stu ç»“æ„ä½“ï¼Œä¸”å„å­—æ®µç›¸ç­‰ï¼Œå› æ­¤ç»“æœä¸º trueã€‚</p><h2 id="4-ä¸¤ä¸ª-nil-å¯èƒ½ä¸ç›¸ç­‰å—ï¼Ÿ"><a href="#4-ä¸¤ä¸ª-nil-å¯èƒ½ä¸ç›¸ç­‰å—ï¼Ÿ" class="headerlink" title="4. ä¸¤ä¸ª nil å¯èƒ½ä¸ç›¸ç­‰å—ï¼Ÿ"></a>4. ä¸¤ä¸ª nil å¯èƒ½ä¸ç›¸ç­‰å—ï¼Ÿ</h2><p>ç­”æ¡ˆ<br>å¯èƒ½ã€‚<br>æ¥å£(interface) æ˜¯å¯¹éæ¥å£å€¼(ä¾‹å¦‚æŒ‡é’ˆï¼Œstructç­‰)çš„å°è£…ï¼Œå†…éƒ¨å®ç°åŒ…å« 2 ä¸ªå­—æ®µï¼Œç±»å‹ T å’Œ å€¼ Vã€‚ä¸€ä¸ªæ¥å£ç­‰äº nilï¼Œå½“ä¸”ä»…å½“ T å’Œ V å¤„äº unset çŠ¶æ€ï¼ˆT=nilï¼ŒV is unsetï¼‰ã€‚<br>ä¸¤ä¸ªæ¥å£å€¼æ¯”è¾ƒæ—¶ï¼Œä¼šå…ˆæ¯”è¾ƒ Tï¼Œå†æ¯”è¾ƒ Vã€‚<br>æ¥å£å€¼ä¸éæ¥å£å€¼æ¯”è¾ƒæ—¶ï¼Œä¼šå…ˆå°†éæ¥å£å€¼å°è¯•è½¬æ¢ä¸ºæ¥å£å€¼ï¼Œå†æ¯”è¾ƒã€‚</p><pre><code class="go">func main() {    var p *int = nil    var i interface{} = p    fmt.Println(i == p) // true    fmt.Println(p == nil) // true    fmt.Println(i == nil) // false}</code></pre><p>ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°†ä¸€ä¸ª nil éæ¥å£å€¼ p èµ‹å€¼ç»™æ¥å£ iï¼Œæ­¤æ—¶ï¼Œi çš„å†…éƒ¨å­—æ®µä¸º(T=*int, V=nil)ï¼Œi ä¸ p ä½œæ¯”è¾ƒæ—¶ï¼Œå°† p è½¬æ¢ä¸ºæ¥å£åå†æ¯”è¾ƒï¼Œå› æ­¤ i == pï¼Œp ä¸ nil æ¯”è¾ƒï¼Œç›´æ¥æ¯”è¾ƒå€¼ï¼Œæ‰€ä»¥ p == nilã€‚<br>ä½†æ˜¯å½“ i ä¸ nil æ¯”è¾ƒæ—¶ï¼Œä¼šå°† nil è½¬æ¢ä¸ºæ¥å£ (T=nil, V=nil)ï¼Œä¸i (T=*int, V=nil) ä¸ç›¸ç­‰ï¼Œå› æ­¤ i != nilã€‚å› æ­¤ V ä¸º nil ï¼Œä½† T ä¸ä¸º nil çš„æ¥å£ä¸ç­‰äº nilã€‚</p><h2 id="5-ç®€è¿°-Go-è¯­è¨€GC-åƒåœ¾å›æ”¶-çš„å·¥ä½œåŸç†"><a href="#5-ç®€è¿°-Go-è¯­è¨€GC-åƒåœ¾å›æ”¶-çš„å·¥ä½œåŸç†" class="headerlink" title="5. ç®€è¿° Go è¯­è¨€GC(åƒåœ¾å›æ”¶)çš„å·¥ä½œåŸç†"></a>5. ç®€è¿° Go è¯­è¨€GC(åƒåœ¾å›æ”¶)çš„å·¥ä½œåŸç†</h2><p>ç­”æ¡ˆ<br>æœ€å¸¸è§çš„åƒåœ¾å›æ”¶ç®—æ³•æœ‰æ ‡è®°æ¸…é™¤(Mark-Sweep) å’Œå¼•ç”¨è®¡æ•°(Reference Count)ï¼ŒGo è¯­è¨€é‡‡ç”¨çš„æ˜¯æ ‡è®°æ¸…é™¤ç®—æ³•ã€‚å¹¶åœ¨æ­¤åŸºç¡€ä¸Šä½¿ç”¨äº†ä¸‰è‰²æ ‡è®°æ³•å’Œå†™å±éšœæŠ€æœ¯ï¼Œæé«˜äº†æ•ˆç‡ã€‚<br>æ ‡è®°æ¸…é™¤æ”¶é›†å™¨æ˜¯è·Ÿè¸ªå¼åƒåœ¾æ”¶é›†å™¨ï¼Œå…¶æ‰§è¡Œè¿‡ç¨‹å¯ä»¥åˆ†æˆæ ‡è®°ï¼ˆMarkï¼‰å’Œæ¸…é™¤ï¼ˆSweepï¼‰ä¸¤ä¸ªé˜¶æ®µï¼š<br>æ ‡è®°é˜¶æ®µ â€” ä»æ ¹å¯¹è±¡å‡ºå‘æŸ¥æ‰¾å¹¶æ ‡è®°å †ä¸­æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡ï¼›<br>æ¸…é™¤é˜¶æ®µ â€” éå†å †ä¸­çš„å…¨éƒ¨å¯¹è±¡ï¼Œå›æ”¶æœªè¢«æ ‡è®°çš„åƒåœ¾å¯¹è±¡å¹¶å°†å›æ”¶çš„å†…å­˜åŠ å…¥ç©ºé—²é“¾è¡¨ã€‚<br>æ ‡è®°æ¸…é™¤ç®—æ³•çš„ä¸€å¤§é—®é¢˜æ˜¯åœ¨æ ‡è®°æœŸé—´ï¼Œéœ€è¦æš‚åœç¨‹åºï¼ˆStop the worldï¼ŒSTWï¼‰ï¼Œæ ‡è®°ç»“æŸä¹‹åï¼Œç”¨æˆ·ç¨‹åºæ‰å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚ä¸ºäº†èƒ½å¤Ÿå¼‚æ­¥æ‰§è¡Œï¼Œå‡å°‘ STW çš„æ—¶é—´ï¼ŒGo è¯­è¨€é‡‡ç”¨äº†ä¸‰è‰²æ ‡è®°æ³•ã€‚<br>ä¸‰è‰²æ ‡è®°ç®—æ³•å°†ç¨‹åºä¸­çš„å¯¹è±¡åˆ†æˆç™½è‰²ã€é»‘è‰²å’Œç°è‰²ä¸‰ç±»ã€‚<br>ç™½è‰²ï¼šä¸ç¡®å®šå¯¹è±¡ã€‚<br>ç°è‰²ï¼šå­˜æ´»å¯¹è±¡ï¼Œå­å¯¹è±¡å¾…å¤„ç†ã€‚<br>é»‘è‰²ï¼šå­˜æ´»å¯¹è±¡ã€‚<br>æ ‡è®°å¼€å§‹æ—¶ï¼Œæ‰€æœ‰å¯¹è±¡åŠ å…¥ç™½è‰²é›†åˆï¼ˆè¿™ä¸€æ­¥éœ€ STW ï¼‰ã€‚é¦–å…ˆå°†æ ¹å¯¹è±¡æ ‡è®°ä¸ºç°è‰²ï¼ŒåŠ å…¥ç°è‰²é›†åˆï¼Œåƒåœ¾æœé›†å™¨å–å‡ºä¸€ä¸ªç°è‰²å¯¹è±¡ï¼Œå°†å…¶æ ‡è®°ä¸ºé»‘è‰²ï¼Œå¹¶å°†å…¶æŒ‡å‘çš„å¯¹è±¡æ ‡è®°ä¸ºç°è‰²ï¼ŒåŠ å…¥ç°è‰²é›†åˆã€‚é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°ç°è‰²é›†åˆä¸ºç©ºä¸ºæ­¢ï¼Œæ ‡è®°é˜¶æ®µç»“æŸã€‚é‚£ä¹ˆç™½è‰²å¯¹è±¡å³å¯éœ€è¦æ¸…ç†çš„å¯¹è±¡ï¼Œè€Œé»‘è‰²å¯¹è±¡å‡ä¸ºæ ¹å¯è¾¾çš„å¯¹è±¡ï¼Œä¸èƒ½è¢«æ¸…ç†ã€‚<br>ä¸‰è‰²æ ‡è®°æ³•å› ä¸ºå¤šäº†ä¸€ä¸ªç™½è‰²çš„çŠ¶æ€æ¥å­˜æ”¾ä¸ç¡®å®šå¯¹è±¡ï¼Œæ‰€ä»¥åç»­çš„æ ‡è®°é˜¶æ®µå¯ä»¥å¹¶å‘åœ°æ‰§è¡Œã€‚å½“ç„¶å¹¶å‘æ‰§è¡Œçš„ä»£ä»·æ˜¯å¯èƒ½ä¼šé€ æˆä¸€äº›é—æ¼ï¼Œå› ä¸ºé‚£äº›æ—©å…ˆè¢«æ ‡è®°ä¸ºé»‘è‰²çš„å¯¹è±¡å¯èƒ½ç›®å‰å·²ç»æ˜¯ä¸å¯è¾¾çš„äº†ã€‚æ‰€ä»¥ä¸‰è‰²æ ‡è®°æ³•æ˜¯ä¸€ä¸ª false negativeï¼ˆå‡é˜´æ€§ï¼‰çš„ç®—æ³•ã€‚<br>ä¸‰è‰²æ ‡è®°æ³•å¹¶å‘æ‰§è¡Œä»å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå³åœ¨ GC è¿‡ç¨‹ä¸­ï¼Œå¯¹è±¡æŒ‡é’ˆå‘ç”Ÿäº†æ”¹å˜ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p><pre><code>A (é»‘) -&gt; B (ç°) -&gt; C (ç™½) -&gt; D (ç™½)</code></pre><p>æ­£å¸¸æƒ…å†µä¸‹ï¼ŒD å¯¹è±¡æœ€ç»ˆä¼šè¢«æ ‡è®°ä¸ºé»‘è‰²ï¼Œä¸åº”è¢«å›æ”¶ã€‚ä½†åœ¨æ ‡è®°å’Œç”¨æˆ·ç¨‹åºå¹¶å‘æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·ç¨‹åºåˆ é™¤äº† C å¯¹ D çš„å¼•ç”¨ï¼Œè€Œ A è·å¾—äº† D çš„å¼•ç”¨ã€‚æ ‡è®°ç»§ç»­è¿›è¡Œï¼ŒD å°±æ²¡æœ‰æœºä¼šè¢«æ ‡è®°ä¸ºé»‘è‰²äº†ï¼ˆA å·²ç»å¤„ç†è¿‡ï¼Œè¿™ä¸€è½®ä¸ä¼šå†è¢«å¤„ç†ï¼‰ã€‚</p><pre><code>A (é»‘) -&gt; B (ç°) -&gt; C (ç™½)   â†“ D (ç™½)</code></pre><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒGo ä½¿ç”¨äº†å†…å­˜å±éšœæŠ€æœ¯ï¼Œå®ƒæ˜¯åœ¨ç”¨æˆ·ç¨‹åºè¯»å–å¯¹è±¡ã€åˆ›å»ºæ–°å¯¹è±¡ä»¥åŠæ›´æ–°å¯¹è±¡æŒ‡é’ˆæ—¶æ‰§è¡Œçš„ä¸€æ®µä»£ç ï¼Œç±»ä¼¼äºä¸€ä¸ªé’©å­ã€‚åƒåœ¾æ”¶é›†å™¨ä½¿ç”¨äº†å†™å±éšœï¼ˆWrite Barrierï¼‰æŠ€æœ¯ï¼Œå½“å¯¹è±¡æ–°å¢æˆ–æ›´æ–°æ—¶ï¼Œä¼šå°†å…¶ç€è‰²ä¸ºç°è‰²ã€‚è¿™æ ·å³ä½¿ä¸ç”¨æˆ·ç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œå¯¹è±¡çš„å¼•ç”¨å‘ç”Ÿæ”¹å˜æ—¶ï¼Œåƒåœ¾æ”¶é›†å™¨ä¹Ÿèƒ½æ­£ç¡®å¤„ç†äº†ã€‚<br>ä¸€æ¬¡å®Œæ•´çš„ GC åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š<br>1ï¼‰æ ‡è®°å‡†å¤‡(Mark Setupï¼Œéœ€ STW)ï¼Œæ‰“å¼€å†™å±éšœ(Write Barrier)<br>2ï¼‰ä½¿ç”¨ä¸‰è‰²æ ‡è®°æ³•æ ‡è®°ï¼ˆMarking, å¹¶å‘ï¼‰<br>3ï¼‰æ ‡è®°ç»“æŸ(Mark Terminationï¼Œéœ€ STW)ï¼Œå…³é—­å†™å±éšœã€‚<br>4ï¼‰æ¸…ç†(Sweeping, å¹¶å‘)<br>å‚è€ƒ fullstack</p><h2 id="6-å‡½æ•°è¿”å›å±€éƒ¨å˜é‡çš„æŒ‡é’ˆæ˜¯å¦å®‰å…¨ï¼Ÿ"><a href="#6-å‡½æ•°è¿”å›å±€éƒ¨å˜é‡çš„æŒ‡é’ˆæ˜¯å¦å®‰å…¨ï¼Ÿ" class="headerlink" title="6. å‡½æ•°è¿”å›å±€éƒ¨å˜é‡çš„æŒ‡é’ˆæ˜¯å¦å®‰å…¨ï¼Ÿ"></a>6. å‡½æ•°è¿”å›å±€éƒ¨å˜é‡çš„æŒ‡é’ˆæ˜¯å¦å®‰å…¨ï¼Ÿ</h2><p>ç­”æ¡ˆ<br>è¿™åœ¨ Go ä¸­æ˜¯å®‰å…¨çš„ï¼ŒGo ç¼–è¯‘å™¨å°†ä¼šå¯¹æ¯ä¸ªå±€éƒ¨å˜é‡è¿›è¡Œé€ƒé€¸åˆ†æã€‚å¦‚æœå‘ç°å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸè¶…å‡ºè¯¥å‡½æ•°ï¼Œåˆ™ä¸ä¼šå°†å†…å­˜åˆ†é…åœ¨æ ˆä¸Šï¼Œè€Œæ˜¯åˆ†é…åœ¨å †ä¸Šã€‚</p><h2 id="7-éæ¥å£éæ¥å£çš„ä»»æ„ç±»å‹-T-éƒ½èƒ½å¤Ÿè°ƒç”¨-T-çš„æ–¹æ³•å—ï¼Ÿåè¿‡æ¥å‘¢ï¼Ÿ"><a href="#7-éæ¥å£éæ¥å£çš„ä»»æ„ç±»å‹-T-éƒ½èƒ½å¤Ÿè°ƒç”¨-T-çš„æ–¹æ³•å—ï¼Ÿåè¿‡æ¥å‘¢ï¼Ÿ" class="headerlink" title="7. éæ¥å£éæ¥å£çš„ä»»æ„ç±»å‹ T() éƒ½èƒ½å¤Ÿè°ƒç”¨ *T çš„æ–¹æ³•å—ï¼Ÿåè¿‡æ¥å‘¢ï¼Ÿ"></a>7. éæ¥å£éæ¥å£çš„ä»»æ„ç±»å‹ T() éƒ½èƒ½å¤Ÿè°ƒç”¨ *T çš„æ–¹æ³•å—ï¼Ÿåè¿‡æ¥å‘¢ï¼Ÿ</h2><p>ç­”æ¡ˆ<br>ä¸€ä¸ªTç±»å‹çš„å€¼å¯ä»¥è°ƒç”¨ä¸º<em>Tç±»å‹å£°æ˜çš„æ–¹æ³•ï¼Œä½†æ˜¯ä»…å½“æ­¤Tçš„å€¼æ˜¯å¯å¯»å€(addressable) çš„æƒ…å†µä¸‹ã€‚ç¼–è¯‘å™¨åœ¨è°ƒç”¨æŒ‡é’ˆå±ä¸»æ–¹æ³•å‰ï¼Œä¼šè‡ªåŠ¨å–æ­¤Tå€¼çš„åœ°å€ã€‚å› ä¸ºä¸æ˜¯ä»»ä½•Tå€¼éƒ½æ˜¯å¯å¯»å€çš„ï¼Œæ‰€ä»¥å¹¶éä»»ä½•Tå€¼éƒ½èƒ½å¤Ÿè°ƒç”¨ä¸ºç±»å‹</em>Tå£°æ˜çš„æ–¹æ³•ã€‚<br>åè¿‡æ¥ï¼Œä¸€ä¸ª<em>Tç±»å‹çš„å€¼å¯ä»¥è°ƒç”¨ä¸ºç±»å‹Tå£°æ˜çš„æ–¹æ³•ï¼Œè¿™æ˜¯å› ä¸ºè§£å¼•ç”¨æŒ‡é’ˆæ€»æ˜¯åˆæ³•çš„ã€‚äº‹å®ä¸Šï¼Œä½ å¯ä»¥è®¤ä¸ºå¯¹äºæ¯ä¸€ä¸ªä¸ºç±»å‹ T å£°æ˜çš„æ–¹æ³•ï¼Œç¼–è¯‘å™¨éƒ½ä¼šä¸ºç±»å‹</em>Tè‡ªåŠ¨éšå¼å£°æ˜ä¸€ä¸ªåŒåå’ŒåŒç­¾åçš„æ–¹æ³•ã€‚<br>å“ªäº›å€¼æ˜¯ä¸å¯å¯»å€çš„å‘¢ï¼Ÿ<br>å­—ç¬¦ä¸²ä¸­çš„å­—èŠ‚ï¼›<br>map å¯¹è±¡ä¸­çš„å…ƒç´ ï¼ˆslice å¯¹è±¡ä¸­çš„å…ƒç´ æ˜¯å¯å¯»å€çš„ï¼Œsliceçš„åº•å±‚æ˜¯æ•°ç»„ï¼‰ï¼›<br>å¸¸é‡ï¼›<br>åŒ…çº§åˆ«çš„å‡½æ•°ç­‰ã€‚<br>ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå®šä¹‰ç±»å‹ Tï¼Œå¹¶ä¸ºç±»å‹ *T å£°æ˜ä¸€ä¸ªæ–¹æ³• hello()ï¼Œå˜é‡ t1 å¯ä»¥è°ƒç”¨è¯¥æ–¹æ³•ï¼Œä½†æ˜¯å¸¸é‡ t2 è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ã€‚</p><pre><code class="go">type T stringfunc (t *T) hello() {    fmt.Println("hello")}func main() {    var t1 T = "ABC"    t1.hello() // hello    const t2 T = "ABC"    t2.hello() // error: cannot call pointer method on t}</code></pre><h1 id="ä¸‰ã€Go-è¯­è¨€ç¬”è¯•é¢è¯•é¢˜-å¹¶å‘ç¼–ç¨‹"><a href="#ä¸‰ã€Go-è¯­è¨€ç¬”è¯•é¢è¯•é¢˜-å¹¶å‘ç¼–ç¨‹" class="headerlink" title="ä¸‰ã€Go è¯­è¨€ç¬”è¯•é¢è¯•é¢˜(å¹¶å‘ç¼–ç¨‹)"></a>ä¸‰ã€Go è¯­è¨€ç¬”è¯•é¢è¯•é¢˜(å¹¶å‘ç¼–ç¨‹)</h1><h2 id="1-æ— ç¼“å†²çš„-channel-å’Œ-æœ‰ç¼“å†²çš„-channel-çš„åŒºåˆ«ï¼Ÿ"><a href="#1-æ— ç¼“å†²çš„-channel-å’Œ-æœ‰ç¼“å†²çš„-channel-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="1. æ— ç¼“å†²çš„ channel å’Œ æœ‰ç¼“å†²çš„ channel çš„åŒºåˆ«ï¼Ÿ"></a>1. æ— ç¼“å†²çš„ channel å’Œ æœ‰ç¼“å†²çš„ channel çš„åŒºåˆ«ï¼Ÿ</h2><p>ç­”æ¡ˆ<br>å¯¹äºæ— ç¼“å†²çš„ channelï¼Œå‘é€æ–¹å°†é˜»å¡è¯¥ä¿¡é“ï¼Œç›´åˆ°æ¥æ”¶æ–¹ä»è¯¥ä¿¡é“æ¥æ”¶åˆ°æ•°æ®ä¸ºæ­¢ï¼Œè€Œæ¥æ”¶æ–¹ä¹Ÿå°†é˜»å¡è¯¥ä¿¡é“ï¼Œç›´åˆ°å‘é€æ–¹å°†æ•°æ®å‘é€åˆ°è¯¥ä¿¡é“ä¸­ä¸ºæ­¢ã€‚<br>å¯¹äºæœ‰ç¼“å­˜çš„ channelï¼Œå‘é€æ–¹åœ¨æ²¡æœ‰ç©ºæ’æ§½ï¼ˆç¼“å†²åŒºä½¿ç”¨å®Œï¼‰çš„æƒ…å†µä¸‹é˜»å¡ï¼Œè€Œæ¥æ”¶æ–¹åœ¨ä¿¡é“ä¸ºç©ºçš„æƒ…å†µä¸‹é˜»å¡ã€‚<br>ä¾‹å¦‚:</p><pre><code class="go">func main() {    st := time.Now()    ch := make(chan bool)    go func ()  {        time.Sleep(time.Second * 2)        &lt;-ch    }()    ch &lt;- true  // æ— ç¼“å†²ï¼Œå‘é€æ–¹é˜»å¡ç›´åˆ°æ¥æ”¶æ–¹æ¥æ”¶åˆ°æ•°æ®ã€‚    fmt.Printf("cost %.1f s\n", time.Now().Sub(st).Seconds())    time.Sleep(time.Second * 5)}</code></pre><pre><code class="go">func main() {    st := time.Now()    ch := make(chan bool, 2)    go func ()  {        time.Sleep(time.Second * 2)        &lt;-ch    }()    ch &lt;- true    ch &lt;- true // ç¼“å†²åŒºä¸º 2ï¼Œå‘é€æ–¹ä¸é˜»å¡ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œ    fmt.Printf("cost %.1f s\n", time.Now().Sub(st).Seconds()) // cost 0.0 s    ch &lt;- true // ç¼“å†²åŒºä½¿ç”¨å®Œï¼Œå‘é€æ–¹é˜»å¡ï¼Œ2s åæ¥æ”¶æ–¹æ¥æ”¶åˆ°æ•°æ®ï¼Œé‡Šæ”¾ä¸€ä¸ªæ’æ§½ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œ    fmt.Printf("cost %.1f s\n", time.Now().Sub(st).Seconds()) // cost 2.0 s    time.Sleep(time.Second * 5)}</code></pre><h2 id="2-ä»€ä¹ˆæ˜¯åç¨‹æ³„éœ²-Goroutine-Leak-ï¼Ÿ"><a href="#2-ä»€ä¹ˆæ˜¯åç¨‹æ³„éœ²-Goroutine-Leak-ï¼Ÿ" class="headerlink" title="2. ä»€ä¹ˆæ˜¯åç¨‹æ³„éœ²(Goroutine Leak)ï¼Ÿ"></a>2. ä»€ä¹ˆæ˜¯åç¨‹æ³„éœ²(Goroutine Leak)ï¼Ÿ</h2><p>ç­”æ¡ˆ<br>åç¨‹æ³„éœ²æ˜¯æŒ‡åç¨‹åˆ›å»ºåï¼Œé•¿æ—¶é—´å¾—ä¸åˆ°é‡Šæ”¾ï¼Œå¹¶ä¸”è¿˜åœ¨ä¸æ–­åœ°åˆ›å»ºæ–°çš„åç¨‹ï¼Œæœ€ç»ˆå¯¼è‡´å†…å­˜è€—å°½ï¼Œç¨‹åºå´©æºƒã€‚å¸¸è§çš„å¯¼è‡´åç¨‹æ³„éœ²çš„åœºæ™¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š<br>ç¼ºå°‘æ¥æ”¶å™¨ï¼Œå¯¼è‡´å‘é€é˜»å¡<br>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡ queryï¼Œåˆ™å¯åŠ¨1000ä¸ªåç¨‹å‘ä¿¡é“ ch å‘é€æ•°å­— 0ï¼Œä½†åªæ¥æ”¶äº†ä¸€æ¬¡ï¼Œå¯¼è‡´ 999 ä¸ªåç¨‹è¢«é˜»å¡ï¼Œä¸èƒ½é€€å‡ºã€‚</p><pre><code class="go">func query() int {    ch := make(chan int)    for i := 0; i &lt; 1000; i++ {        go func() { ch &lt;- 0 }()    }    return &lt;-ch}func main() {    for i := 0; i &lt; 4; i++ {        query()        fmt.Printf("goroutines: %d\n", runtime.NumGoroutine())    }}// goroutines: 1001// goroutines: 2000// goroutines: 2999// goroutines: 3998</code></pre><p>ç¼ºå°‘å‘é€å™¨ï¼Œå¯¼è‡´æ¥æ”¶é˜»å¡<br>é‚£åŒæ ·çš„ï¼Œå¦‚æœå¯åŠ¨ 1000 ä¸ªåç¨‹æ¥æ”¶ä¿¡é“çš„ä¿¡æ¯ï¼Œä½†ä¿¡é“å¹¶ä¸ä¼šå‘é€é‚£ä¹ˆå¤šæ¬¡çš„ä¿¡æ¯ï¼Œä¹Ÿä¼šå¯¼è‡´æ¥æ”¶åç¨‹è¢«é˜»å¡ï¼Œä¸èƒ½é€€å‡ºã€‚<br>æ­»é”(dead lock)<br>ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„åç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆé˜»å¡ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¹Ÿä¼šå¯¼è‡´åç¨‹è¢«é˜»å¡ï¼Œä¸èƒ½é€€å‡ºã€‚<br>æ— é™å¾ªç¯(infinite loops)<br>è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸ºäº†é¿å…ç½‘ç»œç­‰é—®é¢˜ï¼Œé‡‡ç”¨äº†æ— é™é‡è¯•çš„æ–¹å¼ï¼Œå‘é€ HTTP è¯·æ±‚ï¼Œç›´åˆ°è·å–åˆ°æ•°æ®ã€‚é‚£å¦‚æœ HTTP æœåŠ¡å®•æœºï¼Œæ°¸è¿œä¸å¯è¾¾ï¼Œå¯¼è‡´åç¨‹ä¸èƒ½é€€å‡ºï¼Œå‘ç”Ÿæ³„æ¼ã€‚</p><pre><code class="go">func request(url string, wg *sync.WaitGroup) {    i := 0    for {        if _, err := http.Get(url); err == nil {            // write to db            break        }        i++        if i &gt;= 3 {            break        }        time.Sleep(time.Second)    }    wg.Done()}func main() {    var wg sync.WaitGroup    for i := 0; i &lt; 1000; i++ {        wg.Add(1)        go request(fmt.Sprintf("https://127.0.0.1:8080/%d", i), &amp;wg)    }    wg.Wait()}</code></pre><h2 id="3-Go-å¯ä»¥é™åˆ¶è¿è¡Œæ—¶æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„æ•°é‡å—ï¼Ÿ"><a href="#3-Go-å¯ä»¥é™åˆ¶è¿è¡Œæ—¶æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„æ•°é‡å—ï¼Ÿ" class="headerlink" title="3. Go å¯ä»¥é™åˆ¶è¿è¡Œæ—¶æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„æ•°é‡å—ï¼Ÿ"></a>3. Go å¯ä»¥é™åˆ¶è¿è¡Œæ—¶æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„æ•°é‡å—ï¼Ÿ</h2><p>ç­”æ¡ˆ<br>The GOMAXPROCS variable limits the number of operating system threads that can execute user-level Go code simultaneously. There is no limit to the number of threads that can be blocked in system calls on behalf of Go code; those do not count against the GOMAXPROCS limit.<br>å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡ GOMAXPROCS æˆ– runtime.GOMAXPROCS(num int) è®¾ç½®ï¼Œä¾‹å¦‚ï¼š</p><pre><code class="go">runtime.GOMAXPROCS(1) // é™åˆ¶åŒæ—¶æ‰§è¡ŒGoä»£ç çš„æ“ä½œç³»ç»Ÿçº¿ç¨‹æ•°ä¸º 1</code></pre><p>ä»å®˜æ–¹æ–‡æ¡£çš„è§£é‡Šå¯ä»¥çœ‹åˆ°ï¼ŒGOMAXPROCS é™åˆ¶çš„æ˜¯åŒæ—¶æ‰§è¡Œç”¨æˆ·æ€ Go ä»£ç çš„æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„æ•°é‡ï¼Œä½†æ˜¯å¯¹äºè¢«ç³»ç»Ÿè°ƒç”¨é˜»å¡çš„çº¿ç¨‹æ•°é‡æ˜¯æ²¡æœ‰é™åˆ¶çš„ã€‚GOMAXPROCS çš„é»˜è®¤å€¼ç­‰äº CPU çš„é€»è¾‘æ ¸æ•°ï¼ŒåŒä¸€æ—¶é—´ï¼Œä¸€ä¸ªæ ¸åªèƒ½ç»‘å®šä¸€ä¸ªçº¿ç¨‹ï¼Œç„¶åè¿è¡Œè¢«è°ƒåº¦çš„åç¨‹ã€‚å› æ­¤å¯¹äº CPU å¯†é›†å‹çš„ä»»åŠ¡ï¼Œè‹¥è¯¥å€¼è¿‡å¤§ï¼Œä¾‹å¦‚è®¾ç½®ä¸º CPU é€»è¾‘æ ¸æ•°çš„ 2 å€ï¼Œä¼šå¢åŠ çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œé™ä½æ€§èƒ½ã€‚å¯¹äº I/O å¯†é›†å‹åº”ç”¨ï¼Œé€‚å½“åœ°è°ƒå¤§è¯¥å€¼ï¼Œå¯ä»¥æé«˜ I/O ååç‡ã€‚</p><h1 id="ä¸‰ã€Go-è¯­è¨€ç¬”è¯•é¢è¯•é¢˜-ä»£ç è¾“å‡º"><a href="#ä¸‰ã€Go-è¯­è¨€ç¬”è¯•é¢è¯•é¢˜-ä»£ç è¾“å‡º" class="headerlink" title="ä¸‰ã€Go è¯­è¨€ç¬”è¯•é¢è¯•é¢˜(ä»£ç è¾“å‡º)"></a>ä¸‰ã€Go è¯­è¨€ç¬”è¯•é¢è¯•é¢˜(ä»£ç è¾“å‡º)</h1><h2 id="1-å¸¸é‡ä¸å˜é‡"><a href="#1-å¸¸é‡ä¸å˜é‡" class="headerlink" title="1. å¸¸é‡ä¸å˜é‡"></a>1. å¸¸é‡ä¸å˜é‡</h2><h3 id="1-1-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"><a href="#1-1-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š" class="headerlink" title="1.1 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"></a>1.1 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š</h3><pre><code class="go">func main() {    const (        a, b = "golang", 100        d, e        f bool = true        g    )    fmt.Println(d, e, g)}</code></pre><p>ç­”æ¡ˆ<br>golang 100 true<br>åœ¨åŒä¸€ä¸ª const group ä¸­ï¼Œå¦‚æœå¸¸é‡å®šä¹‰ä¸å‰ä¸€è¡Œçš„å®šä¹‰ä¸€è‡´ï¼Œåˆ™å¯ä»¥çœç•¥ç±»å‹å’Œå€¼ã€‚ç¼–è¯‘æ—¶ï¼Œä¼šæŒ‰ç…§å‰ä¸€è¡Œçš„å®šä¹‰è‡ªåŠ¨è¡¥å…¨ã€‚å³ç­‰ä»·äº</p><pre><code class="go">func main() {    const (        a, b = "golang", 100        d, e = "golang", 100        f bool = true        g bool = true    )    fmt.Println(d, e, g)}</code></pre><h3 id="1-2-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"><a href="#1-2-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š" class="headerlink" title="1.2 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"></a>1.2 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š</h3><pre><code class="go">func main() {    const N = 100    var x int = N    const M int32 = 100    var y int = M    fmt.Println(x, y)}</code></pre><p>ç­”æ¡ˆ<br>ç¼–è¯‘å¤±è´¥ï¼šcannot use M (type int32) as type int in assignment<br>Go è¯­è¨€ä¸­ï¼Œå¸¸é‡åˆ†ä¸ºæ— ç±»å‹å¸¸é‡å’Œæœ‰ç±»å‹å¸¸é‡ä¸¤ç§ï¼Œconst N = 100ï¼Œå±äºæ— ç±»å‹å¸¸é‡ï¼Œèµ‹å€¼ç»™å…¶ä»–å˜é‡æ—¶ï¼Œå¦‚æœå­—é¢é‡èƒ½å¤Ÿè½¬æ¢ä¸ºå¯¹åº”ç±»å‹çš„å˜é‡ï¼Œåˆ™èµ‹å€¼æˆåŠŸï¼Œä¾‹å¦‚ï¼Œvar x int = Nã€‚ä½†æ˜¯å¯¹äºæœ‰ç±»å‹çš„å¸¸é‡ const M int32 = 100ï¼Œèµ‹å€¼ç»™å…¶ä»–å˜é‡æ—¶ï¼Œéœ€è¦ç±»å‹åŒ¹é…æ‰èƒ½æˆåŠŸï¼Œæ‰€ä»¥æ˜¾ç¤ºåœ°ç±»å‹è½¬æ¢ï¼š</p><pre><code class="go">var y int = int(M)</code></pre><h3 id="1-3-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"><a href="#1-3-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š" class="headerlink" title="1.3 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"></a>1.3 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š</h3><pre><code class="go">func main() {    var a int8 = -1    var b int8 = -128 / a    fmt.Println(b)}</code></pre><p>ç­”æ¡ˆ<br>-128<br>int8 èƒ½è¡¨ç¤ºçš„æ•°å­—çš„èŒƒå›´æ˜¯ [-2^7, 2^7-1]ï¼Œå³ [-128, 127]ã€‚-128 æ˜¯æ— ç±»å‹å¸¸é‡ï¼Œè½¬æ¢ä¸º int8ï¼Œå†é™¤ä»¥å˜é‡ -1ï¼Œç»“æœä¸º 128ï¼Œå¸¸é‡é™¤ä»¥å˜é‡ï¼Œç»“æœæ˜¯ä¸€ä¸ªå˜é‡ã€‚å˜é‡è½¬æ¢æ—¶å…è®¸æº¢å‡ºï¼Œç¬¦å·ä½å˜ä¸º1ï¼Œè½¬ä¸ºè¡¥ç åæ°å¥½ç­‰äº -128ã€‚<br>å¯¹äºæœ‰ç¬¦å·æ•´å‹ï¼Œæœ€é«˜ä½æ˜¯æ˜¯ç¬¦å·ä½ï¼Œè®¡ç®—æœºç”¨è¡¥ç è¡¨ç¤ºè´Ÿæ•°ã€‚è¡¥ç  = åŸç å–ååŠ ä¸€ã€‚<br>ä¾‹å¦‚ï¼š</p><pre><code>-1 :  1111111100000001(åŸç )    11111110(å–å)    11111111(åŠ ä¸€)-128ï¼š    10000000(åŸç )    01111111(å–å)    10000000(åŠ ä¸€)-1 + 1 = 011111111 + 00000001 = 00000000(æœ€é«˜ä½æº¢å‡ºçœç•¥)-128 + 127 = -110000000 + 01111111 = 11111111</code></pre><h3 id="1-4-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"><a href="#1-4-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š" class="headerlink" title="1.4 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"></a>1.4 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š</h3><pre><code class="go">func main() {    const a int8 = -1    var b int8 = -128 / a    fmt.Println(b)}</code></pre><p>ç­”æ¡ˆ<br>ç¼–è¯‘å¤±è´¥ï¼šconstant 128 overflows int8<br>-128 å’Œ a éƒ½æ˜¯å¸¸é‡ï¼Œåœ¨ç¼–è¯‘æ—¶æ±‚å€¼ï¼Œ-128 / a = 128ï¼Œä¸¤ä¸ªå¸¸é‡ç›¸é™¤ï¼Œç»“æœä¹Ÿæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå¸¸é‡ç±»å‹è½¬æ¢æ—¶ä¸å…è®¸æº¢å‡ºï¼Œå› è€Œç¼–è¯‘å¤±è´¥ã€‚</p><h2 id="2-ä½œç”¨åŸŸ"><a href="#2-ä½œç”¨åŸŸ" class="headerlink" title="2. ä½œç”¨åŸŸ"></a>2. ä½œç”¨åŸŸ</h2><h3 id="2-1-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"><a href="#2-1-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š" class="headerlink" title="2.1 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"></a>2.1 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š</h3><pre><code class="go">func main() {    var err error    if err == nil {        err := fmt.Errorf("err")        fmt.Println(1, err)    }    if err != nil {        fmt.Println(2, err)    }}</code></pre><p>ç­”æ¡ˆ<br>1 err<br>:= è¡¨ç¤ºå£°æ˜å¹¶èµ‹å€¼ï¼Œ= è¡¨ç¤ºä»…èµ‹å€¼ã€‚<br>å˜é‡çš„ä½œç”¨åŸŸæ˜¯å¤§æ‹¬å·ï¼Œå› æ­¤åœ¨ç¬¬ä¸€ä¸ª if è¯­å¥ if err == nil å†…éƒ¨é‡æ–°å£°æ˜ä¸”èµ‹å€¼äº†ä¸å¤–éƒ¨å˜é‡åŒåçš„å±€éƒ¨å˜é‡ errã€‚å¯¹è¯¥å±€éƒ¨å˜é‡çš„èµ‹å€¼ä¸ä¼šå½±å“åˆ°å¤–éƒ¨çš„ errã€‚å› æ­¤ç¬¬äºŒä¸ª if è¯­å¥ if err != nil ä¸æˆç«‹ã€‚æ‰€ä»¥åªæ‰“å°äº† 1 errã€‚</p><h2 id="3-defer-å»¶è¿Ÿè°ƒç”¨"><a href="#3-defer-å»¶è¿Ÿè°ƒç”¨" class="headerlink" title="3. defer å»¶è¿Ÿè°ƒç”¨"></a>3. defer å»¶è¿Ÿè°ƒç”¨</h2><h3 id="3-1-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"><a href="#3-1-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š" class="headerlink" title="3.1 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"></a>3.1 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š</h3><pre><code class="go">type T struct{}func (t T) f(n int) T {    fmt.Print(n)    return t}func main() {    var t T    defer t.f(1).f(2)    fmt.Print(3)}</code></pre><p>ç­”æ¡ˆ<br>132<br>defer å»¶è¿Ÿè°ƒç”¨æ—¶ï¼Œéœ€è¦ä¿å­˜å‡½æ•°æŒ‡é’ˆå’Œå‚æ•°ï¼Œå› æ­¤é“¾å¼è°ƒç”¨çš„æƒ…å†µä¸‹ï¼Œé™¤äº†æœ€åä¸€ä¸ªå‡½æ•°/æ–¹æ³•å¤–çš„å‡½æ•°/æ–¹æ³•éƒ½ä¼šåœ¨è°ƒç”¨æ—¶ç›´æ¥æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ t.f(1) ç›´æ¥æ‰§è¡Œï¼Œç„¶åæ‰§è¡Œ fmt.Print(3)ï¼Œæœ€åå‡½æ•°è¿”å›æ—¶å†æ‰§è¡Œ .f(2)ï¼Œå› æ­¤è¾“å‡ºæ˜¯ 132ã€‚</p><h3 id="3-2-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"><a href="#3-2-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š" class="headerlink" title="3.2 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"></a>3.2 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š</h3><pre><code class="go">func f(n int) {    defer fmt.Println(n)    n += 100}func main() {    f(1)}</code></pre><p>ç­”æ¡ˆ<br>1<br>æ‰“å° 1 è€Œä¸æ˜¯ 101ã€‚defer è¯­å¥æ‰§è¡Œæ—¶ï¼Œä¼šå°†éœ€è¦å»¶è¿Ÿè°ƒç”¨çš„å‡½æ•°å’Œå‚æ•°ä¿å­˜èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰§è¡Œåˆ° defer æ—¶ï¼Œå‚æ•° n(æ­¤æ—¶ç­‰äº1) å·²ç»è¢«ä¿å­˜äº†ã€‚å› æ­¤åé¢å¯¹ n çš„æ”¹åŠ¨å¹¶ä¸ä¼šå½±å“å»¶è¿Ÿå‡½æ•°è°ƒç”¨çš„ç»“æœã€‚</p><h3 id="3-3-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"><a href="#3-3-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š" class="headerlink" title="3.3 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"></a>3.3 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š</h3><pre><code class="go">func main() {    n := 1    defer func() {        fmt.Println(n)    }()    n += 100}</code></pre><p>ç­”æ¡ˆ<br>101<br>åŒ¿åå‡½æ•°æ²¡æœ‰é€šè¿‡ä¼ å‚çš„æ–¹å¼å°† n ä¼ å…¥ï¼Œå› æ­¤åŒ¿åå‡½æ•°å†…çš„ n å’Œå‡½æ•°å¤–éƒ¨çš„ n æ˜¯åŒä¸€ä¸ªï¼Œå»¶è¿Ÿæ‰§è¡Œæ—¶ï¼Œå·²ç»è¢«æ”¹å˜ä¸º 101ã€‚</p><h3 id="3-4-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"><a href="#3-4-ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š" class="headerlink" title="3.4 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š"></a>3.4 ä¸‹åˆ—ä»£ç çš„è¾“å‡ºæ˜¯ï¼š</h3><pre><code class="go">func main() {    n := 1    if n == 1 {        defer fmt.Println(n)        n += 100    }    fmt.Println(n)}</code></pre><p>ç­”æ¡ˆ<br>1<br>2<br>101<br>1<br>å…ˆæ‰“å° 101ï¼Œå†æ‰“å° 1ã€‚defer çš„ä½œç”¨åŸŸæ˜¯å‡½æ•°ï¼Œè€Œä¸æ˜¯ä»£ç å—ï¼Œå› æ­¤ if è¯­å¥é€€å‡ºæ—¶ï¼Œdefer ä¸ä¼šæ‰§è¡Œï¼Œè€Œæ˜¯ç­‰ 101 æ‰“å°åï¼Œæ•´ä¸ªå‡½æ•°è¿”å›æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://geektutu.com/post/qa-golang.html&quot;&gt;å‚è€ƒé“¾æ¥&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;ä¸€ã€Go-è¯­è¨€ç¬”è¯•é¢è¯•é¢˜-åŸºç¡€è¯­æ³•&quot;&gt;&lt;a href=&quot;#ä¸€ã€Go-è¯­è¨€ç¬”è¯•é¢è¯•é¢˜-åŸºç¡€è¯­æ³•&quot; class=&quot;headerlink</summary>
      
    
    
    
    
    <category term="Go" scheme="https://zhangzhishun.github.io/tags/Go/"/>
    
    <category term="é¢è¯•é¢˜" scheme="https://zhangzhishun.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>è®ºæ–‡ä¸‹è½½</title>
    <link href="https://zhangzhishun.github.io/2022/01/12/other/%E8%AE%BA%E6%96%87%E4%B8%8B%E8%BD%BD/"/>
    <id>https://zhangzhishun.github.io/2022/01/12/other/%E8%AE%BA%E6%96%87%E4%B8%8B%E8%BD%BD/</id>
    <published>2022-01-12T02:25:11.000Z</published>
    <updated>2022-04-27T02:35:55.484Z</updated>
    
    <content type="html"><![CDATA[<ol><li><a href="https://www.scidown.cn/">scidown</a></li><li><a href="https://doi.qqsci.com/">ä¼é¹…è®ºæ–‡</a></li><li><a href="https://tool.yovisun.com/scihub/">sci-hub</a></li><li><a href="http://www.5638.org/">ç§‘ç ”å®åº“</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://www.scidown.cn/&quot;&gt;scidown&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://doi.qqsci.com/&quot;&gt;ä¼é¹…è®ºæ–‡&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://tool.yov</summary>
      
    
    
    
    
    <category term="Other" scheme="https://zhangzhishun.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>è®ºæ–‡ç¿»è¯‘</title>
    <link href="https://zhangzhishun.github.io/2022/01/12/other/%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/"/>
    <id>https://zhangzhishun.github.io/2022/01/12/other/%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/</id>
    <published>2022-01-12T02:25:11.000Z</published>
    <updated>2022-04-27T02:35:55.484Z</updated>
    
    <content type="html"><![CDATA[<ol><li><a href="https://www.onlinedoctranslator.com/">DocTranslator</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://www.onlinedoctranslator.com/&quot;&gt;DocTranslator&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</summary>
      
    
    
    
    
    <category term="Other" scheme="https://zhangzhishun.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>å…±è¯†ç®—æ³•</title>
    <link href="https://zhangzhishun.github.io/2022/01/08/blockchain/consensus/%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95/"/>
    <id>https://zhangzhishun.github.io/2022/01/08/blockchain/consensus/%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95/</id>
    <published>2022-01-08T06:25:01.000Z</published>
    <updated>2022-04-28T06:15:52.576Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸»è¦å†…å®¹"><a href="#ä¸»è¦å†…å®¹" class="headerlink" title="ä¸»è¦å†…å®¹"></a>ä¸»è¦å†…å®¹</h1><ol><li>æ‹œå åº­å°†å†›é—®é¢˜æ¦‚è¿°</li><li>å…±è¯†ç®—æ³•å®šä¹‰(ä½œç”¨)</li><li>å…±è¯†ç®—æ³•ç§ç±»</li><li>å…±è¯†ç®—æ³•ä¼˜ç¼ºç‚¹å¯¹æ¯”ä»¥åŠåº”ç”¨</li></ol><h1 id="æ‹œå åº­å°†å†›é—®é¢˜"><a href="#æ‹œå åº­å°†å†›é—®é¢˜" class="headerlink" title="æ‹œå åº­å°†å†›é—®é¢˜"></a>æ‹œå åº­å°†å†›é—®é¢˜</h1><p>è±æ–¯åˆ©Â·å…°æ³¢ç‰¹åœ¨å…¶è®ºæ–‡ä¸­æè¿°äº†å¦‚ä¸‹é—®é¢˜ï¼š</p><blockquote><p>ä¸€ç»„æ‹œå åº­å°†å†›åˆ†åˆ«å„ç‡é¢†ä¸€æ”¯å†›é˜Ÿå…±åŒå›´å›°ä¸€åº§åŸå¸‚ã€‚ä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œå°†å„æ”¯å†›é˜Ÿçš„è¡ŒåŠ¨ç­–ç•¥é™å®šä¸ºè¿›æ”»æˆ–æ’¤ç¦»ä¸¤ç§ã€‚å› ä¸ºéƒ¨åˆ†å†›é˜Ÿè¿›æ”»éƒ¨åˆ†å†›é˜Ÿæ’¤ç¦»å¯èƒ½ä¼šé€ æˆç¾éš¾æ€§åæœï¼Œå› æ­¤å„ä½å°†å†›å¿…é¡»é€šè¿‡æŠ•ç¥¨æ¥è¾¾æˆä¸€è‡´ç­–ç•¥ï¼Œå³æ‰€æœ‰å†›é˜Ÿä¸€èµ·è¿›æ”»æˆ–æ‰€æœ‰å†›é˜Ÿä¸€èµ·æ’¤ç¦»ã€‚å› ä¸ºå„ä½å°†å†›åˆ†å¤„åŸå¸‚ä¸åŒæ–¹å‘ï¼Œä»–ä»¬åªèƒ½é€šè¿‡ä¿¡ä½¿äº’ç›¸è”ç³»ã€‚åœ¨æŠ•ç¥¨è¿‡ç¨‹ä¸­æ¯ä½å°†å†›éƒ½å°†è‡ªå·±æŠ•ç¥¨ç»™è¿›æ”»è¿˜æ˜¯æ’¤é€€çš„ä¿¡æ¯é€šè¿‡ä¿¡ä½¿åˆ†åˆ«é€šçŸ¥å…¶ä»–æ‰€æœ‰å°†å†›ï¼Œè¿™æ ·ä¸€æ¥æ¯ä½å°†å†›æ ¹æ®è‡ªå·±çš„æŠ•ç¥¨å’Œå…¶ä»–æ‰€æœ‰å°†å†›é€æ¥çš„ä¿¡æ¯å°±å¯ä»¥çŸ¥é“å…±åŒçš„æŠ•ç¥¨ç»“æœè€Œå†³å®šè¡ŒåŠ¨ç­–ç•¥ã€‚</p></blockquote><p>ç³»ç»Ÿçš„é—®é¢˜åœ¨äºï¼Œå¯èƒ½å°†å†›ä¸­å‡ºç°å›å¾’ï¼Œä»–ä»¬ä¸ä»…å¯èƒ½å‘è¾ƒä¸ºç³Ÿç³•çš„ç­–ç•¥æŠ•ç¥¨ï¼Œè¿˜å¯èƒ½é€‰æ‹©æ€§åœ°å‘é€æŠ•ç¥¨ä¿¡æ¯ã€‚</p><p>ä¸Šè¿°çš„æ•…äº‹æ˜ å°„åˆ°è®¡ç®—æœºç³»ç»Ÿé‡Œä¾¿æ˜¯ï¼š</p><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å­˜åœ¨æ¶æ„çš„è®¡ç®—æœºèŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹ä¼šé€‰æ‹©æ€§å“åº”æŸäº›è¯·æ±‚æˆ–ç¯¡æ”¹ç³»ç»Ÿä¸­çš„æ•°æ®ã€‚ é‚£ä¹ˆ<font color="red">åœ¨ä¸Šè¿°ä¸å¯é çš„ä¿¡é“ä¸Šï¼Œç³»ç»Ÿä¸­æ‰€æœ‰éæ¶æ„èŠ‚ç‚¹å¦‚ä½•é€šè¿‡æ¶ˆæ¯ä¼ é€’è¾¾æˆå…±è¯†ï¼Ÿ</font></p><h1 id="å…±è¯†ç®—æ³•"><a href="#å…±è¯†ç®—æ³•" class="headerlink" title="å…±è¯†ç®—æ³•"></a>å…±è¯†ç®—æ³•</h1><h2 id="å®šä¹‰-ä½œç”¨"><a href="#å®šä¹‰-ä½œç”¨" class="headerlink" title="å®šä¹‰(ä½œç”¨)"></a>å®šä¹‰(ä½œç”¨)</h2><p>å…±è¯†ç®—æ³•<font color="red">ä½¿é«˜åº¦åˆ†æ•£ä¸”å½¼æ­¤ä¸ä¿¡ä»»çš„ç½‘ç»œç¯å¢ƒä¸­çš„èŠ‚ç‚¹å°±æŸä¸ªäº‹åŠ¡è¾¾æˆä¸€è‡´ä¸”ä¸åˆ†å‰</font></p><p>æŒ‰æ‹œå åº­å®¹é”™æ€§åˆ†ç±»ï¼š</p><ol><li><p>å®¹å¿éæ‹œå åº­é”™è¯¯ï¼ˆCTFï¼‰ï¼šå®¹å¿ç½‘ç»œç¯å¢ƒä¸­å­˜åœ¨æ•…éšœèŠ‚ç‚¹ä½†ä¸å­˜åœ¨æ¶æ„èŠ‚ç‚¹</p></li><li><p>å®¹å¿æ‹œå åº­é”™è¯¯ï¼ˆBFTï¼‰ï¼šå®¹å¿ç½‘ç»œç¯å¢ƒä¸­åŒæ—¶å­˜åœ¨æ•…éšœèŠ‚ç‚¹å’Œæ¶æ„èŠ‚ç‚¹</p></li></ol><h2 id="ç®—æ³•éœ€æ»¡è¶³çš„æ¡ä»¶"><a href="#ç®—æ³•éœ€æ»¡è¶³çš„æ¡ä»¶" class="headerlink" title="ç®—æ³•éœ€æ»¡è¶³çš„æ¡ä»¶"></a>ç®—æ³•éœ€æ»¡è¶³çš„æ¡ä»¶</h2><p>FLPä¸å¯èƒ½é—®é¢˜ï¼šåœ¨å¼‚æ­¥ç½‘ç»œä¸­ï¼Œå“ªæ€•åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹æ•…éšœä¹Ÿä¸å¯èƒ½å­˜åœ¨èƒ½å¤Ÿå®¹å¿èŠ‚ç‚¹æ•…éšœçš„ä¸€è‡´æ€§ç®—æ³•ã€‚</p><p>éœ€æ»¡è¶³çš„çº¦æŸæ¡ä»¶ï¼š</p><ol><li><strong>æ¶ˆæ¯å®‰å…¨</strong>ï¼šèŠ‚ç‚¹ä»¶å¿…é¡»é‡‡ç”¨éå¯¹ç§°åŠ å¯†å¯¹æ¶ˆæ¯è¿›è¡Œç­¾åä¿è¯æ¶ˆæ¯å¯ä¼ é€’ï¼ˆä¸å¯ç”¨å¯¹ç§°åŠ å¯†ï¼Œå› ä¸ºä¿¡é“ä¸å®‰å…¨ï¼‰</li><li><strong>å¤„ç†FLPä¸å¯èƒ½é—®é¢˜</strong>ï¼šè®¾ç½®æ¶ˆæ¯æœ€å¤§æ—¶å»¶</li><li><strong>å…±è¯†ç»“è®ºåˆæ³•</strong>ï¼šç»“è®ºå¿…é¡»æ˜¯ä¸€ä¸ªèŠ‚ç‚¹çš„ææ¡ˆ</li></ol><h2 id="ç®—æ³•è¯¦æƒ…"><a href="#ç®—æ³•è¯¦æƒ…" class="headerlink" title="ç®—æ³•è¯¦æƒ…"></a>ç®—æ³•è¯¦æƒ…</h2><h3 id="Paxosï¼ˆCTFï¼‰"><a href="#Paxosï¼ˆCTFï¼‰" class="headerlink" title="Paxosï¼ˆCTFï¼‰"></a>Paxosï¼ˆCTFï¼‰</h3><ol><li><p>æ¦‚å¿µ</p><p>PaxosåŸç†åŸºäº<font color="red">â€œä¸¤é˜¶æ®µæäº¤â€</font>ç®—æ³•å¹¶è¿›è¡Œæ³›åŒ–å’Œæ‰©å±•ï¼Œé€šè¿‡æ¶ˆæ¯ä¼ é€’æ¥é€æ­¥æ¶ˆé™¤ç³»ç»Ÿä¸­çš„ä¸ç¡®å®šçŠ¶æ€ï¼Œæ˜¯Raftã€ZABè®¾è®¡çš„åŸºç¡€</p><p>Paxosè§’è‰²ï¼š</p><ul><li><strong>ææ¡ˆè€…ï¼ˆProposerï¼‰</strong>ï¼šæå‡ºä¸€ä¸ªææ¡ˆç­‰å¾…å¤§å®¶æ‰¹å‡†ä¸ºç»“æ¡ˆï¼ˆvalueï¼‰</li><li><strong>æ¥å—è€…ï¼ˆAcceptorï¼‰</strong>ï¼šå¯¹ææ¡ˆè¿›è¡ŒæŠ•ç¥¨ï¼Œæ¥å—ææ¡ˆ</li><li><strong>å­¦ä¹ è€…ï¼ˆLearnerï¼‰</strong>ï¼šè·å–æ‰¹å‡†ç»“æœï¼Œä¸å‚ä¸æŠ•ç¥¨</li></ul></li><li><p>å…±è¯†è¿‡ç¨‹</p><p><img src="/images/consensus/paxos_flow_chart.png" alt="img.png"><br>pokï¼šæ”¶åˆ°æè®®è¯·æ±‚ï¼› aokï¼šæ”¶åˆ°æäº¤è¯·æ±‚ï¼›æœ€å¤§ææ¡ˆç¼–å·ï¼šMaxNï¼›AcceptNï¼šæ¥æ”¶åˆ°çš„ææ¡ˆç¼–å·ï¼› AcceptVï¼šæ¥æ”¶åˆ°çš„ææ¡ˆå€¼ï¼›</p></li><li><p>ä¸¾ä¾‹è¯´æ˜ å‡è®¾é›†ç¾¤ä¸­æœ‰2ä¸ªProposerã€3ä¸ªAcceptorã€1ä¸ªLearner</p><ul><li>æœ‰ä¸¤ä¸ªProposerï¼Œä¸¤ä¸ªéƒ½æå‡º prepare requestã€‚æ¥è‡ª Proposer Açš„ request å…ˆäºProposer B çš„ request åˆ°è¾¾ Acceptor Xå’Œ Acceptor Yï¼Œ ä½†æ¥è‡ªProposer Bçš„ request é¦–å…ˆåˆ°è¾¾ Proposer Z.<br><img src="/images/consensus/paxos_prepare1.png" alt="img.png"></li><li>å¦‚æœæ¥æ”¶ï¼ˆacceptï¼‰prepare request çš„ Acceptor ä¹‹å‰æ²¡æœ‰çœ‹åˆ°å…¶ä»–çš„æè®®ï¼Œåˆ™ Acceptor ä»¥ prepare response ä½œå‡ºå“åº”ï¼Œ è¯¥ prepare responseæ‰¿è¯ºæ°¸è¿œä¸æ¥å—å…·æœ‰è¾ƒä½æè®®ç¼–å·çš„å¦ä¸€æè®®ã€‚<br><img src="/images/consensus/paxos_prepare2.png" alt="img.png"></li><li>Acceptor Zæ”¶åˆ°äº† Proposer A çš„ request ï¼ŒAcceptor Xå’Œ Acceptor Yæ”¶åˆ°äº† Proposer Bçš„ request ã€‚ å¦‚æœ Proposer ä¹‹å‰å·²ç»çœ‹åˆ°å…·æœ‰æ›´é«˜æè®®å·çš„request ï¼Œåˆ™å¿½ç•¥æ™šåˆ°çš„ requestï¼Œå¦‚Acceptor Zå°†å¿½ç•¥ Proposer Açš„ requestï¼ˆå› ä¸º2&lt;4ï¼‰ã€‚ å¦‚æœ Proposer ä¹‹å‰æ²¡æœ‰çœ‹åˆ°æ›´é«˜ç¼–å·çš„ requestï¼Œå®ƒå†æ¬¡æ‰¿è¯ºå¿½ç•¥å…·æœ‰è¾ƒä½æè®®ç¼–å·çš„ä»»ä½•è¯·æ±‚ï¼Œå¹¶å‘å›å…¶å·²æ¥å—çš„ç¼–å·æœ€é«˜çš„æè®®ä»¥åŠè¯¥æè®®çš„å€¼ã€‚ å¦‚ Acceptor Xå’ŒY å¯¹Proposer Bçš„ request çš„åšæ³•ã€‚<br><img src="/images/consensus/paxos_prepare3.png" alt="img.png"></li><li>ä¸€æ—¦ Proposer æ”¶åˆ°å¤§å¤šæ•° Acceptor çš„å‡†å¤‡å“åº”ï¼Œå®ƒå°±å¯ä»¥å‘å‡ºæ¥å—è¯·æ±‚<ul><li>å¯¹äºProposer Aï¼šç”±äº Proposer Aä»…æ”¶åˆ°è¡¨æ˜æ²¡æœ‰å…ˆå‰ææ¡ˆçš„ç­”å¤ï¼Œ å› æ­¤å®ƒå‘æ¯ä¸ªå…·æœ‰ä¸å…¶åˆå§‹ææ¡ˆç›¸åŒçš„æè®®ç¼–å·å’Œå€¼çš„ Acceptor å‘é€ accept requestï¼ˆn = 2ï¼Œv = 8ï¼‰ã€‚ç„¶è€Œï¼Œè¿™äº› request éƒ½å°†è¢«å¿½ç•¥ï¼Œå› ä¸ºç›®æ ‡ Acceptor éƒ½æ‰¿è¯ºä¸æ¥å—çš„æè®®ç¼–å·ä½äº4 çš„ requestï¼ˆè¿™æ˜¯å¯¹ Proposer B çš„æ‰¿è¯ºï¼‰</li><li>å¯¹äºProposer Bï¼šProposer B å‘æ¯ä¸ª Acceptor å‘é€ accept request ï¼Œ è¯¥ request åŒ…å«å…ˆå‰ä½¿ç”¨çš„æè®®å·ï¼ˆn = 4ï¼‰ä»¥åŠä¸å…¶æ¥æ”¶çš„å‡†å¤‡å“åº”æ¶ˆæ¯ä¸­çš„æœ€é«˜æè®®å·ç›¸å…³è”çš„å€¼ï¼ˆv = 8ï¼‰ã€‚ è¯·æ³¨æ„ï¼Œè¿™ä¸æ˜¯ Proposer B æœ€åˆæå‡ºçš„å€¼ï¼Œè€Œæ˜¯å®ƒçœ‹åˆ°çš„ prepare response æ¶ˆæ¯ä¸­çš„æœ€é«˜å€¼ã€‚<br><img src="/images/consensus/paxos_accept1.png" alt="img.png"></li></ul></li><li>å¦‚æœ Acceptor accept çš„ accept request çš„ ç¼–å· æ¯”å…¶å·²ç»çœ‹åˆ°çš„æ›´é«˜æˆ–ç›¸ç­‰ï¼Œåˆ™å®ƒä¼š accept å¹¶å‘æ¯ä¸ª Learner èŠ‚ç‚¹å‘é€é€šçŸ¥ã€‚ å½“ Learner å‘ç°å¤§å¤šæ•° Acceptorå·²æ¥å—æŸä¸ªå€¼æ—¶ï¼ŒPaxosç®—æ³•ä¼šé€‰æ‹©è¯¥å€¼<br><img src="/images/consensus/paxos_sync1.png" alt="img.png"></li><li>ä¸€æ—¦Paxosé€‰æ‹©äº†ä¸€ä¸ªå€¼ï¼Œä¸å…¶ä»– Proposer çš„è¿›ä¸€æ­¥æ²Ÿé€šå°±æ— æ³•æ”¹å˜è¿™ä¸ªå€¼ã€‚ å¦‚æœå¦ä¸€ä¸ª Proposerï¼ˆå¦‚ Proposer Cï¼‰å‘é€çš„ request çš„ ææ¡ˆå·æ¯”ä¹‹å‰çœ‹åˆ°çš„ææ¡ˆå·æ›´é«˜ï¼Œå¹¶ä¸”å…·æœ‰ä¸åŒçš„å€¼ï¼ˆä¾‹å¦‚ï¼Œn= 6ï¼Œv = 7ï¼‰ï¼Œ åˆ™æ¯ä¸ªæ¥å—è€…éƒ½ä¼šä½¿ç”¨ä¹‹å‰çš„æœ€é«˜ææ¡ˆè¿›è¡Œå“åº”ï¼ˆn = 4ï¼Œv = 8ï¼‰ã€‚è¿™è¦æ±‚æè®®è€…Cå‘é€åŒ…å«[n = 6ï¼Œv = 8] çš„æ¥å—è¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä»…ç¡®è®¤å·²ç»é€‰æ‹©çš„å€¼ã€‚æ­¤å¤–ï¼Œå¦‚æœä¸€äº›å°‘æ•°æ¥å—è€…è¿˜æ²¡æœ‰é€‰æ‹©ä¸€ä¸ªä»·å€¼ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç¡®ä¿ä»–ä»¬æœ€ç»ˆå°±åŒä¸€ä»·å€¼è¾¾æˆå…±è¯†ã€‚ ï¼ˆæ‰¹æ³¨ï¼Œè¿™ä¸ªè¿‡ç¨‹æ€»æ˜¯æˆç«‹çš„ï¼Œå…·ä½“è®ºè¯è¿‡ç¨‹è§ä¸Šï¼‰</li></ul></li></ol><h3 id="Raftï¼ˆCTFï¼‰"><a href="#Raftï¼ˆCTFï¼‰" class="headerlink" title="Raftï¼ˆCTFï¼‰"></a>Raftï¼ˆCTFï¼‰</h3><ol><li><p>æ¦‚å¿µ</p><p>Raftç›¸æ¯”Paxosæ˜¯ä¸€ç§æ—¨åœ¨<font color="red">æ˜“äºç†è§£</font>çš„å…±è¯†ç®—æ³•ã€‚</p><p>Raftè§’è‰²ï¼š</p><ul><li><strong>é¢†å¯¼è€…ï¼ˆLeaderï¼‰</strong></li><li><strong>å€™é€‰é¢†å¯¼è€…ï¼ˆCandidateï¼‰</strong></li><li><strong>è·Ÿéšè€…ï¼ˆFollowerï¼‰</strong></li></ul></li><li><p>å…±è¯†è¿‡ç¨‹</p><p><a href="http://www.kailing.pub/raft/index.html">Raftæ¼”ç¤ºåœ°å€</a></p><p>ä¸»è¦é˜¶æ®µï¼š</p><ul><li><strong>Leaderé€‰ä¸¾</strong></li><li><strong>åŒæ­¥æ—¥å¿—</strong></li></ul></li></ol><h3 id="PoWï¼ˆBFTï¼‰"><a href="#PoWï¼ˆBFTï¼‰" class="headerlink" title="PoWï¼ˆBFTï¼‰"></a>PoWï¼ˆBFTï¼‰</h3><ol><li><p>æ¦‚å¿µ</p><p>POW <font color="red">å·¥ä½œé‡è¯æ˜å…±è¯†æœºåˆ¶</font>ï¼Œç³»ç»Ÿé€šè¿‡è®©æ‰€æœ‰èŠ‚ç‚¹å…¬å¹³åœ°å»è®¡ç®—ä¸€ä¸ªéšæœºæ•°ï¼Œæœ€å…ˆå¯»æ‰¾åˆ°éšæœºæ•°çš„èŠ‚ç‚¹å³æ‹¥æœ‰è®°è´¦æƒ</p></li><li><p>æ¯”ç‰¹å¸å…±è¯†è¿‡ç¨‹</p><ul><li>å®¢æˆ·ç«¯å‘èµ·äº¤æ˜“å¹¿æ’­åˆ°ç½‘ç»œä¸­ç­‰å¾…ç¡®è®¤</li><li>ç½‘ç»œä¸­çš„ç”¨æˆ·å°†æ‰€æœ‰ç­‰å¾…ç¡®è®¤çš„äº¤æ˜“æ‰“åŒ…åˆ°ä¸€ä¸ªåŒºå—é“¾ä¸­</li><li><strong>ä¸æ–­ä¿®æ”¹åŒºå—å¤´ä¸­çš„Nonceå€¼ä»¥ä½¿è¯¥åŒºå—å¤´çš„hashå€¼å°äºä¸€ä¸ªç‰¹å®šçš„ç›®æ ‡å€¼</strong></li><li>è®¡ç®—å‡ºNonceåå‘å…¨ç½‘å¹¿æ’­</li><li>ç½‘ç»œä¸­æ”¶åˆ°ææ¡ˆåŒºå—çš„èŠ‚ç‚¹å¯¹Nonceè¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯åˆæ³•äº¤æ˜“è¢«ç¡®è®¤ï¼Œè¯¥å—åŠ å…¥é“¾</li></ul></li></ol><h3 id="PoSï¼ˆBFTï¼‰"><a href="#PoSï¼ˆBFTï¼‰" class="headerlink" title="PoSï¼ˆBFTï¼‰"></a>PoSï¼ˆBFTï¼‰</h3><p>æƒç›Šè¯æ˜æœºåˆ¶ï¼Œæ˜¯ä¸ºè§£å†³PoWç®—æ³•å¤§é‡æµªè´¹èµ„æºé—®é¢˜è€Œæå‡ºçš„ä¸€ç§æ›¿ä»£ç®—æ³•ï¼Œè¯¥ç®—æ³•ä¸­åŒºå—çš„è®°è´¦æƒ<font color="red">ç”±æƒç›Šæœ€é«˜çš„èŠ‚ç‚¹è·å¾—</font></p><h3 id="DPoSï¼ˆBFTï¼‰"><a href="#DPoSï¼ˆBFTï¼‰" class="headerlink" title="DPoSï¼ˆBFTï¼‰"></a>DPoSï¼ˆBFTï¼‰</h3><ol><li><p>æ¦‚å¿µ</p><p>è‚¡ä»½æˆæƒè¯æ˜æœºåˆ¶ï¼Œæ˜¯PoSçš„ä¸€ç§è¡ç”Ÿç®—æ³•ï¼Œç®—æ³•çš„æ€æƒ³æ˜¯<font color="red">ç³»ç»Ÿä¸­æŒæœ‰æƒç›Šçš„èŠ‚ç‚¹æŠ•ç¥¨é€‰ä¸¾å‡ºä¸€éƒ¨åˆ†ä»£è¡¨ï¼Œå†ç”±è¿™äº›ä»£è¡¨è½®æµè·å–åŒºå—é“¾è®°è´¦æƒ</font>ï¼Œç±»ä¼¼äºè‚¡ä»½åˆ¶å…¬å¸çš„â€œè‘£äº‹ä¼šâ€</p></li><li><p>å…±è¯†è¿‡ç¨‹</p><ul><li>æ¯ä¸ªèŠ‚ç‚¹å°†è‡ªå·±æŒæœ‰çš„æƒç›Šè½¬æ¢ä¸ºé€‰ç¥¨æŠ•ç»™è‡ªå·±ä¿¡ä»»çš„èŠ‚ç‚¹</li><li>é€‰ç¥¨æœ€å¤šçš„Nä¸ªèŠ‚ç‚¹å½“é€‰ä¸ºè§è¯äººï¼ˆWitnessï¼‰ï¼Œå³ä»£è¡¨</li><li>è§è¯äººåœ¨ä¸€ä¸ªè§„å®šæ—¶é—´å†…éšæœºæ’åˆ—å¹¶è½®æµå¯¹äº¤æ˜“æ‰“åŒ…ï¼Œç”Ÿæˆæ–°åŒºå—è¿æ¥åˆ°æœ€é•¿é“¾ï¼Œè§è¯äººæ”¶è·mï¼…çš„äº¤æ˜“æ‰‹ç»­è´¹</li></ul></li></ol><h3 id="PBFTï¼ˆBFTï¼‰"><a href="#PBFTï¼ˆBFTï¼‰" class="headerlink" title="PBFTï¼ˆBFTï¼‰"></a>PBFTï¼ˆBFTï¼‰</h3><ol><li><p>æ¦‚å¿µ</p><p><font color="red">PBFTåœ¨ä¿è¯å¯ç”¨æ€§å’Œå®‰å…¨æ€§çš„å‰æä¸‹ï¼Œæä¾›äº†(n-1)/3çš„å®¹é”™æ€§</font>ï¼Œæ„æ€å°±æ˜¯å¦‚æœç³»ç»Ÿå†…æœ‰nä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆç³»ç»Ÿæœ€å¤šèƒ½å®¹å¿çš„ä½œæ¶/æ•…éšœèŠ‚ç‚¹ä¸º(n-1)/3ä¸ªã€‚ï¼ˆä½œæ¶èŠ‚ç‚¹å¯ä»¥ä¸å“åº”æˆ–è€…å›åº”é”™è¯¯çš„ä¿¡æ¯ï¼‰</p></li><li><p>å…±è¯†è¿‡ç¨‹</p><p>â€‹    <img src="/images/consensus/pbft_flow_chart.png" alt="å…±è¯†ç®—æ³•ç³»åˆ—ï¼šPBFTç®—æ³•å…³é”®ç‚¹ç»¼è¿°ã€ä¼˜ç¼ºç‚¹æ€»ç»“"></p><p>å®šä¹‰ï¼š</p><ul><li><p>fï¼šæ¶æ„èŠ‚ç‚¹</p></li><li><p>Digest(m)ï¼šæ¶ˆæ¯æ‘˜è¦</p></li></ul><p>è¿‡ç¨‹ï¼š</p><ul><li><strong>é¢„å‡†å¤‡é˜¶æ®µ</strong>ï¼šå‘é€åŸæœ¬çš„æ¶ˆæ¯mï¼Œè®©æ¯ä¸ªèŠ‚ç‚¹éƒ½è·å–åŸå§‹æ¶ˆæ¯</li><li><strong>å‡†å¤‡é˜¶æ®µ</strong>ï¼šç”¨Digest(m)å»å‘é€ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ”¶åˆ°<strong>2f+1</strong>ä¸ªprepareæ¶ˆæ¯ï¼Œå°±è®¤ä¸ºå‡†å¤‡é˜¶æ®µç»“æŸï¼Œè¯´æ˜å·²ç»æœ‰å¤§éƒ¨åˆ†èŠ‚ç‚¹è®¤åŒäº†è¿™ä¸ªm</li><li><strong>æäº¤é˜¶æ®µ</strong>ï¼šç”¨Digest(m)å»å‘é€ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ”¶åˆ°<strong>2f+1</strong>ä¸ªcommitï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¤ä¸ºï¼Œå°±è¯´æ˜å·²ç»æœ‰å¤§å¤šæ•°èŠ‚ç‚¹â€œæ‰§è¡Œâ€äº†è¿™äº›mï¼Œè¿™ä¸ªé˜¶æ®µä¸»è¦æ˜¯ä¸ºäº†View ChangeæœåŠ¡</li><li><strong>å›æ‰§é˜¶æ®µ</strong>ï¼šæäº¤ç»“æŸåå°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°è‡³å°‘<strong>f+1</strong>ä¸ªæ¶ˆæ¯å³å¯ç¡®è®¤</li></ul></li></ol><h3 id="DBFTï¼ˆBFTï¼‰"><a href="#DBFTï¼ˆBFTï¼‰" class="headerlink" title="DBFTï¼ˆBFTï¼‰"></a>DBFTï¼ˆBFTï¼‰</h3><ol><li><p>æ¦‚å¿µ</p><p>æˆæƒæ‹œå åº­å®¹é”™ï¼Œç³»ç»Ÿä¸­çš„ä»£å¸æŒæœ‰è€…<font color="red">é€šè¿‡æŠ•ç¥¨é€‰ä¸¾å‡ºè‡ªå·±æ‰€æ”¯æŒçš„å…±è¯†èŠ‚ç‚¹ï¼Œè¿™äº›é€‰å‡ºæ¥çš„å…±è¯†èŠ‚ç‚¹å†é€šè¿‡BFTæ¥è¾¾æˆå…±è¯†å¹¶ç”ŸæˆåŒºå—</font></p></li><li><p>å…±è¯†è¿‡ç¨‹</p><p><img src="/images/consensus/dbft_flow_chart.png" alt="image-20220108234438067"></p><p>è¿‡ç¨‹ï¼š</p><ul><li>èŠ‚ç‚¹<strong>æŠ•ç¥¨</strong>é€‰å‡ºä¸€å®šæ•°é‡çš„å…±è¯†èŠ‚ç‚¹</li><li>è®®é•¿è®¾ç½®è§†å›¾å¹¶å¹¿æ’­ææ¡ˆ<code>&lt;PrepareRequest&gt;</code>æ¶ˆæ¯</li><li>è®®å‘˜æ”¶åˆ°ææ¡ˆå¯¹å…¶éªŒè¯ï¼ŒéªŒè¯é€šè¿‡åè®®å‘˜å‘å…¨ç½‘å‘é€<code>&lt;PrepareResponse&gt;</code>æ¶ˆæ¯</li><li>å½“æ”¶åˆ°n-fæ¡<code>&lt;PrepareResponse&gt;</code>æ¶ˆæ¯æ—¶ï¼Œè®®å‘˜ä»¬å‘å¸ƒä¸€ä¸ªæ–°çš„åŒºå—ï¼Œå¯¹åŒºå—ç­¾åï¼Œå‘é€ç»™å…¶ä»–èŠ‚ç‚¹è¿›è¡ŒåŒæ­¥<code>&lt;Synchronization&gt;</code></li><li>å…¶ä»–èŠ‚ç‚¹æ”¶åˆ°å®Œæ•´åŒºå—åè¾¾åˆ°ç›¸åŒçš„åŒºå—é«˜åº¦ï¼Œæ¸…é™¤æœ¬åœ°å†…å­˜ä¸­æ‰€å­˜å‚¨çš„å½“å‰è§†å›¾äº¤æ˜“æ•°æ®ï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡å…±è¯†</li></ul></li></ol><h2 id="ç®—æ³•ä¼˜ç¼ºç‚¹ä¸åº”ç”¨"><a href="#ç®—æ³•ä¼˜ç¼ºç‚¹ä¸åº”ç”¨" class="headerlink" title="ç®—æ³•ä¼˜ç¼ºç‚¹ä¸åº”ç”¨"></a>ç®—æ³•ä¼˜ç¼ºç‚¹ä¸åº”ç”¨</h2><table><thead><tr><th>ç®—æ³•</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>åº”ç”¨</th></tr></thead><tbody><tr><td>Paxos</td><td>- å®¹å¿éæ‹œå åº­é”™è¯¯èŠ‚ç‚¹èƒ½åŠ›é«˜<br>- æ€§èƒ½é«˜</td><td>- ç®—æ³•éš¾ä»¥ç†è§£<br>- ä¸èƒ½å®¹å¿æ‹œå åº­é”™è¯¯èŠ‚ç‚¹</td><td>ZooKeeperã€GoogleChubby</td></tr><tr><td>Raft</td><td>- ç®—æ³•å®¹å¿éæ‹œå åº­é”™è¯¯èŠ‚ç‚¹èƒ½åŠ›é«˜<br>- æ€§èƒ½é«˜<br>- æ˜“äºç†è§£å’Œå®ç°</td><td>- ä¸èƒ½å®¹å¿æ‹œå åº­é”™è¯¯èŠ‚ç‚¹</td><td>IPFS Private Clusterã€R3 CodaQuorum</td></tr><tr><td>Pow</td><td>- ç®—æ³•é€»è¾‘ç®€å•<br>- å®‰å…¨æ€§é«˜<br>- å®¹é”™æ€§é«˜</td><td>- èµ„æºæ¶ˆè€—è¿‡é«˜<br>- ç³»ç»Ÿååé‡ä½</td><td>Bitcoinã€Ethereumã€Dogcoinã€Litecoinã€Zcash</td></tr><tr><td>PoS</td><td>- ç¼“è§£PoWèµ„æºæµªè´¹é—®é¢˜<br>- ç›¸å¯¹PoWæé«˜äº†å‡ºå—é€Ÿåº¦</td><td>- æ˜“å‡ºç°æŒå¸äººå±¯å¸ç°è±¡ï¼Œé€ æˆå¯¡å¤´ä¼˜åŠ¿</td><td>Blackcoinã€ADAã€Peercoinã€Casperã€Nxt</td></tr><tr><td>DPoS</td><td>- è§£å†³äº†PoWèµ„æºæµªè´¹é—®é¢˜<br>- æ€§èƒ½è¾ƒé«˜<br>- å‡ºå—é€Ÿåº¦è¾ƒå¿«</td><td>- ç›¸æ¯”å…¶ä»–ç®—æ³•è¯¥ç®—æ³•è¶‹äºä¸­å¿ƒåŒ–<br>- æŠ•ç¥¨æ— é—¨æ§›ï¼Œæƒç›Šä½™é¢å¤§ç¥¨æ•°è¶Šå¤§ï¼Œæ˜“é€ æˆè”åˆé€‰ä¸¾è¡Œä¸º</td><td>EOSã€Bitsharesã€Steemitã€Liskã€Arkã€GXChainã€ASCH</td></tr><tr><td>PBFT</td><td>- æ— ä»£å¸<br>- æ€§èƒ½æ•ˆç‡é«˜<br>- å®‰å…¨æ€§é«˜</td><td>- ç¡®è®¤æµç¨‹è¿‡å¤šï¼Œé€šä¿¡å¼€é”€å¤§<br>- æ— æ³•é¿å…æ¶æ„èŠ‚ç‚¹æ‹…ä»»ä¸»èŠ‚ç‚¹<br>- èŠ‚ç‚¹ä¸å¯è¿›è¡ŒåŠ¨æ€å¢åˆ <br>- æ— æ³•æ‰¿å—å¤§è§„æ¨¡èŠ‚ç‚¹</td><td>Fabric</td></tr><tr><td>DBFT</td><td>- å€Ÿé‰´DPoSï¼Œå‚ä¸å…±è¯†èŠ‚ç‚¹æ•°é‡è¾ƒå°‘ï¼Œå› æ­¤æé«˜äº†æ€§èƒ½</td><td>- ç›¸æ¯”å…¶ä»–ç®—æ³•è¯¥ç®—æ³•è¶‹äºä¸­å¿ƒåŒ–</td><td>NEO</td></tr></tbody></table><h1 id="å¼•å‘æ€è€ƒ"><a href="#å¼•å‘æ€è€ƒ" class="headerlink" title="å¼•å‘æ€è€ƒ"></a>å¼•å‘æ€è€ƒ</h1><ol><li><p>PBFTåœ¨èŠ‚ç‚¹æ•°è¶…è¿‡100åæ€§èƒ½ç»§ç»­ä¸‹é™ï¼Œå¦‚ä½•ç¼“è§£ï¼Ÿ</p><ul><li><p>æ–¹æ³•ä¸€ï¼šå¸¦å®½ä¼˜åŒ–ï¼š</p><ul><li>å®¢æˆ·ç«¯å°†è¯·æ±‚å‘ç»™ä»»æ„èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯åªå‘ç»™ä¸»èŠ‚ç‚¹ï¼Œç„¶åèŠ‚ç‚¹ç›´æ¥å°†è¯·æ±‚å¹¿æ’­ç»™æ‰€æœ‰èŠ‚ç‚¹</li><li>è®¾è®¡å…±äº«äº¤æ˜“æ± ï¼Œé¢„å…ˆè¿›è¡Œäº¤æ˜“çš„å¹¿æ’­ï¼Œä»…å…±è¯†äº¤æ˜“å“ˆå¸Œå€¼ä¸»èŠ‚ç‚¹æ‰“åŒ…äº¤æ˜“hashï¼Œå¹¿æ’­åŒ…å«hashçš„ææ¡ˆæ¶ˆæ¯ï¼Œè€Œä¸æ˜¯å¹¿æ’­äº¤æ˜“æ•°æ®</li><li>ä»èŠ‚ç‚¹åœ¨æäº¤ä¹‹å‰ä¸»åŠ¨å‘ä¸»èŠ‚ç‚¹è·å–å¯èƒ½ç¼ºå¤±çš„äº¤æ˜“ï¼Œæœ€ç»ˆæäº¤ä¹‹å‰ç¡®è®¤äº¤æ˜“åˆæ³•æ€§</li></ul><p><img src="/images/consensus/pbft_bandwidth_optimization.png" alt="image-20220109102820146"></p></li><li><p>æ–¹æ³•äºŒï¼šBFTé—®é¢˜è½¬æ¢æˆCFTé—®é¢˜ï¼Œå³è§„é¿æ‹œå åº­è¡Œä¸º</p><p><img src="/images/consensus/fast_bft_flow_chart.png" alt="image-20220109104150146"></p></li><li><p>æ–¹æ³•ä¸‰ï¼šç‚¹å¯¹ç‚¹ç½‘ç»œè½¬æ¢ä¸ºæ˜Ÿå‹ç½‘ç»œ</p><p><img src="/images/consensus/hot_stuff_flow_chart.png" alt="image-20220109104400275"></p></li></ul></li><li><p>PBFTæ— æ³•åŠ¨æ€å¢åˆ èŠ‚ç‚¹ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ</p><p>å…ˆè¯·æ±‚åˆ†å¸ƒå¼CAï¼Œå†é€šè¿‡é…ç½®äº¤æ˜“çš„æ–¹å¼ï¼Œå‡†å…¥ä¸åˆ é™¤å…±è¯†èŠ‚ç‚¹</p><p><img src="/images/consensus/pbft_add_delete_node.png" alt="image-20220109103818671"></p></li><li><p>PBFTä¸­prepareå’Œcommité˜¶æ®µä¸ºä½•éƒ½è¦2f+1ä¸ªèŠ‚ç‚¹åé¦ˆç¡®è®¤?ï¼ˆè¿™2f+1èŠ‚ç‚¹åé¦ˆçš„ç»“æœå¹¶ä¸ä¸€å®šæ˜¯ç›¸åŒçš„ï¼‰</p><p>å¯¹äºprepareå’Œcommitæ¥è¯´ï¼ŒèŠ‚ç‚¹éœ€è¦åœ¨2f+1ä¸ªçŠ¶æ€å¤åˆ¶æœºçš„æ²Ÿé€šå†…å°±è¦åšå‡ºå†³å®šï¼Œè¿™æ˜¯åˆšå¥½å¯ä»¥ä¿è¯ä¸€è‡´æ€§çš„ï¼Œè€ƒè™‘æœ€åçš„æƒ…å†µï¼šæˆ‘ä»¬å‡è®¾æ”¶åˆ°çš„æœ‰fä¸ªæ˜¯æ­£å¸¸èŠ‚ç‚¹å‘è¿‡æ¥çš„ï¼Œä¹Ÿæœ‰fä¸ªæ˜¯æ¶æ„èŠ‚ç‚¹å‘è¿‡æ¥çš„ï¼Œé‚£ä¹ˆï¼Œç¬¬2f+1ä¸ªåªå¯èƒ½æ˜¯æ­£å¸¸èŠ‚ç‚¹å‘è¿‡æ¥çš„ã€‚ï¼ˆå› ä¸ºæˆ‘ä»¬é™åˆ¶äº†æœ€å¤šåªæœ‰fä¸ªæ¶æ„èŠ‚ç‚¹ï¼‰ç”±æ­¤å¯çŸ¥ï¼Œâ€œå¤§å¤šæ•°â€æ­£å¸¸çš„èŠ‚ç‚¹è¿˜æ˜¯å¯ä»¥è®©ç³»ç»Ÿå·¥ä½œä¸‹å»çš„ã€‚æ‰€ä»¥2f+1è¿™ä¸ªå‚æ•°å’Œn&gt;3f+1çš„è¦æ±‚æ˜¯é€»è¾‘è‡ªæ´½çš„ã€‚</p></li><li><p>PBFTä¸­clientä¸ºä½•åªéœ€è¦f+1ä¸ªç›¸åŒçš„å›å¤å°±å¯ç¡®è®¤ï¼Ÿ</p><p>ä¹‹å‰æˆ‘ä»¬è¯´ï¼Œprepareå’Œcommité˜¶æ®µä¸ºä½•éƒ½è¦2f+1ä¸ªèŠ‚ç‚¹åé¦ˆï¼Œæ‰èƒ½ç¡®è®¤ã€‚clientåªéœ€è¦f+1ä¸ªç›¸åŒçš„replyå°±å¯ä»¥äº†å‘¢ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯æ¥è€ƒè™‘æœ€åçš„æƒ…å†µï¼Œæˆ‘ä»¬å‡è®¾è¿™f+1ä¸ªç›¸åŒçš„replyä¸­ï¼Œæœ‰fä¸ªéƒ½æ˜¯æ¶æ„èŠ‚ç‚¹ã€‚</p><p>æ‰€ä»¥è‡³å°‘æœ‰ä¸€ä¸ªrelyæ˜¯æ­£å¸¸èŠ‚ç‚¹å‘å‡ºæ¥çš„ï¼Œå› ä¸ºåœ¨prepareé˜¶æ®µï¼Œè¿™ä¸ªæ­£å¸¸çš„èŠ‚ç‚¹å·²ç»å¯ä»¥ä¿è¯prepared(m,v,n,i)ä¸ºçœŸï¼Œæ‰€ä»¥å·²ç»èƒ½ä»£è¡¨å¤§å¤šæ•°çš„æ„è§ï¼Œæ‰€ä»¥ï¼Œclientåªéœ€è¦f+1ä¸ªç›¸åŒçš„replyå°±èƒ½ä¿è¯ä»–æ‹¿åˆ°çš„æ˜¯æ•´ä¸ªç³»ç»Ÿå†…â€œå¤§å¤šæ•°æ­£å¸¸èŠ‚ç‚¹â€œçš„æ„è§ï¼Œä»è€Œè¾¾åˆ°ä¸€è‡´æ€§ã€‚</p></li><li><p>PBFTä¸­å¦‚æœprimaryæ˜¯æ¶æ„èŠ‚ç‚¹å‘¢ï¼Ÿ</p><p>å¯¹äºä¸€è‡´æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆçœ‹ï¼šå¦‚æœprepared(mï¼Œvï¼Œnï¼Œi)ä¸ºçœŸï¼Œé‚£ä¹ˆprepared(mâ€™ï¼Œvï¼Œnï¼Œj)ä¸€å®šæ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºå¯¹äºåŒä¸€ä¸ªææ¡ˆæˆ‘ä»¬ä¸å¯èƒ½æœ‰ä¸¤ç§ç»“æœï¼Œä»è€Œä¿è¯æ•´ä¸ªç³»ç»Ÿçš„ä¸€è‡´æ€§ã€‚</p><p>å‡è®¾primaryèŠ‚ç‚¹æ˜¯æ¶æ„çš„ï¼Œé‚£ä¹ˆæ„å‘³ç€åœ¨replicasèŠ‚ç‚¹ä¸­â¾„å¤šæœ‰f-1ä¸ªæ¶æ„çš„èŠ‚ç‚¹ï¼Œprepared(mï¼Œvï¼Œnï¼Œi)ä¸ºçœŸï¼Œåˆ™è¯æ˜æœ‰f+1ä¸ªå–„æ„èŠ‚ç‚¹è¾¾æˆäº†ï¦ºâ¼€è‡´ï¼Œprepared(mâ€™ï¼Œvï¼Œnï¼Œj)ä¸ºçœŸï¼Œæ„å‘³ç€å¦å¤–f+1ä¸ªå–„æ„èŠ‚ç‚¹è¾¾æˆï¦ºä¸€è‡´ï¼Œå› ä¸ºç³»ç»Ÿä¸­åªæœ‰2f+1ä¸ªå–„æ„èŠ‚ç‚¹ï¼Œå› æ­¤æœ€å°‘æœ‰â¼€ä¸ªå–„æ„èŠ‚ç‚¹å‘é€ï¦ºä¸¤ä¸ªå†²çªçš„prepareæ¶ˆæ¯ï¼Œè¿™æ˜¯ï¥§å¯èƒ½çš„ã€‚æ‰€ä»¥prepared(mï¼Œvï¼Œnï¼Œi)ä¸ºçœŸï¼Œé‚£ä¹ˆprepared(mâ€™ï¼Œvï¼Œnï¼Œj)æ˜¯é”™è¯¯çš„ã€‚</p></li></ol><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://b23.tv/c2IGPiA">ææ°¸ä¹è€å¸ˆè®²è§£æ‹œå åº­å°†å†›é—®é¢˜</a></li><li><a href="https://zh.wikipedia.org/wiki/%E6%8B%9C%E5%8D%A0%E5%BA%AD%E5%B0%86%E5%86%9B%E9%97%AE%E9%A2%98">ç»´åŸºç™¾ç§‘å¯¹æ‹œå åº­å°†å†›é—®é¢˜çš„è§£é‡Š</a></li><li><a href="https://blog.csdn.net/alinyua/article/details/86153013">Paxoså­¦ä¹ ç¬”è®°åŠå›¾è§£</a></li><li><a href="https://pmg.csail.mit.edu/papers/osdi99.pdf">PBFTæå‡ºè€…è®ºæ–‡ã€ŠPractical Byzantine Fault Toleranceã€‹</a></li><li><a href="https://zhuanlan.zhihu.com/p/53897982">å…±è¯†ç®—æ³•ç³»åˆ—ï¼šPBFTç®—æ³•å…³é”®ç‚¹ç»¼è¿°ã€ä¼˜ç¼ºç‚¹æ€»ç»“</a></li><li><a href="http://www.jsjkx.com/CN/article/openArticlePDF.jsp?id=19169">åŒºå—é“¾å…±è¯†ç®—æ³•å¯¹æ¯”ç ”ç©¶</a></li><li><a href="https://www.modb.pro/doc/42136">è”ç›ŸåŒºå—é“¾å…±è¯†ç®—æ³•çš„å®è·µä¸æŒ‘æˆ˜ - ç«¯è±ª æ­å·è¶£é“¾ç§‘æŠ€æ¶æ„å¸ˆ</a></li><li><a href="http://lamport.azurewebsites.net/pubs/paxos-simple.pdf">Paxosè®ºæ–‡</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä¸»è¦å†…å®¹&quot;&gt;&lt;a href=&quot;#ä¸»è¦å†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;ä¸»è¦å†…å®¹&quot;&gt;&lt;/a&gt;ä¸»è¦å†…å®¹&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;æ‹œå åº­å°†å†›é—®é¢˜æ¦‚è¿°&lt;/li&gt;
&lt;li&gt;å…±è¯†ç®—æ³•å®šä¹‰(ä½œç”¨)&lt;/li&gt;
&lt;li&gt;å…±è¯†ç®—æ³•ç§ç±»&lt;/li&gt;
&lt;li&gt;å…±</summary>
      
    
    
    
    
    <category term="å…±è¯†ç®—æ³•" scheme="https://zhangzhishun.github.io/tags/%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
</feed>
