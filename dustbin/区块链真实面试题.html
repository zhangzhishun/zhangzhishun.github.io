<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>区块链真实面试题</title><meta name="description" content="Blockchain knowledge record blog"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><script>var _hmt = _hmt || [];
(function() {
var hm = document.createElement("script");
hm.src = "//hm.baidu.com/hm.js?" + 'e574a92bc4bac2e317309d7ea1dfcb71';
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(hm, s);
})();</script><!-- End Baidu Analytics --><link rel="icon" href="/images/system/head_portrait.jpg"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.1.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Sugar's blog" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Sugar's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3><h3 class="is-inline-block"><a href="/works">Works</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3><h3 class="is-inline-block"><a href="/works">Works</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3></header><main><article id="page"><h1>区块链真实面试题</h1><h1 id="一、区块链"><a href="#一、区块链" class="headerlink" title="一、区块链"></a>一、区块链</h1><h2 id="1-Merkle-Tree-性质、优点、缺点"><a href="#1-Merkle-Tree-性质、优点、缺点" class="headerlink" title="1. Merkle Tree 性质、优点、缺点"></a>1. Merkle Tree 性质、优点、缺点</h2><p>性质：</p>
<ul>
<li>是一种二叉树，也可以是多叉树</li>
<li>value节点是数据项内容或数据项的hash值</li>
<li>非叶子节点的value可以根据孩子节点获取</li>
</ul>
<p>优点：</p>
<ul>
<li>快速的hash重计算</li>
<li>通过返回默克尔树中的节点路径验证叶子节点是否存在（默克尔证明）</li>
</ul>
<p>缺点：</p>
<ul>
<li>需要计算hash</li>
<li>需要存储空间存储hash</li>
</ul>
<h2 id="2-对比MySQL索引使用B-树，为什么要用B-树"><a href="#2-对比MySQL索引使用B-树，为什么要用B-树" class="headerlink" title="2. 对比MySQL索引使用B+树，为什么要用B+树"></a>2. 对比MySQL索引使用B+树，为什么要用B+树</h2><p>B+树特点：</p>
<ul>
<li>关键字数和子树相同</li>
<li>非叶子节点仅用作索引，它的关键字和子节点有重复元素</li>
<li>叶子节点用指针连在一起</li>
</ul>
<h2 id="3-共识算法：Paxos、Raft、PBFT、PoW、PoS、DPoS"><a href="#3-共识算法：Paxos、Raft、PBFT、PoW、PoS、DPoS" class="headerlink" title="3. 共识算法：Paxos、Raft、PBFT、PoW、PoS、DPoS"></a>3. 共识算法：Paxos、Raft、PBFT、PoW、PoS、DPoS</h2><ul>
<li>Paxos<br><img src="/images/blockchain_interview/paxos.png" alt="img.png"></li>
<li>Raft<br><img src="/images/blockchain_interview/raft.png" alt="img_1.png"></li>
<li>PBFT<br><img src="/images/consensus/pbft_flow_chart.png" alt="img_1.png"></li>
</ul>
<p>详情：<a href="/2022/01/08/blockchain/consensus/%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95/" title="共识算法">共识算法</a></p>
<h2 id="4-Raft和PBFT区别"><a href="#4-Raft和PBFT区别" class="headerlink" title="4. Raft和PBFT区别"></a>4. Raft和PBFT区别</h2><ul>
<li>通信复杂度：<ul>
<li>Raft: 〇(n)</li>
<li>PBFT: 〇(n^2)</li>
</ul>
</li>
<li>最大故障节点：<ul>
<li>Raft: 2f+1 &lt;= N</li>
<li>PBFT: 3f+1 &lt;= N</li>
</ul>
</li>
<li>选举leader方式：<ul>
<li>Raft: 谁快谁当</li>
<li>PBFT: 按编号依次轮流</li>
</ul>
</li>
</ul>
<h2 id="5-Bloom过滤器"><a href="#5-Bloom过滤器" class="headerlink" title="5. Bloom过滤器"></a>5. Bloom过滤器</h2><p>它实际上是一个很长的二进制向量和一系列随机映射函数。<br>布隆过滤器可以用于检索一个元素是否在一个集合中。<br>它的优点是空间效率和查询时间都比一般的算法要好的多，<br>缺点是有一定的误识别率和删除困难。</p>
<h2 id="6-Fabric-CA作用，MSP概念，CA中的证书类型以及作用"><a href="#6-Fabric-CA作用，MSP概念，CA中的证书类型以及作用" class="headerlink" title="6. Fabric CA作用，MSP概念，CA中的证书类型以及作用"></a>6. Fabric CA作用，MSP概念，CA中的证书类型以及作用</h2><p>Fabric CA主要功能：</p>
<ul>
<li>负责Fabric网络内所有实体的身份管理，包括身份的注册、注销等</li>
<li>负责证书管理，包括ECerts（身份证书）、TCerts（交易证书）等的发放和注销</li>
<li>服务端支持基于客户端命令行和RESTful API的交互方式</li>
</ul>
<p>Membership Service Provider(MSP)：由于 Fabric 是一个许可网络，区块链参与者需要一种方法来向网络的其余部分证明他们的身份，以便在网络上进行交易。<br>MSP 是一种机制，它允许该身份被网络的其余部分信任和识别，而无需透露成员的私钥</p>
<p>证书类型：<br><img src="/images/blockchain_interview/cert_type.png" alt="img.png"></p>
<h2 id="7-你认为公链和联盟链的瓶颈在于哪"><a href="#7-你认为公链和联盟链的瓶颈在于哪" class="headerlink" title="7. 你认为公链和联盟链的瓶颈在于哪"></a>7. 你认为公链和联盟链的瓶颈在于哪</h2><ul>
<li>共识瓶颈</li>
<li>跨链</li>
<li>加密</li>
<li>数据存储空间占用</li>
</ul>
<h2 id="8-那么如何提升区块链的性能呢？"><a href="#8-那么如何提升区块链的性能呢？" class="headerlink" title="8. 那么如何提升区块链的性能呢？"></a>8. 那么如何提升区块链的性能呢？</h2><ul>
<li>模块进行拆分</li>
<li>数据并发</li>
<li>业务剥离</li>
<li>网络分组</li>
</ul>
<p>参考：<a target="_blank" rel="noopener" href="https://sq.sf.163.com/blog/article/229400105741500416">性能提升方案</a></p>
<h2 id="9-基于区块链的元宇宙汇报"><a href="#9-基于区块链的元宇宙汇报" class="headerlink" title="9. 基于区块链的元宇宙汇报"></a>9. 基于区块链的元宇宙汇报</h2><p><a href="/download/%E5%9F%BA%E4%BA%8E%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E5%85%83%E5%AE%87%E5%AE%99-public.pdf">基于区块链的元宇宙汇报PPT</a></p>
<h1 id="二、Go"><a href="#二、Go" class="headerlink" title="二、Go"></a>二、Go</h1><h2 id="1-GMP模型"><a href="#1-GMP模型" class="headerlink" title="1. GMP模型"></a>1. GMP模型</h2><h2 id="2-channel原理"><a href="#2-channel原理" class="headerlink" title="2. channel原理"></a>2. channel原理</h2><h2 id="3-select用法"><a href="#3-select用法" class="headerlink" title="3. select用法"></a>3. select用法</h2><h2 id="4-Golang-GC算法"><a href="#4-Golang-GC算法" class="headerlink" title="4. Golang GC算法"></a>4. Golang GC算法</h2><p>屏障机制</p>
<p>注意：屏障机制只作用于堆，由于效率原因栈不开启屏障。</p>
<p>插入写屏障</p>
<p>流程：在A对象引用B对象的时候，B对象被标记为灰色。</p>
<ul>
<li>纯粹的插入写屏障是满足强三色不变式的（永远不会出现黑色对象指向白色对象）；</li>
<li>但是由于栈上对象无写屏障，那么导致黑色的栈可能指向白色的堆对象，必须 STW 重新扫描栈；</li>
<li>STW 重新扫描栈再 goroutine 量大且活跃的场景，延迟不可控，经验值平均 10-100ms；</li>
</ul>
<p>删除写屏障</p>
<p>流程：被删除引用的对象，如果为白色，那么被标记为灰色。</p>
<ul>
<li>如果一个黑色对象添加一个向白色对象的引用，说明这个白色对象可达，受到别的对象的保护，不需要处理，只有在删除引用的时候，才需要处理，保证原先被保护的对象依然受到保护，保证弱三色不变式。</li>
<li>必须在起始时，STW 扫描所有goroutine的栈，全部扫黑，保证所有堆上在用的对象都处于灰色保护下。</li>
<li>由于起始快照也需要执行 STW，删除写屏障不适用于栈特别大的场景，栈越大，STW 扫描时间越长。</li>
<li>回收精度低。</li>
</ul>
<p>混合屏障</p>
<p>大大缩短了 STW 时间</p>
<ul>
<li>GC 开始将栈上的对象全部扫描并标记为黑色；</li>
<li>GC 期间，任何在栈上创建的新对象，均为黑色；</li>
<li>被删除的堆对象标记为灰色；</li>
<li>被添加的堆对象标记为灰色；</li>
</ul>
<p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/447045376">屏障技术</a></li>
<li><a target="_blank" rel="noopener" href="https://liangyaopei.github.io/2021/01/02/golang-gc-intro/">GC</a></li>
</ul>
<h2 id="5-defer函数"><a href="#5-defer函数" class="headerlink" title="5. defer函数"></a>5. defer函数</h2><h2 id="6-sync包主要工具"><a href="#6-sync包主要工具" class="headerlink" title="6. sync包主要工具"></a>6. sync包主要工具</h2><h2 id="7-map底层"><a href="#7-map底层" class="headerlink" title="7. map底层"></a>7. map底层</h2><h2 id="8-进程、线程、协程比较"><a href="#8-进程、线程、协程比较" class="headerlink" title="8. 进程、线程、协程比较"></a>8. 进程、线程、协程比较</h2><p>答案参考：<a href="/2022/01/16/go/Go%E9%9D%A2%E8%AF%95%E9%A2%98%E6%89%8B%E5%86%99/" title="Go面试题手写">Go面试题手写</a></p>
<h1 id="三、数据结构"><a href="#三、数据结构" class="headerlink" title="三、数据结构"></a>三、数据结构</h1><h2 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h2><h1 id="四、算法"><a href="#四、算法" class="headerlink" title="四、算法"></a>四、算法</h1><h2 id="1-快速排序算法"><a href="#1-快速排序算法" class="headerlink" title="1. 快速排序算法"></a>1. 快速排序算法</h2><h2 id="2-二分查找算法"><a href="#2-二分查找算法" class="headerlink" title="2. 二分查找算法"></a>2. 二分查找算法</h2><h1 id="五、IPFS"><a href="#五、IPFS" class="headerlink" title="五、IPFS"></a>五、IPFS</h1><h2 id="1-IPFS上传-下载文件过程"><a href="#1-IPFS上传-下载文件过程" class="headerlink" title="1. IPFS上传/下载文件过程"></a>1. IPFS上传/下载文件过程</h2><ul>
<li>上传文件<br><img src="/images/ipfs/upload_file.png" alt="img.png"></li>
<li>下载文件<br><img src="/images/ipfs/download_file.png" alt="img.png"></li>
</ul>
<ol>
<li>检查本地的blockstore中是否存在请求的数据，如果存在则直接从本地返回；否则会向对等节点发送block hash列表；</li>
<li>对等节点通过DHT和路由层算法，找到每个block hash所在的节点，将文件返回来；</li>
<li>本地节点在接收block文件的同时缓存一份到本地的blockstore中</li>
<li>更新DHT</li>
<li>组装block文件，返回至用户端</li>
</ol>
<p>参考：<a href="/2022/01/18/ipfs/IPFS%E5%8E%9F%E7%90%86%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90/" title="IPFS原理分析">IPFS原理分析</a></p>
<h2 id="2-DHT种类、IPFS使用的是哪种？"><a href="#2-DHT种类、IPFS使用的是哪种？" class="headerlink" title="2. DHT种类、IPFS使用的是哪种？"></a>2. DHT种类、IPFS使用的是哪种？</h2><p>参考：<a href="/2022/01/18/ipfs/IPFS%E5%8E%9F%E7%90%86%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90/" title="IPFS原理分析">IPFS原理分析</a></p>
<h2 id="3-IPFS为什么被称为分布式存储？"><a href="#3-IPFS为什么被称为分布式存储？" class="headerlink" title="3. IPFS为什么被称为分布式存储？"></a>3. IPFS为什么被称为分布式存储？</h2><h2 id="4-IPFS分块和存储原理"><a href="#4-IPFS分块和存储原理" class="headerlink" title="4. IPFS分块和存储原理"></a>4. IPFS分块和存储原理</h2></article><div id="paginator"></div></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com/zhang_zhishun"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/zhangzhishun"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml"><i class="iconfont icon-rss"></i></a><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> Sugar 2022</span></p><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script></body></html>